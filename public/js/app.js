(function() {
	"use strict";

	var app = angular.module('app', [
		'app.controllers',
		'app.filters',
		'app.services',
		'app.directives',
		'app.routes',
		'app.config'
	]);


	angular.module('app.routes', ['ui.router', 'ui.router.state.events', 'ngStorage', 'satellizer']);
	angular.module('app.controllers', ['angular-carousel','ng-draggabilly','hljs', 'flow', 'FBAngular', 'dndLists', 'angular.filter', 'angularMoment', 'ngScrollbar', 'mdColorPicker', 'ngAnimate', 'ui.tree', 'toastr', 'ui.router', 'md.data.table', 'ngMaterial', 'ngStorage', 'restangular', 'ngMdIcons', 'angular-loading-bar', 'ngMessages', 'ngSanitize', "leaflet-directive", 'nvd3']);
	angular.module('app.filters', []);
	angular.module('app.services', ['angular-cache', 'ui.router', 'ngStorage', 'restangular', 'toastr']);
	angular.module('app.directives', ['ngMaterial', 'ngPapaParse']);
	angular.module('app.config', []);

})();

(function() {
	"use strict";

	angular.module('app.routes').config(["$stateProvider", "$urlRouterProvider", "$locationProvider", function($stateProvider, $urlRouterProvider, $locationProvider) {
		//$locationProvider.html5Mode(true);
		var getView = function(viewName) {
			return '/views/app/' + viewName + '/' + viewName + '.html';
		};

		$urlRouterProvider.otherwise('/');

		$stateProvider
			.state('app', {
				abstract: true,
				views: {
					header: {
						templateUrl: getView('header'),
						controller: 'HeaderCtrl',
						controllerAs: 'vm'
					},
					main: {},
					'map@': {
						templateUrl: getView('map'),
						controller: 'MapCtrl',
						controllerAs: 'vm'
					},
					'sidemenu@': {
						templateUrl: getView('sidemenu'),
						controller: 'SidemenuCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.home', {
				url: '/',
				views: {

					'sidebar@': {
						templateUrl: getView('home'),
						controller: 'HomeCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.user', {
				url: '/user',
				abstract: true

			})
			.state('app.user.login', {
				url: '/login',
				views: {
					'main@': {
						templateUrl: getView('login'),
						controller: 'LoginCtrl',
						controllerAs: 'vm'

					}
				}

			})
			.state('app.user.profile', {
				url: '/my-profile',
				auth: true,
				resolve: {
					profile: ["DataService", "$auth", function(DataService, $auth) {
						return DataService.getOne('me').$object;
					}]
				},
				views: {
					'main@': {
						templateUrl: getView('user'),
						controller: 'UserCtrl',
						controllerAs: 'vm'
					}
				}

			})
			.state('app.index', {
				abstract: true,
				url: '/index',
				resolve: {
					countries: ["CountriesService", function(CountriesService) {
						return CountriesService.getData();
					}]
				}
			})

		.state('app.index.mydata', {
				url: '/my-data',
				auth: true,
				views: {
					'sidebar@': {
						templateUrl: '/views/app/indexMyData/indexMyDataMenu.html',
						controller: 'IndexMyDataMenuCtrl',
						controllerAs: 'vm'
					},
					'main@': {
						templateUrl: getView('indexMyData'),
						controller: 'IndexMyDataCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.mydata.entry', {
				url: '/:name',
				auth: true,
				views: {
					'sidebar@': {
						templateUrl: '/views/app/indexMyData/indexMyDataMenu.html',
						controller: 'IndexMyDataMenuCtrl',
						controllerAs: 'vm'
					},
					'main@': {
						templateUrl: '/views/app/indexMyData/indexMyDataEntry.html',
						controller: 'IndexMyDataEntryCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.editor', {
				url: '/editor',
				auth: true,
				resolve: {
					indices: ["ContentService", function(ContentService) {
						return ContentService.getIndices();
					}],
					indicators: ["ContentService", function(ContentService) {
						return ContentService.fetchIndicators({
							page: 1,
							order: 'title',
							limit: 1000,
							dir: 'ASC'
						});
					}],
					styles: ["ContentService", function(ContentService) {
						return ContentService.getStyles();
					}],
					categories: ["ContentService", function(ContentService) {
						return ContentService.getCategories({
							indicators: true,
							tree: true
						});
					}]
				},
				views: {
					'sidebar@': {
						templateUrl: getView('indexeditor'),
						controller: 'IndexeditorCtrl',
						controllerAs: 'vm',
					}
				}
			})
			.state('app.index.editor.indicators', {
				url: '/indicators',
				auth: true,
			})
			.state('app.index.editor.indicators.indicator', {
				url: '/:id',
				auth: true,
				layout: 'row',
				resolve: {
					indicator: ["ContentService", "$stateParams", function(ContentService, $stateParams) {
						return ContentService.getIndicator($stateParams.id)
					}]
				},
				views: {
					'main@': {
						templateUrl: '/views/app/indexeditor/indexeditorindicator.html',
						controller: 'IndexeditorindicatorCtrl',
						controllerAs: 'vm'

					}
				}
				/*views:{
					'info':{

					},
					'menu':{
						templateUrl:getView('indexeditor'),
						controller: 'IndexeditorCtrl',
						controllerAs: 'vm'
					}
				}*/
			})
			.state('app.index.editor.indizes', {
				url: '/indizes',
				auth: true,
			})
			.state('app.index.editor.indizes.data', {
				url: '/:id/:name',
				auth: true,
				layout: 'row',
				resolve: {
					index: ["ContentService", "$stateParams", function(ContentService, $stateParams) {
						if ($stateParams.id == 0) return {};
						return ContentService.getItem($stateParams.id);
					}]
				},
				views: {
					'main@': {
						templateUrl: '/views/app/indexeditor/indexeditorindizes.html',
						controller: 'IndexeditorindizesCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.editor.indizes.data.add', {
				url: '/add',
				layout: 'row',
				resolve: {
					indicators: ["ContentService", "$stateParams", function(ContentService, $stateParams) {
						return ContentService.fetchIndicators({
							page: 1,
							order: 'title',
							limit: 1000,
							dir: 'ASC'
						});
					}]
				},
				views: {
					'additional@': {
						templateUrl: '/views/app/indexeditor/indicators.html',
						controller: 'IndexinidcatorsCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.editor.indicators.indicator.details', {
				url: '/:entry',
				auth: true,
				layout: 'row'
			})
			.state('app.index.editor.categories', {
				url: '/categories',
				auth: true,
			})
			.state('app.index.editor.categories.category', {
				url: '/:id',
				auth: true,
				layout: 'row',
				resolve: {
					category: ["ContentService", "$stateParams", function(ContentService, $stateParams) {
						if ($stateParams.id == 'new') {
							return {};
						}
						return ContentService.getCategory($stateParams.id);
					}]
				},
				views: {
					'main@': {
						templateUrl: '/views/app/indexeditor/indexeditorcategory.html',
						controller: 'IndexeditorcategoryCtrl',
						controllerAs: 'vm'
					}
				}
			})

		.state('app.index.create', {
				url: '/create',
				auth: true,
				views: {
					'sidebar@': {
						templateUrl: getView('indexcreator'),
						controller: 'IndexcreatorCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.create.basic', {
				url: '/basic',
				auth: true
			})
			.state('app.index.check', {
				url: '/checking',
				auth: true,
				views: {
					'main@': {
						templateUrl: getView('indexCheck'),
						controller: 'IndexCheckCtrl',
						controllerAs: 'vm'
					},
					'sidebar@': {
						templateUrl: '/views/app/indexCheck/indexCheckSidebar.html',
						controller: 'IndexCheckSidebarCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.meta', {
				url: '/adding-meta-data',
				auth: true,
				layout: 'row',
				views: {
					'main@': {
						templateUrl: getView('indexMeta'),
						controller: 'IndexMetaCtrl',
						controllerAs: 'vm'
					},
					'sidebar@': {
						templateUrl: '/views/app/indexMeta/indexMetaMenu.html',
						controller: 'IndexMetaMenuCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.final', {
				url: '/final',
				auth: true,
				layout: 'row',
				views: {
					'main@': {
						templateUrl: getView('indexFinal'),
						controller: 'IndexFinalCtrl',
						controllerAs: 'vm'
					},
					'sidebar@': {
						templateUrl: '/views/app/indexFinal/indexFinalMenu.html',
						controller: 'IndexFinalMenuCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.export', {
				abstract: true,
				url: '/export',
				resolve: {
					countries: ["DataService", function(DataService) {
						return DataService.getOne('countries/isos').then(function(countries) {
							return countries;
						});
					}]
				}
			})
			.state('app.export.detail', {
				url: '/:id/:name',
				data: {
					pageName: 'Export Data',
				},
				views: {
					'fullscreen@': {
						templateUrl: getView('exported'),
						controller: 'ExportedCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.export.detail.chapter', {
				url: '/chapter/:chapter',
				data: {
					pageName: 'Export Data',
				},
				layout: 'loose',
				fixLayout: true,
				avoidRoots: true,
				views: {
					'header@': {
						templateUrl: getView('chapter'),
						controller: 'ChapterCtrl',
						controllerAs: 'vm'
					},
					'sidebar@': {
						templateUrl: getView('chapterContent'),
						controller: 'ChapterContentCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.export.detail.chapter.indicator', {
				url: '/:indicator/:indiname',
				layout: 'loose',
				fixLayout: true,
				avoidRoots: true
			})
			.state('app.export.detail.chapter.indicator.country', {
				url: '/:iso',
				layout: 'loose',
				fixLayout: true,
				avoidRoots: true
			})
			.state('app.export.detail.chapter.indicator.country.compare', {
				url: '/compare/:countries',
				layout: 'loose',
				fixLayout: true,
				avoidRoots: true
			})
			.state('app.index.exports', {
				url: '/exports',
				auth: true,
				data: {
					pageName: 'Export Data'
				},
				views: {
					'sidebar@': {
						templateUrl: getView('export'),
						controller: 'ExportCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.exports.details', {
				url: '/:id/:name',
				auth: true,
				layout: 'row',
				data: {
					pageName: 'Export Data'
				},
				views: {
					'main@': {
						templateUrl: '/views/app/export/exportDetails.html',
						controller: 'ExportDetailsCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.exports.details.add', {
				url: '/add',
				layout: 'row',
				resolve: {
					indicators: ["ContentService", "$stateParams", function(ContentService, $stateParams) {
						return ContentService.fetchIndicators({
							page: 1,
							order: 'title',
							limit: 1000,
							dir: 'ASC'
						});
					}]
				},
				views: {
					'additional@': {
						templateUrl: '/views/app/indexeditor/indicators.html',
						controller: 'IndexinidcatorsCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.exports.details.style', {
				url: '/style/:styleId/:styleName',
				layout: 'row',
				additional: 'full',
				views: {
					'additional@': {
						templateUrl: getView('exportStyle'),
						controller: 'ExportStyleCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.exports.details.layout', {
				url: '/layout',
				layout: 'row',
				views: {
					'additional@': {
						templateUrl: getView('exportLayout'),
						controller: 'ExportLayoutCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.basemaps', {
				url: '/basemaps',
				auth: true,
				data: {
					pageName: 'Export Data'
				},
				views: {
					'sidebar@': {
						templateUrl: getView('basemaps'),
						controller: 'BasemapsCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.basemaps.details', {
				url: '/:id/:name',
				auth: true,
				layout: 'row',
				data: {
					pageName: 'Basemaps'
				},
				views: {
					'main@': {
						templateUrl: '/views/app/basemaps/basemapDetails.html',
						controller: 'BasemapDetailsCtrl',
						controllerAs: 'vm'
					}
				}
			})
			.state('app.index.list', {
				url: '/list',
				resolve: {
					indicators: ["ContentService", function(ContentService) {
						return ContentService.getIndicators({
							page: 1,
							order: 'title',
							limit: 1000,
							dir: 'ASC'
						})
					}],
					indices: ["ContentService", function(ContentService) {
						return ContentService.fetchIndices();
					}],
					categories: ["ContentService", function(ContentService) {
						return ContentService.getCategories({
							indicators: true,
							tree: true
						});
					}]
				},
				views: {
					'sidebar@': {
						templateUrl: getView('fullList'),
						controller: 'FullListCtrl',
						controllerAs: 'vm',

					}
				}
			})
			.state('app.index.list.filter', {
				url: '/:filter',
				layout: 'row',
				views: {
					'main@': {
						templateUrl: '/views/app/fullList/filter.html',
						controller: 'FullListFitlerCtrl',
						controllerAs: 'vm',
					}
				}
			})
			.state('app.index.indicator', {
				url: '/indicator/:id/:name/:year/:gender/:iso',
				resolve: {
					indicator: ["ContentService", "$stateParams", function(ContentService, $stateParams) {
						return ContentService.fetchIndicator($stateParams.id);
					}]
				},
				views: {
					'sidebar@': {
						templateUrl: getView('indicator'),
						controller: 'IndicatorShowCtrl',
						controllerAs: 'vm'
					}
				},
				params: {
					year: {
						squash: true,
						value: null,
						dynamic: true
					},
					gender: {
						squash: true,
						value: null,
						dynamic: true
					},
					iso: {
						squash: true,
						value: null,
						dynamic: true

					}
				}
			})
			.state('app.index.indicator.info', {
				url: '/details',
				layout: 'row',
				resolve: {
					data: ["ContentService", "$state", function(ContentService, $state) {

						return ContentService.getIndicatorData($state.params.id, $state.params.year, $state.params.gender);
					}]
				},
				views: {
					'main@': {
						templateUrl: '/views/app/indicator/indicatorYearTable.html',
						controller: 'IndicatorYearTableCtrl',
						controllerAs: 'vm',
					}
				}
			})
			.state('app.index.show', {
				url: '/:id/:name',
				resolve: {
					data: ["IndizesService", "$stateParams", function(IndizesService, $stateParams) {
						return IndizesService.fetchData($stateParams.id);
					}],
					countries: ["CountriesService", function(CountriesService) {
						return CountriesService.getData();
					}]
				},
				views: {
					'sidebar@': {
						templateUrl: '/views/app/index/info.html',
						controller: 'IndexCtrl',
						controllerAs: 'vm'
					},
					'selected': {
						templateUrl: '/views/app/index/selected.html',
					}
				}
			})
			.state('app.index.show.info', {
				url: '/info',
				views: {
					'main@': {
						controller: 'IndexinfoCtrl',
						controllerAs: 'vm',
						templateUrl: getView('indexinfo')
					}
				}
			})
			.state('app.index.show.selected', {
				url: '/:item',
				/*views:{
					'selected':{
						templateUrl: getView('selected'),
						controller: 'SelectedCtrl',
						controllerAs: 'vm',
						resolve:{
							getCountry: function(DataService, $stateParams){
								return DataService.getOne('nations', $stateParams.item).$object;
							}
						}
					}
				}*/
			})
			.state('app.index.show.selected.compare', {
				url: '/compare/:countries'
			})
			.state('app.conflict', {
				abstract: true,
				url: '/conflict',
			})
			.state('app.conflict.index', {
				url: '/index',
				resolve: {
					nations: ["Restangular", function(Restangular) {
						return Restangular.all('conflicts/nations');
					}],
					conflicts: ["Restangular", function(Restangular) {
						return Restangular.all('conflicts');
					}]
				},
				views: {
					'sidebar@': {
						controller: 'ConflictsCtrl',
						controllerAs: 'vm',
						templateUrl: getView('conflicts')
					},
					'logo@': {
						templateUrl: getView('logo')
					}
				}
			})
			.state('app.conflict.index.nation', {
				url: '/nation/:iso',
				resolve: {
					nation: ["Restangular", "$stateParams", function(Restangular, $stateParams) {
						return Restangular.one('/conflicts/nations/', $stateParams.iso).get();
					}]
				},
				views: {
					'sidebar@': {
						controller: 'ConflictnationCtrl',
						controllerAs: 'vm',
						templateUrl: getView('conflictnation')
					},
					'logo@': {
						templateUrl: getView('logo')
					}
				}
			})
			.state('app.conflict.index.details', {
				url: '/:id',
				resolve: {
					conflict: ["Restangular", "$stateParams", function(Restangular, $stateParams) {
						return Restangular.one('/conflicts/events/', $stateParams.id).get();
					}]
				},
				views: {
					'sidebar@': {
						controller: 'ConflictdetailsCtrl',
						controllerAs: 'vm',
						templateUrl: getView('conflictdetails')
					},
					'items-menu@': {},
					'logo@': {
						templateUrl: getView('logo')
					}
				}
			})
			.state('app.conflict.import', {
				url: '/import',
				auth: true,
				views: {
					'sidebar@': {
						controller: 'ConflictImportCtrl',
						controllerAs: 'vm',
						templateUrl: getView('conflictImport')
					}
				}
			})
			.state('app.importcsv', {
				url: '/importer',
				data: {
					pageName: 'Import CSV'
				},
				views: {
					'main@': {
						templateUrl: getView('importcsv')
					},
					'map': {}
				}
			});
	}]);
})();

(function() {
	"use strict";

	angular.module('app.routes').run(["$rootScope", "$mdSidenav", "$timeout", "$auth", "$state", "$localStorage", "$window", "leafletData", "toastr", "VectorlayerService", function($rootScope, $mdSidenav, $timeout, $auth, $state, $localStorage, $window, leafletData, toastr, VectorlayerService) {
		$rootScope.sidebarOpen = true;
		$rootScope.greyed = false;
		$rootScope.fixLayout = false;
		$rootScope.looseLayout = $localStorage.fullView || false;
		$rootScope.started = true;
		$rootScope.iframed = $window.self !== $window.top;

		$rootScope.goBack = function() {
			$window.history.back();
		}
		$rootScope.toggleMenu = function(menuId) {
			$mdSidenav(menuId).toggle();
		}

		$rootScope.$on("$stateChangeStart", function(event, toState, toParams, fromState, fromParams) {

			if (toState.auth && !$auth.isAuthenticated()) {
				toastr.error('Your not allowed to go there buddy!', 'Access denied');
				event.preventDefault();
				return $state.go('app.home');
			}
			if (toState.data && toState.data.pageName) {
				$rootScope.current_page = toState.data.pageName;
			}
			if (toState.layout == "row") {
				$rootScope.rowed = true;
			} else {
				$rootScope.rowed = false;
			}
			if (toState.layout == "loose") {
				$rootScope.looseLayout = true;
			} else {
				$rootScope.looseLayout = false;
			}
			if (toState.additional == "full") {
				$rootScope.addFull = true;
			} else {
				$rootScope.addFull = false;
			}
			if (toState.fixLayout == true) {
				$rootScope.fixLayout = true;
			} else {
				$rootScope.fixLayout = false;
			}

			if (typeof toState.views != "undefined") {

				if (toState.views.hasOwnProperty('sidebar@') || toState.views.hasOwnProperty('main@')) {
					$rootScope.sidebar = true;
				} else {
					$rootScope.sidebar = false;
				}
				if (toState.views.hasOwnProperty('main@') || toState.views.hasOwnProperty('additional@')) {
					$rootScope.mainView = true;
				} else {
					$rootScope.mainView = false;
				}
				if (toState.views.hasOwnProperty('additional@')) {
					$rootScope.additional = true;
				} else {
					$rootScope.additional = false;
				}
				if (toState.views.hasOwnProperty('items-menu@')) {
					$rootScope.itemMenu = true;
				} else {
					$rootScope.itemMenu = false;
				}
				if (toState.views.hasOwnProperty('logo@')) {
					$rootScope.logoView = true;
				} else {
					$rootScope.logoView = false;
				}
				if (toState.views.hasOwnProperty('fullscreen@')) {
					$rootScope.fullscreenView = true;
				} else {
					$rootScope.fullscreenView = false;
				}
			} else {
				if (!toState.avoidRoots) {
					$rootScope.additional = false;
					$rootScope.itemMenu = false;
					$rootScope.logoView = false;
					$rootScope.mainView = false;
					$rootScope.sidebar = true;
				} else {
					$rootScope.sidebar = true;
				}

			}
			if ((toState.name.indexOf('conflict') > -1 && toState.name != "app.conflict.import")) {
				$rootScope.noHeader = true;
			} else {
				$rootScope.noHeader = false;
			}
			if (toState.name == 'app.conflict.index.nation') {
				$rootScope.showItems = true;
			} else {
				$rootScope.showItems = false;
			}
			$rootScope.previousPage = {
				state: fromState,
				params: fromParams
			};
			$rootScope.stateIsLoading = true;
			//$mdSidenav('left').close();


		});
		$rootScope.$on("$viewContentLoaded", function(event, toState) {

		});

		$rootScope.$on("$stateChangeSuccess", function(event, toState) {

			$rootScope.stateIsLoading = false;
			if ($auth.isAuthenticated()) {

				//$mdSidenav('leftMenu').close();
			}
			resetMapSize();
		});

		function resetMapSize() {
			$timeout(function() {
				VectorlayerService.getMap().invalidateSize();
			}, 1000);
		}
		/*window.addEventListener('scroll', function(ev) {
    // avoids scrolling when the focused element is e.g. an input
    if (
        !document.activeElement
        || document.activeElement === document.body
    ) {
        document.body.scrollIntoViewIfNeeded(true);
    }
});*/
	}]);
})();

(function () {
	"use strict";

	angular.module('app.config').config(["$authProvider", function ($authProvider) {
		// Satellizer configuration that specifies which API
		// route the JWT should be retrieved from
		$authProvider.loginUrl = '/api/authenticate/auth';
    $authProvider.signupUrl = '/api/authenticate/auth/signup';
    $authProvider.unlinkUrl = '/api/authenticate/auth/unlink/';
		$authProvider.facebook({
			url: '/api/authenticate/facebook',
			clientId: '771961832910072'
		});
		$authProvider.google({
			url: '/api/authenticate/google',
			clientId: '276634537440-cgtt14qj2e8inp0vq5oq9b46k74jjs3e.apps.googleusercontent.com'
		});
	}]);

})();

(function() {
	"use strict";

	angular.module('app.config').config(["flowFactoryProvider", function(flowFactoryProvider) {
		//
		flowFactoryProvider.defaults = {
			target: '/api/images/upload',
			permanentErrors: [404, 500, 501],
			maxChunkRetries: 1,
			testChunks: false,
			chunkRetryInterval: 5000,
			simultaneousUploads: 4,
			singleFile: true
		};
		flowFactoryProvider.on('catchAll', function(event) {
			//  console.log('catchAll', arguments);
		});
	}]);

})();

(function() {
	"use strict";

	angular.module('app.config').config(["hljsServiceProvider", function(hljsServiceProvider) {
		//
		hljsServiceProvider.setOptions({
			// replace tab with 4 spaces
			tabReplace: '    '
		});
	}]);

})();
(function(){
    "use strict";

    angular.module('app.config').config(["$logProvider", function($logProvider){
        $logProvider.debugEnabled(false);
    }]);

})();

(function (){
	"use strict";

	angular.module('app.config').config(["cfpLoadingBarProvider", function (cfpLoadingBarProvider){
		cfpLoadingBarProvider.includeSpinner = false;
	}]);

})();

(function() {
	"use strict";

	angular.module('app.config').config(["RestangularProvider", function(RestangularProvider) {
		RestangularProvider
			.setBaseUrl('/api/')
			.setDefaultHeaders({
				accept: "application/x.laravel.v1+json"
			})
			.setDefaultHttpFields({
				cache: false
			})
			.addResponseInterceptor(function(data, operation, what, url, response, deferred) {
				var extractedData;
				extractedData = data.data;
				if (data.meta) {
					extractedData._meta = data.meta;
				}
				if (data.included) {
					extractedData._included = data.included;
				}
				return extractedData;
			});
		/*	.setErrorInterceptor(function(response, deferred, responseHandler) {
			console.log('errro');
			if (response.status === 403) {

    		return false; // error handled
    	}

    	return true; // error not handled
		});*/
	}]);

})();

(function(){
	"use strict";

	angular.module('app.config').config(["$mdThemingProvider", "$mdGestureProvider", function($mdThemingProvider,$mdGestureProvider) {
		/* For more info, visit https://material.angularjs.org/#/Theming/01_introduction */
/*	var neonTealMap = $mdThemingProvider.extendPalette('teal', {
    '500': '00ccaa',
		'A200': '00ccaa'
  });
	var whiteMap = $mdThemingProvider.extendPalette('teal', {
    '500': '00ccaa',
		'A200': '#fff'
  });
	var blueMap = $mdThemingProvider.extendPalette('blue', {
    '500': '#006bb9',
		'A200': '#006bb9'
  });
	$mdThemingProvider.definePalette('neonTeal', neonTealMap);
	$mdThemingProvider.definePalette('whiteTeal', whiteMap);
	$mdThemingProvider.definePalette('bluer', blueMap);
		$mdThemingProvider.theme('default')
		.primaryPalette('light-blue')
		.accentPalette('bluer');*/
		var blueMap = $mdThemingProvider.extendPalette('indigo', {
			'500': '#006bb9',
			'A200': '#006bb9'
		});
			$mdThemingProvider.definePalette('bluer', blueMap);

		$mdThemingProvider.theme('default')
		.primaryPalette('bluer')
		.accentPalette('grey')
		.warnPalette('red');

		 $mdGestureProvider.skipClickHijack();
	}]);

})();

(function(){
    "use strict";

    angular.module('app.config').config(["toastrConfig", function(toastrConfig){
        //
        angular.extend(toastrConfig, {
          autoDismiss: true,
          containerId: 'toast-container',
          maxOpened: 2,
          newestOnTop: true,
          positionClass: 'toast-bottom-right',
          preventDuplicates: false,
          preventOpenDuplicates: false,
          target: 'body',
          closeButton: true,
          progressBar:true
        });
    }]);

})();

(function(){
    "use strict";

    angular.module('app.filters').filter( 'alphanum', function(){
        return function( input ){
            //
            if ( !input ){
              return null;
            }
            return input.replace(/([^0-9A-Z])/g,"");

        }
    });

})();

(function(){
	"use strict";

	angular.module('app.filters').filter( 'capitalize', function(){
		return function(input, all) {
			return (!!input) ? input.replace(/([^\W_]+[^\s-]*) */g,function(txt){
				return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
			}) : '';
		};
	});
})();

(function () {
	"use strict";

	angular.module('app.filters').filter('findbyname', function () {
		return function (input, name, field) {
			//
      var founds = [];
			var i = 0,
				len = input.length;

			for (; i < len; i++) {
				if (input[i][field].toLowerCase().indexOf(name.toLowerCase()) > -1) {
					 founds.push(input[i]);
				}
			}
			return founds;
		}
	});

})();

(function(){
	"use strict";

	angular.module('app.filters').filter( 'humanReadable', function(){
		return function humanize(str) {
			if ( !str ){
				return '';
			}
			var frags = str.split('_');
			for (var i=0; i<frags.length; i++) {
				frags[i] = frags[i].charAt(0).toUpperCase() + frags[i].slice(1);
			}
			return frags.join(' ');
		};
	});
})();
(function(){
    "use strict";

    angular.module('app.filters').filter( 'newline', function(){
        return function( text ){
            //
    
             return text.replace(/(\\r)?\\n/g, '<br /><br />');
        }
    });

})();

(function () {
	"use strict";

	angular.module('app.filters').filter('OrderObjectBy', function () {
		return function (input, attribute) {
			if (!angular.isObject(input)) return input;

			var array = [];
			for (var objectKey in input) {
				array.push(input[objectKey]);
			}

			array.sort(function (a, b) {
				a = parseInt(a[attribute]);
				b = parseInt(b[attribute]);
				return a - b;
			});
			return array;
		}
	}).filter('orderObjectByField', function() {
  return function(items, field, reverse) {
    var filtered = [];
    angular.forEach(items, function(item) {
      filtered.push(item);
    });
    filtered.sort(function (a, b) {
      return (a[field] > b[field] ? 1 : -1);
    });
    if(reverse) filtered.reverse();
    return filtered;
  };
});
;

})();

(function () {
	"use strict";

	angular.module('app.filters').filter('property', property);
	function property() {
		return function (array, year_field, value) {

      var items = [];
      for(var i = 0; i < array.length; i++){

        if(array[i].data[year_field] == value){
          items.push(array[i]);
        }
      }

			return items;
		}
	}
})();

(function(){
    'use strict';

    angular.module('app.filters').filter('truncateCharacters', function () {
        return function (input, chars, breakOnWord) {
            if (isNaN(chars)) {
                return input;
            }
            if (chars <= 0) {
                return '';
            }
            if (input && input.length > chars) {
                input = input.substring(0, chars);

                if (!breakOnWord) {
                    var lastspace = input.lastIndexOf(' ');
                    // Get last space
                    if (lastspace !== -1) {
                        input = input.substr(0, lastspace);
                    }
                } else {
                    while (input.charAt(input.length-1) === ' ') {
                        input = input.substr(0, input.length - 1);
                    }
                }
                return input + '...';
            }
            return input;
        };
    });
})();
(function(){
    'use strict';

    angular.module('app.filters').filter('truncateWords', function () {
        return function (input, words) {
            if (isNaN(words)) {
                return input;
            }
            if (words <= 0) {
                return '';
            }
            if (input) {
                var inputWords = input.split(/\s+/);
                if (inputWords.length > words) {
                    input = inputWords.slice(0, words).join(' ') + '...';
                }
            }
            return input;
        };
    });
})();
(function(){
	"use strict";

	angular.module('app.filters').filter( 'trustHtml', ["$sce", function( $sce ){
		return function( html ){
			return $sce.trustAsHtml(html);
		};
	}]);
})();
(function(){
	"use strict";

	angular.module('app.filters').filter('ucfirst', function() {
		return function( input ) {
			if ( !input ){
				return null;
			}
			return input.substring(0, 1).toUpperCase() + input.substring(1);
		};
	});

})();

(function(){
    "use strict";

    angular.module('app.services').factory('BasemapsService', ["DataService", "toastr", function(DataService, toastr){
        //
        return {
          basemaps:[],
          basemap:{},
          getBasemaps: function(success, error){
            var _that = this;
            DataService.getAll('basemaps').then(function(response){
              _that.basemaps = response;
              if(typeof success === 'function')
              success(_that.basemaps);
            }, error);
          },
          getBasemap: function(id, success, error){
            var _that = this;
            DataService.getOne('basemaps',id).then(function(response){
              _that.basemap = response;
              if(typeof success === 'function')
              success(_that.basemap);
            });
          },
          setBasemap: function(data){
            return this.basemap = data;
          },
          save: function(basemap, success, error){
            if(basemap.id == 0 || !basemap.id){
              DataService.post('basemaps', basemap).then(function(response){
                toastr.success('New Basemap successfully created');
                if(typeof success === 'function')
                success(response);
              },function(response){
                toastr.error('Saving error');
                if(typeof error === 'function')
                error(response);
              });
            }
            else{
              basemap.save().then(function(response){
                toastr.success('Save successful');
                if(typeof success === 'function')
                success(response);
              },function(response){
                toastr.error('Saving error');
                if(typeof error === 'function')
                error(response);
              });
            }
          },
          removeItem: function(id, success, error){
            DataService.remove('basemaps', id).then(function(response){
              toastr.success('Deletion successful');
              if(typeof success === 'function')
              success(response);
            }, function(response){
              if(typeof error === 'function')
              error(response);
            })
          }
        }
    }]);

})();

(function() {
		"use strict";

		angular.module('app.services').factory('ColorHandleService', function() {
				//
				var ColorHandle;
				return ColorHandle = (function() {
					/*
					      @param {String} color Color string in CSS rgba(0-255, 0-255, 0-255, 0-1) format.
					      @param {Number} stop  Value 0-1, the gradient color stop. 0 means the color appears at 0%, 0.5 means 50%, etc.
					*/

					function ColorHandle(color, stop) {
						this.color = color;
						this.stop = stop;
					}

					return ColorHandle;

				})();
		});

})();

(function() {
	"use strict";

	angular.module('app.services').factory('ContentService', ["DataService", "$filter", function(DataService, $filter) {
		//
		function searchForItem(list, id) {

			for (var i = 0; i < list.length; i++) {
				var item = list[i];
				if (item.id == id) {
					return item;
				}
				if (item.children) {
					var subresult = searchForItem(item.children, id);
					if (subresult) {
						return subresult;
					}

				}
			}
			return null;
		}
		return {
			content: {
				indicators: [],
				indicator: {},
				data: [],
				categories: [],
				category: {},
				styles: [],
				infographics: [],
				indices: []
			},
			backup: {},
			fetchIndices: function(filter) {
				return this.content.indices = DataService.getAll('index').$object;
			},
			fetchIndicators: function(filter) {
				return this.content.indicators = DataService.getAll('indicators', filter).$object
			},
			fetchCategories: function(filter, withoutSave) {
				if (withoutSave) {
					return DataService.getAll('categories', filter).$object;
				}
				return this.content.categories = DataService.getAll('categories', filter).$object;
			},
			fetchStyles: function(filter) {
				return this.content.styles = DataService.getAll('styles', filter).$object;
			},
			getIndices: function(filter) {
				return this.fetchIndices(filter);

				return this.content.indices;
			},
			getCategories: function(filter, withoutSave) {
				if (withoutSave) {
					return this.fetchCategories(filter, withoutSave);
				}
				if (this.content.categories.length == 0) {
					return this.fetchCategories(filter);
				}
				return this.content.categories;
			},
			getIndicators: function(filter) {
				if (this.content.indicators.length > 0) {
					return this.content.indicators;
				}
				return this.fetchIndicators(filter);

			},
			getStyles: function(filter) {
				if (this.content.styles.length == 0) {
					return this.fetchStyles(filter);
				}
				return this.content.styles;
			},
			getIndicator: function(id) {
				if (this.content.indicators.length > 0) {
					for (var i = 0; i < this.content.indicators.length; i++) {
						if (this.content.indicators[i].id == id) {
							return this.content.indicators[i];
						}
					}
				}
				return this.fetchIndicator(id);
			},
			fetchIndicator: function(id, success) {
				var that = this;
				return DataService.getOne('indicators/' + id).then(function(data) {
					if (typeof success == "function") {
						success(data);
					}
					return that.content.indicator = data;
				});
			},
			fetchIndicatorWithData: function(id, success, query) {
				DataService.getOne('indicators/', id, query).then(function(data) {
					if (typeof success == "function") {
						success(data);
					}
				});
			},
			fetchIndicatorPromise: function(id) {
				return DataService.getOne('indicators', id);
			},
			getIndicatorData: function(id, year, gender) {
				if (year && gender && gender != 'all') {
					return this.content.data = DataService.getAll('indicators/' + id + '/data/' + year + '/gender/' + gender);
				} else if (year) {
					return this.content.data = DataService.getAll('indicators/' + id + '/data/' + year);
				}
				return this.content.data = DataService.getAll('indicators/' + id + '/data');
			},
			getIndicatorHistory: function(id, iso, gender) {
				return DataService.getAll('indicators/' + id + '/history/' + iso, {
					gender: gender
				});
			},
			getItem: function(id) {
				/*	if(this.content.indices.length > 0){
						 this.content.data = searchForItem(this.content.indices, id);
					}
					else{*/
				return this.content.data = DataService.getOne('index/', id)
					//}
			},
			removeContent: function(id, list) {
				var that = this;
				angular.forEach(list, function(entry, key) {
					if (entry.id == id) {
						list.splice(key, 1);
						return true;
					}
					if (entry.children) {
						var subresult = that.removeContent(id, entry.children);
						if (subresult) {
							return subresult;
						}
					}
				});
				return false;
			},
			findContent: function(id, list) {
				var found = null;
				var that = this;
				angular.forEach(list, function(entry, key) {
					if (entry.id == id) {
						found = entry;
					}
					if (entry.children && entry.children.length && !found) {
						var subresult = that.findContent(id, entry.children);
						if (subresult) {
							found = subresult;
						}
					}
				});
				return found;
			},
			addItem: function(item) {
				this.content.indices.push(item)
			},
			removeItem: function(id) {
				this.removeContent(id, this.content.indices);
				return DataService.remove('index/', id);
			},
			updateItem: function(item) {
				var entry = this.findContent(item.id, this.content.indices);
				//console.log(entry, item);
				return entry = item;
			},
			getCategory: function(id) {
				if (this.content.categories.length) {
					return this.findContent(id, this.content.categories);
				} else {
					return this.content.category = DataService.getOne('categories/' + id).$object;
				}
			},
			removeCategory: function(id) {
				this.removeContent(id, this.content.categories);
				return DataService.remove('categories/', id);
			},
			filterList: function(type, filter, list) {
				if (list.length > 0) {
					if (!this.backup[type]) {
						this.backup[type] = angular.copy(this.content[type]);
					} else {
						this.content[type] = angular.copy(this.backup[type]);
					}
					return this.content[type] = $filter('filter')(this.content[type], filter)
				}
				this.content[type] = angular.copy(this.backup[type]);
				delete this.backup[type];
				return this.content[type];
			},
			resetFilter: function(type) {
				if (!this.backup[type]) return this.content[type];
				this.content[type] = angular.copy(this.backup[type]);
				delete this.backup[type];
				return this.content[type];
			}

		}
	}]);

})();

(function() {
	"use strict";

	angular.module('app.services').factory('CountriesService', ["DataService", function(DataService) {
		//
		return {
			countries: [],
			continents: [],
			indicator: null,
			fetchData: function() {
				return this.countries = DataService.getOne('countries/isos').$object;
			},
			getData: function() {
				if (!this.countries.length) {
					this.fetchData();
				}
				return this.countries;
			},
			getContinents: function(success, indicator) {
				var _that = this;
				if (this.continents.length && indicator == this.indicator) {
					success(this.continents);
				} else {
					this.indicator = indicator;
					return DataService.getAll('continents', {
						indicator: indicator
					}).then(function(continents) {
						_that.continents = continents;
						success(continents);
					});
				}

			}
		}
	}]);

})();

(function() {
	"use strict";

	angular.module('app.services').factory('DataService', DataService);
	DataService.$inject = ['Restangular', 'toastr'];

	function DataService(Restangular, toastr) {
		return {
			getAll: getAll,
			getOne: getOne,
			post: post,
			put: put,
			update: update,
			remove: remove
		};

		function getAll(route, filter) {
			var data = Restangular.all(route).getList(filter);
			data.then(function() {}, function(data) {
				toastr.error(data.statusText, 'Connection Error');
			});
			return data;
		}

		function getOne(route, id, query) {
			return Restangular.one(route, id).get(query);
		}

		function post(route, data) {
			var data = Restangular.all(route).post(data);
			data.then(function() {}, function(data) {
				toastr.error(data.data.error, 'Saving failed');
			});
			return data;
		}

		function put(route, data) {
			return Restangular.all(route).put(data);
		}

		function update(route, id, data) {
			return Restangular.one(route, id).put(data);
		}

		function remove(route, id) {
			return Restangular.one(route, id).remove();
		}
	}

})();

(function(){
	"use strict";

	angular.module("app.services").factory('DialogService', ["$mdDialog", function($mdDialog){

		return {
			fromTemplate: function(template, $scope){

				var options = {
					templateUrl: './views/dialogs/' + template + '/' + template + '.html'
				};

				if ($scope){
					options.scope = $scope.$new();
				}

				return $mdDialog.show(options);
			},

			hide: function(){
				return $mdDialog.hide();
			},

			alert: function(title, content){
				$mdDialog.show(
					$mdDialog.alert()
						.title(title)
						.content(content)
						.ok('Ok')
				);
			},

			confirm: function(title, content) {
				return $mdDialog.show(
					$mdDialog.confirm()
						.title(title)
						.content(content)
						.ok('Ok')
						.cancel('Cancel')
				);
			}
		};
	}]);
})();
(function(){
    "use strict";

    angular.module('app.services').factory('ErrorCheckerService', ["DataService", "DialogService", "IndexService", function(DataService, DialogService, IndexService){
        //
        var vm = this;

        function checkMyData(data) {
    			vm.extendingChoices = [];
    			if (vm.data.length) {
    				vm.myData.then(function(imports) {
    					angular.forEach(imports, function(entry) {
    						var found = 0;
    						angular.forEach(vm.data[0].meta.fields, function(field) {
    							var columns = JSON.parse(entry.meta_data);
    							angular.forEach(columns, function(column) {
    								if (column.column == field) {
    									found++;
    								}
    							})
    						});
    						if (found >= vm.data[0].meta.fields.length - 3) {
    							vm.extendingChoices.push(entry);
    						}
    					})
    					if (vm.extendingChoices.length) {
    						if(vm.meta.year_field){
    							vm.meta.year = vm.data[0].data[0][vm.meta.year_field];
    						}
    						DialogService.fromTemplate('extendData', $scope);
    					}
    				});
    			}
          return extendedChoices;
    		}

    		function clearErrors() {
    			angular.forEach(vm.data, function(row, key) {
    				angular.forEach(row.data[0], function(item, k) {
    					if (isNaN(item) || item < 0) {
    						if ( item.toString().toUpperCase() == "#NA" || item < 0 || item.toString().toUpperCase().indexOf('N/A') > -1) {
    							vm.data[key].data[0][k] = null;
    							row.errors.splice(0, 1);
    							vm.errors.splice(0, 1);
    						}
    					}
    				});
    				if (!row.data[0][vm.meta.iso_field]) {
    					var error = {
    						type: "2",
    						message: "Iso field is not valid!",
    						value: row.data[0][vm.meta.iso_field],
    						column: vm.meta.iso_field,
    						row: key
    					};
    					var errorFound = false;
    					angular.forEach(row.errors, function(error, key) {
    						if (error.type == 2) {
    							errorFound = true;
    						}
    					})
    					if (!errorFound) {
    						row.errors.push(error);
    						vm.iso_errors.push(error);
    					}
    				}
    			});
    		}

    		function fetchIso() {
    			if (!vm.meta.iso_field) {
    				toastr.error('Check your selection for the ISO field', 'Column not specified!');
    				return false;
    			}
    			if (!vm.meta.country_field) {
    				toastr.error('Check your selection for the COUNTRY field', 'Column not specified!');
    				return false;
    			}
    			if (vm.meta.country_field == vm.meta.iso_field) {
    				toastr.error('ISO field and COUNTRY field can not be the same', 'Selection error!');
    				return false;
    			}

    			vm.notFound = [];
    			var entries = [];
    			var isoCheck = 0;
    			var isoType = 'iso-3166-2';
    			angular.forEach(vm.data, function(item, key) {
    				if (item.data[0][vm.meta.iso_field]) {
    					isoCheck += item.data[0][vm.meta.iso_field].length == 3 ? 1 : 0;
    				}
    				switch (item.data[0][vm.meta.country_field]) {
    					case 'Cabo Verde':
    						item.data[0][vm.meta.country_field] = 'Cape Verde';
    						break;
    					case "Democratic Peoples Republic of Korea":
    						item.data[0][vm.meta.country_field] = "Democratic People's Republic of Korea";
    						break;
    					case "Cote d'Ivoire":
    						item.data[0][vm.meta.country_field] = "Ivory Coast";
    						break;
    					case "Lao Peoples Democratic Republic":
    						item.data[0][vm.meta.country_field] = "Lao People's Democratic Republic";
    						break;
    					default:
    						break;
    				}
    				entries.push({
    					iso: item.data[0][vm.meta.iso_field],
    					name: item.data[0][vm.meta.country_field]
    				});
    			});
    			var isoType = isoCheck >= (entries.length / 2) ? 'iso-3166-1' : 'iso-3166-2';
    			IndexService.resetToSelect();
    			DataService.post('countries/byIsoNames', {
    				data: entries,
    				iso: isoType
    			}).then(function(response) {
    				angular.forEach(response, function(country, key) {
    					angular.forEach(vm.data, function(item, k) {
    						if (country.name == item.data[0][vm.meta.country_field]) {
    							if (country.data.length > 1) {
    								var toSelect = {
    									entry: item,
    									options: country.data
    								};
    								IndexService.addToSelect(toSelect);
    							} else {
    								if (typeof country.data[0] != "undefined") {
    									vm.data[k].data[0][vm.meta.iso_field] = country.data[0].iso;
    									vm.data[k].data[0][vm.meta.country_field] = country.data[0].admin;
    									if (item.errors.length) {
    										angular.forEach(item.errors, function(error, e) {
    											if (error.type == 2 || error.type == 3) {
    												vm.iso_errors.splice(0, 1);
    												item.errors.splice(e, 1);
    											} else if (error.type == 1) {
    												if (error.column == vm.meta.iso_field) {
    													vm.errors.splice(0, 1);
    													item.errors.splice(e, 1);
    												}
    											}
    										});

    									}
    								} else {
    									//console.log(vm.data[k]);
    									var error = {
    										type: "3",
    										message: "Could not locate a valid iso name!",
    										column: vm.meta.country_field
    									};
    									var errorFound = false;
    									angular.forEach(vm.data[k].errors, function(error, i) {
    										if (error.type == 3) {
    											errorFound = true;
    										}
    									})
    									if (!errorFound) {
    										IndexService.addIsoError(error);
    										item.errors.push(error);
    									}
    								}
    							}
    						}
    					});
    				});
    				vm.iso_checked = true;
    				if (IndexService.getToSelect().length) {
    					DialogService.fromTemplate('selectisofetchers');
    				}
    			}, function(response) {
    				toastr.error('Please check your field selections', response.data.message);
    			});

    		}
        return {
          checkMyData: checkMyData
        }
    }]);

})();

(function() {
	"use strict";

	angular.module('app.services').service('ExportService', ["DataService", "toastr", function(DataService, toastr) {
		var vm = this;
		vm._promise, vm._promiseOne;
		vm._callbacks = new Array();
		vm._callbacksOne = new Array();
		vm.exports;
		vm.chapter;
		vm.indicator;
		vm.exporter = {};

		vm.getExports = function(success, error, force) {
			if (angular.isDefined(vm.exports) && !force) {
				if (typeof success === 'function')
					success(vm.exports);
			} else if (angular.isDefined(vm._promise) && !force) {
				if (typeof success === 'function')
					vm._callbacks.push(success);
			} else {
				vm._callbacks.push(success);
				vm._promise = DataService.getAll('exports').then(function(response) {
					vm.exports = response;
					angular.forEach(vm._callbacks, function(callback) {
						if (typeof callback != "undefined")
							callback(vm.exports);
					});
					vm._promise = null;
				}, error);
			}
		}

		vm.getExport = function(id, success, error, force) {
			if (angular.isDefined(vm.exporter) && vm.exporter.id == id && !force) {
				if (typeof success === 'function')
					success(vm.exporter);
			} else {
				vm._callbacksOne.push(success);
				vm._promiseOne = DataService.getOne('exports', id).then(function(response) {
					vm.exporter = response;
					if (!vm.exporter.items) {
						vm.exporter.items = new Array();
					}
					angular.forEach(vm._callbacksOne, function(callback) {
						if (typeof callback != "undefined")
							callback(vm.exporter);
					});
					vm._promiseOne = null;
				}, error);
			}

		}
		vm.setExport = function(data) {

			return vm.exporter = data;
		}
		vm.getChapter = function(id, chapter, success, ignoreFirst) {
			if (angular.isDefined(vm.exporter) && vm.exporter.id == id) {
				vm.chapter = vm.exporter.items[chapter - 1];

				if (!ignoreFirst) {
					if (vm.chapter.type == "indicator") {
						vm.indicator = vm.chapter;
					} else {
						vm.indicator = vm.getFirstIndicator(vm.chapter.children);
					}
				}

				if (typeof success === 'function')
					success(vm.chapter, vm.indicator);
			} else {
				vm.getExport(id, function(data) {
					vm.chapter = vm.exporter.items[chapter - 1];
					if (!ignoreFirst)
						vm.indicator = vm.getFirstIndicator(vm.chapter.children);
					if (typeof success === 'function')
						success(vm.chapter, vm.indicator);
				});
			}
		}
		vm.getIndicator = function(id, chapter, indicator, success) {
			var fetch = typeof indicator == 'undefined' ? true : false;

			vm.getExport(id, function(exporter) {
				vm.getChapter(id, chapter, function(ch, ind) {
					if (!fetch) vm.indicator = vm.findIndicator(indicator);
					success(vm.indicator, vm.chapter, vm.exporter);
				}, !fetch)
			});
			// vm.getChapter(id, chapter, function(c, i) {
			// 	angular.forEach(c.children, function(indi) {
			// 		if (indi.indicator_id == indicator) {
			// 			vm.indicator = indi;
			// 		}
			// 	})
			// 	success(vm.chapter, vm.indicator);
			// }, true);
		}
		vm.getFirstIndicator = function(list) {
			var found = null;
			angular.forEach(list, function(item) {
				if (item.type == 'indicator' && !found) {
					found = item;
				} else {
					if (!found) {
						found = vm.getFirstIndicator(item.children);
					}
				}
			});
			return found;
		}
		vm.findIndicator = function(indicator_id) {
			var item = null;
			angular.forEach(vm.exporter.items, function(chapter, key) {
				if (typeof chapter.indicator_id != "undefined") {
					if (chapter.indicator_id == indicator_id) {
						item = chapter;
					}
				}
				angular.forEach(chapter.children, function(indicator) {
					if (indicator.indicator_id == indicator_id) {
						item = indicator;
					}
				})
			});
			return item;
		}
		vm.save = function(success, error) {
			if (vm.exporter.id == 0 || !vm.exporter.id) {
				DataService.post('exports', vm.exporter).then(function(response) {
					vm.exporter = response;
					vm.exports.push(vm.exporter);
					toastr.success('Successfully created');
					if (typeof success === 'function')
						success(response);
				}, function(response) {
					toastr.error('Something went wrong!');
					if (typeof error === 'function')
						error(response);
				});
			} else {
				vm.exporter.save().then(function(response) {
					if (typeof success === 'function')
						toastr.success('Save successfully');
					success(response);
					vm.getExports(function() {}, function() {}, true);
				}, function(response) {
					toastr.error('Something went wrong!');
					if (typeof error === 'function')
						error(response);
				});
			}
		}
		vm.removeItem = function(id, success, error) {
			DataService.remove('exports', id).then(function(response) {
				if (typeof success === 'function')
					toastr.success('Successfully deleted');
				success(response);
			}, function(response) {
				if (typeof error === 'function')
					error(response);
			})
		}

	}]);

})();

(function(){
    "use strict";

    angular.module('app.services').factory('IconsService', function(){
        var unicodes = {
          'empty': "\ue600",
          'agrar': "\ue600",
          'anchor': "\ue601",
          'butterfly': "\ue602",
          'energy':"\ue603",
          'sink': "\ue604",
          'man': "\ue605",
          'fabric': "\ue606",
          'tree':"\ue607",
          'water':"\ue608"
        };

        return {
          getUnicode: function(icon){
            return unicodes[icon];
          },
          getList:function(){
            return unicodes;
          }
        }
    });

})();

(function() {
	"use strict";

	angular.module('app.services').factory('IndexService', ["CacheFactory", "DataService", "$state", function(CacheFactory, DataService, $state) {
		//
		var serviceData = {
				data: [],
				errors: [],
				iso_errors: [],
				meta: {
					iso_field: '',
					country_field: '',
					year_field: '',
					gender_field: '',
					table: []
				},
				indicators: {},
				toSelect: []
			},
			storage, importCache, indicator;

		if (!CacheFactory.get('importData')) {
			importCache = CacheFactory('importData', {
				cacheFlushInterval: 60 * 60 * 1000, // This cache will clear itself every hour.
				deleteOnExpire: 'aggressive', // Items will be deleted from this cache right when they expire.
				storageMode: 'localStorage' // This cache will use `localStorage`.
			});
			serviceData = importCache.get('dataToImport');
		} else {
			importCache = CacheFactory.get('importData');
			storage = importCache.get('dataToImport');
		}
		return {
			clear: function() {
				$state.go('app.index.create');
				if (CacheFactory.get('importData')) {
					importCache.remove('dataToImport');
				}
				return serviceData = {
					data: [],
					errors: [],
					iso_errors: [],
					meta: {
						iso_field: '',
						country_field: '',
						year_field: '',
						gender_field: ''
					},
					toSelect: [],
					indicators: {}
				};
			},
			addData: function(item) {
				return serviceData.data.push(item);
			},
			addIndicator: function(item) {
				return serviceData.indicators.push(item);
			},
			addToSelect: function(item) {
				return serviceData.toSelect.push(item);
			},
			addIsoError: function(error) {
				return serviceData.iso_errors.push(error);
			},
			removeToSelect: function(item) {
				var index = serviceData.toSelect.indexOf(item);
				return index > -1 ? serviceData.toSelect.splice(index, 1) : false;
			},
			setData: function(data) {
				return serviceData.data = data;
			},
			setIsoField: function(key) {
				return serviceData.meta.iso_field = key;
			},
			setCountryField: function(key) {
				return serviceData.meta.country_field = key;
			},
			setGenderField: function(key) {
				return serviceData.meta.gender_field = key;
			},
			setYearField: function(key) {
				return serviceData.meta.year_field = key;
			},
			setErrors: function(errors) {
				return serviceData.errors = errors;
			},
			setToLocalStorage: function() {
				//console.log(serviceData);
				importCache.put('dataToImport', serviceData);
			},
			setIndicator: function(key, item) {
				return serviceData.indicators[key] = item;
			},
			setActiveIndicatorData: function(item) {
				return indicator = serviceData.indicators[item.column_name] = item;
			},
			getFromLocalStorage: function() {
				return serviceData = importCache.get('dataToImport');
			},
			getFullData: function() {
				return serviceData;
			},
			getData: function() {
				if (typeof serviceData == "undefined") return false;
				return serviceData.data;
			},
			getMeta: function() {
				if (typeof serviceData == "undefined") return false;
				return serviceData.meta;
			},
			getToSelect: function() {
				return serviceData.toSelect;
			},
			getIsoField: function() {
				return serviceData.meta.iso_field;
			},
			getCountryField: function() {
				return serviceData.meta.country_field;
			},
			getErrors: function() {
				if (typeof serviceData == "undefined") return false;
				return serviceData.errors;
			},
			getIsoErrors: function() {
				if (typeof serviceData == "undefined") return false;
				return serviceData.iso_errors;
			},
			getFirstEntry: function() {
				return serviceData.data[0];
			},
			getDataSize: function() {
				return serviceData.data.length;
			},
			getIndicator: function(key) {
				return indicator = serviceData.indicators[key];
			},
			getIndicators: function() {
				if (typeof serviceData == "undefined") return false;
				return serviceData.indicators;
			},
			activeIndicator: function() {
				return indicator;
			},
			resetIndicator: function() {
				return indicator = null;
			},
			reduceIsoError: function() {
				return serviceData.iso_errors.splice(0, 1);
			},
			reduceError: function() {
				return serviceData.errors.splice(0, 1);
			},
			resetToSelect: function() {
				return serviceData.toSelect = [];
			},
			resetLocalStorage: function() {
				if (CacheFactory.get('importData')) {
					importCache.remove('dataToImport');
				}
				return serviceData = {
					data: [],
					errors: [],
					iso_errors: [],
					meta: {
						iso_field: '',
						country_field: '',
						year_field: ''
					},
					toSelect: [],
					indicators: {}
				};
			},
			fetchNationData: function(indicator, iso, success) {
				return DataService.getOne('indicators/' + indicator + "/history", iso).then(function(data) {
					success(data);
				});
			}
		}
	}]);

})();

(function() {
	"use strict";

	angular.module('app.services').factory('IndizesService', ["DataService", function(DataService) {
		//
		return {
			index: {
				data: {
					data: null,
					structure: null
				},
				promises: {
					data: null,
					structur: null
				}
			},
			fetchData: function(index) {
				this.index.promises.data = DataService.getAll('index/' + index + '/year/latest');
				this.index.promises.structure = DataService.getOne('index/' + index + '/structure');
				this.index.data.data = this.index.promises.data.$object;
				this.index.data.structure = this.index.promises.structure.$object;
				return this.index;
			},
			getData: function() {
				return this.index.data.data;
			},
			getStructure: function() {
				return this.index.data.structure;
			},
			getDataPromise: function() {
				return this.index.promises.data;
			},
			getStructurePromise: function() {
				return this.index.promises.structure;
			},
			fetchNationData: function(index, iso, success) {
				DataService.getOne('index/' + index, iso).then(function(data) {
					success(data);
				});
			}
		}
	}]);

})();

(function () {
		"use strict";

		angular.module('app.services').factory('RecursionHelper', ["$compile", function ($compile) {
				//
				return {
					/**
					 * Manually compiles the element, fixing the recursion loop.
					 * @param element
					 * @param [link] A post-link function, or an object with function(s) registered via pre and post properties.
					 * @returns An object containing the linking functions.
					 */
					compile: function (element, link) {
						// Normalize the link parameter
						if (angular.isFunction(link)) {
							link = {
								post: link
							};
						}

						// Break the recursion loop by removing the contents
						var contents = element.contents().remove();
						var compiledContents;
						return {
							pre: (link && link.pre) ? link.pre : null,
							/**
							 * Compiles and re-adds the contents
							 */
							post: function (scope, element) {
								// Compile the contents
								if (!compiledContents) {
									compiledContents = $compile(contents);
								}
								// Re-add the compiled contents to the element
								compiledContents(scope, function (clone) {
									element.append(clone);
								});

								// Call the post-linking function, if any
								if (link && link.post) {
									link.post.apply(null, arguments);
								}
							}
						};
					}
				}
				}]);

		})();

(function(){
	"use strict";

	angular.module("app.services").factory('ToastService', ["$mdToast", function($mdToast){

		var delay = 6000,
			position = 'top right',
			action = 'OK';

		return {
			show: function(content){
				if (!content){
					return false;
				}

				return $mdToast.show(
					$mdToast.simple()
						.content(content)
						.position(position)
						.action(action)
						.hideDelay(delay)
				);
			},
			error: function(content){
				if (!content){
					return false;
				}

				return $mdToast.show(
					$mdToast.simple()
						.content(content)
						.position(position)
						.theme('warn')
						.action(action)
						.hideDelay(delay)
				);
			}
		};
	}]);
})();
(function(){
    "use strict";

    angular.module('app.services').factory('UserService', ["DataService", function(DataService){
        //

        return {
          user:{
            data: []
          },
          myData: function(){
            return this.user.data = DataService.getAll('me/data');
          },
          myProfile: function(){

          },
          myFriends: function(){

          }
        }
    }]);

})();

(function() {
	"use strict";

	angular.module('app.services').service('VectorlayerService', ["$timeout", "DataService", function($timeout, DataService) {
		var that = this,
			_self = this;
		this.fallbackBasemap = {
			name: 'Outdoor',
			url: 'https://{s}.tiles.mapbox.com/v4/valderrama.d86114b6/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFnbm9sbyIsImEiOiJuSFdUYkg4In0.5HOykKk0pNP1N3isfPQGTQ',
			type: 'xyz',
			layerOptions: {
				noWrap: true,
				continuousWorld: false,
				detectRetina: true
			}
		}
		this.basemap = this.fallbackBasemap;
		this.iso_field = 'iso_a2';
		this.canvas = false;
		this.palette = [];
		this.ctx = null;
		this.keys = {
			mazpen: 'vector-tiles-Q3_Os5w',
			mapbox: 'pk.eyJ1IjoibWFnbm9sbyIsImEiOiJuSFdUYkg4In0.5HOykKk0pNP1N3isfPQGTQ'
		};
		this.data = {
			layer: '',
			name: 'countries_big',
			baseColor: '#06a99c',
			iso3: 'adm0_a3',
			iso2: 'iso_a2',
			iso: 'iso_a2',
			fields: "id,admin,adm0_a3,wb_a3,su_a3,iso_a3,iso_a2,name,name_long",
			field: 'score'
		};
		this.map = {
			data: [],
			current: [],
			structure: [],
			style: []
		};
		this.mapLayer = null;
		this.layers = {
			baselayers: {
				xyz: this.basemap
			}
		};
		this.center = {
			lat: 48.209206,
			lng: 16.372778,
			zoom: 3
		};
		this.maxbounds = {
			southWest: {
				lat: 90,
				lng: 180
			},
			northEast: {
				lat: -90,
				lng: -180
			}
		};
		this.defaults = {
			minZoom: 2,
			maxZoom: 6,
			zoomControlPosition:'bottomright'
		};
		this.legend = {};
		this.setMap = function(map) {
			return this.mapLayer = map;
		}
		this.getMap = function() {
			return this.mapLayer;
		}
		this.setBaseLayer = function(basemap) {
			if (!basemap)
				this.basemap = basemap = this.fallbackBasemap;

			this.layers.baselayers['xyz'] = {
				name: basemap.name,
				url: basemap.url,
				type: 'xyz',
				layerOptions: {
					noWrap: true,
					continuousWorld: false,
					detectRetina: true,
					// attribution:basemap.attribution || basemap.provider,
					attribution: "Copyright: 2014 Esri, DeLorme, HERE, TomTom"
				}

			}
		}
		this.setMapDefaults = function(style) {
			this.defaults = {
				zoomControl: style.zoom_controls,
				scrollWheelZoom: style.scroll_wheel_zoom
			}
			if (style.scroll_wheel_zoom) {
				this.mapLayer.scrollWheelZoom.enable()
			} else {
				this.mapLayer.scrollWheelZoom.disable()
			}
			if (style.legends) {
				this.legend = {
					colors: ['#fff', style.base_color, 'rgba(102,102,102,1)'],
					labels: ['high', '', 'low']
				}
			} else {
				this.legend = {}
			}

		}
		this.resetBaseLayer = function() {
			this.layers.baselayers['xyz'] = this.baselayer;
		}
		this.setLayer = function(l) {
			return this.data.layer = l;
		}
		this.getLayer = function() {
			return this.data.layer;
		}
		this.getName = function() {
			return this.data.name;
		}
		this.fields = function() {
			return this.data.fields;
		}
		this.iso = function() {
			return this.data.iso;
		}
		this.iso3 = function() {
			return this.data.iso3;
		}
		this.iso2 = function() {
			return this.data.iso2;
		}
		this.createCanvas = function(color) {
			this.canvas = document.createElement('canvas');
			this.canvas.width = 280;
			this.canvas.height = 10;
			this.ctx = this.canvas.getContext('2d');
			var gradient = this.ctx.createLinearGradient(0, 0, 280, 10);
			gradient.addColorStop(1, 'rgba(255,255,255,0)');
			gradient.addColorStop(0.53, color || 'rgba(128, 243, 198,1)');
			gradient.addColorStop(0, 'rgba(102,102,102,1)');
			this.ctx.fillStyle = gradient;
			this.ctx.fillRect(0, 0, 280, 10);
			this.palette = this.ctx.getImageData(0, 0, 257, 1).data;
			//document.getElementsByTagName('body')[0].appendChild(this.canvas);
		}
		this.updateCanvas = function(color) {

			this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
			var gradient = this.ctx.createLinearGradient(0, 0, 257, 10);
			gradient.addColorStop(1, 'rgba(255,255,255,1)');
			gradient.addColorStop(0.53, color || 'rgba(128, 243, 198,1)');
			gradient.addColorStop(0, 'rgba(102,102,102,1)');
			this.ctx.fillStyle = gradient;
			this.ctx.fillRect(0, 0, 257, 10);
			this.palette = this.ctx.getImageData(0, 0, 257, 1).data;
			//document.getElementsByTagName('body')[0].appendChild(this.canvas);
		}
		this.createFixedCanvas = function(colorRange) {

			this.canvas = document.createElement('canvas');
			this.canvas.width = 280;
			this.canvas.height = 10;
			this.ctx = this.canvas.getContext('2d');
			var gradient = this.ctx.createLinearGradient(0, 0, 257, 10);

			for (var i = 0; i < colorRange.length; i++) {
				gradient.addColorStop(1 / (colorRange.length - 1) * i, colorRange[i]);
			}
			this.ctx.fillStyle = gradient;
			this.ctx.fillRect(0, 0, 257, 10);
			this.palette = this.ctx.getImageData(0, 0, 257, 1).data;

		}
		this.updateFixedCanvas = function(colorRange) {
			var gradient = this.ctx.createLinearGradient(0, 0, 257, 10);
			for (var i = 0; i < colorRange.length; i++) {
				gradient.addColorStop(1 / (colorRange.length - 1) * i, colorRange[i]);
			}
			this.ctx.fillStyle = gradient;
			this.ctx.fillRect(0, 0, 257, 10);
			this.palette = this.ctx.getImageData(0, 0, 257, 1).data;
			//document.getElementsByTagName('body')[0].appendChild(this.canvas);
		}
		this.setBaseColor = function(color) {
				return this.data.baseColor = color;
			}
			/*	setStyle: function(style) {
					this.data.layer.setStyle(style)
				},*/
		this.countryClick = function(clickFunction) {
			var that = this;
			$timeout(function() {
				that.data.layer.options.onClick = clickFunction;
			});

		}
		this.getColor = function(value) {
			return this.palette[value];
		}
		this.setStyle = function(style) {
			return this.map.style = style;
		}
		this.invertStyle = function() {
			this.data.layer.setStyle(that.invertedStyle);
			that.data.layer.options.mutexToggle = false;
			that.data.layer.redraw();
		}
		this.localStyle = function() {
			this.data.layer.setStyle(that.countriesStyle);
			that.data.layer.options.mutexToggle = true;
			that.data.layer.redraw();
		}
		this.setData = function(data, structure, color, drawIt) {
			this.map.data = data;
			this.map.structure = structure;
			if (typeof color != "undefined") {
				this.data.baseColor = color;
			}
			if (!this.canvas) {
				if (typeof this.data.baseColor == 'string') {
					this.createCanvas(this.data.baseColor);
				} else {
					this.createFixedCanvas(this.data.baseColor);
				}
			} else {
				if (typeof this.data.baseColor == 'string') {
					this.updateCanvas(this.data.baseColor);
				} else {
					this.updateFixedCanvas(this.data.baseColor);
				}
			}
			if (drawIt) {
				this.paintCountries();
			}
		}
		this.getNationByIso = function(iso, list) {
			if (typeof list !== "undefined") {
				if (list.length == 0) return false;
				var nation = {};
				angular.forEach(list, function(nat) {
					if (nat.iso == iso) {
						nation = nat;
					}
				});
			} else {
				if (this.map.data.length == 0) return false;
				var nation = {};
				angular.forEach(this.map.data, function(nat) {
					if (nat.iso == iso) {
						nation = nat;
					}
				});
			}
			return nation;
		}
		this.getNationByName = function(name) {
			if (this.map.data.length == 0) return false;
		}
		this.paintCountries = function(style, click, mutex) {
			var that = this;

			$timeout(function() {
				if (typeof style != "undefined" && style != null) {
					that.data.layer.setStyle(style);
				} else {
					//that.data.layer.setStyle(that.map.style);
					that.data.layer.setStyle(that.countriesStyle);
				}
				if (typeof click != "undefined") {
					that.data.layer.options.onClick = click
				}
				that.data.layer.redraw();
			});
		}
		this.resetSelected = function(iso) {
			if (typeof this.data.layer.layers != "undefined") {
				angular.forEach(this.data.layer.layers[this.data.name + '_geom'].features, function(feature, key) {
					if (iso) {
						if (key != iso)
							feature.selected = false;
					} else {
						feature.selected = false;
					}

				});
				this.redraw();
			}

		}
		this.setSelectedFeature = function(iso, selected, deselectedAll) {

			if (typeof this.data.layer.layers[this.data.name + '_geom'].features[iso] == 'undefined') {
				console.log(iso);
				//debugger;
			} else {
				if(deselectedAll){
					angular.forEach(this.data.layer.layers[this.data.name + '_geom'].features, function(feature, key) {
							feature.selected = false;

					});
				}

				this.data.layer.layers[this.data.name + '_geom'].features[iso].selected = selected;
				this.redraw();
			}

		}
		this.redraw = function() {
			this.data.layer.redraw();
		}
		this.paint = function(color) {
			this.setBaseColor(color);
			if (this.ctx) {
				this.updateCanvas(color);
			} else {
				this.createCanvas(color)
			}
			this.paintCountries();
		}
		this.gotoCountry = function(iso) {
			DataService.getOne('countries/bbox', [iso]).then(function(data) {
				var southWest = L.latLng(data.coordinates[0][0][1], data.coordinates[0][0][0]),
					northEast = L.latLng(data.coordinates[0][2][1], data.coordinates[0][2][0]),
					bounds = L.latLngBounds(southWest, northEast);

				var pad = [
					[0, 0],
					[100, 100]
				];
				// if (vm.compare.active) {
				// 	pad = [
				// 		[0, 0],
				// 		[0, 0]
				// 	];
				// }
				that.mapLayer.fitBounds(bounds, {
					padding: pad[1],
					maxZoom: 4
				});
			});
		}
		this.gotoCountries = function(main, isos) {
				//	isos.push(main);
				DataService.getOne('countries/bbox', isos).then(function(data) {
					var southWest = L.latLng(data.coordinates[0][0][1], data.coordinates[0][0][0]),
						northEast = L.latLng(data.coordinates[0][2][1], data.coordinates[0][2][0]),
						bounds = L.latLngBounds(southWest, northEast);

					var pad = [
						[100, 100],
						[100, 100]
					];
					// if (vm.compare.active) {
					// 	pad = [
					// 		[0, 0],
					// 		[0, 0]
					// 	];
					// }
					that.mapLayer.fitBounds(bounds, {
						padding: pad[1],
						maxZoom: 4
					});
				});
			}
			//FULL TO DO
		this.countriesStyle = function(feature) {

			var style = {};
			var iso = feature.properties[that.iso_field];
			var nation = that.getNationByIso(iso);
			var field = 'score';
			var type = feature.type;
			feature.selected = false;
			switch (type) {
				case 3: //'Polygon'
					if (typeof nation[field] != "undefined" && nation[field] != null) {
						var linearScale = d3.scale.linear().domain([that.map.structure.min, that.map.structure.max]).range([0, 256]);

						var colorPos = parseInt(linearScale(parseFloat(nation[field]))) * 4; //;
						//var colorPos = parseInt(256 / 100 * parseInt(nation[field])) * 4;
						var color = 'rgba(' + that.palette[colorPos] + ', ' + that.palette[colorPos + 1] + ', ' + that.palette[colorPos + 2] + ',' + that.palette[colorPos + 3] + ')';

						style.color = 'rgba(' + that.palette[colorPos] + ', ' + that.palette[colorPos + 1] + ', ' + that.palette[colorPos + 2] + ',0.6)'; //color;
						style.outline = {
							color: color,
							size: 1
						};
						style.selected = {
							color: 'rgba(' + that.palette[colorPos] + ', ' + that.palette[colorPos + 1] + ', ' + that.palette[colorPos + 2] + ',0.3)',
							outline: {
								color: 'rgba(' + that.palette[colorPos] + ', ' + that.palette[colorPos + 1] + ', ' + that.palette[colorPos + 2] + ',1)',
								// color: 'rgba(66,66,66,0.9)',
								size: 2
							}
						};

					} else {
						style.color = 'rgba(255,255,255,0)';
						style.outline = {
							color: 'rgba(255,255,255,0)',
							size: 1
						};

					}
					break;
			}
			return style;
		}
		this.invertedStyle = function(feature) {
			var style = {};
			var iso = feature.properties[that.iso_field];
			var nation = that.getNationByIso(iso);
			// var field = that.map.structure.name || 'score';
			var field = 'score';

			var linearScale = d3.scale.linear().domain([that.map.structure.min, that.map.structure.max]).range([0, 256]);
			var colorPos = parseInt(linearScale(parseFloat(nation[field]))) * 4; //;
			var color = 'rgba(' + that.palette[colorPos] + ', ' + that.palette[colorPos + 1] + ', ' + that.palette[colorPos + 2] + ',' + that.palette[colorPos + 3] + ')';

			style.color = 'rgba(0,0,0,0)';
			if (typeof nation[field] != "undefined" && nation[field] != null) {
				style.color = 'rgba(' + that.palette[colorPos] + ', ' + that.palette[colorPos + 1] + ', ' + that.palette[colorPos + 2] + ',0.1)';
			}

			style.outline = {
				color: 'rgba(0,0,0,0)',
				size: 0
			};
			style.selected = {
				color: color,
				outline: {
					color: 'rgba(0,0,0,0.3)',
					size: 2
				}
			};
			return style;
		}

	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('BasemapDetailsCtrl', ["$state", "BasemapsService", "VectorlayerService", function($state, BasemapsService, VectorlayerService){
        //
        var vm = this;
        vm.basemap = {}
        vm.selected = [];
        vm.options = {
          save: function(){
            BasemapsService.save(vm.basemap, function(response){
              VectorlayerService.setBaseLayer(vm.basemap);
              $state.go('app.index.basemaps.details',{id: response.id, name: response.name});
            });
          },
          withSave: true,
        };

        activate();

        function activate(){
          if($state.params.id != 0){
            BasemapsService.getBasemap($state.params.id, function(response){
              vm.basemap = response;
              VectorlayerService.setBaseLayer(vm.basemap);
            });
          }
          else {
            console.log(vm.basemap);
          }
        }
        function removeItem(item, list){
    			angular.forEach(list, function(entry, key){
    				if(entry.id == item.id){
    					list.splice(key, 1);
    					return true;
    				}
    				if(entry.children){
    					var subresult = removeItem(item, entry.children);
    					if(subresult){
    						return subresult;
    					}
    				}
    			});
    			return false;
    		}
    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('BasemapsCtrl', ["$state", "BasemapsService", function($state, BasemapsService){
        //
        var vm = this;
        vm.basemaps = [];
        vm.selection = [];
    		vm.options = {
    			drag: false,
    			type: 'basemaps',
    			allowMove: false,
    			allowDrop: false,
    			allowAdd: true,
    			allowDelete: true,
    			itemClick: function(id, name) {
    				$state.go('app.index.basemaps.details', {
    					id: id,
    					name: name
    				})
    			},
    			addClick: function() {
    				$state.go('app.index.basemaps.details', {
    					id: 0,
    					name: 'new'
    				})
    			},
    			deleteClick: function() {
    				angular.forEach(vm.selection, function(item, key) {
    					BasemapsService.removeItem(item.id, function(data) {
    						if ($state.params.id == item.id) {
    							$state.go('app.index.basemaps');
    						}
                var idx = vm.basemaps.indexOf(item);
                vm.basemaps.splice(idx,1);
                vm.selection = [];
    					});
    				});

    			}
    		};

        activate();

        function activate(){
          BasemapsService.getBasemaps(function(response){
            vm.basemaps = response;
          });
        }
    }]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ChapterCtrl', ["$rootScope", "$scope", "$state", "DialogService", "ExportService", function($rootScope, $scope, $state, DialogService, ExportService) {
		var vm = this;
		vm.gotoChapter = gotoChapter;
		vm.ExportService = ExportService;
		vm.showData = showData;
		vm.ExportService.getChapter($state.params.id, $state.params.chapter || 1);

		function gotoChapter(chapter) {
			vm.ExportService.getChapter($state.params.id, chapter, function(c, i) {

				if ($state.params.iso) {
					$state.go('app.export.detail.chapter.indicator.country', {
						chapter: chapter,
						indicator: i.indicator_id,
						indiname: i.name,
						iso: $state.params.iso
					});
				} else {
					$state.go('app.export.detail.chapter.indicator', {
						chapter: chapter,
						indicator: i.indicator_id,
						indiname: i.name
					})
				}

			});
		}

		function showData() {
			DialogService.fromTemplate('exportdata', $scope);
		}

	
	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ChapterContentCtrl', ["$scope", "$rootScope", "$timeout", "$state", "DataService", "ContentService", "countries", "ExportService", "IndizesService", "IndexService", "DialogService", "VectorlayerService", function($scope, $rootScope, $timeout, $state, DataService, ContentService, countries, ExportService, IndizesService, IndexService, DialogService, VectorlayerService) {
		//
		var vm = this;

		vm.compare = false;
		vm.activeTab = 0, vm.selectedIndicator;
		vm.selectedCountry = {}, vm.current = {}, vm.circleOptions = {};
		vm.countriesList = [], vm.compareList = [];
		vm.chapterId = $state.params.chapter;
		vm.ExportService = ExportService;
		vm.setCompare = setCompare;
		vm.selectCountry = selectCountry;
		vm.showInfo = showInfo;
		vm.gotoIndicator = gotoIndicator;
		//vm.countries = countries.plain();

		activate();

		VectorlayerService.countryClick(function(data) {
			if (!countryExistsInData(data.feature.id)) return false;
			if (vm.compare) {
				addCompareCountry(data.feature.id, true)
				showComparison();
			} else {
				$state.go('app.export.detail.chapter.indicator.country', {
					indicator: vm.ExportService.indicator.indicator_id,
					indiname: vm.ExportService.indicator.name,
					iso: data.feature.id
				});
				//$rootScope.sidebarOpen = false;
				getCountryByIso(data.feature.id);
				fetchNationData(data.feature.id);
			}

		});

		function addCompareCountry(iso, withRemove) {
			if (iso == vm.selectedCountry.iso)
				return false;
			var cl = null;
			var idx = vm.compareList.indexOf(iso);
			angular.forEach(vm.data, function(nat) {
				if (nat.iso == iso) {
					cl = nat;
				}
			})
			if (idx == -1) {
				if (cl) {
					vm.countriesList.push(cl);
					vm.compareList.push(cl.iso);
					VectorlayerService.setSelectedFeature(cl.iso, true);
				}
			} else if (withRemove) {
				vm.compareList.splice(idx, 1);
				vm.countriesList.splice(vm.countriesList.indexOf(cl), 1);
				VectorlayerService.setSelectedFeature(iso, false);
			}

		}

		function showComparison() {
			$state.go('app.export.detail.chapter.indicator.country.compare', {
				countries: vm.compareList.join('-vs-')
			});
			VectorlayerService.gotoCountries($state.params.iso, vm.compareList);
		}

		function setCompare(activate) {
			if (activate) {
				vm.compare = true;
				vm.countriesList[0] = vm.selectedCountry;
				VectorlayerService.invertStyle();
				$state.go('app.export.detail.chapter.indicator.country.compare', {
					countries: vm.compareList.join('-vs-')
				});
			} else {
				vm.compare = false;
				VectorlayerService.localStyle();
				$state.go('app.export.detail.chapter.indicator.country');
				VectorlayerService.setSelectedFeature($state.params.iso, true);

				//muss nicht sein
				vm.compareList = [];
				vm.countriesList = [];
			}

		}

		function getIndicator(finished) {
			vm.ExportService.getIndicator($state.params.id, $state.params.chapter, $state.params.indicator, function(indicator, chapter, exporter) {
				vm.selectedIndicator = indicator;
				renderIndicator(indicator, finished);
			});
		}

		// DRY in you face. REDUCE THIS MULTIPLE KOT
		function gotoIndicator() {
			if (vm.ExportService.chapter.type == "indicator") {
				var idx = 0;
				angular.forEach(vm.ExportService.exporter.items, function(item, key) {
					if (item.id == vm.selectedIndicator.id) {
						idx = key;
					}
				})
				if(typeof vm.selectedCountry.iso != "undefined"){
					$state.go('app.export.detail.chapter.indicator.country', {
						chapter: idx + 1,
						indicator: vm.selectedIndicator.indicator_id,
						indiname: vm.selectedIndicator.name,
						iso:vm.selectedCountry.iso
					});
				}
				else{
					$state.go('app.export.detail.chapter.indicator', {
						chapter: idx + 1,
						indicator: vm.selectedIndicator.indicator_id,
						indiname: vm.selectedIndicator.name
					});
				}
			} else {
				if (vm.ExportService.chapter.id != vm.selectedIndicator.parent.id) {
					var idx = 0;
					angular.forEach(vm.ExportService.exporter.items, function(item, key) {
						if (item.id == vm.selectedIndicator.parent.id) {
							idx = key;
						}
					})
					if(typeof vm.selectedCountry.iso != "undefined"){
						$state.go('app.export.detail.chapter.indicator.country', {
							chapter: idx + 1,
							indicator: vm.selectedIndicator.indicator_id,
							indiname: vm.selectedIndicator.name,
							iso:vm.selectedCountry.iso
						});
					}
					else{
						$state.go('app.export.detail.chapter.indicator', {
							chapter: idx + 1,
							indicator: vm.selectedIndicator.indicator_id,
							indiname: vm.selectedIndicator.name
						});
					}
				} else {
					if(typeof vm.selectedCountry.iso != "undefined"){
						$state.go('app.export.detail.chapter.indicator.country', {
							indicator: vm.selectedIndicator.indicator_id,
							indiname: vm.selectedIndicator.name,
							iso:vm.selectedCountry.iso
						});
					}
					else{
						$state.go('app.export.detail.chapter.indicator', {
							indicator: vm.selectedIndicator.indicator_id,
							indiname: vm.selectedIndicator.name
						});
					}
					loadStateData();
				}
			}
		}

		function selectCountry(nation) {
			$state.go('app.export.detail.chapter.indicator.country', {
				iso: nation.iso
			});
			VectorlayerService.setSelectedFeature(nation.iso, true, true);
			getCountryByIso(nation.iso);
			fetchNationData(nation.iso);
		}

		function getCountryByName(name) {
			var iso = null;
			angular.forEach(vm.countries, function(nat, key) {
				if (nat == name) {
					iso = key;
				}
			});
			getCountryByIso(iso);
			return iso;
		}

		function countryExistsInData(iso) {
			var found = false;
			angular.forEach(vm.data, function(item) {
				if (item.iso == iso) {
					found = true;
				}
			});
			return found;
		}

		function getCountryByIso(iso) {
			angular.forEach(vm.data, function(item) {
				if (item.iso == iso) {
					vm.selectedCountry = item;
				}
			})
			return iso;
		}

		function fetchNationData(iso) {
			if (!$state.params.countries) {
				VectorlayerService.gotoCountry(iso);
			}


			IndexService.fetchNationData(vm.ExportService.indicator.indicator_id, iso, function(data) {
				vm.current = data;
				VectorlayerService.setSelectedFeature(iso, true, true);
				$rootScope.sidebarOpen = true;

			});
		}

		function renderIndicator(item, done) {
			ContentService.fetchIndicatorWithData(item.indicator_id, function(indicator) {
				vm.data = indicator.data;
				vm.structure = indicator;
				vm.ExportService.data = indicator;
				vm.circleOptions = {
					color: vm.ExportService.indicator.style.base_color || '#00ccaa',
					field: 'rank',
					size: vm.structure.count,
					hideNumbering: true,
					width: 60,
					height: 60,
					fontSize:12
				};
				VectorlayerService.setBaseLayer(item.style.basemap);
				VectorlayerService.setMapDefaults(item.style);
				VectorlayerService.setData(indicator.data, indicator, item.style.base_color, true);

				if (typeof done == "function") {
					done();
				}
			}, {
				data: true
			});

		}

		function showInfo() {
			DialogService.fromTemplate('export', $scope);
		}

		function loadStateData(){
			$timeout(function() {
				//RESET COUNTRY FOR CORRECT VIEW, IF NOT: View would stay active
				vm.selectedCountry = {};
				getIndicator(function() {
					if ($state.params.iso) {
						getCountryByIso($state.params.iso);
						fetchNationData($state.params.iso);

						if ($state.params.countries) {
							var countries = $state.params.countries.split('-vs-');
							angular.forEach(countries, function(country) {
								addCompareCountry(country);
							});
							vm.activeTab = 2;
							VectorlayerService.gotoCountries($state.params.iso, vm.compareList);
						}
					}
					else{
						vm.selectedCountry = {};
					}
					if (typeof vm.ExportService.chapter != "undefined") {
						if(vm.ExportService.chapter.description){
								showInfo()
						}
					}
				});


			});
		}

		function activate() {
			loadStateData();
		}

		$scope.$watch('vm.selectedIndicator', function(n, o){
			if(n === o || typeof n.id == "undefined") return false;
			if(typeof o != "undefined"){
				if(n.id == o.id) return false;
			}
			vm.gotoIndicator();
		})
	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ConflictImportCtrl', ["Restangular", "toastr", "$state", function(Restangular, toastr, $state) {
		//
		var vm = this;
		vm.nations = [];
		vm.events = [];
		vm.sum = 0;

		vm.saveToDb = saveToDb;

		function saveToDb() {
			var data = {
				nations: vm.nations,
				events: vm.events
			};
			Restangular.all('/conflicts/import').post(data).then(function(data) {
				$state.go('app.conflict.index')
			});
		}

	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ConflictdetailsCtrl', ["$timeout", "$state", "$scope", "$rootScope", "VectorlayerService", "conflict", "conflicts", "nations", "DialogService", function($timeout, $state, $scope, $rootScope, VectorlayerService, conflict, conflicts, nations, DialogService) {
		//
		var vm = this;
		vm.conflict = conflict;
		vm.conflicts = nations;
		vm.conflictItems = [
			'territory',
			'secession',
			'autonomy',
			'system',
			'national_power',
			'international_power',
			'subnational_predominance',
			'resources',
			'other'
		];
		vm.showMethod = showMethod;
		vm.showCountries = false;
		vm.getTendency = getTendency;
		vm.linearScale = d3.scale.linear().domain([0, 5]).range([0, 256]);
		vm.colors = ['#d4ebf7', '#87cceb', '#36a8c6', '#268399', '#0e6377'];
		vm.relations = [];
		vm.countries = [];
		vm.showText = showText;
		vm.showCountriesButton = showCountriesButton;
		vm.circleOptions = {
			color: '#4fb0e5',
			field: 'int2015',
			size: 5,
			hideNumbering: true,
			width:65,
			height:65
		};

		activate();

		function activate() {
			//;
			$rootScope.greyed = true;
			nations.getList().then(function(response) {

				vm.conflicts = response;
				VectorlayerService.resetSelected();
				VectorlayerService.setData(vm.conflicts, vm.colors, true);
				VectorlayerService.setStyle(invertedStyle);
				VectorlayerService.countryClick(countryClick);
				VectorlayerService.resetSelected();

				//VectorlayerService.setSelectedFeature(vm.nation.iso, true);
				angular.forEach(vm.conflict.nations, function(nation) {
					var i = vm.relations.indexOf(nation.iso);
					if (i == -1) {
						vm.relations.push(nation.iso)
						vm.countries.push(nation);
						VectorlayerService.setSelectedFeature(nation.iso, true);
					}
				});


				VectorlayerService.paintCountries(invertedStyle);
				/*DataService.getOne('countries/bbox', vm.relations).then(function (data) {
					var southWest = L.latLng(data.coordinates[0][0][1], data.coordinates[0][0][0]),
						northEast = L.latLng(data.coordinates[0][2][1], data.coordinates[0][2][0]),
						bounds = L.latLngBounds(southWest, northEast);

					var pad = [
						[0, 0],
						[50, 50]
					];

					VectorlayerService.mapLayer.fitBounds(bounds, {
						padding: pad[1],
						maxZoom: 4
					});
				});*/
			});

		}

		function countryClick(evt, t) {

			var country = VectorlayerService.getNationByIso(evt.feature.properties['iso_a2']);
			if (typeof country['intensity'] != "undefined") {
				$state.go('app.conflict.index.nation', {
					iso: country.iso
				});
			}
		}

		function showText() {
			DialogService.fromTemplate('conflicttext', $scope);
		}

		function showMethod() {
			DialogService.fromTemplate('conflictmethode');
		}

		function invertedStyle(feature) {
			var style = {};
			var iso = feature.properties[VectorlayerService.data.iso2];
			var nation = VectorlayerService.getNationByIso(iso);
			var field = 'intensity';
			var colorPos = parseInt(vm.linearScale(parseFloat(nation[field]))) * 4; // parseInt(256 / vm.range.max * parseInt(nation[field])) * 4;

			var color = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',0.6)';
			style.color = 'rgba(0,0,0,0)';
			style.outline = {
				color: 'rgba(0,0,0,0)',
				size: 0
			};
			style.selected = {
				color: color,
				outline: {
					color: color,
					size: 1
				}
			};
			return style;
		}

		function getTendency() {
			if (vm.conflict == null) return "remove";
			if (vm.conflict.int2015 == vm.conflict.int2014)
				return "remove";
			if (vm.conflict.int2015 < vm.conflict.int2014)
				return "trending_down";

			return "trending_up";
		}

		function showCountriesButton() {
			if (vm.showCountries) return "arrow_drop_up";
			return "arrow_drop_down";
		}
	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ConflictitemsCtrl', ["$rootScope", function($rootScope) {
		//
		var vm = this;
		vm.showList = false;
		$rootScope.conflictItems = [
			'territory',
			'secession',
			'autonomy',
			'system',
			'national_power',
			'international_power',
			'subnational_predominace',
			'resources',
			'other'
		];
		vm.toggleItem = toggleItem;

		function toggleItem(item) {
			console.log(item, $rootScope.conflictItems);
			var i = $rootScope.conflictItems.indexOf(item);
			if (i > -1) {
				$rootScope.conflictItems.splice(i, 1);
			} else {
				$rootScope.conflictItems.push(item);
			}

			if ($rootScope.conflictItems.length == 0) {
				$rootScope.conflictItems = [
					'territory',
					'secession',
					'autonomy',
					'system',
					'national_power',
					'international_power',
					'subnational_predominace',
					'resources',
					'other'
				];
			}
		};
	}]);

})();
(function() {
	"use strict";

	angular.module('app.controllers').controller('ConflictnationCtrl', ["$timeout", "$state", "$rootScope", "nations", "nation", "VectorlayerService", "DataService", "DialogService", function($timeout, $state, $rootScope, nations, nation, VectorlayerService, DataService, DialogService) {
		//
		var vm = this;
		vm.nation = nation;
		vm.showMethod = showMethod;
		vm.linearScale = d3.scale.linear().domain([0, 5]).range([0, 256]);
		vm.colors = ['#d4ebf7', '#87cceb', '#36a8c6', '#268399', '#0e6377'];
		vm.relations = [];
		vm.featured = [];
		vm.conflict = null;
		vm.getTendency = getTendency;
		vm.circleOptions = {
			color: '#4fb0e5',
			field: 'intensity',
			size: 5,
			hideNumbering: true,
			width:65,
			height:65
		};
		activate();

		function activate() {

			$rootScope.greyed = true;
			$rootScope.featureItems = [];

			nations.getList().then(function(response) {
				vm.conflicts = response;
				vm.relations.push(vm.nation.iso);
				vm.featured = [];
				VectorlayerService.resetSelected(vm.nation.iso);
				VectorlayerService.setData(vm.conflicts, vm.colors, true);
				VectorlayerService.setStyle(invertedStyle);
				VectorlayerService.countryClick(countryClick);
				VectorlayerService.setSelectedFeature(vm.nation.iso, true);
				$rootScope.featureItems = [];
				angular.forEach(vm.nation.conflicts, function(conflict) {
					if (!vm.conflict) vm.conflict = conflict;
					if (conflict.int2015 > vm.conflict.int2015) {
						vm.conflict = conflict;
					}
					angular.forEach(conflict, function(item, key){
						if(item == 1 ){
							if(vm.featured.indexOf(key) == -1){
								vm.featured.push(key);
								$rootScope.featureItems = vm.featured;
							}
						}

					})
					angular.forEach(conflict.nations, function(nation) {
						var i = vm.relations.indexOf(nation.iso);
						if (i == -1 && nation.iso != vm.nation.iso) {
							vm.relations.push(nation.iso)
							VectorlayerService.setSelectedFeature(nation.iso, true);
						}
					});
				});

				VectorlayerService.paintCountries(invertedStyle);
				/*DataService.getOne('countries/bbox', vm.relations).then(function (data) {
					var southWest = L.latLng(data.coordinates[0][0][1], data.coordinates[0][0][0]),
						northEast = L.latLng(data.coordinates[0][2][1], data.coordinates[0][2][0]),
						bounds = L.latLngBounds(southWest, northEast);

					var pad = [
						[0, 0],
						[50, 50]
					];

					VectorlayerService.mapLayer.fitBounds(bounds, {
						padding: pad[1],
						maxZoom: 4
					});
				});*/
			})



		}


		function showMethod() {
			DialogService.fromTemplate('conflictmethode');
		}

		function getTendency() {
			if (vm.conflict == null) return "remove";
			if (vm.conflict.int2015 == vm.conflict.int2014)
				return "remove";
			if (vm.conflict.int2015 < vm.conflict.int2014)
				return "trending_down";

			return "trending_up";
		}

		function countryClick(evt, t) {

			var country = VectorlayerService.getNationByIso(evt.feature.properties['iso_a2']);
			if (typeof country['intensity'] != "undefined") {

				$state.go('app.conflict.index.nation', {
					iso: country.iso
				});
			}
		}

		function invertedStyle(feature) {
			var style = {};
			var iso = feature.properties[VectorlayerService.data.iso2];
			var nation = VectorlayerService.getNationByIso(iso);
			var field = 'intensity';
			var colorPos = parseInt(vm.linearScale(parseFloat(nation[field]))) * 4; // parseInt(256 / vm.range.max * parseInt(nation[field])) * 4;

			var color = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',0.6)';
			var colorFull = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',' + VectorlayerService.palette[colorPos + 3] + ')';
			style.color = 'rgba(0,0,0,0)';
			style.outline = {
				color: 'rgba(0,0,0,0)',
				size: 0
			};
			var outline = {
				color: color,
				size: 1
			};
			if (iso == vm.nation.iso) {
				outline = {
					color: 'rgba(54,56,59,0.8)',
					size: 2
				};
				color = color;
			}
			style.selected = {
				color: color,
				outline: outline
			};
			return style;
		}
	}]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('ConflictsCtrl', ["$timeout", "$state", "$rootScope", "$scope", "conflicts", "nations", "VectorlayerService", "Restangular", "DialogService", "Fullscreen", function ($timeout, $state, $rootScope, $scope, conflicts, nations, VectorlayerService, Restangular, DialogService, Fullscreen) {
		//

		var vm = this;
		vm.ready = false;
		vm.relations = [];
		vm.showMethod = showMethod;
		vm.goFullscreen = goFullscreen;
		vm.linearScale = d3.scale.linear().domain([0, 5]).range([0, 256]);
		vm.colors = ['#add9f0', '#87cceb', '#36a8c6', '#268399', '#005573'];
		vm.typesColors = {
			interstate: '#69d4c3',
			intrastate: '#b7b7b7',
			substate: '#ff9d27'
		};
		vm.active = {
			conflict: [],
			type: [1, 2, 3]
		};
		vm.toggleConflictFilter = toggleConflictFilter;
		vm.conflictFilter = null;


		activate();

		function activate() {
			$rootScope.greyed = true;
			VectorlayerService.setStyle(countriesStyle);
			VectorlayerService.countryClick(countryClick);
			nations.getList().then(function (response) {
				vm.nations = response;
				VectorlayerService.setData(vm.nations, vm.colors, true);
			});
			conflicts.getList().then(function (response) {
				vm.conflicts = response;
				calcIntensities();
			});

			//	$timeout(function() {

			//});
		}

		function goFullscreen() {

		 if (Fullscreen.isEnabled())
				Fullscreen.cancel();
		 else
				Fullscreen.all();

		 // Set Fullscreen to a specific element (bad practice)
		 // Fullscreen.enable( document.getElementById('img') )

	}
		function setValues() {
			vm.relations = [];
			vm.conflictFilterCount = 0;
			vm.conflictIntensities = {
				veryLow: 0,
				low: 0,
				mid: 0,
				high: 0,
				veryHigh: 0
			};
			vm.chartData = [{
				label: 1,
				value: 0,
				color: vm.colors[0]
			}, {
				label: 2,
				value: 0,
				color: vm.colors[1]
			}, {
				label: 3,
				value: 0,
				color: vm.colors[2]
			}, {
				label: 4,
				value: 0,
				color: vm.colors[3]
			}, {
				label: 5,
				value: 0,
				color: vm.colors[4]
			}];

			vm.conflictTypes = [{
				type: 'interstate',
				type_id: 1,
				color: '#69d4c3',
				count: 0
			}, {
				type: 'intrastate',
				count: 0,
				type_id: 2,
				color: '#b7b7b7'
			}, {
				type: 'substate',
				count: 0,
				type_id: 3,
				color: '#ff9d27'
			}];

		}

		function showMethod() {
			DialogService.fromTemplate('conflictmethode');
		}

		function toggleConflictFilter(type) {

			var i = vm.active.type.indexOf(type);
			if (i > -1) {
				vm.active.type.splice(i, 1);
			} else {
				vm.active.type.push(type);
			}
			if (vm.active.type.length == 0) {
				vm.active.type = [1, 2, 3];
			}
			calcIntensities();
		}

		function calcConflict(conflict) {
			vm.conflictFilterCount++;
			switch (conflict.type_id) {
			case 1:
				vm.conflictTypes[0].count++;
				break;
			case 2:
				vm.conflictTypes[1].count++;
				break;
			case 3:
				vm.conflictTypes[2].count++;
				break;
			default:

			}
			switch (conflict.int2015) {
			case 1:
				vm.conflictIntensities.veryLow++;
				vm.chartData[0].value++;
				break;
			case 2:
				vm.conflictIntensities.low++;
				vm.chartData[1].value++;
				break;
			case 3:
				vm.conflictIntensities.mid++;
				vm.chartData[2].value++;
				break;
			case 4:
				vm.conflictIntensities.high++;
				vm.chartData[3].value++;
				break;
			case 5:
				vm.conflictIntensities.veryHigh++;
				vm.chartData[4].value++;
				break;
			default:
			}
			addCountries(conflict.nations);
		}
		function addCountries(nations){
			angular.forEach(nations, function(nat){
				if(vm.relations.indexOf(nat.iso) == -1){
					vm.relations.push(nat.iso);
				}
			});
		}
		function calcIntensities() {
			setValues();
			angular.forEach(vm.conflicts, function (conflict) {
				if (vm.active.type.length) {
					if (vm.active.type.indexOf(conflict.type_id) > -1) {
						calcConflict(conflict);
					}
				} else {
					calcConflict(conflict);
				}
			});
			vm.ready = true;
			//VectorlayerService.redraw();
			VectorlayerService.paintCountries();
		}

		function countryClick(evt, t) {
			var country = VectorlayerService.getNationByIso(evt.feature.properties['iso_a2']);
			if (typeof country['intensity'] != "undefined") {
				$state.go('app.conflict.index.nation', {
					iso: country.iso
				});
			}
		}

		function countriesStyle(feature) {
			var style = {};
			var iso = feature.properties[VectorlayerService.data.iso2];
			var nation = VectorlayerService.getNationByIso(iso);

			var field = 'intensity';
			var type = feature.type;
			feature.selected = false;
			if(vm.relations.indexOf(iso) == -1){
				style.color = 'rgba(255,255,255,0)';
				style.outline = {
					color: 'rgba(255,255,255,0)',
					size: 1
				};
			}
			else{
				switch (type) {
				case 3: //'Polygon'
					if (typeof nation[field] != "undefined" && nation[field] != null && iso) {
						var colorPos = parseInt(vm.linearScale(parseFloat(nation[field]))) * 4; // parseInt(256 / vm.range.max * parseInt(nation[field])) * 4;
						var color = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',' + VectorlayerService.palette[colorPos + 3] + ')';
						style.color = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',0.6)'; //color;
						style.outline = {
							color: color,
							size: 1
						};
						style.selected = {
							color: 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',' + VectorlayerService.palette[colorPos + 3] + ')',
							outline: {
								color: 'rgba(66,66,66,0.9)',
								size: 2
							}
						};

					} else {
						style.color = 'rgba(255,255,255,0)';
						style.outline = {
							color: 'rgba(255,255,255,0)',
							size: 1
						};

					}
					break;
				}
			}


			return style;
		};
	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ExportCtrl', ["$state", "ExportService", function($state, ExportService) {
		//
		var vm = this;
		vm.exports = [];
		vm.ExportService = ExportService;
		vm.selection = [];
		vm.options = {
			drag: false,
			type: 'exports',
			allowMove: false,
			allowDrop: false,
			allowAdd: true,
			allowDelete: true,
			itemClick: function(id, name) {
				$state.go('app.index.exports.details', {
					id: id,
					name: name
				})
			},
			addClick: function() {
				$state.go('app.index.exports.details', {
					id: 0,
					name: 'new'
				})
			},
			deleteClick: function() {
				angular.forEach(vm.selection, function(item, key) {
					vm.ExportService.removeItem(item.id, function(data) {
						if ($state.params.id == item.id) {
							$state.go('app.index.exports');
						}
						var idx = vm.exports.indexOf(item);
						vm.ExportService.exports.splice(idx, 1);
						vm.selection = [];
					});
				});
				//$state.go('app.index.editor.indizes');
			}
		};




		vm.ExportService.getExports(function(data) {});

	}]);

})();
(function() {
	"use strict";

	angular.module('app.controllers').controller('ExportDetailsCtrl', ["$scope", "$state", "ExportService", function($scope, $state, ExportService) {
		//
		var vm = this;
		vm.ExportService = ExportService;
		vm.selected = [];
		vm.options = {
			exports: {
				onDrop: function(event, index, item, external) {
					item.indicator_id = item.id;
					item.type = 'indicator';
				},
				inserted: function(event, index, item, external) {

				},
				addClick: function() {
					$state.go('app.index.exports.details.add');
				},
				addContainerClick: function() {
					var item = {
						id: Date.now(),
						title: 'I am a group... name me',
						type: 'group'
					};
					vm.ExportService.exporter.items.push(item);

				},
				deleteClick: function() {
					angular.forEach(vm.selected, function(item, key) {
						removeItem(item, vm.ExportService.exporter.items);
						//ExportService.removeItem(vm,item.id);
						vm.selected = [];
					});
				},
				deleteDrop: function(event, item, external, type) {
					removeItem(item, vm.export.items);
					vm.selection = [];
				},
				save: function() {
					vm.ExportService.save(function(response) {

						$state.go('app.index.exports.details', {
							id: response.id,
							name: response.name
						});

					});
					// if(vm.export.id == 0 || ! vm.export.id){
					//   DataService.post('exports', vm.export).then(function(){
					//
					//   });
					// }
					// else{
					//   vm.item.save().then(function(response){
					//
					//   });
					// }
				}
			},
			style: {
				click: function(item) {
					$state.go('app.index.exports.details.style', {
						styleId: item.id,
						styleName: item.name
					})
				}
			},
			withSave: true,
			styleable: true,
			expandJustGroups: true
		};

		if ($state.params.id != 0) {
			vm.ExportService.getExport($state.params.id);
		} else {
			vm.ExportService.setExport({
				items: []
			});
		}


		function removeItem(item, list) {
			angular.forEach(list, function(entry, key) {
				if (entry.id == item.id) {
					list.splice(key, 1);
					return true;
				}
				if (entry.children) {
					var subresult = removeItem(item, entry.children);
					if (subresult) {
						return subresult;
					}
				}
			});
			return false;
		}
	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ExportLayoutCtrl', ["ExportService", "$state", "$timeout", function(ExportService,$state, $timeout){
        //
        var vm = this;
        vm.exporter = ExportService.exporter;
        activate();

        function activate(){
          $timeout(function(){
              vm.exporter = ExportService.exporter;
          });
            // ExportService.getExport($state.params.id, function(exporter){
            //   vm.exporter = exporter;
            // });
        }


    }]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ExportStyleCtrl', ["$scope", "$state", "$timeout", "ContentService", "ExportService", "IndizesService", "leafletData", "leafletMapEvents", "VectorlayerService", "CountriesService", "ColorHandleService", function($scope, $state, $timeout, ContentService, ExportService, IndizesService, leafletData, leafletMapEvents, VectorlayerService, CountriesService, ColorHandleService) {
		var vm = this;
		vm.ColorHandle = ColorHandleService;
		vm.exporter = {};
		vm.item = {};
		vm.colorHandles = [new vm.ColorHandle('rgba(0, 0, 0, 1.00)', 0.00), new vm.ColorHandle('rgba(0, 0, 0, 0.00)', 1.00)]
		vm.continentOptions = {
			onlyWithChildren: true
		};
		vm.gradient = [
			{
				color:'rgba(255,12,17,0.5)',
				pos: 0,
				alpha:1,
				id: Math.random()
			},
			{
				color:'#00ff00',
				pos: 50,
				alpha:1,
				id: Math.random()
			},
			{
				color:'#0000ff',
				pos: 100,
				alpha:1,
				id: Math.random()
			},
		]
		activate();

		function activate() {

			$timeout(function() {
				vm.exporter = ExportService.exporter;
				// if(!vm.exporter.items.length) $state.go('app.index.exports.details',{
				//   id: $state.params.id,
				//   name: $state.params.name
				// })
				vm.item = getActiveItem(vm.exporter.items, $state.params.styleId);
				if (typeof vm.item == "undefined") $state.go('app.index.exports.details', {
					id: $state.params.id,
					name: $state.params.name
				});
				if (!vm.item.style) {
					vm.item.style = {
						basemap_id: 0,
						fixed_title: false,
						fixed_description: false,
						search_box: true,
						share_options: true,
						zoom_controls: true,
						scroll_wheel_zoom: false,
						layer_selection: false,
						legends: true,
						full_screen: false,
						countries: []
					};
				}
				ContentService.fetchIndicatorWithData(vm.item.indicator_id, function(indicator) {
					vm.data = indicator.data;
					vm.structure = indicator;

					VectorlayerService.setData(indicator.data, indicator, vm.item.style.base_color, true);
					CountriesService.getContinents(function(continents) {
						vm.continents = continents
					}, vm.item.indicator_id);

				}, {
					data: true
				});
			});
		}

		function getActiveItem(list, id) {
			var found;
			angular.forEach(list, function(item) {
				if (item.id == id) {
					found = item;
				} else {
					if (item.children && !found)
						found = getActiveItem(item.children, id);
				}
			});
			return found;
		};


		$scope.$watch('vm.item.style', function(n, o) {
			if (n === o || !n.basemap) return;
			VectorlayerService.setBaseLayer(n.basemap);
			VectorlayerService.paint(n.base_color);
		}, true);
	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ExportedCtrl', ["$rootScope", "$state", "ExportService", "VectorlayerService", "IndizesService", function($rootScope, $state, ExportService, VectorlayerService, IndizesService){
        //
        var vm = this;
        vm.ExportService = ExportService;
        activate();

        function activate(){
          vm.ExportService.getExport($state.params.id, function(exporter){});
        }
        $rootScope.sidebarOpen = false;
    }]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('FullListFitlerCtrl', ["categories", "ContentService", function(categories, ContentService) {
    var vm = this;
    vm.categories = categories;

    vm.filter = [];
    vm.options = {
      categories:{
        selectionChanged: function(){
          vm.filter =[];
          angular.forEach(vm.selection, function(item){
            listCategories(item);
          });
          ContentService.filterList('indicators',catFilter,vm.selection);
          ContentService.filterList('indices',catFilter,vm.selection);
        }
      }
    };
    function addToFilter(id){
      var idx = vm.filter.indexOf(id);
      if(idx == -1){
        vm.filter.push(id);
      }
    }
    function listCategories(cat){
      addToFilter(cat.id);
      if(cat.children){
        angular.forEach(cat.children, function(child){
          addToFilter(child.id);
          listCategories(child);
        });
      }
    };
    function catFilter(item){
				if(item.categories.length > 0 && vm.filter.length > 0){
					var found = false;
					angular.forEach(item.categories, function(cat){
						if(vm.filter.indexOf(cat.id) > -1){
							found = true;
						}
					});
					return found;
				}
				return true;
		}
  }]);
})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('FullListCtrl', ["$scope", "$state", "ContentService", "categories", "indicators", "indices", function($scope,$state, ContentService, categories, indicators, indices) {
		//
		var vm = this;
		vm.categories = categories;
		vm.indicators = indicators;
		vm.indices = indices;
		vm.filter = {
			sort: 'title',
			toggle: function(){
				if($state.current.name == 'app.index.list'){
					$state.go('app.index.list.filter',{filter:'categories'})
				}
				else{
					ContentService.resetFilter('indicators');
					ContentService.resetFilter('indices');
					$state.go('app.index.list')
				}
			}
		};
		
		$scope.$watch(function(){return ContentService.content.indicators}, function(n, o){
			if(n === o )return;
			vm.indicators = n;
		});
		$scope.$watch(function(){return ContentService.content.indices}, function(n, o){
			if(n === o )return;
			vm.indices = n;
		});
	}]);
})();

(function(){
	"use strict";

	angular.module('app.controllers').controller('HeaderCtrl', ["$scope", "$mdMedia", "leafletData", "$state", "$localStorage", "$rootScope", "$auth", "toastr", "$timeout", function($scope,$mdMedia, leafletData, $state,$localStorage, $rootScope, $auth, toastr, $timeout){

		var vm = this;
		$rootScope.isAuthenticated = isAuthenticated;
		vm.doLogin = doLogin;
		vm.doLogout = doLogout;
		vm.openMenu = openMenu;
		vm.toggleView = toggleView;

		vm.authenticate = function(provider){
			$auth.authenticate(provider);
		};

		function isAuthenticated(){
			 return $auth.isAuthenticated();
		}
		function doLogin(){
			$auth.login(vm.user).then(function(response){
				toastr.success('You have successfully signed in');
				//$state.go($rootScope.previousPage.state.name || 'app.home', $rootScope.previousPage.params);
			}).catch(function(response){
				toastr.error('Please check your email and password', 'Something went wrong');
			})
		}
		function doLogout(){
			if($auth.isAuthenticated()){
				$auth.logout().then(function(data){
					if($state.current.auth){
						$state.go('app.home');
					}
					toastr.success('You have successfully logged out');
				}).catch(function(response){

				});
			}
		}

    function openMenu($mdOpenMenu, ev) {
      $mdOpenMenu(ev);
    };
		function toggleView(){
			$rootScope.looseLayout = !$rootScope.looseLayout;
			$localStorage.fullView = $rootScope.looseLayout;
			resetMapSize();
		}
		function resetMapSize(){
			$timeout(function(){
				leafletData.getMap('map').then(function (map) {
					map.invalidateSize();
				})
			}, 300);
		}
		$rootScope.sidebarOpen = true;
		$scope.$watch(function(){
			return $rootScope.current_page;
		}, function(newPage){
			$scope.current_page = newPage || 'Page Name';
		});
		$scope.$watch('$root.sidebarOpen', function(n,o){
			if(n == o) return false;
			resetMapSize();
		});
		$scope.$watch(function() { return $mdMedia('sm') }, function(small) {
	    vm.smallScreen = small;
	  });

	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('HomeCtrl', ["DataService", function(DataService){
        var vm = this;
      
        DataService.getAll('index', {is_official: true}).then(function(response){
          vm.indizes = response;
        });

    }]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('ImportcsvCtrl', ["$mdDialog", function ($mdDialog) {
		this.settings = {
			printLayout: true,
			showRuler: true,
			showSpellingSuggestions: true,
			presentationMode: 'edit'
		};

		this.sampleAction = function (name, ev) {
			$mdDialog.show($mdDialog.alert()
				.title(name)
				.content('You triggered the "' + name + '" action')
				.ok('Great')
				.targetEvent(ev)
			);
		};

    this.openCsvUpload = function() {
			$mdDialog.show({
					//controller: DialogController,
					templateUrl: '/views/app/importcsv/csvUploadDialog.html',
	        bindToController: true,
				})
				.then(function (answer) {

				}, function () {

				});
		};
	}])


})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('IndexCtrl', ["$scope", "$window", "$mdSidenav", "$rootScope", "$filter", "$state", "$timeout", "toastr", "VectorlayerService", "data", "countries", "leafletData", "DataService", function($scope, $window,$mdSidenav, $rootScope, $filter, $state, $timeout, toastr, VectorlayerService, data, countries, leafletData, DataService) {
		// Variable definitions
		var vm = this;
		vm.map = null;

		vm.dataServer = data.promises.data;
		vm.structureServer = data.promises.structure;
		vm.countryList = countries;

		vm.structure = "";
		vm.mvtScource = VectorlayerService.getLayer();
		vm.mvtCountryLayer = VectorlayerService.getName();
		vm.mvtCountryLayerGeom = vm.mvtCountryLayer + "_geom";
		vm.iso_field = VectorlayerService.data.iso2;
		vm.nodeParent = {};
		vm.selectedTab = 0;
		vm.current = "";
		vm.tabContent = "";
		vm.toggleButton = 'arrow_drop_down';
		vm.menueOpen = true;
		vm.info = false;
		vm.closeIcon = 'close';
		vm.compare = {
			active: false,
			countries: []
		};
		vm.display = {
			selectedCat: ''
		};

		//Function definitons
		vm.showTabContent = showTabContent;
		vm.setTab = setTab;
		vm.setState = setState;
		vm.setCurrent = setCurrent;
		vm.setSelectedFeature = setSelectedFeature;
		vm.getRank = getRank;
		vm.getOffset = getOffset;
		vm.getTendency = getTendency;

		vm.checkComparison = checkComparison;
		vm.toggleOpen = toggleOpen;
		vm.toggleInfo = toggleInfo;
		vm.toggleDetails = toggleDetails;
		vm.toggleComparison = toggleComparison;
		vm.toggleCountrieList = toggleCountrieList;
		vm.mapGotoCountry = mapGotoCountry;
		vm.goBack = goBack;
		vm.goToIndex = goToIndex;

		vm.calcTree = calcTree;

		vm.isPrelast = isPrelast;

		activate();

		function activate() {

			vm.structureServer.then(function(structure) {
				vm.dataServer.then(function(data) {
					vm.data = data;
					vm.structure = structure;
					if (!vm.structure.style) {
						vm.structure.style = {
							'name': 'default',
							'title': 'Default',
							'base_color': 'rgba(128, 243, 198,1)'
						};
					}
					createCanvas(vm.structure.style.base_color);
					drawCountries();
					if ($state.params.item) {
						vm.setState($state.params.item);
						calcRank();
					}
					if ($state.params.countries) {
						vm.setTab(2);
						vm.compare.countries.push(vm.current);
						vm.compare.active = true;
						$rootScope.greyed = true;
						var countries = $state.params.countries.split('-vs-');
						angular.forEach(countries, function(iso) {
							vm.compare.countries.push(getNationByIso(iso));
						});
						//onsole.log(vm.compare.countries);
						countries.push(vm.current.iso);
						DataService.getOne('countries/bbox', countries).then(function(data) {
							vm.bbox = data;
						});
					}
				})
			});

		}
		// TODO: MOVE TO GLOBAL
		function goBack() {
			$window.history.back();
		}
		function goToIndex(item){

			$state.go('app.index.show.selected',{
				id:item.id,
				name:item.name,
				item:$state.params['item']
			});
		}
		function isPrelast(){
			var levelsFound = false;
			angular.forEach(vm.structure.children, function(child){
				if(child.children.length > 0){
					levelsFound = true;
				}
			});
			return levelsFound;
		}
		function showTabContent(content) {
			if (content == '' && vm.tabContent == '') {
				vm.tabContent = 'rank';
			} else {
				vm.tabContent = content;
			}
			vm.toggleButton = vm.tabContent ? 'arrow_drop_up' : 'arrow_drop_down';
		};

		function setState(item) {
			vm.setCurrent(getNationByIso(item));
			fetchNationData(item);
		};

		function toggleOpen() {
			vm.menueOpen = !vm.menueOpen;
			vm.closeIcon = vm.menueOpen == true ? 'chevron_left' : 'chevron_right';
		}

		function setCurrent(nat) {
			vm.current = nat;

			vm.setSelectedFeature();

			$mdSidenav('left').open();
		};

		function setSelectedFeature(iso) {
			if (vm.mvtSource) {
				$timeout(function() {
					vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[vm.current.iso].selected = true;
				})
			}
		};

		//TODO: MOVE TO SERVICE
		function calcRank() {
			if (!vm.current) {
				return;
			}
			var rank = 0;
			var kack = [];
			angular.forEach(vm.data, function(item) {
				item[vm.structure.name] = parseFloat(item[vm.structure.name]);
				item['score'] = parseFloat(item[vm.structure.name]);
			});
			//vm.data = $filter('orderBy')(vm.data, 'score', 'iso', true);
			rank = vm.data.indexOf(vm.current) + 1;
			vm.current[vm.structure.name + '_rank'] = rank;
			vm.circleOptions = {
				color: vm.structure.style.base_color || '#00ccaa',
				field: vm.structure.name + '_rank',
				size: vm.data.length
			};

			return rank;
		}

		function getRank(country) {

			var rank = vm.data.indexOf(country) + 1;
			return rank;
		}

		//TODO: REMOVE, NOW GOT OWN URL
		function toggleInfo() {
			vm.info = !vm.info;
		};

		//TODO: PUT IN VIEW
		function toggleDetails() {
			return vm.details = !vm.details;
		};

		//TODO: MOVE TO SERVICE
		function fetchNationData(iso) {
			DataService.getOne('index/' + $state.params.id, iso).then(function(data) {
				vm.current.data = data;
				mapGotoCountry(iso);
			});
		}

		//TODO: MOVE TO MAP SERVICE
		function mapGotoCountry(iso) {
			if (!$state.params.countries) {
				DataService.getOne('countries/bbox', [iso]).then(function(data) {
					vm.bbox = data;
				});
			}

		}

		function checkComparison(want) {
			if (want && !vm.compare.active || !want && vm.compare.active) {
				vm.toggleComparison();
			}
		}

		function toggleComparison() {
			vm.compare.countries = [vm.current];
			vm.compare.active = !vm.compare.active;
			if (vm.compare.active) {
				vm.setTab(2);
				$rootScope.greyed = true;
				vm.mvtSource.options.mutexToggle = false;
				vm.mvtSource.setStyle(invertedStyle);

			} else {
				$rootScope.greyed = false;
				angular.forEach(vm.mvtSource.layers[vm.mvtCountryLayerGeom].features, function(feature) {
					feature.selected = false;
				});
				vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[vm.current.iso].selected = true;
				vm.mvtSource.options.mutexToggle = true;
				vm.mvtSource.setStyle(countriesStyle);
				DataService.getOne('countries/bbox', [vm.current.iso]).then(function(data) {
					vm.bbox = data;
				});
				$state.go('app.index.show.selected', {
					id: $state.params.id,
					name: $state.params.name,
					item: $state.params.item
				})
			}
			//vm.mvtSource.redraw();
		};

		function toggleCountrieList(country) {
			var found = false;
			angular.forEach(vm.compare.countries, function(nat, key) {
				if (country == nat && nat != vm.current) {
					vm.compare.countries.splice(key, 1);
					found = true;
				}
			});
			if (!found) {
				vm.compare.countries.push(country);
			};
			var isos = [];
			var compare = [];
			angular.forEach(vm.compare.countries, function(item, key) {
				isos.push(item.iso);
				if (item[vm.structure.iso] != vm.current.iso) {
					compare.push(item.iso);
				}
			});
			if (isos.length > 1) {
				DataService.getOne('countries/bbox', isos).then(function(data) {
					vm.bbox = data;
				});
				$state.go('app.index.show.selected.compare', {
					index: $state.params.index,
					item: $state.params.item,
					countries: compare.join('-vs-')
				});
			}

			return !found;
		};

		//TODO: MOVE TO OWN DIRECTIVE
		function getOffset() {
			if (!vm.current) {
				return 0;
			}
			//console.log(vm.getRank(vm.current));
			return (vm.getRank(vm.current) - 2) * 17;
		};

		//TODO: MOVE TO OWN DIRECTIVE
		function getTendency() {
			if (!vm.current) {
				return 'arrow_drop_down'
			}
			return vm.current.percent_change > 0 ? 'arrow_drop_up' : 'arrow_drop_down';
		};

		//TODO: MOVE TO VIEW
		function setTab(i) {
			//vm.activeTab = i;
		}

		function getParent(data) {
			var items = [];
			angular.forEach(data.children, function(item) {
				if (item.column_name == vm.display.selectedCat.type) {
					vm.nodeParent = data;
				}
				getParent(item);
			});
			return items;
		}

		function calcTree() {
			getParent(vm.structure);
		};

		//TODO: MOVE TO SERVICE COUNTRY
		function getNationByName(name) {
			var nation = {};
			angular.forEach(vm.data, function(nat) {
				if (nat.country == name) {
					nation = nat;
				}
			});
			return nation;
		};

		//TODO: MOVE TO SERVICE COUNTRY
		function getNationByIso(iso) {
			var nation = {};
			angular.forEach(vm.data, function(nat) {
				if (nat.iso == iso) {
					nation = nat;
				}
			});

			return nation;
		};

		//TODO: MOVE TO SERVICE MAP
		function createCanvas(color) {

			vm.canvas = document.createElement('canvas');
			vm.canvas.width = 280;
			vm.canvas.height = 10;
			vm.ctx = vm.canvas.getContext('2d');
			var gradient = vm.ctx.createLinearGradient(0, 0, 280, 10);
			gradient.addColorStop(1, 'rgba(255,255,255,0)');
			gradient.addColorStop(0.53, color || 'rgba(128, 243, 198,1)');
			gradient.addColorStop(0, 'rgba(102,102,102,1)');
			vm.ctx.fillStyle = gradient;
			vm.ctx.fillRect(0, 0, 280, 10);
			vm.palette = vm.ctx.getImageData(0, 0, 257, 1).data;
			//document.getElementsByTagName('body')[0].appendChild(vm.canvas);
		}

		//TODO: MOVE TO SERVICE MAP
		function updateCanvas(color) {
			var gradient = vm.ctx.createLinearGradient(0, 0, 280, 10);
			gradient.addColorStop(1, 'rgba(255,255,255,0)');
			gradient.addColorStop(0.53, color || 'rgba(128, 243, 198,1)');
			gradient.addColorStop(0, 'rgba(102,102,102,1)');
			vm.ctx.fillStyle = gradient;
			vm.ctx.fillRect(0, 0, 280, 10);
			vm.palette = vm.ctx.getImageData(0, 0, 257, 1).data;
			//document.getElementsByTagName('body')[0].appendChild(vm.canvas);
		};

		//TODO: MOVE TO SERVICE MAP
		function invertedStyle(feature) {
			var style = {};
			var iso = feature.properties[vm.iso_field];
			var nation = getNationByIso(iso);
			var field = vm.structure.name || 'score';

			//TODO: MAX VALUE INSTEAD OF 100
			var colorPos = parseInt(256 / 100 * nation[field]) * 4;

			var color = 'rgba(' + vm.palette[colorPos] + ', ' + vm.palette[colorPos + 1] + ', ' + vm.palette[colorPos + 2] + ',' + vm.palette[colorPos + 3] + ')';
			style.color = 'rgba(0,0,0,0)';
			style.outline = {
				color: 'rgba(0,0,0,0)',
				size: 0
			};
			style.selected = {
				color: color,
				outline: {
					color: 'rgba(0,0,0,0.3)',
					size: 2
				}
			};
			return style;
		};

		//TODO: MOVE TO SERVICE
		function countriesStyle(feature) {

			var style = {};
			var iso = feature.properties[vm.iso_field];

			var nation = getNationByIso(iso);
			var field = vm.structure.name || 'score';
			var type = feature.type;
			if (iso != vm.current.iso) {
				feature.selected = false;
			}

			switch (type) {
				case 3: //'Polygon'
					if (typeof nation[field] != "undefined") {

						//TODO: MAX VALUE INSTEAD OF 100
						var colorPos = parseInt(256 / 100 * parseInt(nation[field])) * 4;

						var color = 'rgba(' + vm.palette[colorPos] + ', ' + vm.palette[colorPos + 1] + ', ' + vm.palette[colorPos + 2] + ',' + vm.palette[colorPos + 3] + ')';
						style.color = 'rgba(' + vm.palette[colorPos] + ', ' + vm.palette[colorPos + 1] + ', ' + vm.palette[colorPos + 2] + ',0.6)'; //color;
						style.outline = {
							color: color,
							size: 1
						};
						style.selected = {
							color: 'rgba(' + vm.palette[colorPos] + ', ' + vm.palette[colorPos + 1] + ', ' + vm.palette[colorPos + 2] + ',0.3)',
							outline: {
								color: 'rgba(66,66,66,0.9)',
								size: 2
							}
						};
						break;
					} else {

						style.color = 'rgba(255,255,255,0)';
						style.outline = {
							color: 'rgba(255,255,255,0)',
							size: 1
						};
					}
			}
			//console.log(feature.properties.name)
			if (feature.layer.name === VectorlayerService.getName() + '_geom') {
				style.staticLabel = function() {
					var style = {
						html: feature.properties.name,
						iconSize: [125, 30],
						cssClass: 'label-icon-text'
					};
					return style;
				};
			}
			return style;
		};

		$scope.$watch('vm.current', function(n, o) {
			if (n === o) {
				return;
			}

			if (n.iso) {
				if (o.iso) {
					vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[o.iso].selected = false;
				}
				calcRank();
				fetchNationData(n.iso);
				vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[n.iso].selected = true;
				if ($state.current.name == 'app.index.show.selected' || $state.current.name == 'app.index.show') {
					$state.go('app.index.show.selected', {
						id: $state.params.id,
						name: $state.params.name,
						item: n.iso
					});
				}
			} else {
				$state.go('app.index.show', {
					id: $state.params.id,
					name: $state.params.id
				});
			}
		});
		$scope.$watch('vm.display.selectedCat', function(n, o) {
			if (n === o) {
				return
			}
			console.log(n);
			if (n.color)
				updateCanvas(n.color);
			else {
				updateCanvas('rgba(128, 243, 198,1)');
			};
			vm.calcTree();
			/*if (vm.compare.active) {
				$timeout(function () {
					//vm.mvtSource.setStyle(invertedStyle);
					//vm.mvtSource.redraw();
				});
			} else {
				$timeout(function () {
					//vm.mvtSource.setStyle(countriesStyle);
					//vm.mvtSource.redraw();
				});
			}*/

			if (vm.current.iso) {
				if ($state.params.countries) {
					$state.go('app.index.show.selected.compare', {
						id: n.id,
						name: n.name,
						item: vm.current.iso,
						countries: $state.params.countries
					})
				} else {
					$state.go('app.index.show.selected', {
						id: n.id,
						name: n.name,
						item: vm.current.iso
					})
				}
			} else {
				$state.go('app.index.show', {
					id: n.id,
					name: n.name
				})
			}

		});

		//TODO: MOVE TO SERVICE MAP
		$scope.$watch('vm.bbox', function(n, o) {
			if (n === o) {
				return;
			}
			/*var lat = [n.coordinates[0][0][1],
					[n.coordinates[0][0][0]]
				],
				lng = [n.coordinates[0][2][1],
					[n.coordinates[0][2][0]]
				]*/
			var southWest = L.latLng(n.coordinates[0][0][1], n.coordinates[0][0][0]),
				northEast = L.latLng(n.coordinates[0][2][1], n.coordinates[0][2][0]),
				bounds = L.latLngBounds(southWest, northEast);

			var pad = [
				[0, 0],
				[100, 100]
			];
			if (vm.compare.active) {
				pad = [
					[0, 0],
					[0, 0]
				];
			}
			vm.map.fitBounds(bounds, {
				padding: pad[1],
				maxZoom: 6
			});
		});

		$scope.$on("$stateChangeSuccess", function(event, toState, toParams, fromState, fromParams) {

			/*console.log($)
			if (toState.name == "app.index.show") {
					vm.current = "";
			} else if (toState.name == "app.index.show.selected") {

				if(toParams.index != fromParams.index){
					console.log('anders')
				}
				console.log(toParams.item);
				vm.setState(toParams.item);
				calcRank();
				//vm.mvtSource.options.mutexToggle = true;
				DataService.getOne('nations', vm.current.iso).then(function (data) {
					vm.current.data = data;
					DataService.getOne('nations/bbox', [vm.current.iso]).then(function (data) {
						vm.bbox = data;
					});
				});
			} else if (toState.name == "app.index.show.selected.compare") {
				vm.setState(toParams.item);
				//$scope.activeTab = 2;
				/*DataService.getOne('nations', toParams.item).then(function (data) {
					vm.country = data;
					DataService.getOne('nations/bbox', [vm.country.iso]).then(function (data) {
						vm.bbox = data;
					});
				});
			} else {
				vm.current = "";
			}*/
		});

		//TODO: MOVE TO SERVICE MAP
		function drawCountries() {
			var map = VectorlayerService.getMap();
				vm.map = map;
				vm.mvtSource = VectorlayerService.getLayer();
				$timeout(function() {
					if ($state.params.countries) {
						vm.mvtSource.options.mutexToggle = false;
						vm.mvtSource.setStyle(invertedStyle);
						vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[vm.current.iso].selected = true;
						var countries = $state.params.countries.split('-vs-');
						angular.forEach(countries, function(iso) {
							vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[iso].selected = true;
						});

					} else {
						vm.mvtSource.setStyle(countriesStyle);
						if ($state.params.item) {
							vm.mvtSource.layers[vm.mvtCountryLayerGeom].features[$state.params.item].selected = true;
						}
					}
					//vm.mvtSource.redraw();
				});
				vm.mvtSource.options.onClick = function(evt, t) {

					if (!vm.compare.active) {
						var c = getNationByIso(evt.feature.properties[vm.iso_field]);
						if (typeof c[vm.structure.name] != "undefined") {
							$mdSidenav('left').open();
							vm.current = getNationByIso(evt.feature.properties[vm.iso_field]);
						} else {
							toastr.error('No info about this location!', evt.feature.properties.admin);
						}
					} else {
						var c = getNationByIso(evt.feature.properties[vm.iso_field]);
						if (typeof c[vm.structure.name] != "undefined") {
							vm.toggleCountrieList(c);
						} else {
							toastr.error('No info about this location!', evt.feature.properties.admin);
						}
					}
				}

		}
	}]);
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexbaseCtrl', ["$scope", "$state", function ($scope,$state) {
		//
    $scope.$state = $state;
	}]);
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexCheckCtrl', ["$scope", "$state", "$filter", "$timeout", "toastr", "DialogService", "IndexService", function ($scope, $state, $filter, $timeout, toastr, DialogService, IndexService) {


		var vm = this;
		vm.data = IndexService.getData();
		vm.meta = IndexService.getMeta();
		vm.errors = IndexService.getErrors();
		vm.iso_errors = IndexService.getIsoErrors();
		vm.selected = [];
    vm.yearfilter = '';
		vm.deleteData = deleteData;
		vm.deleteSelected = deleteSelected;
		vm.deleteColumn = deleteColumn;
		vm.onOrderChange = onOrderChange;
		vm.onPaginationChange = onPaginationChange;
		vm.checkForErrors = checkForErrors;
		vm.selectErrors = selectErrors;
    vm.searchForErrors = searchForErrors;
		vm.showUploadContainer = false;
		//vm.editColumnData = editColumnData;
		vm.editRow = editRow;
    vm.years = [];
		vm.query = {
			filter: '',
			order: '-errors',
			limit: 15,
			page: 1
		};

		activate();

		function activate() {
			checkData();
    	getYears();
		}

		function checkData() {
			if (!vm.data) {
				$state.go('app.index.create');
			}
		}
    function getYears(){
			$timeout(function(){
				var dat = ($filter('groupBy')(vm.data, 'data.'+vm.meta.country_field ));
	      vm.years = [];
				var length = 0;
				var index = null;
			  angular.forEach(dat,function(entry, i){
					if(entry.length > length){
						index = i
					}
				});
	      angular.forEach(dat[index],function(entry){
	        vm.years.push(entry.data[vm.meta.year_field])
	      });
				vm.yearfilter = vm.years[0];
			});


    }
		function search(predicate) {
			vm.filter = predicate;
		};

		function onOrderChange(order) {
			return vm.data = $filter('orderBy')(vm.data, [order], true)
		};

		function onPaginationChange(page, limit) {
			//console.log(page, limit);
			//return $nutrition.desserts.get($scope.query, success).$promise;
		};

		function checkForErrors(item) {
			return item.errors.length > 0 ? 'md-warn' : '';
		}

		/*function editColumnData(e, key){
		  vm.toEdit = key;
		  DialogService.fromTemplate('editcolumn', $scope);
		}*/
		function deleteColumn(e, key) {
			angular.forEach(vm.data, function (item, k) {
				angular.forEach(item.data, function (field, l) {
					if (l == key) {
						angular.forEach(vm.data[k].errors, function(error, i){
							if(error.column == key){
								if (error.type == 2 || error.type == 3) {
									IndexService.reduceIsoError();
								}
								IndexService.reduceError();
								vm.data[k].errors.splice(i, 1);
							}
						})
						delete vm.data[k].data[key];
					}
				})
			});
			IndexService.setToLocalStorage();
			return false;
		}

		function deleteSelected() {
			angular.forEach(vm.selected, function (item, key) {
				angular.forEach(item.errors, function (error, k) {
					if (error.type == 2 || error.type == 3) {
						vm.iso_errors--;
						IndexService.reduceIsoError();
					}
					vm.errors--;
					IndexService.reduceError();
				})
				vm.data.splice(vm.data.indexOf(item), 1);
			});
			vm.selected = [];
			IndexService.setToLocalStorage();
			if (vm.data.length == 0) {
				vm.deleteData();
				$state.go('app.index.create');
			}
		}

		function selectErrors() {
			vm.selected = [];
			angular.forEach(vm.data, function (item, key) {
				if (item.errors.length) {
					vm.selected.push(item);
				}
			})
		}

		function editRow() {
			vm.row = vm.selected[0];
			DialogService.fromTemplate('editrow', $scope);
		}

		function deleteData() {
			vm.data = [];
		}

		function searchForErrors() {
			angular.forEach(vm.data, function (row, k) {
				angular.forEach(row.data, function (item, key) {
					if (isNaN(item) || item < 0) {
						if (item.toString().toUpperCase() == "#NA" || item < 0 || item.toString().toUpperCase().indexOf('N/A') > -1) {
							var error = {
								type: "1",
								message: "Field in row is not valid for database use!",
								column: key,
								value: item
							};
							row.errors.push(error)
							vm.errors.push(error);
						}
					}
				});
			});
		}

	}]);


})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('IndexCheckSidebarCtrl', ["$rootScope", "$scope", "$state", "IndexService", "DataService", "DialogService", "toastr", function($rootScope, $scope, $state, IndexService, DataService, DialogService, toastr) {
		var vm = this;
		vm.data = IndexService.getData();
		vm.meta = IndexService.getMeta();
		vm.errors = IndexService.getErrors();
		vm.iso_errors = IndexService.getIsoErrors();
		vm.clearErrors = clearErrors;
		vm.fetchIso = fetchIso;

		activate();

		function activate() {

			//vm.myData = DataService.getAll('me/data');
			//checkMyData();
		}

		/*function checkMyData() {
			vm.extendingChoices = [];
			if (vm.data.length) {
				vm.myData.then(function(imports) {
					angular.forEach(imports, function(entry) {
						var found = 0;
						angular.forEach(vm.data[0].meta.fields, function(field) {
							var columns = JSON.parse(entry.meta_data);
							angular.forEach(columns, function(column) {
								if (column.column == field) {
									found++;
								}
							})
						});
						if (found >= vm.data[0].meta.fields.length - 3) {
							vm.extendingChoices.push(entry);
						}
					})
					if (vm.extendingChoices.length) {
						if(vm.meta.year_field){
							vm.meta.year = vm.data[0].data[0][vm.meta.year_field];
						}
						DialogService.fromTemplate('extendData', $scope);
					}
				});
			}
		}*/

		function clearErrors() {
			angular.forEach(vm.data, function(row, key) {
				angular.forEach(row.data, function(item, k) {
					if (isNaN(item) || item < 0) {
						if ( item.toString().toUpperCase() == "#NA"/* || item < 0*/ || item.toString().toUpperCase().indexOf('N/A') > -1) {
							vm.data[key].data[k] = null;
							row.errors.splice(0, 1);
							vm.errors.splice(0, 1);
						}
					}
				});
				if (!row.data[vm.meta.iso_field]) {
					var error = {
						type: "2",
						message: "Iso field is not valid!",
						value: row.data[vm.meta.iso_field],
						column: vm.meta.iso_field,
						row: key
					};
					var errorFound = false;
					angular.forEach(row.errors, function(error, key) {
						if (error.type == 2) {
							errorFound = true;
						}
					})
					if (!errorFound) {
						row.errors.push(error);
						vm.iso_errors.push(error);
					}
				}
			});
			IndexService.setToLocalStorage();
		}

		function fetchIso() {

			if (!vm.meta.iso_field) {
				toastr.error('Check your selection for the ISO field', 'Column not specified!');
				return false;
			}
			if (!vm.meta.country_field) {
				toastr.error('Check your selection for the COUNTRY field', 'Column not specified!');
				return false;
			}
			if (vm.meta.country_field == vm.meta.iso_field) {
				toastr.error('ISO field and COUNTRY field can not be the same', 'Selection error!');
				return false;
			}
			$rootScope.stateIsLoading = true;
			vm.notFound = [];
			var entries = [];
			var isoCheck = 0;
			var isoType = 'iso-3166-2';
			angular.forEach(vm.data, function(item, key) {
				if (item.data[vm.meta.iso_field]) {
					isoCheck += item.data[vm.meta.iso_field].length == 3 ? 1 : 0;
				}
				switch (item.data[vm.meta.country_field]) {
					case 'Cabo Verde':
						item.data[vm.meta.country_field] = 'Cape Verde';
						break;
					case "Democratic Peoples Republic of Korea":
						item.data[vm.meta.country_field] = "Democratic People's Republic of Korea";
						break;
					case "Cote d'Ivoire":
						item.data[vm.meta.country_field] = "Ivory Coast";
						break;
					case "Lao Peoples Democratic Republic":
						item.data[vm.meta.country_field] = "Lao People's Democratic Republic";
						break;
					default:
						break;
				}
				entries.push({
					iso: item.data[vm.meta.iso_field],
					name: item.data[vm.meta.country_field]
				});
			});
			var isoType = isoCheck >= (entries.length / 2) ? 'iso-3166-1' : 'iso-3166-2';
			IndexService.resetToSelect();
			DataService.post('countries/byIsoNames', {
				data: entries,
				iso: isoType
			}).then(function(response) {
				$rootScope.stateIsLoading = false;
				angular.forEach(response, function(country, key) {
					angular.forEach(vm.data, function(item, k) {
						if (country.name == item.data[vm.meta.country_field]) {
							if (country.data.length > 1) {
								var toSelect = {
									entry: item,
									options: country.data
								};
								IndexService.addToSelect(toSelect);
							} else if(country.data.length == 1){
								if (typeof country.data != "undefined") {
									vm.data[k].data[vm.meta.iso_field] = country.data[0].iso;
									vm.data[k].data[vm.meta.country_field] = country.data[0].admin;
									if (item.errors.length) {
										angular.forEach(item.errors, function(error, e) {
											if (error.type == 2 || error.type == 3) {
												vm.iso_errors.splice(0, 1);
												item.errors.splice(e, 1);
											} else if (error.type == 1) {
												if (error.column == vm.meta.iso_field) {
													vm.errors.splice(0, 1);
													item.errors.splice(e, 1);
												}
											}
										});

									}
								} else {
									//console.log(vm.data[k]);
									var error = {
										type: "3",
										message: "Could not locate a valid iso name!",
										column: vm.meta.country_field
									};
									var errorFound = false;
									angular.forEach(vm.data[k].errors, function(error, i) {
										console.log(error);
										if (error.type == 3) {
											errorFound = true;
										}
									})
									if (!errorFound) {
										IndexService.addIsoError(error);
										item.errors.push(error);
									}
								}
							}
						}
					});
				});
				vm.iso_checked = true;
				IndexService.setToLocalStorage();
				if (IndexService.getToSelect().length) {
					DialogService.fromTemplate('selectisofetchers');
				}
			}, function(response) {
				$rootScope.stateIsLoading = false;
				toastr.error('Please check your field selections', response.data.message);
			});

		}
		vm.extendData = extendData;

		function extendData() {
			var insertData = {
				data: []
			};
			var meta = [],
				fields = [];
			angular.forEach(vm.data, function(item, key) {
				if (item.errors.length == 0) {
					item.data[0].year = vm.meta.year;
					if(vm.meta.year_field && vm.meta.year_field != "year") {
						delete item.data[vm.meta.year_field];
					}
					insertData.data.push(item.data);
				} else {
					toastr.error('There are some errors left!', 'Huch!');
					return;
				}
			});
			console.log(insertData);
			DataService.post('data/tables/' + vm.addDataTo.table_name + '/insert', insertData).then(function(res) {
				if (res == true) {
					toastr.success(insertData.data.length + ' items importet to ' + vm.meta.name, 'Success');
					vm.data = IndexService.clear();
					$state.go('app.index.mydata');
				}
			});
		}

	}]);
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexFinalCtrl', ["$state", "IndexService", "DataService", "toastr", function ($state, IndexService, DataService, toastr) {
		//
		var vm = this;
		vm.data = IndexService.getData();
		vm.meta = IndexService.getMeta();
		vm.errors = IndexService.getErrors();
		vm.indicators = IndexService.getIndicators();
		vm.saveData = saveData;


		activate();

		function activate() {
			/*if (vm.meta.year_field) {
				vm.meta.year = vm.data[0].data[vm.meta.year_field];
			}*/
			checkData();
		}

		function checkData() {
			if (!vm.data) {
				$state.go('app.index.create');
			}
		}

		function saveData(valid) {
			if (valid) {
				var insertData = {
					data: []
				};
				var noYears = [];
				var insertMeta = [],
					fields = [];
				vm.loading = true;
				angular.forEach(vm.data, function (item, key) {
					if (item.errors.length == 0) {
						if(item.data[vm.meta.year_field]){
							item.data.year = item.data[vm.meta.year_field];

							if(vm.meta.year_field && vm.meta.year_field != "year") {
								delete item.data[vm.meta.year_field];
							}

							vm.meta.iso_type = item.data[vm.meta.iso_field].length == 3 ? 'iso-3166-1' : 'iso-3166-2';
							insertData.data.push(item.data);
						}
						else{
							noYears.push(item);
						}


					} else {
						toastr.error('There are some errors left!', 'Huch!');
						return;
					}
				});
				angular.forEach(vm.indicators, function (item, key) {
					if (key != vm.meta.iso_field && key != vm.meta.country_field) {
						var style_id = 0;
						if (typeof vm.indicators[key].style != "undefined") {
							style_id = vm.indicators[key].style.id;
						}
						var field = {
							'column': key,
							'title': vm.indicators[key].title,
							'description': vm.indicators[key].description,
							'measure_type_id': vm.indicators[key].type.id || 0,
							'is_public': vm.indicators[key].is_public || 0,
							'style_id': style_id,
							'dataprovider_id': vm.indicators[key].dataprovider.id || 0
						};
						var categories = [];
						angular.forEach(vm.indicators[key].categories, function (cat) {
							categories.push(cat.id);
						});
						field.categories = categories;
						fields.push(field);
					}
				});
				vm.meta.fields = fields;
				if(noYears.length > 0){
					toastr.error("for "+noYears.length + " entries", 'No year value found!');
				}

				DataService.post('data/tables', vm.meta).then(function (response) {
					DataService.post('data/tables/' + response.table_name + '/insert', insertData).then(function (res) {
						if (res == true) {
							toastr.success(insertData.data.length + ' items importet to ' + vm.meta.name, 'Success');
							IndexService.clear();
							$state.go('app.index.mydata');
							vm.data = [];
							vm.step = 0;
						}
						vm.loading = false;
					});
				}, function (response) {
					if (response.message) {
						toastr.error(response.message, 'Ouch!');

					}
					vm.loading = false;
				})
			}
		}
	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexFinalMenuCtrl', ["IndexService", function(IndexService){
      var vm = this;
      vm.data = IndexService.getData();
      vm.meta = IndexService.getMeta();
      vm.indicators = IndexService.getIndicators();
      vm.indicatorsLength = Object.keys(vm.indicators).length;

    }]);
})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexMetaCtrl', ["$scope", "$state", "VectorlayerService", "$timeout", "IndexService", "leafletData", "toastr", function($scope, $state, VectorlayerService,$timeout,IndexService,leafletData, toastr){
        //

        var vm = this;
        vm.min = 10000000;
        vm.max = 0;
        vm.indicators = [];
        vm.scale = "";
        vm.data = IndexService.getData();
        vm.meta = IndexService.getMeta();
        vm.errors = IndexService.getErrors();
        vm.indicator = IndexService.activeIndicator();
        vm.countriesStyle = countriesStyle;
        VectorlayerService.createCanvas('#ff0000');

        activate();

        function activate(){
          checkData();
        }

        function checkData(){
          if(!vm.data){
            $state.go('app.index.create');
          }
        }

        $scope.$watch(function(){ return IndexService.activeIndicator()}, function(n,o){
          if(n === o)return;
          vm.indicator = n;
          vm.min = 10000000;
          vm.max = 0;
          if(vm.indicator.style){
            VectorlayerService.updateCanvas(vm.indicator.style.base_color);
          }
          drawCountries();
            IndexService.setToLocalStorage();
        });

        $scope.$watch('vm.indicator', function(n,o){
          if(n === o) return;
          if(typeof n.style_id != "undefined" ){
            if(n.style_id != o.style_id){
              if(n.style){
                VectorlayerService.updateCanvas(n.style.base_color);
              }
              else{
                  VectorlayerService.updateCanvas('#ff0000');
              }
              drawCountries();
            }
          }
          else{
            if(typeof n.categories != "undefined"){
              if(n.categories.length){
                VectorlayerService.updateCanvas(n.categories[0].style.base_color);
              }
              else{
                VectorlayerService.updateCanvas('#ff0000');
              }
            }
            drawCountries();
          }
          IndexService.setActiveIndicatorData(n);
          IndexService.setToLocalStorage();
        },true);


        function minMax(){
          vm.min = 10000000;
          vm.max = 0;
          angular.forEach(vm.data, function(item, key){
              vm.min = Math.min(item.data[vm.indicator.column_name], vm.min);
              vm.max = Math.max(item.data[vm.indicator.column_name], vm.max);
          });
          vm.scale = d3.scale.linear().domain([vm.min,vm.max]).range([0,100]);
        }
        function getValueByIso(iso){
          var value = 0;
          angular.forEach(vm.data, function(item, key){
             if(item.data[vm.meta.iso_field] == iso){
               value = item.data[vm.indicator.column_name];
             }
          });
          return value;
        }
        function countriesStyle(feature) {
    			var style = {};
    			var iso = feature.properties.iso_a2;
    			var value = getValueByIso(iso) || vm.min;
    			var field = vm.indicator.column_name;
    			var type = feature.type;

    			switch (type) {
    			case 3: //'Polygon'

    					var colorPos = parseInt(256 / 100 * parseInt(vm.scale(value))) * 4;
    					var color = 'rgba(' + VectorlayerService.getColor(colorPos) + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',' + VectorlayerService.getColor(colorPos + 3) + ')';
              style.color = 'rgba(' + VectorlayerService.getColor(colorPos)  + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',0.6)'; //color;
    					style.outline = {
    						color: color,
    						size: 1
    					};
    					style.selected = {
    						color: 'rgba(' + VectorlayerService.getColor(colorPos) + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',0.3)',
    						outline: {
    							color: 'rgba(66,66,66,0.9)',
    							size: 2
    						}
    					};
    					break;

    			}

    			if (feature.layer.name === VectorlayerService.getName()+'_geom') {
    				style.staticLabel = function () {
    					var style = {
    						html: feature.properties.name,
    						iconSize: [125, 30],
    						cssClass: 'label-icon-text'
    					};
    					return style;
    				};
    			}
    			return style;
    		}
        function setCountries(){
          vm.mvtSource.setStyle(countriesStyle);
          vm.mvtSource.redraw();
        }
        function drawCountries() {
          minMax();
    			leafletData.getMap('map').then(function (map) {
    				vm.map = map;
    				vm.mvtSource = VectorlayerService.getLayer();
    				$timeout(function () {
    						setCountries();
    				});
    			});
    		}
    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexMetaMenuCtrl', ["$scope", "$state", "toastr", "DataService", "DialogService", "IndexService", function($scope,$state, toastr, DataService,DialogService, IndexService){
      var vm = this;
      vm.data = IndexService.getData();
      vm.meta = IndexService.getMeta();
      IndexService.resetIndicator();
      vm.indicators = IndexService.getIndicators();
      vm.selectForEditing = selectForEditing;
      vm.checkFull = checkFull;
      vm.checkBase = checkBase;
      vm.checkAll = checkAll;
      vm.saveData = saveData;


      function selectForEditing(key){
        if(typeof IndexService.getIndicator(key) == "undefined"){
          IndexService.setIndicator(key,{
            column_name:key,
            title:key
          });
        }
        vm.editingItem = key;
        vm.indicator = IndexService.getIndicator(key);
        IndexService.setToLocalStorage();
      }
      function checkBase(item){
        if(typeof item == "undefined") return false;
  			if (item.title && item.type && item.dataprovider && item.title.length >= 3) {
  				return true;
  			}
  			return false;
  		}
  		function checkFull(item){
        if(typeof item == "undefined" || typeof item.categories == "undefined") return false;
  			return checkBase(item) && item.categories.length ? true : false;
  		}
      function checkAll(){
        var done = 0;
        angular.forEach(vm.indicators, function(indicator){
          if(checkBase(indicator)){
            done ++;
          }
        });
        //console.log(done, Object.keys(vm.indicators).length);
        if(done == Object.keys(vm.indicators).length){
          return true;
        }
        return false;
      }
      function saveData() {

          if(!vm.meta.year_field && !vm.meta.year){
            DialogService.fromTemplate('addYear', $scope);
            return false;
          }
  				var insertData = {
  					data: []
  				};
  				var noYears = [];
  				var insertMeta = [],
  					fields = [];
  				vm.loading = true;
  				angular.forEach(vm.data, function (item, key) {
  					if (item.errors.length == 0) {
  						if(item.data[vm.meta.year_field]){
  							item.data.year = item.data[vm.meta.year_field];

  							if(vm.meta.year_field && vm.meta.year_field != "year") {
  								delete item.data[vm.meta.year_field];
  							}

  							vm.meta.iso_type = item.data[vm.meta.iso_field].length == 3 ? 'iso-3166-1' : 'iso-3166-2';
  							insertData.data.push(item.data);
  						}
  						else{
                if(vm.meta.year){
                  item.data.year = vm.meta.year;
                  vm.meta.iso_type = item.data[vm.meta.iso_field].length == 3 ? 'iso-3166-1' : 'iso-3166-2';
    							insertData.data.push(item.data);
                }
                else{
                  	noYears.push(item);
                }


  						}


  					} else {
  						toastr.error('There are some errors left!', 'Huch!');
  						return;
  					}
  				});
  				angular.forEach(vm.indicators, function (item, key) {
  					if (key != vm.meta.iso_field && key != vm.meta.country_field) {
  						var style_id = 0;
  						if (typeof vm.indicators[key].style != "undefined") {
  							style_id = vm.indicators[key].style.id;
  						}
  						var field = {
  							'column': key,
  							'title': vm.indicators[key].title,
  							'description': vm.indicators[key].description,
  							'measure_type_id': vm.indicators[key].type.id || 0,
  							'is_public': vm.indicators[key].is_public || 0,
  							'style_id': style_id,
  							'dataprovider_id': vm.indicators[key].dataprovider.id || 0
  						};
  						var categories = [];
  						angular.forEach(vm.indicators[key].categories, function (cat) {
  							categories.push(cat.id);
  						});
  						field.categories = categories;
  						fields.push(field);
  					}
  				});
  				vm.meta.fields = fields;
  				if(noYears.length > 0){
  					toastr.error("for "+noYears.length + " entries", 'No year value found!');
            return false;
  				}

  				DataService.post('data/tables', vm.meta).then(function (response) {
  					DataService.post('data/tables/' + response.table_name + '/insert', insertData).then(function (res) {
  						if (res == true) {
  							toastr.success(insertData.data.length + ' items importet to ' + vm.meta.name, 'Success');
  							IndexService.clear();
  							$state.go('app.index.mydata');
  							vm.data = [];
  							vm.step = 0;
  						}
  						vm.loading = false;
  					});
  				}, function (response) {
  					if (response.message) {
  						toastr.error(response.message, 'Ouch!');

  					}
  					vm.loading = false;
  				})

  		}
      function copyToOthers(){
      /*  vm.preProvider = vm.indicators[o.column_name].dataprovider;
        vm.preMeasure = vm.indicators[o.column_name].measure_type_id;
        vm.preType = vm.indicators[o.column_name].type;
        vm.preCategories = vm.indicators[o.column_name].categories;
        vm.prePublic = vm.indicators[o.column_name].is_public;
        vm.preStyle = vm.indicators[o.column_name].style;

        DialogService.fromTemplate('copyprovider', $scope);*/
      }
     $scope.$watch(function(){ return IndexService.activeIndicator()}, function(n,o){
        if(n === o)return;
        vm.indicators[n.column_name] = n;
      },true);
      $scope.$watch(function(){ return IndexService.activeIndicator()}, function(n,o){
        if (n === o || typeof o == "undefined" || o == null) return;
        if(!vm.askedToReplicate) {
          vm.preProvider = vm.indicators[o.column_name].dataprovider;
          vm.preMeasure = vm.indicators[o.column_name].measure_type_id;
          vm.preType = vm.indicators[o.column_name].type;
          vm.preCategories = vm.indicators[o.column_name].categories;
          vm.prePublic = vm.indicators[o.column_name].is_public;
          vm.preStyle = vm.indicators[o.column_name].style;

          DialogService.fromTemplate('copyprovider', $scope);
        } else {
          //n.dataprovider = vm.doProviders ? vm.preProvider : [];
          //n.measure_type_id = vm.doMeasures ? vm.preMeasure : 0;
          //n.categories = vm.doCategories ? vm.preCategories: [];
          //n.is_public = vm.doPublic ? vm.prePublic: false;
        }

      });
    }]);
})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexMyDataCtrl', function(){
        //
    });

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexMyDataEntryCtrl', ["UserService", function(UserService){
      var vm = this;
      vm.data = UserService.myData();
    }]);
})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexMyDataMenuCtrl', ["UserService", function(UserService){
      var vm = this;

      vm.data = [];

      activate();

      function activate(){
        UserService.myData().then(function(data){
          vm.data = data;
            convertInfo();
        })

      }
      function convertInfo(){
        console.log(vm.data);
        angular.forEach(vm.data, function(item){
            item.meta = JSON.parse(item.meta_data);
        })

      }
    }]);
})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('IndexcreatorCtrl', ["$scope", "DialogService", "DataService", "$timeout", "$state", "$filter", "leafletData", "toastr", "IconsService", "IndexService", "VectorlayerService", function($scope, DialogService,DataService, $timeout,$state, $filter, leafletData, toastr, IconsService,IndexService, VectorlayerService){

        //TODO: Check if there is data in storage to finish
      /*  console.log($state);
        if($state.current.name == 'app.index.create'){
          if(IndexService.getData().length){
            if(confirm('Existing Data. Go On?')){
              $state.go('app.index.check');
            }
            else{
              IndexService.clear();
            }
          }
        }*/

        var vm = this;
        vm.map = null;
        vm.data = [];
        vm.toSelect = [];
        vm.selected = [];
        vm.selectedRows = [];
        vm.selectedResources =[];
        vm.sortedResources = [];

        vm.groups = [];
        vm.myData = [];
        vm.addDataTo = {};
        vm.selectedForGroup = [];
        vm.iso_errors = 0;
        vm.iso_checked = false;
        vm.saveDisabled = false;
        vm.selectedIndex = 0;
        vm.step = 0;
        vm.openClose = openClose;
        //vm.search = search;

        vm.listResources = listResources;
        vm.toggleListResources = toggleListResources;
        vm.selectedResource = selectedResource;
        vm.toggleResource = toggleResource;
        vm.increasePercentage = increasePercentage;
        vm.decreasePercentage = decreasePercentage;
        vm.toggleGroupSelection = toggleGroupSelection;
        vm.existsInGroupSelection = existsInGroupSelection;
        vm.addGroup = addGroup;
        vm.cloneSelection = cloneSelection;
        vm.editEntry = editEntry;
        vm.removeEntry = removeEntry;
        vm.saveIndex = saveIndex;

        vm.icons = IconsService.getList();

        vm.meta = {
          iso_field: '',
          country_field:'',
          table:[]
        };
        vm.query = {
          filter: '',
          order: '-errors',
          limit: 15,
          page: 1
        };

        /*vm.treeOptions = {
          beforeDrop:function(event){
            if(event.dest.nodesScope != event.source.nodesScope){
              var idx = event.dest.nodesScope.$modelValue.indexOf(event.source.nodeScope.$modelValue);
              if(idx > -1){
                 event.source.nodeScope.$$apply = false;
                 toastr.error('Only one element of a kind per group possible!', 'Not allowed!')
              }
            }
          },
          dropped:function(event){
            calcPercentage(vm.groups);
          }
        };*/

        //Run Startup-Funcitons
        activate();

        function activate(){
          //clearMap();
          IndexService.resetLocalStorage();
        }
        function openClose(active){
          return active ? 'remove' : 'add';
        }
        function clearLayerStyle(feature){
      			var style = {
              color:'rgba(255,255,255,0)',
              outline: {
    						color: 'rgba(255,255,255,0)',
    						size: 1
    					}
            };
      			return style;
        }
        function clearMap(){
          	leafletData.getMap('map').then(function (map) {
              vm.mvtSource = VectorlayerService.getLayer();
              $timeout(function(){
                vm.mvtSource.setStyle(clearLayerStyle);
              })
            });
        }


        function toggleListResources(){
          vm.showResources = !vm.showResources;
          if(vm.showResources){
            vm.listResources();
          }
        }
        function listResources(){
          if(!vm.resources){
            DataService.getAll('data/tables').then(function(response){
              vm.resources = response;
              vm.selectedResources = [], vm.sortedResources = [];
            })
          }

        }
        function selectedResource(resource){
          return vm.selectedResources.indexOf(resource) > -1 ? true : false;
        }
        function deleteFromGroup(resource, list){
          angular.forEach(list, function(item, key){
              //if(typeof item.isGroup == "undefined"){
                if(item == resource){
                  list.splice(key, 1);
                  vm.selectedForGroup.splice(vm.selectedForGroup.indexOf(item), 1);
                  vm.selectedResources.splice(vm.selectedResources.indexOf(item),1);
                }
              //}
              deleteFromGroup(resource, item.nodes);
          });
        }
        function toggleResource(resource){
          var idx = vm.selectedResources.indexOf(resource);
          if( idx > -1){
            vm.selectedResources.splice(idx, 1);
            deleteFromGroup(resource, vm.groups);
          }
          else{
            vm.selectedResources.push(resource);
            if(vm.selectedForGroup.length == 1 && typeof vm.selectedForGroup[0].isGroup != "undefined"){
              vm.selectedForGroup[0].nodes.push(resource);
            }
            else{
                vm.groups.push(resource);
            }
          }

          //calcPercentage(vm.sortedResources);
        }
        function calcPercentage(nodes){
          angular.forEach(nodes, function(node, key){
            nodes[key].weight = parseInt(100 / nodes.length);
            calcPercentage(nodes.node);
          });
        }
        function increasePercentage(item){
          console.log(item);
        }
        function decreasePercentage(item){
          console.log(item)
        }
        function toggleGroupSelection(item){
          var idx = vm.selectedForGroup.indexOf(item);
          if( idx > -1){
            vm.selectedForGroup.splice(idx, 1);
          }
          else{
            vm.selectedForGroup.push(item);
          }
        }
        function existsInGroupSelection(item){
          return vm.selectedForGroup.indexOf(item) > -1;
        }
        function addGroup(){
          var newGroup = {
            title:'Group',
            isGroup:true,
            nodes:[]
          };

          if(vm.selectedForGroup.length == 1 && typeof vm.selectedForGroup[0].isGroup != "undefined"){
            vm.selectedForGroup[0].nodes.push(newGroup);
          }
          else if(vm.selectedForGroup.length > 0 ){
              angular.forEach(vm.selectedForGroup, function(item, key){
                  newGroup.nodes.push(item);
                  deleteFromGroup(item, vm.selectedForGroup);
              });
              vm.groups.push(newGroup);
              vm.selectedForGroup = [];
          }
          else{
            vm.groups.push(newGroup);
          }
        }
        function cloneSelection(){
          var newGroup = {
            title:'Cloned Elements',
            isGroup:true,
            nodes:[]
          };
          angular.forEach(vm.selectedForGroup, function(item, key){
            newGroup.nodes.push(item);
          });
          vm.groups.push(newGroup);
          vm.selectedForGroup = [];
        }
        function editEntry(item){
          vm.editItem = item;
        }
        function removeEntry(item, list){
            deleteFromGroup(item, list);
        }
        function saveIndex(){
          if(vm.saveDisabled){
            return;
          }
          vm.saveDisabled = true;
          if(typeof vm.newIndex == 'undefined'){
            toastr.error('You need to enter a title!','Info missing');
            vm.saveDisabled = false;
            return;
          }
          if(!vm.newIndex.title){
            toastr.error('You need to enter a title!','Info missing');
            vm.saveDisabled = false;
            return;
          }
          vm.newIndex.data = vm.groups;
          DataService.post('index', vm.newIndex).then(function(response){
            vm.saveDisabled = false;
            toastr.success('Your Index has been created', 'Success'),
            $state.go('app.index.show', {index:response.name});
          },function(response){
            vm.saveDisabled = false;
            toastr.error(response.message,'Upps!!');
          });
        }
        /*$scope.$on("$stateChangeSuccess", function (event, toState, toParams, fromState, fromParams) {
          if(!vm.data.length){
            $state.go('app.index.create');
          }
          else{
            switch (toState.name) {
              case 'app.index.create':
                  vm.step = 0;
                break;
              case 'app.index.create.basic':
                  console.log(vm.data);
                    vm.step = 1;
                    checkMyData();
                  break;
              case 'app.index.create.check':
                  vm.step = 2;
                  vm.showUploadContainer = false;
                break;
              case 'app.index.create.meta':
                  vm.step = 3;
                    vm.showUploadContainer = false;
                  break;
              case 'app.index.create.final':
                  vm.step = 4;
                    vm.showUploadContainer = false;
                  break;
              default:
                break;
            }
          }
        });*/
    }]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexeditorcategoryCtrl', ["$state", "category", "categories", "DataService", "ContentService", function ($state, category, categories, DataService,ContentService) {
    var vm = this;
    vm.category = category;
		vm.categories = categories;
		vm.options = {
			globalSave:true,
			postDone:function(data){
				$state.go('app.index.editor.categories.category', {id:data.id})
			},
		}
  }]);
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexeditorCtrl', ["$scope", "$filter", "$timeout", "$state", "indicators", "indices", "styles", "categories", "DataService", "ContentService", "toastr", function ($scope, $filter, $timeout,$state, indicators, indices, styles, categories, DataService,ContentService, toastr) {
		//
		var vm = this;

		vm.categories = categories;
		vm.composits = indices;
		vm.styles = styles;
		vm.indicators = indicators;
		vm.checkTabContent = checkTabContent;

		vm.active = 0;
		vm.selectedTab = 0;
		vm.selection = {
			indices:[],
			indicators:[],
			styles:[],
			categories:[]
		};


		vm.options = {
			composits:{
				drag:false,
				type:'composits',
				allowMove:false,
				allowDrop:false,
				allowAdd:true,
				allowDelete:true,
				itemClick: function(id, name){
					$state.go('app.index.editor.indizes.data', {id:id, name:name})
				},
				addClick:function(){
					$state.go('app.index.editor.indizes.data', {id:0, name: 'new'})
				},
				deleteClick:function(){
					angular.forEach(vm.selection.indices,function(item, key){
						ContentService.removeItem(item.id).then(function(data){
							if($state.params.id == item.id){
								$state.go('app.index.editor.indizes');
							}
							vm.selection.indices = [];
						});
					});
					//$state.go('app.index.editor.indizes');
				}
			},
			categories:{
				drag:false,
				type:'categories',
				allowAdd:true,
				allowDelete:true,
				addClick:function(){
					$state.go('app.index.editor.categories.category', {id:'new'})
				},
				itemClick: function(id, name){

					$state.go('app.index.editor.categories.category', {id:id})
				},
				deleteClick:function(){
					angular.forEach(vm.selection.categories,function(item, key){
						ContentService.removeCategory(item.id).then(function(data){
							if($state.params.id == item.id){
								$state.go('app.index.editor.categories');
							}
							vm.selection.categories = [];
						});
					});
					//$state.go('app.index.editor.categories');
				}

			},
			styles:{
				drag:false,
				type:'styles',
				withColor:true
			}
		};


		function checkTabContent(index){
			switch (index) {
				case 1:
						$state.go('app.index.editor.indicators');
					break;
				case 2:
						$state.go('app.index.editor.categories');
					break;
				case 0:
						if(typeof $state.params.id != "undefined"){
								$state.go('app.index.editor.indizes.data',{
									id:$state.params.id
								});
						}
						else{
								$state.go('app.index.editor.indizes');
						}
					break;
				case 3:

					break;
				default:

			}
		}

		$scope.$on('$stateChangeSuccess', function(event, toState, toParams, fromState, fromParams){
		  if(typeof toParams.id == "undefined"){
				vm.active = 0;
			}
			else{
				vm.active = toParams.id;
			}
			if(toState.name.indexOf('app.index.editor.indicators') != -1){
				vm.selectedTab = 1;
				//activate(toParams);
			}
			else if(toState.name.indexOf('app.index.editor.categories') != -1){
				vm.selectedTab = 2;
			}
			else if(toState.name.indexOf('app.index.editor.indizes') != -1){
				vm.selectedTab = 0;
			}
		});
	}]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexeditorindicatorCtrl', ["$scope", "$state", "$timeout", "VectorlayerService", "leafletData", "ContentService", "indicator", function ($scope, $state,$timeout, VectorlayerService, leafletData, ContentService, indicator) {
		//
		var vm = this;
    vm.indicator = indicator;
		vm.scale = "";
		vm.min = 10000000;
		vm.max = 0;
		vm.selected = 0;
		setActive();

		ContentService.getIndicatorData($state.params.id).then(function(data){
			var base_color = '#ff0000';
			if(typeof vm.indicator.style == "undefined"){
				angular.forEach(vm.indicator.categories, function(cat){
					if(typeof cat.style != "undefined"){
						base_color = cat.style.base_color;
					}
				});
			}
			else if(vm.indicator.style){
				base_color = vm.indicator.style.base_color;
			}
			VectorlayerService.createCanvas(base_color );
			vm.data = data;
			minMax();
			drawCountries();
		});
		function setActive(){
			if($state.current.name == 'app.index.editor.indicator.details'){
				if($state.params.entry == "infographic"){
					vm.selected = 1;
				}
				else if($state.params.entry == "indizes"){
					vm.selected = 2;
				}
				else if($state.params.entry == "style"){
					vm.selected = 3;
				}
				else if($state.params.entry == "categories"){
					vm.selected = 4;
				}
				else{
					vm.selected = 0;
				}
			}
		}
		function minMax(){
			vm.min = 10000000;
			vm.max = 0;
			angular.forEach(vm.data, function(item, key){
					vm.min = Math.min(item.score, vm.min);
					vm.max = Math.max(item.score, vm.max);
			});
			vm.scale = d3.scale.linear().domain([vm.min,vm.max]).range([0,100]);
		}
		function getValueByIso(iso){
			var value = 0;
			angular.forEach(vm.data, function(item, key){
				 if(item.iso == iso){
					 value = item.score;
				 }
			});
			return value;
		}
		function countriesStyle(feature) {
			var style = {};
			var iso = feature.properties.iso_a2;
			var value = getValueByIso(iso) || vm.min;
			var type = feature.type;

			switch (type) {
				case 3: //'Polygon'
					var colorPos = parseInt(256 / 100 * parseInt(vm.scale(value))) * 4;
					var color = 'rgba(' + VectorlayerService.getColor(colorPos) + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',' + VectorlayerService.getColor(colorPos + 3) + ')';
					style.color = 'rgba(' + VectorlayerService.getColor(colorPos)  + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',0.6)'; //color;
					style.outline = {
						color: color,
						size: 1
					};
					style.selected = {
						color: 'rgba(' + VectorlayerService.getColor(colorPos) + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',0.3)',
						outline: {
							color: 'rgba(66,66,66,0.9)',
							size: 2
						}
					};
					break;

			}
			return style;
		}
		function drawCountries() {
			minMax();
			leafletData.getMap('map').then(function (map) {
				vm.map = map;
				vm.mvtSource = VectorlayerService.getLayer();
				$timeout(function () {
						vm.mvtSource.setStyle(countriesStyle);
					//vm.mvtSource.redraw();
				});
			});
		}

		$scope.$on('$stateChangeSuccess', function(){
			setActive();
		});

	}]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexinidcatorsCtrl', ["indicators", "DataService", "ContentService", function (indicators, DataService,ContentService) {
		//
    var vm = this;
    vm.indicators = indicators;


  }])
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndexeditorindizesCtrl', ["$scope", "$state", "$timeout", "VectorlayerService", "leafletData", "ContentService", "index", function ($scope, $state,$timeout, VectorlayerService, leafletData, ContentService, index) {
		//
		var vm = this;
    //vm.indicator = indicator;
    vm.index = index;
		vm.scale = "";
		vm.min = 10000000;
		vm.max = 0;
		vm.selected = [];
		setActive();
    vm.options = {
      indizes:{
        addClick: function(){
          $state.go('app.index.editor.indizes.data.add');
        },
				addContainerClick:function(){
					var item = {
						title: 'I am a group... name me'
					};
					vm.index.children.push(item);
				},
				deleteClick:function(){
					console.log(vm);
					angular.forEach(vm.selected,function(item, key){
						ContentService.removeItem(item.id).then(function(data){
							removeItem(item,vm.index.children);
							vm.selected = [];
						});
					});
				},
				deleteDrop: function(event,item,external,type){
					ContentService.removeItem(item.id).then(function(data){
						removeItem(item,vm.index.children);
						vm.selection = [];
					});
				}
      },
      withSave: true
    }

		active();


		function active(){

		}
		function removeItem(item, list){
			angular.forEach(list, function(entry, key){
				if(entry.id == item.id){
					list.splice(key, 1);
					return true;
				}
				if(entry.children){
					var subresult = removeItem(item, entry.children);
					if(subresult){
						return subresult;
					}
				}
			});
			return false;
		}
		/*ContentService.getIndicatorData($state.params.id).then(function(data){
			var base_color = '#ff0000';
			if(typeof vm.indicator.style == "undefined"){
				angular.forEach(vm.indicator.categories, function(cat){
					if(typeof cat.style != "undefined"){
						base_color = cat.style.base_color;
					}
				});
			}
			else if(vm.indicator.style){
				base_color = vm.indicator.style.base_color;
			}
			VectorlayerService.createCanvas(base_color );
			vm.data = data;
			minMax();
			drawCountries();
		});*/

		function setActive(){
		/*	if($state.current.name == 'app.index.editor.indicator.details'){
				if($state.params.entry == "infographic"){
					vm.selected = 1;
				}
				else if($state.params.entry == "indizes"){
					vm.selected = 2;
				}
				else if($state.params.entry == "style"){
					vm.selected = 3;
				}
				else if($state.params.entry == "categories"){
					vm.selected = 4;
				}
				else{
					vm.selected = 0;
				}
			}*/
		}
		function minMax(){
			vm.min = 10000000;
			vm.max = 0;
			angular.forEach(vm.data, function(item, key){
					vm.min = Math.min(item.score, vm.min);
					vm.max = Math.max(item.score, vm.max);
			});
			vm.scale = d3.scale.linear().domain([vm.min,vm.max]).range([0,100]);
		}
		function getValueByIso(iso){
			var value = 0;
			angular.forEach(vm.data, function(item, key){
				 if(item.iso == iso){
					 value = item.score;
				 }
			});
			return value;
		}
		function countriesStyle(feature) {
			var style = {};
			var iso = feature.properties.iso_a2;
			var value = getValueByIso(iso) || vm.min;
			var type = feature.type;

			switch (type) {
				case 3: //'Polygon'
					var colorPos = parseInt(256 / 100 * parseInt(vm.scale(value))) * 4;
					var color = 'rgba(' + VectorlayerService.getColor(colorPos) + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',' + VectorlayerService.getColor(colorPos + 3) + ')';
					style.color = 'rgba(' + VectorlayerService.getColor(colorPos)  + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',0.6)'; //color;
					style.outline = {
						color: color,
						size: 1
					};
					style.selected = {
						color: 'rgba(' + VectorlayerService.getColor(colorPos) + ', ' + VectorlayerService.getColor(colorPos + 1) + ', ' + VectorlayerService.getColor(colorPos + 2) + ',0.3)',
						outline: {
							color: 'rgba(66,66,66,0.9)',
							size: 2
						}
					};
					break;

			}
			return style;
		}
		function drawCountries() {
			minMax();
			leafletData.getMap('map').then(function (map) {
				vm.map = map;
				vm.mvtSource = VectorlayerService.getLayer();
				$timeout(function () {
						vm.mvtSource.setStyle(countriesStyle);
					//vm.mvtSource.redraw();
				});
			});
		}

		$scope.$on('$stateChangeSuccess', function(){
			setActive();
		});

	}]);

})();

(function(){
    "use strict";
    angular.module('app.controllers').controller('IndexinfoCtrl', ["IndizesService", function(IndizesService){
        var vm = this;
        vm.structure = IndizesService.getStructure();
    }]);
})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('IndicatorShowCtrl', ["$state", "$filter", "$timeout", "indicator", "countries", "ContentService", "VectorlayerService", "toastr", function($state, $filter, $timeout, indicator, countries, ContentService, VectorlayerService, toastr) {
		//
		var vm = this;
		vm.current = null;
		vm.active = null, vm.activeGender = null;
		vm.countryList = countries;
		vm.indicator = indicator;
		vm.data = [];
		vm.year = null, vm.gender = 'all';
		vm.range = {
			max: -100000000,
			min: 100000000
		};
		vm.getData = getData;
		vm.getOffset = getOffset;
		vm.getRank = getRank;
		vm.goInfoState = goInfoState;
		vm.historyData = null;

		vm.setCurrent = setCurrent;
		vm.setYear = setYear;
		vm.setGender = setGender;

		activate();

		function activate() {
			resetRange();
			VectorlayerService.setStyle(countriesStyle);
			VectorlayerService.countryClick(countryClick);
			$timeout(function() {
				//	vm.year = $state.params.year;
				//	vm.gender = $state.params.gender;
				//getData($state.params.year, $state.params.gender);
				if ($state.params.year) {
					vm.year = $state.params.year;
					for (var i = 0; i < vm.indicator.years.length; i++) {
						if (vm.indicator.years[i].year == $state.params.year) {
							vm.active = i;
						}
					}
				} else if (!vm.active) {
					vm.active = 0;
				}

				if (vm.indicator.gender) {
					if ($state.params.gender != "all") {
						vm.gender = $state.params.gender;
						for (var i = 0; i < vm.indicator.gender.length; i++) {
							if (vm.indicator.gender[i].gender == $state.params.gender) {
								vm.activeGender = i;
							}
						}
					} else if (!vm.activeGender) {
						vm.activeGender = 0;
					}
				} else if (!vm.activeGender) {
					vm.activeGender = 0;
				}
				getData(vm.year, vm.gender);
			});
		}

		function resetRange() {
			vm.range = {
				max: -100000000,
				min: 100000000
			};
		}

		function goInfoState() {

			if ($state.current.name == 'app.index.indicator') {
				$state.go('app.index.indicator.info');
			} else {
				$state.go('app.index.indicator');
			}

		}

		function getRank(country) {
			var rank = vm.data.indexOf(country) + 1;
			return rank;
		}

		function getOffset() {
			if (!vm.current) {
				return 0;
			}
			//console.log(vm.getRank(vm.current));
			return (vm.getRank(vm.current) - 2) * 17;
		};

		function setCurrent(nat) {
			vm.current = nat;
			setSelectedFeature();
		};

		function setSelectedFeature() {
			$state.go('app.index.indicator', {
				iso: vm.current.iso,
			});
			$timeout(function(){
					getHistory();
			});

		};

		function countryClick(evt, t) {
			var c = VectorlayerService.getNationByIso(evt.feature.properties[VectorlayerService.data.iso2]);
			if (typeof c.score != "undefined") {
				vm.current = c;
				setSelectedFeature();
			} else {
				toastr.error('No info about this location!');
			}
		}

		function getHistory() {
			ContentService.getIndicatorHistory(vm.indicator.id, vm.current.iso, vm.gender).then(function(data) {
				vm.historyData = data;
			})
		}

		function setYear(year) {
			vm.year = year;
			$timeout(function() {
				$state.go('app.index.indicator', {
					year: year,
				});
			}, 250);

		}

		function setGender(gender) {
			vm.gender = gender || 'all';
			$timeout(function() {
				$state.go('app.index.indicator', {
					gender: vm.gender
				});
			}, 250);
		}

		function getData(year, gender) {
			ContentService.getIndicatorData(vm.indicator.id, vm.year, vm.gender).then(function(dat) {
				resetRange();
				vm.data = dat;
				var iso = null;
				if ($state.params.iso) {
					for (var i = 0; i < vm.data.length; i++) {
						if (vm.data[i].iso == $state.params.iso) {
							vm.current = vm.data[i];
							iso = vm.current.iso;
							//setSelectedFeature();
						}
					}
				}
				angular.forEach(vm.data, function(item) {
					item.rank = vm.data.indexOf(item) + 1;
					if (vm.current) {
						if (item.iso == vm.current.iso) {
							setCurrent(item);
						}
					}
					vm.range.max = d3.max([vm.range.max, parseFloat(item.score)]);
					vm.range.min = d3.min([vm.range.min, parseFloat(item.score)]);
				});

				vm.circleOptions = {
					color: vm.indicator.styled.base_color || '#00ccaa',
					field: 'rank',
					size: vm.data.length
				};

				getOffset();
				vm.linearScale = d3.scale.linear().domain([vm.range.min, vm.range.max]).range([0, 256]);
				VectorlayerService.setData(vm.data, vm.indicator.styled.base_color, true);
				//VectorlayerService.paintCountries(countriesStyle, countryClick);
			});


		}

		function countriesStyle(feature) {
			var style = {};
			var iso = feature.properties[VectorlayerService.data.iso2];
			var nation = VectorlayerService.getNationByIso(iso);

			var field = 'score';
			var type = feature.type;
			feature.selected = false;
			if (vm.current) {
				if (vm.current.iso == iso) {
					feature.selected = true;
				}
			}



			switch (type) {
				case 3: //'Polygon'
					if (typeof nation[field] != "undefined" && nation[field] != null) {

						var colorPos = parseInt(vm.linearScale(parseFloat(nation[field]))) * 4; // parseInt(256 / vm.range.max * parseInt(nation[field])) * 4;
						var color = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',' + VectorlayerService.palette[colorPos + 3] + ')';
						style.color = 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',0.6)'; //color;
						style.outline = {
							color: color,
							size: 1
						};
						style.selected = {
							color: 'rgba(' + VectorlayerService.palette[colorPos] + ', ' + VectorlayerService.palette[colorPos + 1] + ', ' + VectorlayerService.palette[colorPos + 2] + ',0.3)',
							outline: {
								color: 'rgba(66,66,66,0.9)',
								size: 2
							}
						};

					} else {
						style.color = 'rgba(255,255,255,0)';
						style.outline = {
							color: 'rgba(255,255,255,0)',
							size: 1
						};

					}
					break;
			}
			return style;
		};


		vm.uiOnParamsChanged = function(changedParams, $transition$) {
			//console.log(changedParams);
			getData(vm.year, vm.gender);
		}

	}]);
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndicatorYearTableCtrl', ["$filter", "data", function ($filter, data) {
		//
		var vm = this;
    vm.data = data;
    vm.onOrderChange = onOrderChange;
		vm.onPaginationChange = onPaginationChange;

    function onOrderChange(order) {
			return vm.data = $filter('orderBy')(vm.data, [order], true)
		};

		function onPaginationChange(page, limit) {
			//console.log(page, limit);
			//return $nutrition.desserts.get($scope.query, success).$promise;
		};


  }]);
})();

(function(){
    "use strict";
// remove app/login view
    angular.module('app.controllers').controller('LoginCtrl', ["$rootScope", "$state", "$auth", "toastr", function($rootScope, $state, $auth, toastr){
        var vm = this;
        vm.prevState = null;
        vm.doLogin = doLogin;
        vm.checkLoggedIn = checkLoggedIn;

        vm.user = {
          email:'',
          password:''
        };

        activate();

        function activate(){
          vm.checkLoggedIn();
        }

        function checkLoggedIn(){

          if($auth.isAuthenticated()){
            //$state.go('app.index.show', {index:'epi'});
          }
        }
        function doLogin(){
          $auth.login(vm.user).then(function(response){
            toastr.success('You have successfully signed in');
            console.log($rootScope.previousPage);
            $state.go($rootScope.previousPage.state.name || 'app.home', $rootScope.previousPage.params);
          }).catch(function(response){
            toastr.error('Please check your email and password', 'Something went wrong');
          })
        }
    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('LogoCtrl', function(){
        //
    });

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('MapCtrl', ["$scope", "$rootScope", "$mdMenu", "$state", "leafletData", "leafletMapEvents", "VectorlayerService", function($scope, $rootScope, $mdMenu, $state, leafletData, leafletMapEvents, VectorlayerService) {
		//

		var zoom = 3,
			minZoom = 2;
		if (window.innerWidth < 600) {
			zoom = 2;
		}
		var vm = this;
		var apiKey = VectorlayerService.keys.mapbox;
		vm.VectorlayerService = VectorlayerService;
		vm.toggleLayers = toggleLayers;
		vm.labelsLayer = L.tileLayer('https://{s}.tiles.mapbox.com/v4/magnolo.06029a9c/{z}/{x}/{y}.png?access_token=' + apiKey, {
			noWrap: true,
			continuousWorld: false,
			name: 'labels',
			detectRetina: true
		});
		vm.maxbounds = {
			southWest: {
				lat: 90,
				lng: 180
			},
			northEast: {
				lat: -90,
				lng: -180
			}
		};
		vm.controls = {
			custom: []
		};
		vm.layercontrol = {
			icons: {
				uncheck: "fa fa-toggle-off",
				check: "fa fa-toggle-on"
			}
		}

		var MyControl = L.control();
		MyControl.setPosition('bottomright');
		MyControl.initialize = function() {
			L.Util.setOptions(this, options);
		}
		MyControl.onAdd = function() {

			var container = L.DomUtil.create('div', 'leaflet-bar leaflet-control-zoom leaflet-toggle-label');
			var span = L.DomUtil.create('a', 'leaflet-control-zoom-in cursor', container);
			span.textContent = 'T';
			span.title = "Toggle Labels";
			L.DomEvent.disableClickPropagation(container);
			L.DomEvent.addListener(container, 'click', function() {
					var map = VectorlayerService.getMap();
					if (vm.noLabel) {
						map.removeLayer(vm.labelsLayer);
						vm.noLabel = false;
					} else {
						map.addLayer(vm.labelsLayer);
						vm.labelsLayer.bringToFront();
						vm.noLabel = true;
					}

			});
			return container;
		}
		var BackHome = L.control();
		BackHome.setPosition('bottomleft');
		BackHome.initialize = function() {
			L.Util.setOptions(this, options);
		}
		BackHome.onAdd = function() {
			var container = L.DomUtil.create('div', 'leaflet-bar leaflet-control-zoom leaflet-control-home');
			var span = L.DomUtil.create('a', 'leaflet-control-zoom-in cursor', container);
			var icon = L.DomUtil.create('md-icon', 'material-icons md-primary', span);
			span.title = "Center Map";
			icon.textContent = "home";
			L.DomEvent.disableClickPropagation(container);
			L.DomEvent.addListener(container, 'click', function() {
					var map = VectorlayerService.getMap();
					map.setView([48.209206, 16.372778], 2);

					if($state.$current.name.indexOf('app.export.detail.chapter.indicator') > -1){
							$state.go('app.export.detail.chapter.indicator',{
								id: $state.params.id,
								name: $state.params.name,
								chapter: $state.params.chapter,
								indicator: $state.params.indicator,
								indiname:$state.params.indiname
							},{
								reload:true
							});
							$rootScope.sidebarOpen = false;
					}
			});
			return container;
		}


		function toggleLayers(overlayName) {
			 var map = VectorlayerService.getMap('map');
				console.log(map);
				if (vm.noLabel) {
					map.removeLayer(vm.labelsLayer);
					vm.noLabel = false;
				} else {
					map.addLayer(vm.labelsLayer);
					vm.labelsLayer.bringToFront();
					vm.noLabel = true;
				}


		}
		leafletData.getMap('map').then(function(map) {

			VectorlayerService.setMap(map);
			//var url = 'http://v22015052835825358.yourvserver.net:3001/services/postgis/' + VectorlayerService.getName() + '/geom/vector-tiles/{z}/{x}/{y}.pbf?fields=' + VectorlayerService.fields(); //
			var url = 'https://www.23degree.org:3001/services/postgis/' + VectorlayerService.getName() + '/geom/vector-tiles/{z}/{x}/{y}.pbf?fields=' + VectorlayerService.fields(); //
			var layer = new L.TileLayer.MVTSource({
				url: url,
				debug: false,
				detectRetina:true,
				clickableLayers: [VectorlayerService.getName() + '_geom'],
				mutexToggle: true,
				getIDForLayerFeature: function(feature) {
					return feature.properties.iso_a2;
				},
				filter: function(feature, context) {

					return true;
				},
				style: function(feature) {
					var style = {};
					style.color = 'rgba(0,0,0,0)';
					style.outline = {
						color: 'rgba(0,0,0,0)',
						size: 0
					};
					return style;
				}
			});

			map.addLayer(VectorlayerService.setLayer(layer));
			map.addControl(MyControl);
			map.addControl(BackHome);
			/*map.on('click', function(){
				alert('hello');
			});

            var mapEvents = leafletMapEvents.getAvailableMapEvents();
            for (var k in mapEvents){
                var eventName = 'leafletDirectiveMap.' + mapEvents[k];
                console.log(mapEvents[k])
                $scope.$on(eventName, function(event){
                    console.log(event.name);
                });
            }
		/*	map.addLayer(vm.labelsLayer);
			vm.labelsLayer.bringToFront();
				vm.noLabel = true;*/
		});
	}]);
})();

// remove app/selected view
(function(){
    "use strict";

    angular.module('app.controllers').controller('SelectedCtrl', ["$scope", "getCountry", "VectorlayerService", "$filter", function($scope, getCountry, VectorlayerService, $filter){
        //
        var vm = this;
        vm.structure = $scope.$parent.vm.structure;
        vm.display = $scope.$parent.vm.display;
        vm.data = $scope.$parent.vm.data;
        vm.current = getCountry;
        vm.mvtSource = VectorlayerService.getLayer();
        vm.getRank = getRank;
        vm.getOffset = getOffset;
        vm.getTendency = getTendency;

        function calcRank() {
          var rank = 0;
          angular.forEach(vm.data, function(item) {
            item[vm.structure.score_field_name] = parseFloat(item[vm.structure.score_field_name]);
            item['score'] = parseInt(item['score']);
          })
          var filter = $filter('orderBy')(vm.data, [vm.structure.score_field_name, "score"], true);
          for (var i = 0; i < filter.length; i++) {
            if (filter[i].iso == vm.current.iso) {
              rank = i + 1;
            }
          }
          vm.current[vm.structure.score_field_name+'_rank'] = rank;
          vm.circleOptions = {
              color:vm.structure.color,
              field:vm.structure.score_field_name+'_rank'
          }
        }
        function getRank(country){
          var filter = $filter('orderBy')(vm.data, [vm.structure.score_field_name, "score"], true);
          var rank = 0;
          angular.forEach(filter, function(item, key){
            if(item.country == country.country){
              rank = key;
            }
          });
          return rank+1;
        }
        function getOffset() {
    			if (!vm.current) {
    				return 0;
    			}
    			return (vm.getRank(vm.current) - 2) * 16;
    		};

    		function getTendency() {
    			if (!vm.current) {
    				return 'arrow_drop_down'
    			}
    			return vm.current.percent_change > 0 ? 'arrow_drop_up' : 'arrow_drop_down';
    		};

        $scope.$watch('vm.current', function (n, o) {
          if (n === o) {
            return;
          }

            if(o.iso){
              vm.mvtSource.layers.countries_big_geom.features[o.iso].selected = false;
            }
            calcRank();
            fetchNationData(n.iso);


        });
        /*;*/
    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('SidemenuCtrl', function(){
        //
    });

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('SignupCtrl', function(){
        //
    });

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('UnsupportedBrowserCtrl', function(){
        //
    });

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('UserCtrl', function(){
        //
    });

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('AddProviderCtrl', ["$scope", "DialogService", "DataService", function($scope, DialogService, DataService){
        var vm = this;
        vm.dataprovider = {};
        vm.dataprovider.title = $scope.$parent.vm.searchText;

        vm.save = function(){
            //
            DataService.post('/dataproviders', vm.dataprovider).then(function(data){
              $scope.$parent.vm.dataproviders.push(data);
              $scope.$parent.vm.item.dataprovider = data;
              DialogService.hide();
            });

        };

        vm.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('AddUnitCtrl', ["$scope", "DataService", "DialogService", function($scope, DataService,DialogService){

      var vm = this;
      vm.unit = {};
      vm.unit.title = $scope.$parent.vm.searchUnit;

      vm.save = function(){
          //
          DataService.post('/measure_types', vm.unit).then(function(data){
            $scope.$parent.vm.measureTypes.push(data);
            $scope.$parent.vm.item.type = data;
            DialogService.hide();
          });

      };

      vm.hide = function(){
        DialogService.hide();
      };


    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('AddYearCtrl', ["$scope", "DialogService", function($scope, DialogService){

        $scope.save = function(){
            console.log($scope.vm);
            $scope.vm.saveData();
            DialogService.hide();
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('AddUsersCtrl', ["$scope", "DialogService", function($scope, DialogService){

        $scope.save = function(){
	        //do something useful
            DialogService.hide();
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ConflictmethodeCtrl', ["$scope", "DialogService", function($scope, DialogService){

        $scope.save = function(){
            //
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ConflicttextCtrl', ["$scope", "DialogService", function($scope, DialogService){
  

        $scope.save = function(){
            //
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('CopyproviderCtrl', ["$scope", "IndexService", "DialogService", function ($scope, IndexService, DialogService) {
		$scope.$parent.vm.askedToReplicate = true;
		$scope.$parent.vm.doProviders = true;
		$scope.$parent.vm.doStyle = true;
		$scope.$parent.vm.doCategories = true;
		$scope.$parent.vm.doMeasures = true;
		$scope.$parent.vm.doPublic = true;
		$scope.save = function () {

			angular.forEach($scope.$parent.vm.data[0].data, function (data, key) {
				if (key != "year") {
					if (typeof IndexService.getIndicator(key) == "undefined") {
						IndexService.setIndicator(key, {
							column_name: key,
							title: key
						});
					}
					var item = IndexService.getIndicator(key);
					if ($scope.$parent.vm.doProviders) {
						item.dataprovider = $scope.$parent.vm.preProvider;
					}
					if ($scope.$parent.vm.doMeasures) {
						item.type = $scope.$parent.vm.preType;
					}
					if ($scope.$parent.vm.doCategories) {
						item.categories = $scope.$parent.vm.preCategories;
					}
					if ($scope.$parent.vm.doPublic) {
						item.is_public = $scope.$parent.vm.prePublic;
					}
					if ($scope.$parent.vm.doStyle) {

						if (typeof item.style != "undefined") {
							item.style = $scope.$parent.vm.preStyle;
							item.style_id = $scope.$parent.vm.preStyle.id;
						}

					}
				}
			});
			DialogService.hide();
			IndexService.setToLocalStorage();

		};

		$scope.hide = function () {
			$scope.$parent.vm.doProviders = false;
			$scope.$parent.vm.doCategories = false;
			$scope.$parent.vm.doMeasures = false;
			DialogService.hide();
		};

	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('EditcolumnCtrl', ["$scope", "DialogService", function($scope, DialogService){
        $scope.name = $scope.$parent.vm.toEdit;
        if(typeof $scope.$parent.vm.meta.table[$scope.name] == "undefined"){
          $scope.$parent.vm.meta.table[$scope.name] = {};
        }
        else{
          if($scope.$parent.vm.meta.table[$scope.name].title){
            $scope.title = $scope.$parent.vm.meta.table[$scope.name].title;
          }
          if($scope.$parent.vm.meta.table[$scope.name].description){
            $scope.description = $scope.$parent.vm.meta.table[$scope.name].description;
          }
        }

        $scope.save = function(){
          $scope.$parent.vm.meta.table[$scope.name].title = $scope.title;
          $scope.$parent.vm.meta.table[$scope.name].description = $scope.description;
          DialogService.hide();
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('EditrowCtrl', ["$scope", "DialogService", function($scope, DialogService){
        $scope.data = $scope.$parent.vm.selected[0];
        $scope.save = function(){
            //
            DialogService.hide();
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('EmbedcodeCtrl', ["$scope", "$sce", "DialogService", function($scope, $sce, DialogService) {
		$scope.vm.url = $sce.trustAsResourceUrl('https://dev.23degree.org/#/export/' + $scope.vm.item.id + '/' + $scope.vm.item.name);
		$scope.save = function() {
			//
			console.log($scope.vm);
		};

		$scope.hide = function() {
			DialogService.hide();
		};

	}]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ExportdataCtrl', ["$scope", "DialogService", function($scope, DialogService){

        $scope.save = function(){
            //
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ExportDialogCtrl', ["$scope", "DialogService", function($scope, DialogService){

        $scope.save = function(){
            //
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('ExtendDataCtrl', ["$scope", "$state", "DialogService", function($scope,$state, DialogService){

        $scope.save = function(){
            $scope.vm.doExtend = true;
            $scope.vm.meta.iso_field = $scope.vm.addDataTo.iso_name;
            $scope.vm.meta.country_field = $scope.vm.addDataTo.country_name;
            $state.go('app.index.check');
          	DialogService.hide();
        };

        $scope.hide = function(){
          $state.go('app.index.check');
        	DialogService.hide();
        };

    }]);

})();

(function(){
    "use strict";

    angular.module('app.controllers').controller('LoosedataCtrl', ["$scope", "$state", "DialogService", function($scope, $state, DialogService){

        $scope.save = function(){
            //
            $scope.vm.deleteData();
            $state.go($scope.toState.name);
            DialogService.hide();
        };

        $scope.hide = function(){
        	DialogService.hide();
        };

    }]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('SelectisofetchersCtrl', ["$scope", "IndexService", "DialogService", function ($scope, IndexService, DialogService) {
		var vm = this;
		var meta = IndexService.getMeta();
		vm.iso = meta.iso_field;
		vm.list = IndexService.getToSelect();
		vm.save = function () {
			DialogService.hide();
		};

		vm.hide = function () {
			DialogService.hide();
		};
		$scope.$watch('vm.list', function (n, o) {
			if (n === o) {
				return;
			}
			angular.forEach(n, function (item, key) {
				if (item.entry.data[0][vm.iso]) {
					angular.forEach(item.entry.errors, function (error, e) {
						if (error.type == 2 || error.type == 3) {
							IndexService.reduceIsoError();
							item.entry.errors.splice(e, 1);
						} else if (error.type == 1) {
							if (error.column == vm.iso) {
								IndexService.reduceError();
								item.entry.errors.splice(e, 1);
							}
						}
					});
					vm.list.splice(key, 1);
				}
			});
			if (vm.list.length == 0) {
				DialogService.hide();
			}
		}, true);
	}]);

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('BarsCtrl', function () {
		//
		var vm = this;
		vm.width = width;

		function width(item) {
			if(!vm.data) return;
			return vm.data[item.name];
		}
	});

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'bars', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/bars/bars.html',
			controller: 'BarsCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				data: '=',
				options: '=',
				structure: '='
			},
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'autoFocus', ["$timeout", function($timeout) {
		return {
        restrict: 'AC',
        link: function(_scope, _element) {
            $timeout(function(){
                _element[0].focus();
            }, 0);
        }
    };

	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('BasemapCtrl', function() {
		//

		var vm = this;
		vm.original = angular.copy(vm.item);
		vm.containsSpecial = containsSpecial;
		vm.baseOptions = {
			drag: false,
			allowDrop: false,
			allowDrag: false,
			allowMove: false,
			allowDelete: false,
			allowAddContainer: false,
			allowAdd: false,
			allowSave: true,
			editable: false,
			assigments: false,
			saveClick: vm.options.save,
			deleteClick: vm.options.deleteClick
		};

		function containsSpecial(type) {
			var found = false;
			if(typeof vm.item.url == "undefined"){
				return false;
			}
			if (typeof type == 'object') {
				angular.forEach(type, function(t) {
					if (vm.item.url.indexOf(t) > -1) {
						found = true;
					}
				});
			} else {
				if (vm.item.url.indexOf(type) > -1) {
					found = true;
				}
			}
			return found;
		}
	});

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'basemap', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/basemap/basemap.html',
			controller: 'BasemapCtrl',
			controllerAs: 'vm',
			scope:{
				item: '=',
				options: '='
			},
			bindToController: true,
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'BasemapSelectorCtrl', ["BasemapsService", "VectorlayerService", function(BasemapsService, VectorlayerService){
		//
			var vm = this;
			vm.basemaps = [];
			vm.selected = {};
			vm.setMap = setMap;
			vm.viewTiles = viewTiles;
			vm.defaults = {
				scrollWheelZoom: false,
				minZoom: 1,
				maxZoom: 8,
				zoomControl: false,
			};
			vm.center = VectorlayerService.center;
			vm.maxbounds = VectorlayerService.maxbounds;

			activate();

			function activate(){
				if(!vm.style){
					vm.style = {
						basemap_id:0
					}
				}
				BasemapsService.getBasemaps(function(response){
					vm.basemaps = response;
					if(vm.style.basemap_id != 0){
						angular.forEach(vm.basemaps, function(map, key){
							if(map.id == vm.style.basemap_id){
								vm.selected = map;
							}
						})
					}
				});
			}

			function setMap(map){
				vm.selected = map;
				vm.style.basemap_id = map.id;
				vm.style.basemap = map;
			}
			function viewTiles(map){
				return {
					url:map.url,
					attribution:map.attribution,
					type:'xyz'
				}
			}

    }]);

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'basemapSelector', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/basemapSelector/basemapSelector.html',
			controller: 'BasemapSelectorCtrl',
			controllerAs: 'vm',
			scope:{
				style: '=ngModel',
			},
			bindToController: true,
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'BubblesCtrl', function(){
		//

  });

})();

(function () {
	"use strict";

	function CustomTooltip(tooltipId, width) {
		var tooltipId = tooltipId;
		var elem = document.getElementById(tooltipId);
		if(elem == null){
			angular.element(document).find('body').append("<div class='tooltip md-whiteframe-z3' id='" + tooltipId + "'></div>");
		}
		hideTooltip();
		function showTooltip(content, data, event, element) {
			angular.element(document.querySelector('#' + tooltipId)).html(content);
			angular.element(document.querySelector('#' + tooltipId)).css('display', 'block');

			return updatePosition(event, data, element);
		}
		function hideTooltip() {
			angular.element(document.querySelector('#' + tooltipId)).css('display', 'none');
		}
		function updatePosition(event, d, element) {
			var ttid = "#" + tooltipId;
			var xOffset = 20;
			var yOffset = 10;
			var svg = element.find('svg')[0];//document.querySelector('#svg_vis');
			var wscrY = window.scrollY;
			var ttw = angular.element(document.querySelector(ttid)).offsetWidth;
			var tth = document.querySelector(ttid).offsetHeight;
			var tttop = svg.getBoundingClientRect().top + d.y - tth / 2;
			var ttleft = svg.getBoundingClientRect().left + d.x + d.radius + 12;
			return angular.element(document.querySelector(ttid)).css('top', tttop + 'px').css('left', ttleft + 'px');
		}
		return {
			showTooltip: showTooltip,
			hideTooltip: hideTooltip,
			updatePosition: updatePosition
		}
	}
	angular.module('app.directives').directive('bubbles', ["$compile", "IconsService", function ($compile, IconsService) {
		var defaults;
		defaults = function () {
			return {
				width: 300,
				height: 300,
				layout_gravity: 0,
				sizefactor:3,
				vis: null,
				force: null,
				damper: 0.085,
				circles: null,
				borders: true,
				labels: true,
				fill_color: d3.scale.ordinal().domain(["eh", "ev"]).range(["#a31031", "#beccae"]),
				max_amount: '',
				radius_scale: '',
				duration: 1000,
				tooltip: CustomTooltip("bubbles_tooltip", 240)
			};
		};
		return {
			restrict: 'E',
			scope: {
				chartdata: '=',
				direction: '=',
				gravity: '=',
				sizefactor: '=',
				indexer: '=',
				borders: '@'
			},
			require: 'ngModel',
			link: function (scope, elem, attrs, ngModel) {
				var options = angular.extend(defaults(), attrs);
				var nodes = [],
					links = [],
					labels = [],
					groups = [];

				var max_amount = d3.max(scope.chartdata, function (d) {
					return parseFloat(d.value);
				});
				//options.height = options.width * 1.1;
				options.radius_scale = d3.scale.pow().exponent(0.5).domain([0, max_amount]).range([2, 85]);
				options.center = {
					x: options.width / 2,
					y: options.height / 2
				};
				options.cat_centers = {};

				var create_nodes = function () {
					if(scope.indexer.children.length == 2 && scope.indexer.children[0].children.length > 0){
						angular.forEach(scope.indexer.children, function (group, index) {
							var mColor = group.color;
							if(group.style_id != 0){
								mColor = group.style.base_color;
							}

							var d = {
								type: group.name,
								name: group.title,
								group: group.name,
								color: mColor,
								icon: group.icon,
								unicode: IconsService.getUnicode(group.icon),
								data: group,
								children:group.children
							};
							labels.push(d);
							angular.forEach(group.children, function (item) {
								if (scope.chartdata[item.name]) {
									var color = item.color;
									if(item.style_id != 0){
										color = item.style.base_color;
									}
									else if(group.style_id != 0){
										color = group.style.base_color;
									}
									var node = {
										type: item.name,
										radius: scope.chartdata[item.name] / scope.sizefactor,
										value: scope.chartdata[item.name],
										name: item.title,
										group: group.name,
										x: options.center.x,
										y: options.center.y,
										color: color,
										icon: item.icon,
										unicode: IconsService.getUnicode(item.icon),
										data: item,
										children:item
									};
									nodes.push(node);
								}
							});
						});
						create_groups();

					}
					else{

						var d = {
							type: scope.indexer.name,
							name: scope.indexer.title,
							group: scope.indexer.name,
							color: scope.indexer.style.base_color || scope.indexer.color,
							icon: scope.indexer.icon,
							unicode: scope.indexer.unicode,
							data: scope.indexer.data,
							children: scope.indexer.children
						};
						labels.push(d);
						angular.forEach(scope.indexer.children, function (item) {
							if (scope.chartdata[item.name]) {

								var node = {
									type: item.name,
									radius: scope.chartdata[item.name] / scope.sizefactor,
									value: scope.chartdata[item.name] / scope.sizefactor,
									name: item.title,
									group: scope.indexer.name,
									x: options.center.x,
									y: options.center.y,
									color: item.color,
									icon: item.icon,
									unicode: IconsService.getUnicode(item.icon),
									data: item,
									children:item
								};
								nodes.push(node);
							}
						});
					}
				};
				var clear_nodes = function(){
					nodes = [];
					labels = [];
				}
				var create_groups = function(){
					angular.forEach(nodes, function(node, key){
							options.cat_centers[node.group] = {
								x: options.width / 2,
								y: options.height / 2 + (1 - key),
								damper: 0.085,
							};
					});
				};
				var create_vis = function () {
					angular.element(elem).html('');
					options.vis = d3.select(elem[0]).append("svg").attr("width", options.width).attr("height", options.height).attr("id", "svg_vis");

					if (!options.borders) {
						var pi = Math.PI;
						if(labels.length == 2){
							var arcTop = d3.svg.arc()
								.innerRadius(109)
								.outerRadius(110)
								.startAngle(-90 * (pi / 180)) //converting from degs to radians
								.endAngle(90 * (pi / 180)); //just radians
							var arcBottom = d3.svg.arc()
								.innerRadius(134)
								.outerRadius(135)
								.startAngle(90 * (pi / 180)) //converting from degs to radians
								.endAngle(270 * (pi / 180)); //just radians

							options.arcTop = options.vis.append("path")
								.attr("d", arcTop)
								.attr("fill", function(d){
									return labels[0].color || "#be5f00";
								})
								.attr("id", "arcTop")
								.attr("transform", "translate("+(options.width/2)+","+(options.height/2 - options.height/12)+")");
							options.arcBottom = options.vis.append("path")
								.attr("d", arcBottom)
								.attr("id", "arcBottom")
								.attr("fill", function(d){
									return labels[1].color || "#006bb6";
								} )
								.attr("transform", "translate("+(options.width/2)+","+(options.height/2)+")");
						}
						else{
							var arc = d3.svg.arc()
								.innerRadius(options.width/3 - 1)
								.outerRadius(options.width/3)
								.startAngle(0 * (pi / 180)) //converting from degs to radians
								.endAngle(360 * (pi / 180)); //just radians


							options.arc = options.vis.append("path")
								.attr("d", arc)
								.attr("fill", labels[0].color)
								.attr("id", "arcTop")
								.attr("transform", "translate("+(options.width/2)+","+(options.height/2)+")");

						}
					}
				if(options.labels == true && labels.length == 2){
						var textLabels = options.vis.selectAll('text.labels').data(labels).enter().append("text")
							.attr('class', 'labels')
							.attr('fill', function(d){
								return d.color;
							})
						/*	.attr('transform', function(d){
								var index = labels.indexOf(d);
								if(index > 0){
									return 'rotate(90, 100, 100)';
								}
							})*/
							.attr('x', "50%")
							.style('font-size', '1.2em')
							.style('cursor', 'pointer')

							.attr('width', options.width)
							.attr('text-anchor', 'middle')
							.on('click', function(d){
								ngModel.$setViewValue(d.data);
								ngModel.$render();
							})
							.attr("y", function(d){
								var index = labels.indexOf(d);
								if(index == 0){
									return 15;
								}
								else{
									return options.height - 6;
								}
							})
							.text(function(d){
								return d.name;
							})

					}
					options.containers = options.vis.selectAll('g.node').data(nodes).enter().append('g').attr('transform', 'translate(' + (options.width / 2) + ',' + (options.height / 2) + ')').attr('class', 'node');

					/*options.circles = options.containers.selectAll("circle").data(nodes, function (d) {
						return d.id;
					});*/

					options.circles = options.containers.append("circle").attr("r", 0).attr("fill", (function (d) {
						return d.color || options.fill_color(d.group);
					})).attr("stroke-width", 0).attr("stroke", function (d) {
						return d3.rgb(options.fill_color(d.group)).darker();
					}).attr("id", function (d) {

						return "bubble_" + d.type;
					});
					options.icons = options.containers.append("text")
						.attr('font-family', 'EPI')
						.attr('font-size', function (d) {

						})
						.attr("text-anchor", "middle")
						.attr('fill', function(d){
							return d.unicode ? '#fff' : d.color;
						})
						.style('opacity', function(d){
							if(d.unicode){
								return 1;
							}
							else{
								return 0;
							}
						})
						.text(function (d) {
							return d.unicode || '1'
						});
					options.icons.on("mouseover", function (d, i) {

						return show_details(d, i, this);
					}).on("mouseout", function (d, i) {
						return hide_details(d, i, this);
					}).on("click", function (d, i) {

						ngModel.$setViewValue(d.data);
						ngModel.$render();
					});
					options.circles.transition().duration(options.duration).attr("r", function (d) {
						return d.radius;
					});
					options.icons.transition().duration(options.duration).attr("font-size", function (d) {
						return d.radius * 1.75 + 'px';
					}).attr('y', function (d) {
						return d.radius * .75 + 'px';
					});
				};
				var update_vis = function () {

					nodes.forEach(function (d, i) {
						options.circles.transition().duration(options.duration).delay(i * options.duration)
							.attr("r", function (d) {
								d.radius = d.value = scope.chartdata[d.type] / scope.sizefactor;
								return scope.chartdata[d.type] / scope.sizefactor;
							});
						options.icons.transition().duration(options.duration).delay(i * options.duration)
							.attr("font-size", function (d) {
								return (scope.chartdata[d.type] / scope.sizefactor) * 1.75 + 'px'
							})
							.attr('y', function (d) {
								return (scope.chartdata[d.type] / scope.sizefactor) * .75 + 'px';
							})
					});
				};
				var charge = function (d) {
					return -Math.pow(d.radius, 2.0) / 4;
				};
				var start = function () {
					return options.force = d3.layout.force().nodes(nodes).size([options.width, options.height]).links(links);
				};
				var display_group_all = function () {
					options.force.gravity(options.layout_gravity).charge(charge).friction(0.85).on("tick", function (e) {
						options.containers.each(move_towards_center(e.alpha)).attr("transform", function (d) {
							return 'translate(' + d.x + ',' + d.y + ')';
						});
					});
					options.force.start();
				};
				var display_by_cat = function () {
					options.force.gravity(options.layout_gravity).charge(charge).friction(0.9).on("tick", function (e) {
						options.containers.each(move_towards_cat(e.alpha)).attr("transform", function (d) {
							return 'translate(' + d.x + ',' + d.y + ')';
						});
					});
					options.force.start();
				};
				var move_towards_center = function (alpha) {
					return (function (_this) {
						return function (d) {
							d.x = d.x + (options.width/2 - d.x) * (options.damper + 0.02) * alpha *1.25;
							d.y = d.y + (options.height/2 - d.y) * (options.damper + 0.02) * alpha * 1.25;
						}
					})(this);
				};
				var move_towards_top = function (alpha) {
					return (function (_this) {
						return function (d) {
							d.x = d.x + (options.center.x - d.x) * (options.damper + 0.02) * alpha * 1.1;
							d.y = d.y + (200 - d.y) * (options.damper + 0.02) * alpha * 1.1;
						}
					})(this);
				};
				var move_towards_cat = function (alpha) {
					return (function (_this) {
						return function (d) {

							var target;
							target = options.cat_centers[d.group];
							d.x = d.x + (target.x - d.x) * (target.damper + 0.02) * alpha * 1;
							return d.y = d.y + (target.y - d.y) * (target.damper + 0.02) * alpha * 1;
						}
					})(this);
				};
				var show_details = function (data, i, element) {
					var content;
					var	barOptions = {
						titled:true
					};
					content = '<md-progress-linear md-mode="determinate" value="'+data.value+'"></md-progress-linear>'
					content += "<span class=\"title\">"+ data.name + "</span><br/>";
					angular.forEach(data.data.children, function (info) {
						if(scope.chartdata[info.name] > 0 ){
							content += '<div class="sub">';
							content += '<md-progress-linear md-mode="determinate" value="'+scope.chartdata[info.name]+'"></md-progress-linear>'
							content += "<span class=\"name\" style=\"color:" + (info.color || data.color) + "\"> "+scope.chartdata[info.name]+' - ' + (info.title) + "</span><br/>";
							content += '</div>';
						}

					});
					//content = '<bars options="barOptions" structure="data.data.children" data="data"></bars>';

					$compile(options.tooltip.showTooltip(content, data, d3.event, elem).contents())(scope);
				};

				var hide_details = function (data, i, element) {
					return options.tooltip.hideTooltip();
				};

				scope.$watch('chartdata', function (data, oldData) {
					options.tooltip.hideTooltip();

					if (options.circles == null) {
						create_nodes();
						create_vis();
						start();
					} else {
						update_vis();
					}
					if(labels.length == 1 || options.labels != true){
							display_group_all();
					}
					else{
							display_by_cat();
					}

				});
				scope.$watch('indexer', function (n, o) {
					if(n === o){
						return
					}
					if(typeof n[0].children != "undefined"){
						options.tooltip.hideTooltip();
						clear_nodes();
						create_nodes();
						create_vis();
						start();

						if(labels.length == 1 || options.labels != true){
								display_group_all();
								//console.log('all');
						}
						else{
								//display_by_cat();
								display_group_all();
								//console.log('all');
						}
					}
				});
				scope.$watch('direction', function (oldD, newD) {
					if (oldD === newD) {
						return;
					}
					if (oldD == "all") {
						display_group_all();
					} else {
						display_by_cat();
					}
				})
			}
		};
	}]);
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('CategoriesCtrl', ["$filter", "toastr", "DataService", function ($filter, toastr, DataService) {
		//
		var vm = this;
		vm.catOptions = {
			abort: function(){
				vm.createCategory = false;
			},
			postDone:function(category){
				vm.createCategory = false;
			}
		}

	}]);

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'categories', function() {

		return {
			restrict: 'E',
			templateUrl: 'views/directives/categories/categories.html',
			controller: 'CategoriesCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				item: '=',
				categories: '=',
				options:'=',
				save: '&'
			},
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'CategoryCtrl', ["$scope", "$filter", "toastr", "DataService", "ContentService", function($scope, $filter, toastr, DataService, ContentService){
		//
		var vm = this;

		vm.saveCategory = saveCategory;
		vm.querySearchCategory = querySearchCategory;
		vm.parentChanged = parentChanged;
		vm.checkBase = checkBase;
		vm.styles = ContentService.getStyles();
		vm.flattened = [];
		vm.copy = {};
		activate();

		function activate(){
			flattenWithChildren(vm.categories);
			if(vm.item.parent_id){
				vm.parent = getParent(vm.item, vm.categories);
				vm.copy = angular.copy(vm.item);
			}
		}
		function flattenWithChildren(list){
			angular.forEach(list, function(item){
				vm.flattened.push(item);
				if(item.children){
					flattenWithChildren(item.children)
				}
			})
		}
		function querySearchCategory(query) {
			return $filter('findbyname')($filter('orderBy')(vm.flattened, 'title'), query, 'title');
			//return $filter('findbyname')($filter('flatten')(vm.categories), query, 'title');
		}
		function checkBase(){
			if (vm.item.title && vm.item.title.length >= 3) {
				return true;
			}
			return false;
		}
		function parentChanged(item){
			if(typeof item == "undefined"){
				vm.item.parent_id = null;
				vm.item.parent = null;
				return false;
			}
			if(item.id == vm.item.id){
				toastr.error('The Parent cannot be the same', 'Invalid selection');
				return false;
			}
			vm.parent = item;
			vm.item.parent_id = item.id;
			vm.item.parent = item;
		}
		function getParent(item,list){
			var found = null
			angular.forEach(list, function(entry, key){
				if(entry.id == item.parent_id){
					found = entry;
				}
				if(entry.children && !found){
					var subresult = getParent(item, entry.children);
					if(subresult){
						found = subresult;
					}
				}
			});
			return found;
		}
		function moveItem(){
			if(vm.copy.parent_id){
					var oldParent = getParent(vm.copy, vm.categories);
					for(var i = 0; i < oldParent.children.length; i++ ){
						if(oldParent.children[i].id == vm.item.id){
							oldParent.children.splice(i,1);
						}
					}
			}
			else{
				for(var i = 0; i < vm.categories.length; i++ ){
					if(vm.categories[i].id == vm.item.id){
						vm.categories.splice(i,1);
					}
				}
			}
			if(vm.item.parent_id){
				var newParent = getParent(vm.item, vm.categories);
				newParent.children.push(vm.item);

			}
			else{
				vm.categories.push(vm.item);
			}
		}
		function successAction(data){
			console.log(vm.copy.parent_id, vm.item.parent_id);
			if(vm.copy.parent_id != vm.item.parent_id){
				//if(vm.copy.parent_id && vm.item.parent_id){
					moveItem();
			//	}
			}
			toastr.success('Category has been updated', 'Success');
			$scope.categoryForm.$setSubmitted();
			vm.copy = angular.copy(vm.item);
		}
		function saveCategory(valid) {
			if(valid){
				if(vm.item.id){
					if(vm.item.restangularized){
						vm.item.save().then(successAction);
					}
					else{
						DataService.update('categories', vm.item.id, vm.item).then(successAction);
					}

				}
				else{
					DataService.post('categories', vm.item).then(function (data) {
						if(data.parent_id ){
								 var parent = getParent(data, vm.categories);
								 if(!parent.children){
									 parent.children = [];
								 }
								 parent.children.push(data);
								 parent.expanded = true;
						}
						else{
							vm.categories.push(data);
						}
						toastr.success('New Category has been saved', 'Success');
						vm.options.postDone(data);
					});
				}

			}
		}
    }]);

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'category', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/category/category.html',
			controller: 'CategoryCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				item: '=',
				categories: '=',
				options:'=?',
				save: '&'
			},
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'CirclegraphCtrl', function(){
		//
    });

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('circlegraph', ["$timeout", function($timeout) {
		var defaults = function() {
			return {
				width: 80,
				height: 80,
				color: '#00ccaa',
				size: 178,
				field: 'rank'
			}
		}
		return {
			restrict: 'E',
			controller: 'CirclegraphCtrl',
			scope: {
				options: '=',
				item: '='
			},
			link: function($scope, element, $attrs) {
				//Fetching Options

				$scope.options = angular.extend(defaults(), $scope.options);
				var  = 2 * Math.PI;
				//Creating the Scale
				var rotate = d3.scale.linear()
					.domain([1, $scope.options.size])
					.range([1, 0])
					.clamp(true);

				//Creating Elements
				var svg = d3.select(element[0]).append('svg')
					.attr('width', $scope.options.width)
					.attr('height', $scope.options.height)
					.append('g');

				var container = svg.append('g')
					.attr('transform', 'translate(' + $scope.options.width / 2 + ',' + $scope.options.height / 2 + ')')
					.style('font-size', function(){
						if($scope.options.fontSize){
							return $scope.options.fontSize+'px';
						}
						return "1em"
					})

				var circleBack = container.append('circle')
					.attr('r', $scope.options.width / 2 - 2)
					.attr('stroke-width', 2)
					.attr('stroke', $scope.options.color)
					.style('opacity', '0.6')
					.attr('fill', 'none');

				var arc = d3.svg.arc()
					.startAngle(0)
					.innerRadius(function(d) {
						return $scope.options.width / 2 - 4;
					})
					.outerRadius(function(d) {
						return $scope.options.width / 2;
					});

				var circleGraph = container.append('path')
					.datum({
						endAngle: 2 * Math.PI * 0
					})
					.style("fill", $scope.options.color)
					.attr('d', arc);
				var text = container.selectAll('text')
					.data([0])
					.enter()
					.append('text')
					.text(function(d) {
						if (!$scope.options.hideNumbering)
							return 'N' + d;
						return d + '/' + $scope.options.size;
					})
					.style("fill", $scope.options.color)
					.style('font-weight', 'bold')
					.style('font-size', function() {
						//if(!$scope.options.hideNumbering)
						return '1em';
						//return '1.5em';
					})
					.attr('text-anchor', 'middle')
					.attr('y', function(d) {
						//if(!$scope.options.hideNumbering)
						return '0.35em';
						//return '0.37em'
					});

				//Transition if selection has changed
				function animateIt(radius) {
					circleBack.transition()
						.duration(750)
						.attr('stroke', $scope.options.color);


					circleGraph.transition()
						.duration(750)
						.style("fill", $scope.options.color)
						.call(arcTween, rotate(radius) * 2 * Math.PI);

					text.transition().duration(750).tween('text', function(d) {
						if (!$scope.options.hideNumbering) {
							var data = this.textContent.split('N');
							var i = d3.interpolate(parseInt(data[1]), radius);
							return function(t) {
								this.textContent = 'N' + (Math.round(i(t) * 1) / 1);
							};
						} else {
							var data = this.textContent.split('/');
							var i = d3.interpolate(parseInt(data[0]), radius);
							return function(t) {
								this.textContent = (Math.round(i(t) * 1) / 1) + "/" + $scope.options.size;
							};
						}
					}).style("fill", $scope.options.color)
				}

				//Tween animation for the Arc
				function arcTween(transition, newAngle) {
					transition.attrTween("d", function(d) {

						var interpolate = d3.interpolate(d.endAngle, newAngle);
						return function(t) {
							d.endAngle = interpolate(t);
							return arc(d);
						};
					});
				}

				/*$scope.$watch('options', function (n, o) {
					if (n === o) {
						return;
					}
					circleBack.style('stroke', n.color);
					circleGraph.style('fill', n.color);
					text.style('fill', n.color);
					$timeout(function () {
						animateIt($scope.item[n.field])
					});
				});*/

				//Watching if selection has changed from another UI element
				$scope.$watch('item', function(n, o) {
					//if(n === o) return;

					if (!n) {
						n[$scope.options.field] = $scope.options.size;
					}
					$timeout(function() {
						animateIt(n[$scope.options.field]);
					});
				});
				$scope.$watch('options', function(n, o) {
					if (n === o || !n) return;

					$timeout(function() {

						animateIt($scope.item[$scope.options.field]);
					});
				}, true);
			}
		};

	}]);

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ColorGradientCtrl', ["$scope", function($scope) {
		//
		var vm = this;
		vm.removeColor = removeColor;
		vm.active;
		vm.dragEvents = {
			dragMove : function (instance, event, pointer) {
        var percentage = 100  * instance.position.x / instance.containerSize.width;
				vm.active.pos = percentage;

    	},
			dragEnd : function (instance, event, pointer) {

			
    	}
		}

		function removeColor(idx) {
			vm.gradient.splice(idx, 1);
		}
	}]);

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('colorGradient', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/color-gradient/color-gradient.html',
			controller: 'ColorGradientCtrl',
			controllerAs: 'vm',
			scope: {},
			bindToController: {
				gradient: '='
			},
			link: function(scope, element, attrs) {
				//

				var width = element.parent()[0].clientWidth - 48;
				var height = 20;
				var svg = d3.select(element[0]).append('svg');
				svg.attr("width", width)
					.attr("height", height);
				var def = svg.append("defs");
				var gradCol = def.append("linearGradient")
					.attr("id", "gradient")
					.attr("x1", "0%")
					.attr("y1", "0%")
					.attr("x2", "100%")
					.attr("y2", "0%");

				var rect = svg.append("rect")
					.attr("width", width)
					.attr("height", height)
					.style("fill", "url(#gradient)");


				function drawGradient() {

					var gradient = gradCol.selectAll('stop')
						.data(scope.vm.gradient, function(d){
							return d.id
						});

					gradient
						.enter()
						.append("stop")
						.attr("offset", function(d) {
							console.log(d.pos);
							return d.pos + "%";
						})
						.style("stop-color", function(d) {
							return d.color
						});

					gradient.exit().remove();
				

				}

				scope.$watch('vm.gradient', function(n, o) {
					if (n === 0) return false;

					drawGradient();
				}, true);

				drawGradient();
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ColorHandleCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive('colorHandle', ["$document", "$timeout", function($document, $timeout) {
    return function(scope, elem, attrs) {
      var beginDragging, container, getColorHandle, mousemoveListener;
      container = elem.parent();
      elem.addClass('iconic');
      getColorHandle = function() {
        return scope.$eval(attrs.colorHandle);
      };
      scope.$watch(attrs.colorHandle, function(ColorHandle, OldColorHandle) {
        var deleted, leftExtremePercent, rightExtremePercent;
        leftExtremePercent = -3.4;
        rightExtremePercent = 96.7;
        elem.css('left', leftExtremePercent + (ColorHandle.stop * (rightExtremePercent + Math.abs(leftExtremePercent))) + '%');
        if (ColorHandle.color !== null) {
          return elem.css('color', ColorHandle.color);
        } else {
          deleted = scope.deleteColorHandle(ColorHandle);
          if (!deleted) {
            return ColorHandle.color = OldColorHandle.color;
          }
        }
      }, true);
      scope.$watch('ActiveColorHandle', function(ActiveColorHandle) {
        var ThisColorHandle;
        ThisColorHandle = getColorHandle();
        elem.toggleClass('arrow_up_alt1', ActiveColorHandle === ThisColorHandle);
        return elem.toggleClass('arrow_up', ActiveColorHandle !== ThisColorHandle);
      });
      mousemoveListener = null;
      elem.bind('mousedown',function(event) {
        var leftClicked;
        leftClicked = event.which === 1;
        if (leftClicked) {
          return beginDragging();
        }
      });
      beginDragging = function() {
        var ThisColorHandle;
        ThisColorHandle = getColorHandle();
        scope.$apply(function() {
          return scope.setActiveColorHandle(ThisColorHandle);
        });
        elem.addClass('dragging');
        if (!mousemoveListener) {
          return $document.bind('mousemove',mousemoveListener = function(event) {
            return scope.$apply(function() {
					
              ThisColorHandle.stop = (event.pageX - container[0].getBoundingClientRect().left) / container[0].clientWidth;
              if (ThisColorHandle.stop < 0) {
                return ThisColorHandle.stop = 0;
              } else if (ThisColorHandle.stop > 1) {
                return ThisColorHandle.stop = 1;
              }
            });
          });
        }
      };
      $document.bind('mouseup',function() {
        if (elem.hasClass('dragging')) {
          elem.removeClass('dragging');
        }
        if (mousemoveListener !== null) {
          $document.unbind('mousemove', mousemoveListener);
          return mousemoveListener = null;
        }
      });
      elem.bind('mouseup',function() {
        var rightClicked;
        rightClicked = event.which === 3;
        if (rightClicked) {
          return scope.$apply(function() {
            return scope.deleteColorHandle(getColorHandle());
          });
        }
      });
      return $timeout(function() {
        var ThisColorHandle;
        ThisColorHandle = getColorHandle();
        if (ThisColorHandle.forceDrag && scope.getMouseIsDown()) {
          ThisColorHandle.forceDrag = false;
          scope.setActiveColorHandle(ThisColorHandle);
          return beginDragging();
        }
      });
    };
  }]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'CompareCtrl', function(){
		//
    });

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('compareCountries', ["$document", "$timeout", function($document, $timeout) {

		var defaults = function() {
			return {
				width: 350,
				height: 25,
				margin: 5,
				color: '#ff0000',
				field: 'score',
				duration: 500,
				min: 0,
				max: 100
			}
		};

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/compare/compare.html',
			controller: 'CompareCtrl',
			scope: {
				countries: '=',
				country: '=',
				options: '='
			},
			link: function(scope, element, attrs) {
				scope.options = angular.extend(defaults(), scope.options);
				scope.options.width = element[0].clientWidth - 20;
				var fontColor = '#333',
					bgColor = '#ddd';

				var xscale = d3.scale.linear()
					.domain([scope.options.min, scope.options.max])
					.range([0, (scope.options.width - 100 - (scope.options.margin * 2))]);

				var yscale = d3.scale.ordinal()
					.range([0, scope.options.height])
					.domain([0, scope.countries.length]);

				var svg = d3.select(element[0]).append('svg')
					.attr('width', scope.options.width)
					.attr('height', scope.options.height * scope.countries.length);

				var container = svg.append('g')
					.attr('id', 'compare-chart')
					.attr('y', scope.options.height)
					.attr('x', scope.options.margin);

				var xAxis = d3.svg.axis()
					.scale(xscale)
					.orient("top")
					.tickValues([scope.options.min, scope.options.max]);

				var lines = svg.append("g")
					.attr("class", "x axis")
				var nullLine = lines.append("line")
					.attr("class", "domain")
					.attr("y2", scope.options.height * scope.countries.length)

				var midLine = lines.append("line")
					.attr("class", "domain dashed")
					.attr('transform', function() {
						return "translate(" + (xscale(scope.options.max / 2)) + ",0)";
					})
					.attr("y2", scope.options.height * scope.countries.length)

				var endLine = lines.append("line")
					.attr("class", "domain")
					.attr('transform', function() {
						return "translate(" + (xscale(scope.options.max)) + ",0)";
					})
					.attr("y2", scope.options.height * scope.countries.length);
				var rankLabel = lines.append('text')
					.attr('class', 'header')
					.text('Rank')
					.attr('transform', function() {
						return "translate(-85,-10)";
					});

				var medianLabel = lines.append('text')
					.attr('class', 'header')
					.text('Median')
					.attr('transform', function() {
						return "translate(" + (scope.options.width / 2 - 75) + ",-10)";
					});

				var chart = container.append('g')
					.attr('id', 'bars')
					.attr("transform", "translate(100,0)");
				var labels = container.append('g')
					.attr('id', 'labels')
					.attr('width', scope.options.max);

				function updateData() {
					//var max = d3.max(data, function(d) { return +d.field_goal_attempts;} );
					svg.transition()
						.duration(scope.options.duration)
						.attr('height', (scope.options.height * (scope.countries.length)) + (scope.options.height * 2));
					yscale.domain([0, scope.countries.length]).range([0, scope.options.height * (scope.countries.length)]);



					d3.transition(svg).select(".x.axis")
						.call(xAxis)
						.attr("transform", "translate(100,20)");

					var bar = chart.selectAll('.bar')
						.data(scope.countries, function(d) {
							return "id_" + d.iso
						});

					var barsContainer = bar.enter().insert('g', '.axis')
						.attr('class', "bar");

					var rects = barsContainer.append('rect')
						.attr('height', (scope.options.height - scope.options.margin))
						.style('fill', bgColor)
						.attr('width', function(d) {
							return 0;
						});
					var ranks = barsContainer.append('text')
						.attr('class', 'ranks')
						.attr('transform', 'translate(-70, 0)')
						.text(function(d) {
							if (d.rank == 1) {
								return "1st";
							} else if (d.rank == 2) {
								return "2nd";
							}
							return d.rank + "th";
						})
						.attr('fill', scope.options.color)
						.attr('y', function(d) {
							return scope.options.margin * 3;
						})
					var labelsBg = barsContainer.append('rect')
						.attr('height', (scope.options.height - scope.options.margin))
						.style('fill', function(d) {
							if (d.iso == scope.country.iso) {
								return scope.options.color
							}
							return bgColor
						})
						.attr('width', function(d) {
							return scope.options.height;
						})
						.attr('x', -(scope.options.height + scope.options.margin));

					var labels = barsContainer.append('text')
						.attr('class', "label")
						.attr({
							'x': function(d, i) {
								return -17;
							},
							'y': function(d, i) {
								return scope.options.margin * 2;
							}
						})
						.style('font-size', '13px')
						.attr('dy', ".35em")
						.attr('text-anchor', 'middle')
						.text(function(d) {
							return d.iso
						}).attr('fill', function(d) {
							if (d.iso == scope.country.iso) {
								return "#fff"
							}
							return scope.options.color
						});

					var values = barsContainer.append("text")
						.attr("class", "value")
						.attr({
							'x': 0,
							'y': (scope.options.margin * 2)
						})
						.text(0)
						.style('fill', scope.options.color)
						.attr("dy", ".35em")
						.attr("text-anchor", "end");

					var circles = barsContainer.append('circle')
						.attr('r', 3)
						.attr('cx', 0)
						.attr('cy', ((scope.options.height / 2) - (scope.options.margin / 2)))
						.attr("fill", scope.options.color);

					var barUpdate = d3.transition(bar)
						.attr("transform", function(d, i) {
							return "translate(0," + (i * scope.options.height + (scope.options.margin / 2) + 20) + ")";
						});
					nullLine.transition()
						.duration(scope.options.duration)
						.attr('y2', scope.options.height * scope.countries.length)
					midLine.transition()
						.duration(scope.options.duration)
						.attr('y2', scope.options.height * scope.countries.length)
					endLine.transition()
						.duration(scope.options.duration)
						.attr('y2', scope.options.height * scope.countries.length)
					rects.transition()
						.duration(scope.options.duration)
						.attr('width', function(d) {
							return xscale(d[scope.options.field]);
						});

					circles.transition()
						.duration(scope.options.duration)
						.attr('cx', function(d) {
							return xscale(d[scope.options.field]);
						});

					values.transition()
						.duration(scope.options.duration)
						.attr({
							'x': function(d, i) {

								if (d[scope.options.field] > scope.options.max / 2) {
									return xscale(d[scope.options.field]) - this.getBoundingClientRect().width;
								}
								return xscale(d[scope.options.field]) + scope.options.height;
							}
						})
						.tween('text', function(d) {
							var i = d3.interpolate(this.textContent, parseInt(d[scope.options.field]));
							return function(t) {
								this.textContent = Math.round(i(t));
							};

						});

					bar.exit()
						.transition()
						.duration(scope.options.duration)
						.attr("opacity", "0")
						.remove();
				}




				scope.$watch(function() {
					return scope.countries;
				}, function(n, o) {
					scope.countries = angular.extend(scope.countries, scope.country);
					updateData();
					$timeout(function(){
						var container = angular.element(document).find('md-sidenav').find('section');
						var map = angular.element(document.getElementById("map"));

						if (scope.countries.length  && window.innerWidth < 960) {
							var h = container[0].clientHeight;

							if(h < window.innerHeight - 194){
								container.attr('style', 'transform:translateY(calc(100vh - ' + (parseInt(scope.countries.length * 24)) + 'px - 260px))')
								// map.attr('style', 'height:calc(100vh - '+(parseInt(scope.countries.length * 24))+'px + 260px)');
							}
							else{
								container.attr('style', 'transform:translateY(calc(100vh - ' + (parseInt(window.innerHeight - 200)) + 'px - 40px))')
							}
						} else {
							container.attr('style', '');
							// map.attr('style', '');
						}
					})
				}, true)
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'CompositsCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'composits', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/composits/composits.html',
			controller: 'CompositsCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				items: '=',
				item: '=',
				options:'='
			},
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ConflictitemsCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'conflictitems', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/conflictitems/conflictitems.html',
			controller: 'ConflictitemsCtrl',
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ContenteditableCtrl', function(){
		//
    });

})();

(function () {
	"use strict";

	angular.module('app.directives').directive('contenteditable', function () {

		return {
			restrict: 'A',
			require: '?ngModel',
			link: function (scope, element, attrs, ngModel) {

				//if (!ngModel) return;
				ngModel.$render = function () {
					element.html(ngModel.$viewValue || '');
				};

				// Listen for change events to enable binding
				element.on('blur keyup change', function () {
					scope.$apply(readViewText);
				});
				
				// No need to initialize, AngularJS will initialize the text based on ng-model attribute

				// Write data to the model
				function readViewText() {
					var html = element.html();
					// When we clear the content editable the browser leaves a <br> behind
					// If strip-br attribute is provided then we strip this out
					if (attrs.stripBr && html == '<br>') {
						html = '';
					}
					ngModel.$setViewValue(html);
				}
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'export', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/export/export.html',
			controller: 'ExportDirectiveCtrl',
			controllerAs: 'vm',
			scope:{
				item: '=',
				options: '=',
				selected: '='
			},
			bindToController: true,
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ExportDirectiveCtrl', ["$scope", "DataService", "DialogService", function($scope, DataService,DialogService ) {
		//
		var vm = this;
		vm.original = angular.copy(vm.item);
		vm.checkBase = checkBase;
		vm.checkFull = checkFull;
		vm.getCode = getCode;

		vm.baseOptions = {
			drag: true,
			allowDrop: true,
			allowDrag: true,
			allowMove: true,
			allowSave: true,
			allowDelete: true,
			allowAddContainer: true,
			allowAdd: true,
			editable: true,
			assigments: false,
			saveClick: vm.options.exports.save,
			addClick: vm.options.exports.addClick,
			addContainerClick: vm.options.exports.addContainerClick,
			deleteDrop: vm.options.exports.deleteDrop,
			deleteClick: vm.options.exports.deleteClick,
			onDrop: vm.options.exports.onDrop,
			inserted: vm.options.exports.inserted,
			styleable: vm.options.styleable,
			styleClick: vm.options.style.click,
			hideExpansionOnItem:true,
			expandJustGroups: vm.options.expandJustGroups
		};
		activate();


		function activate() {
			//loadAll();
		}

		function checkBase() {

		}

		function checkFull() {

		}
		function getCode(){
			 DialogService.fromTemplate('embedcode', $scope);
		}

	}]);

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('exportChooser', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/exportChooser/exportChooser.html',
			controller: 'ExportChooserCtrl',
			controllerAs: 'vm',
			scope: {
				countries: '=',
				nation: '=',
				selected: '=?',
				chapters: '=?',
				changed: '&',
				indicatorChange: '&?'
			},
			bindToController: true,
			replace: true,
			link: function(scope, element, attrs) {
				//
		
			}
		};

	});

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ExportChooserCtrl', ["$scope", "$timeout", function($scope, $timeout) {
		//
		var vm = this;
		vm.index = 0;
		vm.activeList = [];
	


		$timeout(function() {
			if (vm.chapters) {
				if (vm.selected.parent_id) {
					angular.forEach(vm.chapters, function(chapter) {
						if (chapter.id == vm.selected.parent_id) {
							vm.activeList = chapter.children;
						}
					});
				} else {
					vm.activeList = vm.chapters;
				}
				vm.index = vm.activeList.indexOf(vm.selected);
			}
		});

		$scope.$watch('vm.index', function(n, o) {
			if (n === o) return false;
			// if(vm.activeList[vm.index] != "undefined")
			vm.selected = vm.activeList[vm.index];
		})
	}]);
})();

(function () {
	"use strict";

	angular.module('app.directives').directive('fileDropzone', ["toastr", function (toastr) {

		return {
			restrict: 'EA',
			scope: {
        file: '=',
        fileName: '='
      },
			link: function (scope, element, attrs) {
				var checkSize, isTypeValid, processDragOverOrEnter, validMimeTypes;
				processDragOverOrEnter = function (event) {
					if (event != null) {
						event.preventDefault();
					}
					event.dataTransfer.effectAllowed = 'copy';
					return false;
				};
				validMimeTypes = attrs.fileDropzone;
				checkSize = function (size) {
					var _ref;
					if (((_ref = attrs.maxFileSize) === (void 0) || _ref === '') || (size / 1024) / 1024 < attrs.maxFileSize) {
						return true;
					} else {
						alert("File must be smaller than " + attrs.maxFileSize + " MB");
						return false;
					}
				};
				isTypeValid = function (type) {
					if ((validMimeTypes === (void 0) || validMimeTypes === '') || validMimeTypes.indexOf(type) > -1) {
						return true;
					} else {
						toastr.error("File must be one of following types " + validMimeTypes, 'Invalid file type!');

						return false;
					}
				};
				element.bind('dragover', processDragOverOrEnter);
				element.bind('dragenter', processDragOverOrEnter);
				return element.bind('drop', function (event) {
					var file, name, reader, size, type;
					if (event != null) {
						event.preventDefault();
					}
					reader = new FileReader();
					reader.onload = function (evt) {
						if (checkSize(size) && isTypeValid(type)) {
							return scope.$apply(function () {
								scope.file = evt.target.result;
								if (angular.isString(scope.fileName)) {
									return scope.fileName = name;
								}
							});
						}
					};
					file = event.dataTransfer.files[0];
					/*name = file.name;
					type = file.type;
					size = file.size;
					reader.readAsDataURL(file);*/
					scope.file = file;
					return false;
				});
			}
		};
	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'FileDropzoneCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive('previewCanvas', function() {
    return {
      //require: '?resizableCanvas',
      link: function(scope, elem, attrs, resizableCanvasCtrl) {
        var canvasDom, ctx, dependentDataChange, getDependentData, jsCodePrecision;
        canvasDom = elem[0];
        ctx = canvasDom.getContext('2d');
        jsCodePrecision = 3;
        /*
              @return {Object} Data on which the canvas rendering depends.
        */

        getDependentData = function() {
          return {
            ColorHandles: scope.$eval(attrs.colorHandles),
            gradientType: scope.$eval(attrs.gradientType),
            width: elem.prop('width'),
            height: elem.prop('height'),
            rotateDegrees: scope.$eval(attrs.rotate),
            innerCircleX: scope.$eval(attrs.innerCircleX),
            innerCircleY: scope.$eval(attrs.innerCircleY),
            outerCircleX: scope.$eval(attrs.outerCircleX),
            outerCircleY: scope.$eval(attrs.outerCircleY)
          };
        };
        /*
              @param {Object} dependentData Result of {@link getDependentData()}.
        */

        dependentDataChange = function(dependentData) {
          var ColorHandle, ColorHandles, a, b, g, gradientType, grd, height, innerCircleX, innerCircleY, matches, outerCircleX, outerCircleY, r, r1, r1Fixed, r2, r2Fixed, regEx, rotateDegrees, scaleX, scaleY, width, x1, x1Fixed, x2, x2Fixed, y1, y1Fixed, y2, y2Fixed, _i, _len, _ref, _ref1, _ref2, _ref3, _ref4;
          ColorHandles = dependentData.ColorHandles;
          gradientType = dependentData.gradientType;
          width = dependentData.width;
          height = dependentData.height;
          rotateDegrees = (_ref = dependentData.rotateDegrees) != null ? _ref : 0;
          innerCircleX = (_ref1 = dependentData.innerCircleX) != null ? _ref1 : 50;
          innerCircleY = (_ref2 = dependentData.innerCircleY) != null ? _ref2 : 50;
          outerCircleX = (_ref3 = dependentData.outerCircleX) != null ? _ref3 : 50;
          outerCircleY = (_ref4 = dependentData.outerCircleY) != null ? _ref4 : 50;
          if (attrs.htmlCode) {
            scope[attrs.htmlCode] = "<canvas id=\"myPrettyCanvas\" width=\"" + width + "\" height=\"" + height + "\"></canvas>";
          }
          if (attrs.jsCode) {
            scope[attrs.jsCode] = "var canvasId = 'myPrettyCanvas',\n    canvas = document.getElementById(canvasId),\n    ctx = canvas.getContext('2d'),\n    grd;\n\n";
          }
          scaleX = 1;
          scaleY = 1;
          switch (gradientType) {
            case 'linear':
              if ((0 <= rotateDegrees && rotateDegrees < 45)) {
                x1 = 0;
                y1 = height / 2 * (45 - rotateDegrees) / 45;
                x2 = width;
                y2 = height - y1;
              } else if ((45 <= rotateDegrees && rotateDegrees < 135)) {
                x1 = width * (rotateDegrees - 45) / (135 - 45);
                y1 = 0;
                x2 = width - x1;
                y2 = height;
              } else if ((135 <= rotateDegrees && rotateDegrees < 225)) {
                x1 = width;
                y1 = height * (rotateDegrees - 135) / (225 - 135);
                x2 = 0;
                y2 = height - y1;
              } else if ((225 <= rotateDegrees && rotateDegrees < 315)) {
                x1 = width * (1 - (rotateDegrees - 225) / (315 - 225));
                y1 = height;
                x2 = width - x1;
                y2 = 0;
              } else if (315 <= rotateDegrees) {
                x1 = 0;
                y1 = height - height / 2 * (rotateDegrees - 315) / (360 - 315);
                x2 = width;
                y2 = height - y1;
              }
              grd = ctx.createLinearGradient(x1, y1, x2, y2);
              if (attrs.jsCode) {
                x1Fixed = x1.toFixed(jsCodePrecision);
                y1Fixed = y1.toFixed(jsCodePrecision);
                x2Fixed = x2.toFixed(jsCodePrecision);
                y2Fixed = y2.toFixed(jsCodePrecision);
                scope[attrs.jsCode] += "// Create gradient\ngrd = ctx.createLinearGradient(" + x1Fixed + ", " + y1Fixed + ", " + x2Fixed + ", " + y2Fixed + ");\n\n";
              }
              break;
            case 'radial':
              if (width > height) {
                scaleY = height / width;
              }
              if (height > width) {
                scaleX = width / height;
              }
              ctx.setTransform(scaleX, 0, 0, scaleY, 0, 0);
              grd = ctx.createRadialGradient(x1 = (width * innerCircleX / 100) / scaleX, y1 = (height * innerCircleY / 100) / scaleY, r1 = 0, x2 = (width * outerCircleX / 100) / scaleX, y2 = (height * outerCircleY / 100) / scaleY, r2 = (width / 2) / scaleX);
              if (attrs.jsCode) {
                if (scaleX !== 1 || scaleY !== 1) {
                  scope[attrs.jsCode] += "// Transform to facilitate ellipse\nctx.setTransform(" + scaleX + ", 0, 0, " + scaleY + ", 0, 0);\n\n";
                }
                x1Fixed = x1.toFixed(jsCodePrecision);
                y1Fixed = y1.toFixed(jsCodePrecision);
                r1Fixed = r1.toFixed(jsCodePrecision);
                x2Fixed = x2.toFixed(jsCodePrecision);
                y2Fixed = y2.toFixed(jsCodePrecision);
                r2Fixed = r2.toFixed(jsCodePrecision);
                scope[attrs.jsCode] += "// Create gradient\ngrd = ctx.createRadialGradient(" + x1Fixed + ", " + y1Fixed + ", " + r1Fixed + ", " + x2Fixed + ", " + y2Fixed + ", " + r2Fixed + ");\n\n";
              }
              break;
            default:
              throw 'Unknown gradient type.';
          }
          if (attrs.jsCode) {
            scope[attrs.jsCode] += '// Add colors\n';
          }
          for (_i = 0, _len = ColorHandles.length; _i < _len; _i++) {
            ColorHandle = ColorHandles[_i];
            if (!ColorHandle.color) {
              continue;
            }
            grd.addColorStop(ColorHandle.stop, ColorHandle.color);
            if (attrs.jsCode) {
              regEx = /([\d.]+),\s*([\d.]+),\s*([\d.]+),\s*([\d.]+)/;
              matches = regEx.exec(ColorHandle.color);
              r = matches[1];
              g = matches[2];
              b = matches[3];
              a = parseFloat(matches[4]).toFixed(jsCodePrecision);
              scope[attrs.jsCode] += "grd.addColorStop(" + (ColorHandle.stop.toFixed(jsCodePrecision)) + ", 'rgba(" + r + ", " + g + ", " + b + ", " + a + ")');\n";
            }
          }
          if (attrs.jsCode) {
            scope[attrs.jsCode] += '\n';
          }
          ctx.clearRect(0, 0, width / scaleX, height / scaleY);
          ctx.fillStyle = grd;
          ctx.fillRect(0, 0, width / scaleX, height / scaleY);
          if (attrs.jsCode) {
            scope[attrs.jsCode] += "// Fill with gradient\nctx.fillStyle = grd;\nctx.fillRect(0, 0, " + ((width / scaleX).toFixed(jsCodePrecision)) + ", " + ((height / scaleY).toFixed(jsCodePrecision)) + ");";
          }
          // if (resizableCanvasCtrl != null) {
          //   return resizableCanvasCtrl.drawResizeIcon();
          // }
        };
        return scope.$watch(getDependentData, dependentDataChange, true);
      }
    };
  });

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'GradientCreatorCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive('gradientClickArea', ["$document", function($document) {
    return {
      template: '<span class="addHandleIcon iconic brush"></span>',
      link: function(scope, elem) {
        var addHandleIcon, mouseIsDown;
        addHandleIcon = elem.find('span').hide();
        mouseIsDown = false;
        $document.mousedown(function() {
          return mouseIsDown = true;
        });
        $document.mouseup(function() {
          return mouseIsDown = false;
        });
        elem.mouseover(function() {
          if (!mouseIsDown) {
            return addHandleIcon.show();
          }
        });
        elem.mouseout(function() {
          return addHandleIcon.hide();
        });
        elem.mousemove(function(event) {
          return addHandleIcon.css({
            left: event.offsetX,
            top: event.offsetY - 5
          });
        });
        return elem.mousedown(function(event) {
          var leftClicked;
          leftClicked = event.which === 1;
          if (leftClicked) {
            scope.$apply(function() {
              return scope.addColorHandle((event.pageX - elem.offset().left) / elem.width());
            });
            return addHandleIcon.hide();
          }
        });
      }
    };
  }]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'GradientCreatorClickAreaCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'history', function() {
		var defaults = function(){
			return {
				field: 'score',
				color: ''
			}
		};
		return {
			restrict: 'E',
			templateUrl: 'views/directives/history/history.html',
			controller: 'HistoryCtrl',
			scope:{
				options:'=',
				chartdata: '='
			},
			link: function( $scope, element, $attrs, ngModel){
					var options = angular.extend(defaults(), $scope.options);
			}
		};

	});

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('HistoryCtrl', ["$scope", function ($scope) {
		$scope.setData = setData;
		activate();
	
		function activate(){
			$scope.setData();
			$scope.$watch('options', function(n,o){
				if(n === 0){
					return;
				}
				$scope.setData();
			})
		}
		function setData(){
			$scope.display = {
				selectedCat: '',
				rank: [{
					fields: {
						x: 'year',
						y: 'rank'
					},
					title: 'Rank',
					color: '#52b695'
				}],
				score: [{
					fields: {
						x: 'year',
						y: $scope.options.field
					},
					title: 'Score',
					color: $scope.options.color
				}]
			};
		}
	}]);

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('imageColor', ["$timeout", function($timeout) {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/imageColor/imageColor.html',
			controller: 'ImageColorCtrl',
			scope:{
				color:'='
			},
			link: function(scope, element, attrs) {
				//
				var image = element[0];
				image.onload = function(){
					scope.color = tinycolor(getAverageRGB(image)).isDark();
				};

				function getAverageRGB(imgEl) {

					var blockSize = 5, // only visit every 5 pixels
						defaultRGB = {
							r: 0,
							g: 0,
							b: 0
						}, // for non-supporting envs
						canvas = document.createElement('canvas'),
						context = canvas.getContext && canvas.getContext('2d'),
						data, width, height,
						i = -4,
						length,
						rgb = {
							r: 0,
							g: 0,
							b: 0
						},
						count = 0;

					if (!context) {
						return defaultRGB;
					}

					height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;
					width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;

					context.drawImage(imgEl, 0, 0);

					try {
						data = context.getImageData(0, 0, width, height);
					} catch (e) {
						/* security error, img on diff domain */
						alert('x');
						return defaultRGB;
					}

					length = data.data.length;

					while ((i += blockSize * 4) < length) {
						++count;
						rgb.r += data.data[i];
						rgb.g += data.data[i + 1];
						rgb.b += data.data[i + 2];
					}

					// ~~ used to floor values
					rgb.r = ~~(rgb.r / count);
					rgb.g = ~~(rgb.g / count);
					rgb.b = ~~(rgb.b / count);

					return rgb;

				}
				function rgb2hsv () {
    var rr, gg, bb,
        r = arguments[0] / 255,
        g = arguments[1] / 255,
        b = arguments[2] / 255,
        h, s,
        v = Math.max(r, g, b),
        diff = v - Math.min(r, g, b),
        diffc = function(c){
            return (v - c) / 6 / diff + 1 / 2;
        };

    if (diff == 0) {
        h = s = 0;
    } else {
        s = diff / v;
        rr = diffc(r);
        gg = diffc(g);
        bb = diffc(b);

        if (r === v) {
            h = bb - gg;
        }else if (g === v) {
            h = (1 / 3) + rr - bb;
        }else if (b === v) {
            h = (2 / 3) + gg - rr;
        }
        if (h < 0) {
            h += 1;
        }else if (h > 1) {
            h -= 1;
        }
    }
    return {
        h: Math.round(h * 360),
        	s: Math.round(s * 100),
        	v: Math.round(v * 100)
        };
        }
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ImageColorCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'imageUploader', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/imageUploader/imageUploader.html',
			controller: 'ImageUploaderCtrl',
			controllerAs: 'vm',
			scope:{
				item: '=ngModel',
      	label: '@'
			},
			bindToController: true,
			//replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('ImageUploaderCtrl', function() {
		//
		var vm = this;
		vm.assignImage = assignImage;
		vm.resetImage = resetImage;

		function assignImage($file, $message, $flow) {
			if (!vm.item) vm.item = {};
			var image = JSON.parse($message);
			vm.item.image = image;
			vm.item.image_id = image.id;
		}

		function resetImage($flow) {
			$flow.cancel();
			vm.item.image = null;
			vm.item.image_id = null;
		}
	});

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'indicator', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/indicator/indicator.html',
			controller: 'IndicatorCtrl',
			controllerAs: 'vm',
			scope:{
				item: '=',
				options: '=',
				selected: '='
			},
			bindToController: true,
			replace:true,
			//require: 'item',
			link: function( scope, element, attrs, itemModel ){
				//
				/*scope.$watch(
					function () {
						return itemModel.$modelValue;
					},
					function (n, o) {
						console.log(n);
					});*/
			}
		};

	});

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('IndicatorCtrl', ["$scope", "DataService", "ContentService", "DialogService", "$filter", "toastr", "VectorlayerService", function ($scope, DataService, ContentService, DialogService, $filter, toastr, VectorlayerService) {
		//
		var vm = this;

		vm.original = angular.copy(vm.item);

		vm.checkBase = checkBase;
		vm.checkFull = checkFull;

		vm.categories = [];
		vm.dataproviders = [];
		vm.selectedItem = null;
		vm.searchText = null;
		vm.searchUnit = null;
		vm.querySearch = querySearch;
		vm.queryUnit = queryUnit;

		vm.save = save;

		vm.createProvider = createProvider;
		vm.createUnit = createUnit;

		activate();

		function activate() {
			loadAll();
		}

		function querySearch(query) {
			return $filter('findbyname')(vm.dataproviders, query, 'title');
		}
		function queryUnit(query) {
			return $filter('findbyname')(vm.measureTypes, query, 'title');
		}

		function loadAll() {
			vm.dataproviders = DataService.getAll('dataproviders').$object;
			vm.categories = ContentService.getCategories({tree:true});
			vm.measureTypes = DataService.getAll('measure_types').$object;
			vm.styles = DataService.getAll('styles').$object;
		}

		function checkBase(){
			if (vm.item.title && vm.item.type && vm.item.dataprovider && vm.item.title.length >= 3) {
				return true;
			}
			return false;
		}
		function checkFull(){
			if(typeof vm.item.categories == "undefined") return false;
			return checkBase() && vm.item.categories.length ? true : false;
		}
		function save(){
			vm.item.save().then(function(response){
				if(response){
					toastr.success('Data successfully updated!', 'Successfully saved');
					vm.item.isDirty = false;
					vm.original = angular.copy(vm.item);
				}
			});
		}

		//TODO: ITS A HACK TO GET IT WORK: ng-click vs ng-mousedown
		function createProvider(text){
			DialogService.fromTemplate('addProvider', $scope);
		}
		function createUnit(text){
			DialogService.fromTemplate('addUnit', $scope);
		}

		$scope.$watch('vm.item', function(n, o){
			if(n != o) {
		    vm.item.isDirty = !angular.equals(vm.item, vm.original);
		  }
		},true);
	}]);

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'indicatorMenu', function() {

		return {
			restrict: 'EA',
			scope: {
				item: '=item'
			},
			replace:true,
			templateUrl: 'views/directives/indicatorMenu/indicatorMenu.html',
			controller: 'IndicatorMenuCtrl',
			controllerAs: 'vm',
			bindToController: true,
			link: function( scope, element, attrs ){
				//
				var cl = 'active';
				var el = element[0];
				var parent = element.parent();
				parent.on('mouseenter', function(e){
					element.addClass(cl);
				}).on('mouseleave', function(e){
					element.removeClass(cl);
				});
				
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'IndicatorMenuCtrl', function(){
		//
		var vm = this;
		vm.checkBase = checkBase;
		vm.locked = locked;
		vm.changeOfficial = changeOfficial;

		function locked(){
			return vm.item.is_official ? 'lock_open' : 'lock';
		}
		function changeOfficial(){
			vm.item.is_official = !vm.item.is_official;
			vm.item.save();
		}
		function checkBase(item){
			if (item.title && item.measure_type_id && item.dataprovider && item.title.length >= 3) {
				return true;
			}
			return false;
		}
  });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'indicators', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/indicators/indicators.html',
			controller: 'IndicatorsCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				item: '=?',
				indicators: '=items',
				selection: '=?',
				options:'=?',
				active: '=?'
			},
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'IndicatorsCtrl', ["DataService", function(DataService){
		//
		var vm = this;
		vm.selectAllGroup = selectAllGroup;
		vm.selectedItem = selectedItem;
		vm.toggleSelection = toggleSelection;
		vm.deleteSelected = deleteSelected;

		vm.filter = {
			sort:'title',
			reverse:false,
			list: 0,
			published: false,
			types: {
				title: true,
				style: false,
				categories: false,
				infographic: false,
				description: false,
			}
		};
		vm.search = {
			query: '',
			show: false
		};
		vm.openMenu = openMenu;
		vm.toggleList = toggleList;



		function toggleList(key){
			if(vm.visibleList == key){
				vm.visibleList = '';
			}
			else{
				vm.visibleList = key;
			}
		}

		function selectedItem(item) {
			return vm.selection.indexOf(item) > -1 ? true : false;
		}
		function selectAll(){
			if(vm.selection.length){
				vm.selection = [];
			}
			else{
				angular.forEach(vm.indicators, function(item){
					if(vm.selection.indexOf(item) == -1){
						vm.selection.push(item);
					}
				});
			}
		}

		function toggleSelection(item) {
			var index = vm.selection.indexOf(item);
			if (index > -1) {
				return vm.selection.splice(index, 1);
			} else {
				return vm.selection.push(item);
			}
		}
		function selectAllGroup(group){
			if(vm.selection.length){
					vm.selection = [];
					return false;
			}
			vm.selection = [];
			angular.forEach(group, function(item){
				vm.selection.push(item);
			});

		}
		function openMenu($mdOpenMenu, ev) {
			$mdOpenMenu(ev);
		}

		function deleteSelected(){
			if(vm.selection.length){
				angular.forEach(vm.selection, function(item){
						DataService.remove('indicators', item.id).then(function(response){
							vm.indicators.splice(vm.indicators.indexOf(item),1);
						})
				})
				vm.selection = [];
			}
		}
		/*$scope.$watch('vm.search.query', function (query, oldQuery) {
			if(query === oldQuery) return false;
			vm.query = vm.filter.types;
			vm.query.q = query;
			vm.items = ContentService.fetchIndicators(vm.query);
		});*/
    }]);

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'indizes', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/indizes/indizes.html',
			controller: 'IndizesCtrl',
			controllerAs: 'vm',
			scope:{
				item: '=',
				options: '=',
				selected: '='
			},
			bindToController: true,
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'IndizesCtrl', ["$scope", "$state", "$filter", "$timeout", "toastr", "DataService", "ContentService", function($scope, $state, $filter, $timeout, toastr, DataService, ContentService){
		//
		var vm = this;
		vm.original = angular.copy(vm.item);
		vm.checkBase = checkBase;
		vm.checkFull = checkFull;
		vm.save = save;

		vm.baseOptions = {
			drag:true,
			allowDrop:true,
			allowDrag:true,
			allowMove:true,
			allowSave:true,
			allowDelete:true,
			allowAddContainer:true,
			allowAdd:true,
			editable:true,
			assigments: true,
			saveClick: save,
			addClick: vm.options.indizes.addClick,
			addContainerClick: vm.options.indizes.addContainerClick,
			deleteDrop: vm.options.indizes.deleteDrop,
			deleteClick: vm.options.indizes.deleteClick
		};
		activate();


		function activate() {
			loadAll();
		}

		function loadAll() {
			vm.categories = ContentService.getCategories({tree:true});
			vm.styles = DataService.getAll('styles').$object;
			vm.types = DataService.getAll('index/types').$object;

			if(typeof vm.item.id == "undefined"){
				vm.item.item_type_id = 1;
				vm.item.children = [];
			}
		}
		function checkBase(){
			if (vm.item.title && vm.item.item_type_id && vm.item.title.length >= 3) {
				return true;
			}
			return false;
		}
		function checkFull(){
			if(typeof vm.item.categories == "undefined") return false;
			return checkBase() && vm.item.categories.length ? true : false;
		}
		function save(){
			if(vm.item.id){
				vm.item.save().then(function(response){
					if(response){
						toastr.success('Data successfully updated!', 'Successfully saved');
						vm.item.isDirty = false;
						vm.original = angular.copy(vm.item);
						ContentService.updateItem(response);
						$state.go('app.index.editor.indizes.data',{id:vm.item.id,name:response.name})
					}
				});
			}
			else{
				DataService.post('index', vm.item).then(function(response){
					if(response){
						toastr.success('Data successfully saved!', 'Successfully saved');
						vm.item.isDirty = false;
						vm.original = angular.copy(vm.item);
						ContentService.addItem(response);
						$state.go('app.index.editor.indizes.data',{id:response.id, name:response.name})
					}
				});
			}

		}

		function removeItems(event, item){
		//	console.log(vm.item, item);

		}
		$scope.$watch('vm.item', function(n, o){
			if(n != o) {
				vm.item.isDirty = !angular.equals(vm.item, vm.original);
			}
		},true);
    }]);

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('median', ["$timeout", "$window", function($timeout, $window) {
		var defaults = function() {
			return {
				id: 'gradient',
				width: 340,
				height: 40,
				info: true,
				field: 'score',
				handling: true,
				showValue: true,
				min: 0,
				max: 100,
				margin: {
					left: 20,
					right: 20,
					top: 10,
					bottom: 10
				},
				colors: [{
					position: 0,
					color: 'rgba(102,102,102,1)',
					opacity: 1
				}, {
					position: 53,
					color: 'rgba(128, 243, 198,1)',
					opacity: 1
				}, {
					position: 100,
					color: 'rgba(255,255,255,1)',
					opacity: 0
				}]
			};
		}
		return {
			restrict: 'E',
			scope: {
				data: '=',
				options: '='
			},
			require: 'ngModel',
			link: function($scope, element, $attrs, ngModel) {

				var options = angular.extend(defaults(), $attrs);
				options = angular.extend(options, $scope.options);
				options.width = element.parent()[0].clientWidth - options.margin.left - options.margin.right;
				options.unique = new Date().getTime();
				element.css('height', options.height + 'px').css('border-radius', options.height / 2 + 'px');

				if (options.color) {
					options.colors[1].color = options.color;
				}
				if (!$scope.options.max) {
					angular.forEach($scope.data, function(nat, key) {
						options.max = d3.max([options.max, parseInt(nat[options.field])]);
						options.min = d3.min([options.min, parseInt(nat[options.field])]);
					});
				}

				var container = d3.select(element[0]).append("svg");
				var svg = container.append("g");
				var effects = svg.append('svg:defs')
				var gradient = effects.append("svg:linearGradient")
					.attr('id', options.field + options.unique)
					.attr('x1', '0%')
					.attr('y1', '0%')
					.attr('x2', '100%')
					.attr('y2', '0%')
					.attr('spreadMethod', 'pad');
				var shadow = effects.append("filter")
					.attr("id", "drop-shadow")
					.attr("height", "150%");
				var shadowIntensity = shadow.append("feGaussianBlur")
					.attr("in", "SourceAlpha")
					.attr("stdDeviation", 1)
					.attr("result", "blur");
				var shadowPos = shadow.append("feOffset")
					.attr("in", "blur")
					.attr("dx", 0)
					.attr("dy", 0)
					.attr("result", "offsetBlur");

				var feMerge = shadow.append("feMerge");
				feMerge.append("feMergeNode")
					.attr("in", "offsetBlur")
				feMerge.append("feMergeNode")
					.attr("in", "SourceGraphic");

				var bckgrnd = svg.append('g').attr('transform', "translate(0, " + (options.height / 4) + ")");
				var rect = bckgrnd.append('path');
				var legend = svg.append('g');
				var legend2 = svg.append('g');
				var slider = svg.append("g")
					.attr("class", "slider");
				// if (options.handling == true) {
				// 	slider.call(brush);
				// }

				slider.select(".background")
					.attr("height", options.height);

				var x = d3.scale.linear()
				x.domain([options.min, options.max])
					.range([options.margin.left, options.width - options.margin.left])
					.clamp(true);


				angular.forEach(options.colors, function(color) {
					gradient.append('svg:stop')
						.attr('offset', color.position + '%')
						.attr('stop-color', color.color)
						.attr('stop-opacity', color.opacity);
				});


				if (options.info === true) {
					legend.append('circle')
						.attr('r', options.height / 2);
					var legendText = legend.append('text')
						.text(options.min)
						.style('font-size', options.height / 2.5)
						.attr('text-anchor', 'middle')
						.attr('y', '.35em')
						.attr('id', 'lowerValue');

					legend2.attr('transform', 'translate(' + (options.width - (options.height / 2)) + ', ' + options.height / 2 + ')')
						.attr('class', 'endLabel')
					legend2.append('circle')
						.attr('r', options.height / 2)
					var legend2Text = legend2.append('text')
						.text(function() {
							//TDODO: CHckick if no comma there
							if (options.max > 1000) {
								var v = (parseInt(options.max) / 1000).toString();
								return v.substr(0, v.indexOf('.')) + "k";
							}
							return options.max
						})
						.style('font-size', options.height / 2.5)
						.attr('text-anchor', 'middle')
						.attr('y', '.35em')
						.attr('id', 'upperValue');
				}


				if (options.info === true) {
					var line = slider.append('line')
						.attr('x1', options.width / 2)
						.attr('y1', 0)
						.attr('x2', options.width / 2)
						.attr('y2', options.height)
						.attr('stroke-dasharray', '3,3')
						.attr('stroke-width', 1)
						.attr('stroke', 'rgba(0,0,0,87)');
				}
				var handleCont = slider.append('g');
				var handle = handleCont.append("circle")
					.attr("class", "handle")
					.style("filter", "url(#drop-shadow)");
				if (options.showValue) {
					var handleLabel = handleCont.append('text')
						.text(0)
				}


				function draw() {
					x.range([options.margin.left, options.width - options.margin.right])
						.clamp(true);


					// var brush = d3.svg.brush()
					// 	.x(x)
					// 	.extent([0, 0])
					// 	.on("brush", brush)
					// 	.on("brushend", brushed);

					container
						.attr("width", options.width)
						.attr("height", options.height)
						.style('margin-left', options.margin.left)


					//.attr("transform", "translate(0," + options.margin.top / 2 + ")");



					rect
						.attr('d', rounded_rect(0, 0, options.width, options.height / 2, options.height / 4, true, true, true, true))
						.attr('y', options.height / 2)
						.attr('width', options.width)
						.attr('height', options.height / 2)
						.style('fill', 'url(#' + (options.field + options.unique) + ')');
					legend.attr('transform', 'translate(' + options.height / 2 + ', ' + options.height / 2 + ')')
						.attr('class', 'startLabel')

					if (options.info === true) {
						legend.attr('r', options.height / 2);
						legendText.text(options.min)
							.style('font-size', options.height / 2.5)
							.attr('text-anchor', 'middle')
							.attr('y', '.35em')
							.attr('id', 'lowerValue');
						legend2.attr('transform', 'translate(' + (options.width - (options.height / 2)) + ', ' + options.height / 2 + ')')
							.attr('class', 'endLabel')
						legend2.append('circle')
							.attr('r', options.height / 2)

						legend2Text.text(function() {
								//TDODO: CHckick if no comma there
								if (options.max > 1000) {
									var v = (parseInt(options.max) / 1000).toString();
									return v.substr(0, v.indexOf('.')) + "k";
								}
								return options.max
							})
							.style('font-size', options.height / 2.5)
							.attr('text-anchor', 'middle')
							.attr('y', '.35em')
							.attr('id', 'upperValue');

						line.attr('x1', options.width / 2)
							.attr('y1', 0)
							.attr('x2', options.width / 2)
							.attr('y2', options.height)
							.attr('stroke-dasharray', '3,3')
							.attr('stroke-width', 1)
							.attr('stroke', 'rgba(0,0,0,87)');
					}

					handleCont
					//.attr("transform", "translate(0," + options.height / 2 + ")")
						.on('mouseover', function() {
							shadowIntensity.transition().duration(200).attr('stdDeviation', 2);

						})
						.on('mouseout', function() {
							shadowIntensity.transition().duration(200).attr('stdDeviation', 1);

						});

					handle
						.attr("r", function() {
							if (options.showValue) {
								return ((options.height / 2) + options.height / 10);
							}
							return options.height / 4;
						});

					if (options.color) {
						handle.style('fill', '#fff' /*options.color*/ );
					}
					if (options.showValue) {
						handleLabel
							.style('font-size', options.height / 2.5)
							.attr("text-anchor", "middle").attr('y', '0.35em');
					}
					if (ngModel.$modelValue) {
						if (options.showValue) {
							handleLabel.text(labeling(ngModel.$modelValue[options.field]));
						}
						handleCont.transition().duration(500).ease('quad').attr("transform", 'translate(' + x(ngModel.$modelValue[options.field]) + ',' + options.height / 2 + ')');
					} else {
						if (options.showValue) {
							handleLabel.text(0);
						}

					}
				}
				//slider
				//.call(brush.extent([0, 0]))
				//.call(brush.event);
				function rounded_rect(x, y, w, h, r, tl, tr, bl, br) {
					var retval;
					retval = "M" + (x + r) + "," + y;
					retval += "h" + (w - 2 * r);
					if (tr) {
						retval += "a" + r + "," + r + " 0 0 1 " + r + "," + r;
					} else {
						retval += "h" + r;
						retval += "v" + r;
					}
					retval += "v" + (h - 2 * r);
					if (br) {
						retval += "a" + r + "," + r + " 0 0 1 " + -r + "," + r;
					} else {
						retval += "v" + r;
						retval += "h" + -r;
					}
					retval += "h" + (2 * r - w);
					if (bl) {
						retval += "a" + r + "," + r + " 0 0 1 " + -r + "," + -r;
					} else {
						retval += "h" + -r;
						retval += "v" + -r;
					}
					retval += "v" + (2 * r - h);
					if (tl) {
						retval += "a" + r + "," + r + " 0 0 1 " + r + "," + -r;
					} else {
						retval += "v" + -r;
						retval += "h" + r;
					}
					retval += "z";
					return retval;
				}

				function labeling(value) {
					if (parseInt(value) > 1000) {
						var v = (parseInt(value) / 1000).toString();
						return v.substr(0, v.indexOf('.')) + "k";
					} else {
						return parseInt(value);
					}
				}

				function brush() {
					var value = brush.extent()[0];

					if (d3.event.sourceEvent) {
						value = x.invert(d3.mouse(this)[0]);
						brush.extent([value, value]);
					}
					if (options.showValue) {
						handleLabel.text(labeling(value));
					}
					handleCont.attr("transform", 'translate(' + x(value) + ',' + options.height / 2 + ')');
				}

				function brushed() {
					var count = 0;
					var found = false;
					var final = "";
					var value = brush.extent()[0];
					angular.forEach($scope.data, function(nat, key) {

						if (parseInt(nat[options.field]) == parseInt(value)) {
							final = nat;
							found = true;
						}
					});

					//
					// if(!final){
					// 	do {
					// 		angular.forEach($scope.data, function (nat, key) {
					// 			if (parseInt(nat[options.field]) == parseInt(value)) {
					// 				final = nat;
					// 				found = true;
					// 			}
					// 		});
					// 		count++;
					// 		value = value > (max / 2) ? value - 1 : value + 1;
					// 	} while (!found && count < max);
					// }


					if (final) {
						ngModel.$setViewValue(final);
						ngModel.$render();
					}

				}


				$scope.$watch('options', function(n, o) {
					if (n === o) {
						return;
					}
					options.colors[1].color = n.color;
					gradient = svg.append('svg:defs')
						.append("svg:linearGradient")
						.attr('id', options.field + "_" + n.color)
						.attr('x1', '0%')
						.attr('y1', '0%')
						.attr('x2', '100%')
						.attr('y2', '0%')
						.attr('spreadMethod', 'pad')
					angular.forEach(options.colors, function(color) {
						gradient.append('svg:stop')
							.attr('offset', color.position + '%')
							.attr('stop-color', color.color)
							.attr('stop-opacity', color.opacity);
					});
					rect.style('fill', 'url(#' + options.field + '_' + n.color + ')');
					handle.style('fill', n.color);

					if (ngModel.$modelValue) {
						if (options.showValue) {
							handleLabel.text(labeling(ngModel.$modelValue[0][n.field]));
						}
						handleCont.transition().duration(500).ease('quad').attr("transform", 'translate(' + x(ngModel.$modelValue.data[0][n.field]) + ',' + options.height / 2 + ')');
					} else {
						if (options.showValue) {
							handleLabel.text(0);
						}
					}

				}, true);
				$scope.$watch(
					function() {
						return ngModel.$modelValue;
					},
					function(newValue, oldValue) {

						if (!newValue) {
							if (options.showValue) {
								handleLabel.text(parseInt(0));
							}
							handleCont.attr("transform", 'translate(' + x(0) + ',' + options.height / 2 + ')');
							return;
						}
						if (options.showValue) {
							handleLabel.text(labeling(newValue[options.field]));
						}
						if (newValue == oldValue) {
							handleCont.attr("transform", 'translate(' + x(newValue[options.field]) + ',' + options.height / 2 + ')');
						} else {
							handleCont.transition().duration(500).ease('quad').attr("transform", 'translate(' + x(newValue[options.field]) + ',' + options.height / 2 + ')');

						}


					});
				$scope.$watch('data', function(n, o) {
					if (n === o) return false;

					options.min = 0;
					options.max = 0;
					angular.forEach($scope.data, function(nat, key) {
						if (!$scope.options.max) {
							options.max = d3.max([options.max, parseInt(nat[options.field])]);
							options.min = d3.min([options.min, parseInt(nat[options.field])]);
						}
						if (nat.iso == ngModel.$modelValue.iso) {
							if (options.showValue) {
								handleLabel.text(labeling(nat.data[0][options.field]));
							}
							handleCont.transition().duration(500).ease('quad').attr("transform", 'translate(' + x(nat.data[0][options.field]) + ',' + options.height / 2 + ')');

						}
					});

					x = d3.scale.linear()
						.domain([options.min, options.max])
						.range([options.margin.left, options.width - options.margin.left])
						.clamp(true);
					// brush.x(x)
					// 	.extent([0, 0])
					// 	.on("brush", brush)
					// 	.on("brushend", brushed);
					legend.select('#lowerValue').text(min);
					legend2.select('#upperValue').text(function() {
						//TDODO: CHckick if no comma there
						if (options.max > 1000) {
							var v = (parseInt(options.max) / 1000).toString();
							return v.substr(0, v.indexOf('.')) + "k";
						}
						return options.max
					});
					angular.forEach($scope.data, function(nat, key) {
						if (nat.iso == ngModel.$modelValue.iso) {
							if (options.showValue) {
								handleLabel.text(labeling(nat.data[0][options.field]));
							}
							handleCont.transition().duration(500).ease('quad').attr("transform", 'translate(' + x(nat.data[0][options.field]) + ',' + options.height / 2 + ')');
						}
					});

				});
				$window.onresize = function() {
						options.width = element.parent()[0].clientWidth - options.margin.left - options.margin.right;
						//options.height = options.width / 20;
						draw();
					}
					// $timeout(function() {
					// 	options.width = element.parent()[0].clientWidth - options.margin.left - options.margin.right;
					// 	//options.height = options.width / 20;
					// 	draw();
					// }, 250)
				$scope.$watch($attrs.ngIf, function() {
					$timeout(function() {
						options.width = element.parent()[0].clientWidth - options.margin.left - options.margin.right;

						draw();
					});
				});
				draw();
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'MedianCtrl', function(){
		//
    });

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('panels', ["$window", function($window) {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/panels/panels.html',
			controller: 'PanelsCtrl',
			link: function(scope, element, attrs) {
				//
				var projectsContainer = element.next(),
					projectsPreviewWrapper = element.find('ul'),
					projectPreviews = projectsPreviewWrapper.children('li'),
					projects = document.querySelector('.cd-projects'),
					navigationTrigger = angular.element(document.querySelector('.cd-nav-trigger')),
					navigation = element.find('nav');
					//if browser doesn't support CSS transitions...
					//transitionsNotSupported = ($('.no-csstransitions').length > 0);

				var animating = false,
					//will be used to extract random numbers for projects slide up/slide down effect
					numRandoms = projects.querySelector('li').length,
					uniqueRandoms = [];

				//open project
				projectsPreviewWrapper.on('click', function(event) {
					event.preventDefault();
					if (animating == false) {
						animating = true;
						navigationTrigger.add(projectsContainer).addClass('project-open');
						openProject($(this).parent('li'));
					}
				});

				// navigationTrigger.on('click', function(event) {
				// 	event.preventDefault();
				//
				// 	if (animating == false) {
				// 		animating = true;
				// 		if (navigationTrigger.hasClass('project-open')) {
				// 			//close visible project
				// 			navigationTrigger.add(projectsContainer).removeClass('project-open');
				// 			closeProject();
				// 		} else if (navigationTrigger.hasClass('nav-visible')) {
				// 			//close main navigation
				// 			navigationTrigger.removeClass('nav-visible');
				// 			navigation.removeClass('nav-clickable nav-visible');
				// 			if (transitionsNotSupported) projectPreviews.removeClass('slide-out');
				// 			else slideToggleProjects(projectsPreviewWrapper.children('li'), -1, 0, false);
				// 		} else {
				// 			//open main navigation
				// 			navigationTrigger.addClass('nav-visible');
				// 			navigation.addClass('nav-visible');
				// 			if (transitionsNotSupported) projectPreviews.addClass('slide-out');
				// 			else slideToggleProjects(projectsPreviewWrapper.children('li'), -1, 0, true);
				// 		}
				// 	}
				//
				// 	if (transitionsNotSupported) animating = false;
				// });

				//scroll down to project info
				// projectsContainer.on('click', '.scroll', function() {
				// 	projectsContainer.animate({
				// 		'scrollTop': $window.height()
				// 	}, 500);
				// });

				//check if background-images have been loaded and show project previews
				// projectPreviews.children('a').bgLoaded({
				// 	afterLoaded: function() {
				// 		showPreview(projectPreviews.eq(0));
				// 	}
				// });

				function showPreview(projectPreview) {
					if (projectPreview.length > 0) {
						setTimeout(function() {
							projectPreview.addClass('bg-loaded');
							showPreview(projectPreview.next());
						}, 150);
					}
				}

				function openProject(projectPreview) {
					var projectIndex = projectPreview.index();
					projects.children('li').eq(projectIndex).add(projectPreview).addClass('selected');

					if (transitionsNotSupported) {
						projectPreviews.addClass('slide-out').removeClass('selected');
						projects.children('li').eq(projectIndex).addClass('content-visible');
						animating = false;
					} else {
						slideToggleProjects(projectPreviews, projectIndex, 0, true);
					}
				}

				function closeProject() {
					projects.find('.selected').removeClass('selected').on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function() {
						$(this).removeClass('content-visible').off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend');
						slideToggleProjects(projectsPreviewWrapper.children('li'), -1, 0, false);
					});

					//if browser doesn't support CSS transitions...
					if (transitionsNotSupported) {
						projectPreviews.removeClass('slide-out');
						projects.find('.content-visible').removeClass('content-visible');
						animating = false;
					}
				}

				function slideToggleProjects(projectsPreviewWrapper, projectIndex, index, bool) {
					if (index == 0) createArrayRandom();
					if (projectIndex != -1 && index == 0) index = 1;

					var randomProjectIndex = makeUniqueRandom();
					if (randomProjectIndex == projectIndex) randomProjectIndex = makeUniqueRandom();

					if (index < numRandoms - 1) {
						projectsPreviewWrapper.eq(randomProjectIndex).toggleClass('slide-out', bool);
						setTimeout(function() {
							//animate next preview project
							slideToggleProjects(projectsPreviewWrapper, projectIndex, index + 1, bool);
						}, 150);
					} else if (index == numRandoms - 1) {
						//this is the last project preview to be animated
						projectsPreviewWrapper.eq(randomProjectIndex).toggleClass('slide-out', bool).one('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function() {
							if (projectIndex != -1) {
								projects.children('li.selected').addClass('content-visible');
								projectsPreviewWrapper.eq(projectIndex).addClass('slide-out').removeClass('selected');
							} else if (navigation.hasClass('nav-visible') && bool) {
								navigation.addClass('nav-clickable');
							}
							projectsPreviewWrapper.eq(randomProjectIndex).off('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend');
							animating = false;
						});
					}
				}

				//http://stackoverflow.com/questions/19351759/javascript-random-number-out-of-5-no-repeat-until-all-have-been-used
				function makeUniqueRandom() {
					var index = Math.floor(Math.random() * uniqueRandoms.length);
					var val = uniqueRandoms[index];
					// now remove that value from the array
					uniqueRandoms.splice(index, 1);
					return val;
				}

				function createArrayRandom() {
					//reset array
					uniqueRandoms.length = 0;
					for (var i = 0; i < numRandoms; i++) {
						uniqueRandoms.push(i);
					}
				}
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'PanelsCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'parseConflictCsv', ["$state", "$timeout", "toastr", function($state, $timeout, toastr) {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/parseConflictCsv/parseConflictCsv.html',
			controller: 'ParseConflictCsvCtrl',
			scope: {
				nations: '=',
				sum: '='
			},
			link: function( scope, element, attrs ){
				//
				var errors = 0;
				var stepped = 0,
					rowCount = 0,
					errorCount = 0,
					firstError;
				var start, end;
				var firstRun = true;
				var maxUnparseLength = 10000;
				var button = element.find('button');
				var input = element.find('input');
				var isVertical = false;
				var raw = [];
				var rawList = {};
				input.css({
					display: 'none'
				});
				button.bind('click', function () {
					input[0].click();
				});
				input.bind('change', function (e) {
					isVertical = false;
					raw = [];
					rawList = {};

					errors = [];
					stepped = 0, rowCount = 0, errorCount = 0, firstError;
					start, end;
					firstRun = true;
					scope.nations = [];
					$timeout(function () {

						var size = input[0].files[0].size;
						var csv = Papa.parse(input[0].files[0], {
							skipEmptyLines: true,
							header: true,
							dynamicTyping: true,
							fastMode: true,
							step: function (row) {
								var numbers = row.data[0].conflicts.match(/[0-9]+/g).map(function(n)
								{//just coerce to numbers
								    return +(n);
								});
								row.data[0].events = numbers;
								scope.sum += numbers.length;
								scope.nations.push(row.data[0]);

							},
							complete:function(){
								scope.$apply();
							}
						});

					});

				});
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ParseConflictCsvCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'parseConflictEventsCsv', ["$state", "$timeout", "toastr", function($state, $timeout, toastr) {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/parseConflictEventsCsv/parseConflictEventsCsv.html',
			controller: 'ParseConflictEventsCsvCtrl',
			scope: {
				events: '=',
			},
			link: function( scope, element, attrs ){
				//
				var errors = 0;
				var stepped = 0,
					rowCount = 0,
					errorCount = 0,
					firstError;
				var start, end;
				var firstRun = true;
				var maxUnparseLength = 10000;
				var button = element.find('button');
				var input = element.find('input');
				var isVertical = false;
				var raw = [];
				var rawList = {};
				input.css({
					display: 'none'
				});
				button.bind('click', function () {
					input[0].click();
				});
				input.bind('change', function (e) {
					isVertical = false;
					raw = [];
					rawList = {};
	scope.events = [];
					errors = [];
					stepped = 0, rowCount = 0, errorCount = 0, firstError;
					start, end;
					firstRun = true;
					$timeout(function () {

						var size = input[0].files[0].size;
						var csv = Papa.parse(input[0].files[0], {
							skipEmptyLines: true,
							header: true,
							dynamicTyping: true,
							fastMode: true,
							step: function (row) {
								switch (row.data[0].type) {
									case 'interstate':
										row.data[0].type_id = 1;
										break;
									case 'intrastate':
										row.data[0].type_id = 2;
										break;
									case 'substate':
										row.data[0].type_id = 3;
										break;
									default:

								}
								if(row.errors.length == 0){
									scope.events.push(row.data[0]);
								}
								else{
									console.log(row);
								}
							},
							complete:function(){
								scope.$apply();
							}
						});

					});

				});
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ParseConflictEventsCsvCtrl', function(){
		//
    });

})();

(function () {
	"use strict";

	angular.module('app.directives').directive('parsecsv', ["$state", "$timeout", "toastr", "IndexService", function ($state, $timeout, toastr, IndexService) {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/parsecsv/parsecsv.html',
			controller: 'ParsecsvCtrl',
			replace: true,
			link: function ($scope, element, $attrs) {
				//
				var errors = 0;
				var stepped = 0,
					rowCount = 0,
					errorCount = 0,
					firstError;
				var start, end;
				var firstRun = true;
				var maxUnparseLength = 10000;
				var button = element.find('button');
				var input = element.find('input');
				var isVertical = false;
				var raw = [];
				var rawList = {};
				input.css({
					display: 'none'
				});
				button.bind('click', function () {
					input[0].click();
				});
				input.bind('change', function (e) {
					isVertical = false;
					raw = [];
					rawList = {};

					errors = [];
					stepped = 0, rowCount = 0, errorCount = 0, firstError;
					start, end;
					firstRun = true;
					$timeout(function () {
						IndexService.clear();
						//console.log(Papa);
						var size = input[0].files[0].size;
						var csv = Papa.parse(input[0].files[0], {
							skipEmptyLines: true,
							header: true,
							dynamicTyping: true,
							fastMode: true,
							worker: false,
							//IF "step" instead of "chunk" > chunk = row and chunk.data = row.data[0]
							chunk: function (chunk) {
								angular.forEach(chunk.data, function (row, index) {

									var r = {
										data:{},
										errors:[]
									};
									angular.forEach(row, function (item, key) {
										if (isNaN(item) || item < 0) {
											if (item.toString().toUpperCase() == "#NA" /*|| item < 0*/ || item.toString().toUpperCase().indexOf('N/A') > -1) {
												var error = {
													type: "1",
													message: "Field in row is not valid for database use!",
													column: key,
													value: item
												};
												r.errors.push(error);
												errors.push(error);
											}
										}
									});
									if (isVertical) {
										angular.forEach(row, function (item, key) {
											if (key.length == 3) {
												if (typeof rawList[key].data == "undefined") {
													rawList[key].data = [];
												}
												rawList[key].data.push(item);
											}
										});
										//rawList[key].errors = row.errors;
									} else {
										//IF "step" instead of "chunk": r > row.data = row.data[0]
										r.data = row;

										IndexService.addData(r);
									}

								})

							},
							beforeFirstChunk: function (chunk) {

								//Check if there are points in the headers
								var index = chunk.match(/\r\n|\r|\n/).index;
								var delimiter = ',';
								var headings = chunk.substr(0, index).split(',');

								if (headings.length < 2) {
									headings = chunk.substr(0, index).split("\t");
									delimiter = '\t';
								}
								var isIso = [];

								for (var i = 0; i <= headings.length; i++) {
									if (headings[i]) {

										headings[i] = headings[i].replace(/[^a-z0-9]/gi, '_').toLowerCase();
										if (headings[i].indexOf('.') > -1) {
											headings[i] = headings[i].substr(0, headings[i].indexOf('.'));

										}
										var head = headings[i].split('_');
										if (head.length > 1) {
											headings[i] = '';
											for (var j = 0; j < head.length; j++) {
												if (isNaN(head[j])) {
													if (j > 0) {
														headings[i] += '_';
													}
													headings[i] += head[j];
												}
											}
										}

										if (headings[i].length == 3) {
											isIso.push(true);
										}
									}
								}
								if (headings.length == isIso.length) {
									isVertical = true;
									for (var i = 0; i <= headings.length; i++) {
										if (typeof rawList[headings[i]] == "undefined") {
											rawList[headings[i]] = {};
										}
										rawList[headings[i]].data = [];
									}
								}

								return headings.join(delimiter) + chunk.substr(index);
							},
							error: function (err, file) {
								ToastService.error(err);
							},
							complete: function (results) {

								IndexService.setErrors(errors);

								//See if there is an field name "iso" in the headings;
								if (!isVertical) {
									angular.forEach(IndexService.getFirstEntry().data, function (item, key) {

										if (key.toLowerCase().indexOf('iso') != -1 || key.toLowerCase().indexOf('code') != -1) {
											IndexService.setIsoField(key);
										}
										if (key.toLowerCase().indexOf('country') != -1) {
											IndexService.setCountryField(key);
										}
										if (key.toLowerCase().indexOf('year') != -1 && item.toString().length == 4) {
											IndexService.setYearField(key);
										}
										if (key.toLowerCase().indexOf('gender') != -1 || key.toLowerCase().indexOf('sex') != -1) {
											IndexService.setGenderField(key);
										}
									});
								} else {
									angular.forEach(rawList, function (item, key) {
										item.errors = [];
										if (item.toLowerCase() != "undefined" && typeof key != "undefined") {
											var r = {
												iso: key.toUpperCase()
											};
											angular.forEach(item.data, function (column, i) {
												r['column_' + i] = column;
												if (isNaN(column) || column < 0) {
													if (column.toString().toUpperCase() == "NA" || column < 0 || column.toString().toUpperCase().indexOf('N/A') > -1) {
														item.errors.push({
															type: "1",
															message: "Field in row is not valid for database use!",
															column: item
														})
														errors++;
													}
												}
											});

											IndexService.addData({
												data: [r],
												errors: item.errors
											});
										}
									});
									IndexService.setIsoField('iso');
								}
								IndexService.setToLocalStorage();
								
								$timeout(function(){
									toastr.info(IndexService.getDataSize() + ' lines importet!', 'Information');
									$state.go('app.index.check');
								});

							}
						});

					});

				});
			}
		};

	}]);

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'ParsecsvCtrl', function(){
		//

    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'piechart', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/piechart/piechart.html',
			controller: 'PiechartCtrl',
			scope:{
				data: '=chartData',
				activeType: '=',
				activeConflict: '=',
				clickIt:'&'
			},
			link: function( scope, element, attrs ){
				//
				 function segColor(c){ return {interstate:"#807dba", intrastate:"#e08214",substate:"#41ab5d"}[c]; }

				var pC ={}, pieDim ={w:150, h: 150};
        pieDim.r = Math.min(pieDim.w, pieDim.h) / 2;

				var piesvg = d3.select(element[0]).append("svg")
            .attr("width", pieDim.w)
						.attr("height", pieDim.h)
						.attr('class', 'outer-pie')
						.append("g")
            .attr("transform", "translate("+pieDim.w/2+","+pieDim.h/2+")");
				var piesvg2 = d3.select(element[0]).append("svg")
            .attr("width", pieDim.w)
						.attr("height", pieDim.h)
						.attr('class', 'inner-pie')
						.append("g")
            .attr("transform", "translate("+pieDim.w/2+","+pieDim.h/2+")");

        // create function to draw the arcs of the pie slices.
        var arc = d3.svg
					.arc()
					.outerRadius(pieDim.r - 10)
					.innerRadius(pieDim.r - 23);
        var arc2 = d3.svg
					.arc()
					.outerRadius(pieDim.r - 23)
					.innerRadius(0);

        // create a function to compute the pie slice angles.
        var pie = d3.layout
					.pie()
					.sort(null)
					.value(function(d) { return d.count; });

        // Draw the pie slices.
        var c1 = piesvg
						.datum(scope.data)
						.selectAll("path")
						.data(pie)
						.enter()
						.append("path").attr("d", arc)
            .each(function(d) { this._current = d; })
            .style("fill", function(d) { return d.data.color; })
            .on("mouseover",mouseover).on("mouseout",mouseout);
				var c2 = piesvg2
						.datum(scope.data)
						.selectAll("path")
						.data(pie)
						.enter()
						.append("path")
						.attr("d", arc2)
		        .each(function(d) { this._current = d; })
		        .style("fill", function(d) { return d.data.color; })
						.style('cursor', 'pointer')
		        .on('click', mouseclick);
        // create function to update pie-chart. This will be used by histogram.
        pC.update = function(nD){
            piesvg.selectAll("path").data(pie(nD)).transition().duration(500)
                .attrTween("d", arcTween);
        }
        // Utility function to be called on mouseover a pie slice.
				var typeus = angular.copy(scope.activeType);
				function mouseclick(d){
					scope.clickIt({type_id:d.data.type_id});
				}
        function mouseover(d){
            // call the update function of histogram with new data.
						typeus = angular.copy(scope.activeType);
            scope.activeType = [d.data.type_id];
						scope.$apply();
        }
        //Utility function to be called on mouseout a pie slice.
        function mouseout(d){
            // call the update function of histogram with all data.
            scope.activeType = typeus;
						scope.$apply();
        }
        // Animating the pie-slice requiring a custom function which specifies
        // how the intermediate paths should be drawn.
        function arcTween(a) {
            var i = d3.interpolate(this._current, a);
            this._current = i(0);
            return function(t) { return arc(i(t));    };
        }
				function arcTween2(a) {
            var i = d3.interpolate(this._current, a);
            this._current = i(0);
            return function(t) { return arc2(i(t));    };
        }

				scope.$watch('data', function(n, o){
					if(n === o) return false;
					piesvg.selectAll("path").data(pie(n)).transition().duration(500)
							.attrTween("d", arcTween);
					piesvg2.selectAll("path").data(pie(n)).transition().duration(500)
							.attrTween("d", arcTween2);
				})
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'PiechartCtrl', function(){
		//
    });

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('roundbar', function() {

		return {
			restrict: 'EA',
			//templateUrl: 'views/directives/roundbar/roundbar.html',
			controller: 'RoundbarCtrl',
			scope: {
				data: '=chartData',
				activeType: '=',
				activeConflict: '='
			},
			link: function(scope, element, attrs) {

				var margin = {
						top: 40,
						right: 20,
						bottom: 30,
						left: 40
					},
					width = 300 - margin.left - margin.right,
					height = 200 - margin.top - margin.bottom,
					barWidth = 20,
					space = 25;


				var scale = {
					y: d3.scale.linear()
				};
				scale.y.domain([0, 220]);
				scale.y.range([height, 0]);
				var svg = d3.select(element[0]).append("svg")
					.attr("width", width + margin.left + margin.right)
					.attr("height", height + margin.top + margin.bottom)
					.append("g")
					.attr("transform", "translate(0," + margin.top + ")");

				//x.domain(scope.data.map(function(d) { return d.letter; }));
				//y.domain([0, d3.max(scope.data, function(d) { return d.frequency; })]);
				var bars = svg.selectAll('.bars').data(scope.data).enter().append("g").attr('class', 'bars'); //.attr("transform", function(d, i) { return "translate(" + i * 20 + ", 0)"; });;

				var barsBg = bars
					.append('path')
					.attr('d', function(d, i) {
						return rounded_rect((i * (barWidth + space)), 0, barWidth, (height), barWidth / 2, true, true, false, false)
					})
					.attr('class', 'bg');
				var valueBars = bars
					.append('path')
					.attr('d', function(d, i) {
						return rounded_rect((i * (barWidth + space)), (scale.y(d.value)), barWidth, (height - scale.y(d.value)), barWidth / 2, true, true, false, false)
					})
					/*.attr('x', function(d, i) {
						return i * (barWidth + space);
					})
					.attr('y', function(d) {
						return scale.y(d.value);
					})
					.attr("width", function(d) {
						return barWidth
					})*/

				.style("fill", function(d) {
						return d.color
					})
					/*.transition()
					.duration(3000)
					.ease("quad")
					.attr("height", function(d) {
						return height - scale.y(d.value)
					})*/
				;

				var valueText = bars
					.append("text");

				valueText.text(function(d) {
						return d.value
					}).attr("x", function(d, i) {
						return i * (barWidth + space);
					})
					.attr("y", -8)
					.attr("width", function(d) {
						return barWidth
					})
					.style('fill','#4fb0e5');

				var labelsText = bars
					.append("text")
				labelsText.text(function(d){
						return d.label
					})
					.attr("x", function(d, i) {
						return i * (barWidth + space);
					})
					.attr("y", height + 20)
					.attr("width", function(d) {
						return barWidth
					})
					.style('fill', function(d){
						return d.color
					});


				function rounded_rect(x, y, w, h, r, tl, tr, bl, br) {
					var retval;
					retval = "M" + (x + r) + "," + y;
					retval += "h" + (w - 2 * r);
					if (tr) {
						retval += "a" + r + "," + r + " 0 0 1 " + r + "," + r;
					} else {
						retval += "h" + r;
						retval += "v" + r;
					}
					retval += "v" + (h - 2 * r);
					if (br) {
						retval += "a" + r + "," + r + " 0 0 1 " + -r + "," + r;
					} else {
						retval += "v" + r;
						retval += "h" + -r;
					}
					retval += "h" + (2 * r - w);
					if (bl) {
						retval += "a" + r + "," + r + " 0 0 1 " + -r + "," + -r;
					} else {
						retval += "h" + -r;
						retval += "v" + -r;
					}
					retval += "v" + (2 * r - h);
					if (tl) {
						retval += "a" + r + "," + r + " 0 0 1 " + r + "," + -r;
					} else {
						retval += "v" + -r;
						retval += "h" + r;
					}
					retval += "z";
					return retval;
				}
				scope.$watch('data', function(n, o){
					if(n === o) return false;
					//scale.y.domain([0, 50]);

						valueBars.transition().duration(500).attr('d', function(d, i) {
								var borders = barWidth / 2;
								if(scope.data[i].value <= 10){
									borders = 0;
								}
								return rounded_rect((i * (barWidth + space)), (scale.y(scope.data[i].value)), barWidth, (height - scale.y(scope.data[i].value)), borders, true, true, false, false)
						});
						valueText.transition().duration(500).tween('text', function (d,i) {
								var i = d3.interpolate(parseInt(d.value), parseInt(scope.data[i].value));
								return function (t) {
									this.textContent = (Math.round(i(t) * 1) / 1);
								};

						}).each('end', function(d, i){
								d.value = scope.data[i].value;
						});


				})
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'RoundbarCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'simplelinechart', function() {

		return {
			restrict: 'E',
			templateUrl: 'views/directives/simplelinechart/simplelinechart.html',
			controller: 'SimplelinechartCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				data:'=',
				selection:'=',
				options:'='
			},
			link: function( $scope, element, $attrs ){


			}
		};

	});

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('SimplelinechartCtrl', ["$scope", function ($scope) {
		var vm = this;
		var defaults = function(){
			return {
				invert:false
			}
		}
		vm.options = angular.extend(defaults(), vm.options);
		vm.config = {
			visible: true, // default: true
			extended: false, // default: false
			disabled: false, // default: false
			autorefresh: true, // default: true
			refreshDataOnly: false, // default: false
			deepWatchOptions: true, // default: true
			deepWatchData: true, // default: false
			deepWatchConfig: true, // default: true
			debounce: 10 // default: 10
		};
		vm.chart = {
			options: {
				chart: {}
			},
			data: []
		};

		activate();

		function activate(){
			calculateGraph();
			setChart();
		}
		function updateChart(){
			vm.chart.options.chart.forceY = [vm.range.max, vm.range.min];
		}
	 	function setChart() {
			vm.chart.options.chart = {
				type: 'lineChart',
				legendPosition: 'left',
				duration:0,
				margin: {
					top: 20,
					right: 20,
					bottom: 20,
					left: 20
				},
				x: function (d) {
					return d.x;
				},
				y: function (d) {
					return d.y;
				},
				showLegend: false,
				showValues: false,
				//showYAxis: false,

				transitionDuration: 500,
				//useInteractiveGuideline: true,
				forceY: [vm.range.max, vm.range.min],
				//yDomain:[parseInt(vm.range.min), vm.range.max],
				xAxis: {
					axisLabel: 'Year',
					axisLabelDistance: 30
				},
				yAxis: {
					axisLabel: '',
					axisLabelDistance: 30
				},
				legend: {
					rightAlign: false
				},
				lines: {
					interpolate: 'cardinal'
				}

			};

			if (vm.options.invert == true) {
				vm.chart.options.chart.forceY = [parseInt(vm.range.max), vm.range.min];
			}

			return vm.chart;
		}
		function calculateGraph() {
			var chartData = [];
			vm.range = {
				max: 0,
				min: 1000
			};
			angular.forEach(vm.selection, function (item, key) {
				var graph = {
					id: key,
					key: item.title,
					color: item.color,
					values: []
				};
				angular.forEach(vm.data, function (data, k) {
					graph.values.push({
						id: k,
						x: data[item.fields.x],
						y: data[item.fields.y]
					});
					vm.range.max = Math.max(vm.range.max, data[item.fields.y]);
					vm.range.min = Math.min(vm.range.min, data[item.fields.y]);
				});
				chartData.push(graph);
			});
			vm.range.max++;
			vm.range.min--;
			vm.chart.data = chartData;
			if (vm.options.invert == "true") {
				vm.chart.options.chart.yDomain = [parseInt(vm.range.max), vm.range.min];
			}
			return chartData;
		};
		$scope.$watch('vm.data', function (n, o) {
			if (!n) {
				return;
			}

				calculateGraph();
				updateChart();


		});
		$scope.$watch('vm.selection', function (n, o) {
			if (n === o) {
				return;
			}
		//	updateChart();
			//calculateGraph();
		})
	}]);

})();

(function(){
	"use strict";

	angular.module('app.directives').animation('.slide-toggles', ['$animateCss', function($animateCss) {

		var lastId = 0;
        var _cache = {};

        function getId(el) {
            var id = el[0].getAttribute("data-slide-toggle");
            if (!id) {
                id = ++lastId;
                el[0].setAttribute("data-slide-toggle", id);
            }
            return id;
        }
        function getState(id) {
            var state = _cache[id];
            if (!state) {
                state = {};
                _cache[id] = state;
            }
            return state;
        }

        function generateRunner(closing, state, animator, element, doneFn) {
            return function() {
                state.animating = true;
                state.animator = animator;
                state.doneFn = doneFn;
                animator.start().finally(function() {
                    if (closing && state.doneFn === doneFn) {
                        element[0].style.height = '';
                    }
                    state.animating = false;
                    state.animator = undefined;
                    state.doneFn();
                });
            }
        }

        return {
            leave: function(element, doneFn) {

                    var state = getState(getId(element));
                    var height = (state.animating && state.height) ?
                        state.height : element[0].offsetHeight;
                    var animator = $animateCss(element, {
                        from: {height: height + 'px', opacity: 1},
                        to: {height: '0px', opacity: 0}
                    });
                    if (animator) {
                        if (state.animating) {
                            state.doneFn =
                              generateRunner(true,
                                             state,
                                             animator,
                                             element,
                                             doneFn);
                            return state.animator.end();
                        }
                        else {
                            state.height = height;
                            return generateRunner(true,
                                                  state,
                                                  animator,
                                                  element,
                                                  doneFn)();
                        }
                    }

                doneFn();
            },
            enter: function(element, doneFn) {

                    var state = getState(getId(element));
                    var height = (state.animating && state.height) ?
                        state.height : element[0].offsetHeight;

                    var animator = $animateCss(element, {
                        from: {height: '0px', opacity: 0},
                        to: {height: height + 'px', opacity: 1}
                    });
                    if (animator) {
                        if (state.animating) {
                            state.doneFn = generateRunner(false,
                                                          state,
                                                          animator,
                                                          element,
                                                          doneFn);
                            return state.animator.end();
                        }
                        else {
                            state.height = height;
                            return generateRunner(false,
                                                  state,
                                                  animator,
                                                  element,
                                                  doneFn)();
                        }
                    }

                doneFn();
            }
        };
    }]);
})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'SlideToggleCtrl', function(){
		//
    });

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'styles', function() {

		return {
			restrict: 'E',
			templateUrl: 'views/directives/styles/styles.html',
			controller: 'StylesCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				item: '=',
				styles: '=',
				options:'=',
				save: '&'
			},
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('StylesCtrl', ["toastr", "DataService", function (toastr, DataService) {
		//
		var vm = this;
		vm.toggleStyle = toggleStyle;
		vm.selectedStyle = selectedStyle;
		vm.saveStyle = saveStyle;
		vm.style = [];

		function toggleStyle(style) {
			if (vm.item.style_id == style.id) {
				vm.item.style_id = 0;
			} else {
				vm.item.style_id = style.id
				vm.item.style = style;
			}
		}
		function selectedStyle(item, style) {
			return vm.item.style_id == style.id ? true : false;
		}
		function saveStyle() {
			DataService.post('styles', vm.style).then(function (data) {
				vm.styles.push(data);
				vm.createStyle = false;
					vm.style = [];
				vm.item.style = data;
				toastr.success('New Style has been saved', 'Success');
			});
		}
	}]);

})();

(function () {
	"use strict";

	angular.module('app.directives').directive('subindex', subindex);

	subindex.$inject = ['$timeout', 'smoothScroll'];

	function subindex($timeout, smoothScroll) {
		return {
			restrict: 'E',
			replace: true,
			controller: 'SubindexCtrl',
			templateUrl: 'views/directives/subindex/subindex.html',
			link: subindexLinkFunction
		};

		function subindexLinkFunction($scope, element, $attrs) {
		}
	}
})();

(function() {
	"use strict";

	angular.module('app.controllers').controller('SubindexCtrl', ["$scope", "$filter", "$timeout", function($scope, $filter, $timeout) {
		$scope.info = false;
		$scope.setChart = setChart;
		$scope.calculateGraph = calculateGraph;
		$scope.createIndexer = createIndexer;
		$scope.calcSubRank = calcSubRank;
		$scope.toggleInfo = toggleInfo;
		$scope.createOptions = createOptions;
		$scope.getSubRank = getSubRank;
		activate();

		function activate() {
			$scope.calcSubRank();
			$scope.setChart();
			$scope.calculateGraph();
			$scope.createIndexer();
			$scope.createOptions();
			$scope.$watch('display.selectedCat', function(newItem, oldItem) {
				if (newItem === oldItem) {
					return false;
				}
				$scope.createIndexer();
				$scope.calculateGraph();
				$scope.createOptions();
				$scope.calcSubRank();
			});
			$scope.$watch('current', function(n, o) {
				if (n === o) {
					return;
				}
				$scope.calcSubRank();
			});
		}

		function toggleInfo() {
			$scope.info = !$scope.info;
		};

		function calcSubRank() {
			var rank = 0;
			angular.forEach($scope.data, function(item) {
				item[$scope.display.selectedCat.type] = parseFloat(item[$scope.display.selectedCat.type]);
				item['score'] = parseInt(item['score']);
			})
			var filter = $filter('orderBy')($scope.epi, [$scope.display.selectedCat.type, "score"], true);
			for (var i = 0; i < filter.length; i++) {
				if (filter[i].iso == $scope.current.iso) {
					rank = i + 1;
				}
			}
			$scope.current[$scope.display.selectedCat.type+'_rank'] = rank;
		}
		function getSubRank(country){
			var filter = $filter('orderBy')($scope.epi, [$scope.display.selectedCat.type, "score"], true);
			var rank = 0;
			angular.forEach(filter, function(item, key){
				if(item.country == country.country){
					rank = key;
				}
			});
			return rank+1;
		}
		function createIndexer() {
			$scope.indexer = [$scope.$parent.display.selectedCat.data];
		}

		function createOptions() {
			$scope.medianOptions = {
				color: $scope.$parent.display.selectedCat.color,
				field: $scope.$parent.display.selectedCat.type,
				handling: false,
				margin:{
					left:10
				}
			};
			$scope.medianOptionsBig = {
				color: $scope.$parent.display.selectedCat.color,
				field: $scope.$parent.display.selectedCat.type,
				handling: false,
				margin:{
					left:20
				}
			};
		}

		function setChart() {
			$scope.chart = {
				options: {
					chart: {
						type: 'lineChart',
						//height: 200,
						legendPosition: 'left',
						margin: {
							top: 20,
							right: 20,
							bottom: 20,
							left: 20
						},
						x: function(d) {
							return d.x;
						},
						y: function(d) {
							return d.y;
						},
						showValues: false,
						showYAxis: false,
						transitionDuration: 500,
						useInteractiveGuideline: true,
						forceY: [100, 0],
						xAxis: {
							axisLabel: ''
						},
						yAxis: {
							axisLabel: '',
							axisLabelDistance: 30
						},
						legend: {
							rightAlign: false,
							margin: {
								bottom: 30
							}
						},
						lines: {
							interpolate: 'cardinal'
						}
					}
				},
				data: []
			};
			return $scope.chart;
		}

		function calculateGraph() {
			var chartData = [];
			angular.forEach($scope.display.selectedCat.children, function(item, key) {
				var graph = {
					key: item.title,
					color: item.color,
					values: []
				};
				angular.forEach($scope.country.epi, function(data) {
					graph.values.push({
						x: data.year,
						y: data[item.column_name]
					});
				});
				chartData.push(graph);
			});
			$scope.chart.data = chartData;
		}
	}]);

})();

(function () {
	"use strict";

	angular.module('app.directives').directive('sunburst', function () {
		var defaults = function(){
				return {
					 mode: 'size'
				}
		};
		return {
			restrict: 'E',
			//templateUrl: 'views/directives/sunburst/sunburst.html',
			controller: 'SunburstCtrl',
			scope: {
				data: '='
			},
			link: function ($scope, element, $attrs) {
				var options = angular.extend(defaults(), $attrs);
				$scope.setChart();
				$scope.calculateGraph();
				var width = 610,
					height = width,
					radius = (width) / 2,
					x = d3.scale.linear().range([0, 2 * Math.PI]),
					y = d3.scale.pow().exponent(1.3).domain([0, 1]).range([0, radius]),

					padding = 0,
					duration = 1000,
					circPadding = 10;

				var div = d3.select(element[0]);


				var vis = div.append("svg")
					.attr("width", width + padding * 2)
					.attr("height", height + padding * 2)
					.append("g")
					.attr("transform", "translate(" + [radius + padding, radius + padding] + ")");

				/*
				div.append("p")
						.attr("id", "intro")
						.text("Click to zoom!");
				*/

				var partition = d3.layout.partition()
					.sort(null)
					.value(function (d) {
						return 1;
					});

				var arc = d3.svg.arc()
					.startAngle(function (d) {
						return Math.max(0, Math.min(2 * Math.PI, x(d.x)));
					})
					.endAngle(function (d) {
						return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx)));
					})
					.innerRadius(function (d) {
						return Math.max(0, d.y ? y(d.y) : d.y);
					})
					.outerRadius(function (d) {
						return Math.max(0, y(d.y + d.dy));
					});

				var special1 = "Wastewater Treatment",
					special2 = "Air Pollution PM2.5 Exceedance",
					special3 = "Agricultural Subsidies",
					special4 = "Pesticide Regulation";


				var nodes = partition.nodes($scope.calculateGraph());

				var path = vis.selectAll("path").data(nodes);
				path.enter().append("path")
					.attr("id", function (d, i) {
						return "path-" + i;
					})
					.attr("d", arc)
					.attr("fill-rule", "evenodd")
					.attr("class", function (d) {
						return d.depth ? "branch" : "root";
					})
					.style("fill", setColor)
					.on("click", click);

				var text = vis.selectAll("text").data(nodes);
				var textEnter = text.enter().append("text")
					.style("fill-opacity", 1)
					.attr("text-anchor", function (d) {
						if (d.depth)
							return "middle";
						//~ return x(d.x + d.dx / 2) > Math.PI ? "end" : "start";
						else
							return "middle";
					})
					.attr("id", function (d) {
						return "depth" + d.depth;
					})
					.attr("class", function (d) {
						return "sector"
					})
					.attr("dy", function (d) {
						return d.depth ? ".2em" : "0.35em";
					})
					.attr("transform", function (d) {
						var multiline = (d.name || "").split(" ").length > 2,
							angleAlign = (d.x > 0.5 ? 2 : -2),
							angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90 + (multiline ? angleAlign : 0),
							rotate = angle + (multiline ? -.5 : 0),
							transl = (y(d.y) + circPadding) + 35,
							secAngle = (angle > 90 ? -180 : 0);
						if (d.name == special3 || d.name == special4) rotate += 1;
						if (d.depth == 0) {
							transl = -2.50;
							rotate = 0;
							secAngle = 0;
						} else if (d.depth == 1) transl += -9;
						else if (d.depth == 2) transl += -5;
						else if (d.depth == 3) transl += 4;
						return "rotate(" + rotate + ")translate(" + transl + ")rotate(" + secAngle + ")";
					})
					.on("click", click);

				textEnter.append("tspan")
					.attr("x", 0)
					.text(function (d) {

						if (d.depth == 3 && d.name != special1 && d.name != special2 && d.name != special3 && d.name != special4)
							return d.name.split(" ")[0] + " " + (d.name.split(" ")[1] || "");
						else
							return d.name.split(" ")[0];
					});
				textEnter.append("tspan")
					.attr("x", 0)
					.attr("dy", "1em")
					.text(function (d) {

						if (d.depth == 3 && d.name != special1 && d.name != special2 && d.name != special3 && d.name != special4)
							return (d.name.split(" ")[2] || "") + " " + (d.name.split(" ")[3] || "");
						else
							return (d.name.split(" ")[1] || "") + " " + (d.name.split(" ")[2] || "");
					});
				textEnter.append("tspan")
					.attr("x", 0)
					.attr("dy", "1em")
					.text(function (d) {
						if (d.depth == 3 && d.name != special1 && d.name != special2 && d.name != special3 && d.name != special4)
							return (d.name.split(" ")[4] || "") + " " + (d.name.split(" ")[5] || "");
						else
							return (d.name.split(" ")[3] || "") + " " + (d.name.split(" ")[4] || "");;
					});

				function click(d) {
					// Control arc transition
					path.transition()
						.duration(duration)
						.attrTween("d", arcTween(d));

					// Somewhat of a hack as we rely on arcTween updating the scales.
					// Control the text transition
					text.style("visibility", function (e) {
							return isParentOf(d, e) ? null : d3.select(this).style("visibility");
						})
						.transition()
						.duration(duration)
						.attrTween("text-anchor", function (d) {
							return function () {
								if (d.depth)
									return "middle";
								//~ return x(d.x + d.dx / 2) > Math.PI ? "end" : "start";
								else
									return "middle";
							};
						})
						.attrTween("transform", function (d) {
							var multiline = (d.name || "").split(" ").length > 2;
							return function () {
								var multiline = (d.name || "").split(" ").length > 2,
									angleAlign = (d.x > 0.5 ? 2 : -2),
									angle = x(d.x + d.dx / 2) * 180 / Math.PI - 90 + (multiline ? angleAlign : 0),
									rotate = angle + (multiline ? -.5 : 0),
									transl = (y(d.y) + circPadding) + 35,
									secAngle = (angle > 90 ? -180 : 0);
								if (d.name == special3 || d.name == special4) rotate += 1;
								if (d.depth == 0) {
									transl = -2.50;
									rotate = 0;
									secAngle = 0;
								} else if (d.depth == 1) transl += -9;
								else if (d.depth == 2) transl += -5;
								else if (d.depth == 3) transl += 4;
								return "rotate(" + rotate + ")translate(" + transl + ")rotate(" + secAngle + ")";
							};
						})
						.style("fill-opacity", function (e) {
							return isParentOf(d, e) ? 1 : 1e-6;
						})
						.each("end", function (e) {
							d3.select(this).style("visibility", isParentOf(d, e) ? null : "hidden");
						});
				}


				function isParentOf(p, c) {
					if (p === c) return true;
					if (p.children) {
						return p.children.some(function (d) {
							return isParentOf(d, c);
						});
					}
					return false;
				}

				function setColor(d) {

					//return ;
					if (d.color)
						return d.color;
					else {
						return '#ccc';
						/*var tintDecay = 0.20;
						// Find child number
						var x = 0;
						while (d.parent.children[x] != d)
							x++;
						var tintChange = (tintDecay * (x + 1)).toString();
						return pusher.color(d.parent.color).tint(tintChange).html('hex6');*/
					}
				}

				// Interpolate the scales!
				function arcTween(d) {
					var my = maxY(d),
						xd = d3.interpolate(x.domain(), [d.x, d.x + d.dx - 0.0009]),
						yd = d3.interpolate(y.domain(), [d.y, my]),
						yr = d3.interpolate(y.range(), [d.y ? 20 : 0, radius]);

					return function (d) {
						return function (t) {
							x.domain(xd(t));
							y.domain(yd(t)).range(yr(t));
							return arc(d);
						};
					};
				}

				function maxY(d) {
					return d.children ? Math.max.apply(Math, d.children.map(maxY)) : d.y + d.dy;
				}
			}
		}
	});
})();

(function () {
	"use strict";

	angular.module('app.controllers').controller('SunburstCtrl', ["$scope", function ($scope) {

		$scope.setChart = function () {
			$scope.chart = {
				options: {
					chart: {
						type: 'sunburst',
						height: 700,
						"sunburst": {
							"dispatch": {},
							"width": null,
							"height": null,
							"mode": "size",
							"id": 2088,
							"duration": 500,
							"margin": {
								"top": 0,
								"right": 0,
								"bottom": 0,
								"left": 0
							}
						},
						"tooltip": {
							"duration": 0,
							"gravity": "w",
							"distance": 25,
							"snapDistance": 0,
							"classes": null,
							"chartContainer": null,
							"fixedTop": null,
							"enabled": true,
							"hideDelay": 400,
							"headerEnabled": false,

							"offset": {
								"left": 0,
								"top": 0
							},
							"hidden": true,
							"data": null,
							"tooltipElem": null,
							"id": "nvtooltip-99347"
						},
					}
				},
				data: []
			};
			return $scope.chart;
		}
		var buildTree = function (data) {
			var children = [];
			angular.forEach(data, function (item) {
				var child = {
					'name': item.title,
					'size': item.size,
					'color': item.color,
					'children': buildTree(item.children)
				};
				if(item.color){
					child.color = item.color
				}
				if(item.size){
					child.size = item.size
				}
				children.push(child);
			});
			return children;
		};
		$scope.calculateGraph = function () {
			var chartData = {
				"name": $scope.data.title,
				"color": $scope.data.style.base_color || '#000',
				"children": buildTree($scope.data.children),
				"size": 1
			};
			$scope.chart.data = chartData;
			return chartData;
		};
		$scope.$watch('data', function (n, o) {
			if (!n) {
				return;
			}
			$scope.calculateGraph();
		})
	}]);

})();

(function(){
	"use strict";

	angular.module('app.directives').directive( 'treemenu', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/treemenu/treemenu.html',
			controller: 'TreemenuCtrl',
			controllerAs: 'vm',
			scope:{},
			bindToController: {
				options:'=',
				item:'=?',
				selection: '=?'
			},
			replace:true,
			link: function( scope, element, attrs ){
				//
			}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'TreemenuCtrl', function(){

	})
})();

(function() {
	"use strict";

	angular.module('app.directives').directive('treeview', ["RecursionHelper", function(RecursionHelper) {
		var options = {
			editWeight: false,
			drag: false,
			edit: false,
			children: 'children'
		};
		return {
			restrict: 'E',
			templateUrl: 'views/directives/treeview/treeview.html',
			controller: 'TreeviewCtrl',
			controllerAs: 'vm',
			scope: {},
			bindToController: {
				items: '=',
				item: '=?',
				selection: '=?',
				options: '=?',
				active: '=?',
				click: '&'
			},
			replace: true,
			compile: function(element) {
				return RecursionHelper.compile(element, function(scope, iElement, iAttrs, controller, transcludeFn) {
					console.log(options);
					angular.extend(options, scope.vm.options)

				});
			}
		};

	}]);

})();
(function() {
	"use strict";

	angular.module('app.controllers').controller('TreeviewCtrl', ["$filter", function($filter) {
		//
		var vm = this;
		vm.selectedItem = selectedItem;
		vm.childSelected = childSelected;
		vm.toggleSelection = toggleSelection;
		vm.onDragOver = onDragOver;
		vm.onDropComplete = onDropComplete;
		vm.onMovedComplete = onMovedComplete;
		vm.addChildren = addChildren;
		console.log(vm);
		activate();

		function activate() {
			if (typeof vm.options == "undefined") {
				vm.options = {
					editWeight: false,
					drag: false,
					edit: false,
					children: 'children'
				}
			}
			if (typeof vm.options.children == "undefined") {
				vm.options.children = "children";
			}
			if (typeof vm.selection == "undefined") {
				vm.selection = [];
			}
		}

		function onDragOver(event, index, external, type) {
			return true;
		}

		function onDropComplete(event, index, item, external) {
			angular.forEach(vm.items, function(entry, key) {
				if (entry.id == 0) {
					vm.items.splice(key, 1);
				}
			})
			return item;
		}

		function onMovedComplete(index, data, evt) {
			if (vm.options.allowMove) {
				return vm.items.splice(index, 1);
			}
		}

		function toggleSelection(item) {
			var index = -1;
			angular.forEach(vm.selection, function(selected, i) {
				if (selected.id == item.id) {
					index = i;
				}
			});
			if (index > -1) {
				vm.selection.splice(index, 1);
			} else {
				vm.selection.push(item);
			}
			if (typeof vm.options.selectionChanged == 'function')
				vm.options.selectionChanged();
		}

		function addChildren(item) {

			item[vm.options.children] = [];
			item.expanded = true;
		}

		function selectedItem(item) {
			var found = false;
			angular.forEach(vm.selection, function(selected) {
				if (selected.id == item.id) {
					found = true;
				}
			});
			return found;
			/*	if(vm.selection.indexOf(angular.copy(item)) > -1){
					return true;
				}
				return false;*/
		}

		function childSelected(item) {
			var found = false;
			angular.forEach(item.children, function(child) {
				if (vm.selection.indexOf(child) > -1) {
					found = true;
				}
				if (!found) {
					found = childSelected(child);

				}
			})
			return found;
		}

		/*function toggleItem(item) {
			if (typeof vm.item[vm.options.type] === "undefined") vm.item[vm.options.type] = [];
			var found = false,
				index = -1;
			angular.forEach(vm.item[vm.options.type], function(entry, i) {
				if (entry.id == item.id) {
					found = true;
					index = i;
				}
			})
			index === -1 ? vm.item[vm.options.type].push(item) : vm.item[vm.options.type].splice(index, 1);
		}*/
	}]);

})();
(function(){
	"use strict";

	angular.module('app.directives').directive( 'triangleGraph', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/triangle-graph/triangle-graph.html',
			controller: 'TriangleGraphCtrl',
			controllerAs: 'vm',
			scope: {},
			bindToController: {
				data: '=',
				ngModel: '='
			},
			link: function( scope, element, attrs ){
				//
				var width = element.parent()[0].clientWidth - 48;
				var height = width / 3;
				var xScale = d3.scale.linear()
			 .domain([0, 100])
			 .range([0, width]);

	 var yScale = d3.scale.linear()
			 .domain([0, scope.vm.data.length])
			 .range([height, 0]);
			 var svg = d3.select(element[0]).append('svg')
		 		.attr('width',width)
		 		.attr('height', height);

				svg.select('.triangle-grid')
         .selectAll('div')
         .data(scope.vm.data)
       .enter().append('div')
         .attr('class', 'triangle-box');

    //  svg.selectAll('.triangle-box')
    //      .append('svg')
    //      .attr('width', 100)
    //      .attr('height', 100)
    //    .append('g')
    //      .attr('class', 'triangles')
		 //
    //      .append('path')
    //      .attr('d', () => 'M ' + xScale(5) + ' ' + yScale(0) + ' L ' + xScale(88) + ' ' + yScale(5) + ' L ' + xScale(88) + ' ' + yScale(18815) + ' Z')
    //      .style('fill', 'rgb(222,222,222)');
		 //
    //  svg.selectAll('.triangles')
		 //
    //      .append('path')
    //      .attr('d', (d) => 'M ' + xScale(5) + ' ' + yScale(0) + ' L ' + xScale(88) + ' ' + yScale(5) + ' L ' + xScale(88) + ' ' + yScale(d.value) + ' Z')
    //      .style('fill', 'rgba(181,227,147,0.5)');


				}
		};

	});

})();

(function(){
	"use strict";

	angular.module( 'app.controllers' ).controller( 'TriangleGraphCtrl', function(){
		//
    });

})();

(function() {
	"use strict";

	angular.module('app.directives').directive('weight', function() {

		return {
			restrict: 'EA',
			templateUrl: 'views/directives/weight/weight.html',
			controller: 'WeightCtrl',
			controllerAs: 'vm',
			scope: {},
			bindToController: {
				items: '=',
				item: '=',
				options: '='
			},
			replace: true,
			link: function(scope, element, attrs) {
				//
			}
		};

	});

})();
(function() {
	"use strict";

	angular.module('app.controllers').controller('WeightCtrl', ["$scope", function($scope) {
		//
		var vm = this;
		vm.raiseWeight = raiseWeight;
		vm.lowerWeight = lowerWeight;

		activate();

		function activate() {
			calcStart();
		}

		function calcStart() {

			if (typeof vm.item.weight == "undefined" || !vm.item.weight) {
				angular.forEach(vm.items, function(entry) {
					entry.weight = 100 / vm.items.length;
				})
			}
		}

		function calcValues() {
			var fixed = vm.item.weight;
			var rest = (100 - fixed) / (vm.items.length - 1);
			angular.forEach(vm.items, function(entry) {
				if (entry !== vm.item) {
					entry.weight = rest;
				}
			});
			return rest;
		}

		function raiseWeight() {
			if(vm.item.weight >= 95) return false;
			if (vm.item.weight % 5 != 0) {
				vm.item.weight = 5 * Math.round(vm.item.weight / 5);
			} else {
				vm.item.weight += 5;
			}
			calcValues();
		}

		function lowerWeight() {
			if(vm.item.weight <= 5) return false;
			if (vm.item.weight % 5 != 0) {
				vm.item.weight = 5 * Math.round(vm.item.weight / 5) - 5;
			} else {
				vm.item.weight -= 5;
			}
			calcValues();
		}


	}]);

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJyb3V0ZXMuanMiLCJyb3V0ZXMucnVuLmpzIiwiY29uZmlnL2F1dGguanMiLCJjb25maWcvZmxvdy5qcyIsImNvbmZpZy9obGpzLmpzIiwiY29uZmlnL2xlYWZsZXQuanMiLCJjb25maWcvbG9hZGluZ19iYXIuanMiLCJjb25maWcvcmVzdGFuZ3VsYXIuanMiLCJjb25maWcvdGhlbWUuanMiLCJjb25maWcvdG9hc3RyLmpzIiwiZmlsdGVycy9hbHBoYW51bS5qcyIsImZpbHRlcnMvY2FwaXRhbGl6ZS5qcyIsImZpbHRlcnMvZmluZGJ5bmFtZS5qcyIsImZpbHRlcnMvaHVtYW5fcmVhZGFibGUuanMiLCJmaWx0ZXJzL25ld2xpbmUuanMiLCJmaWx0ZXJzL29yZGVyT2JqZWN0QnkuanMiLCJmaWx0ZXJzL3Byb3BlcnR5LmpzIiwiZmlsdGVycy90cnVuY2F0ZV9jaGFyYWN0ZXJzLmpzIiwiZmlsdGVycy90cnVuY2F0ZV93b3Jkcy5qcyIsImZpbHRlcnMvdHJ1c3RfaHRtbC5qcyIsImZpbHRlcnMvdWNmaXJzdC5qcyIsInNlcnZpY2VzL2Jhc2VtYXBzLmpzIiwic2VydmljZXMvY29sb3JIYW5kbGUuanMiLCJzZXJ2aWNlcy9jb250ZW50LmpzIiwic2VydmljZXMvY291bnRyaWVzLmpzIiwic2VydmljZXMvZGF0YS5qcyIsInNlcnZpY2VzL2RpYWxvZy5qcyIsInNlcnZpY2VzL2Vycm9yQ2hlY2tlci5qcyIsInNlcnZpY2VzL2V4cG9ydC5qcyIsInNlcnZpY2VzL2ljb25zLmpzIiwic2VydmljZXMvaW5kZXguanMiLCJzZXJ2aWNlcy9pbmRpemVzLmpzIiwic2VydmljZXMvcmVjdXJzaW9uaGVscGVyLmpzIiwic2VydmljZXMvdG9hc3QuanMiLCJzZXJ2aWNlcy91c2VyLmpzIiwic2VydmljZXMvdmVjdG9ybGF5ZXIuanMiLCJhcHAvYmFzZW1hcHMvYmFzZW1hcERldGFpbHMuanMiLCJhcHAvYmFzZW1hcHMvYmFzZW1hcHMuanMiLCJhcHAvY2hhcHRlci9jaGFwdGVyLmpzIiwiYXBwL2NoYXB0ZXJDb250ZW50L2NoYXB0ZXJDb250ZW50LmpzIiwiYXBwL2NvbmZsaWN0SW1wb3J0L2NvbmZsaWN0SW1wb3J0LmpzIiwiYXBwL2NvbmZsaWN0ZGV0YWlscy9jb25mbGljdGRldGFpbHMuanMiLCJhcHAvY29uZmxpY3RpdGVtcy9jb25mbGljdGl0ZW1zLmpzIiwiYXBwL2NvbmZsaWN0bmF0aW9uL2NvbmZsaWN0bmF0aW9uLmpzIiwiYXBwL2NvbmZsaWN0cy9jb25mbGljdHMuanMiLCJhcHAvZXhwb3J0L2V4cG9ydC5qcyIsImFwcC9leHBvcnQvZXhwb3J0RGV0YWlscy5qcyIsImFwcC9leHBvcnRMYXlvdXQvZXhwb3J0TGF5b3V0LmpzIiwiYXBwL2V4cG9ydFN0eWxlL2V4cG9ydFN0eWxlLmpzIiwiYXBwL2V4cG9ydGVkL2V4cG9ydGVkLmpzIiwiYXBwL2Z1bGxMaXN0L2ZpbHRlci5qcyIsImFwcC9mdWxsTGlzdC9mdWxsTGlzdC5qcyIsImFwcC9oZWFkZXIvaGVhZGVyLmpzIiwiYXBwL2hvbWUvaG9tZS5qcyIsImFwcC9pbXBvcnRjc3YvaW1wb3J0Y3N2LmpzIiwiYXBwL2luZGV4L2luZGV4LmpzIiwiYXBwL2luZGV4L2luZGV4YmFzZS5qcyIsImFwcC9pbmRleENoZWNrL2luZGV4Q2hlY2suanMiLCJhcHAvaW5kZXhDaGVjay9pbmRleENoZWNrU2lkZWJhci5qcyIsImFwcC9pbmRleEZpbmFsL2luZGV4RmluYWwuanMiLCJhcHAvaW5kZXhGaW5hbC9pbmRleEZpbmFsTWVudS5qcyIsImFwcC9pbmRleE1ldGEvaW5kZXhNZXRhLmpzIiwiYXBwL2luZGV4TWV0YS9pbmRleE1ldGFNZW51LmpzIiwiYXBwL2luZGV4TXlEYXRhL2luZGV4TXlEYXRhLmpzIiwiYXBwL2luZGV4TXlEYXRhL2luZGV4TXlEYXRhRW50cnkuanMiLCJhcHAvaW5kZXhNeURhdGEvaW5kZXhNeURhdGFNZW51LmpzIiwiYXBwL2luZGV4Y3JlYXRvci9pbmRleGNyZWF0b3IuanMiLCJhcHAvaW5kZXhlZGl0b3IvY2F0ZWdvcnkuanMiLCJhcHAvaW5kZXhlZGl0b3IvaW5kZXhlZGl0b3IuanMiLCJhcHAvaW5kZXhlZGl0b3IvaW5kaWNhdG9yLmpzIiwiYXBwL2luZGV4ZWRpdG9yL2luZGljYXRvcnMuanMiLCJhcHAvaW5kZXhlZGl0b3IvaW5kaXplcy5qcyIsImFwcC9pbmRleGluZm8vaW5kZXhpbmZvLmpzIiwiYXBwL2luZGljYXRvci9pbmRpY2F0b3IuanMiLCJhcHAvaW5kaWNhdG9yL2luZGljYXRvclllYXJUYWJsZS5qcyIsImFwcC9sb2dpbi9sb2dpbi5qcyIsImFwcC9sb2dvL2xvZ28uanMiLCJhcHAvbWFwL21hcC5qcyIsImFwcC9zZWxlY3RlZC9zZWxlY3RlZC5qcyIsImFwcC9zaWRlbWVudS9zaWRlbWVudS5qcyIsImFwcC9zaWdudXAvc2lnbnVwLmpzIiwiYXBwL3Vuc3VwcG9ydGVkX2Jyb3dzZXIvdW5zdXBwb3J0ZWRfYnJvd3Nlci5qcyIsImFwcC91c2VyL3VzZXIuanMiLCJkaWFsb2dzL2FkZFByb3ZpZGVyL2FkZFByb3ZpZGVyLmpzIiwiZGlhbG9ncy9hZGRVbml0L2FkZFVuaXQuanMiLCJkaWFsb2dzL2FkZFllYXIvYWRkWWVhci5qcyIsImRpYWxvZ3MvYWRkX3VzZXJzL2FkZF91c2Vycy5qcyIsImRpYWxvZ3MvY29uZmxpY3RtZXRob2RlL2NvbmZsaWN0bWV0aG9kZS5qcyIsImRpYWxvZ3MvY29uZmxpY3R0ZXh0L2NvbmZsaWN0dGV4dC5qcyIsImRpYWxvZ3MvY29weXByb3ZpZGVyL2NvcHlwcm92aWRlci5qcyIsImRpYWxvZ3MvZWRpdGNvbHVtbi9lZGl0Y29sdW1uLmpzIiwiZGlhbG9ncy9lZGl0cm93L2VkaXRyb3cuanMiLCJkaWFsb2dzL2VtYmVkY29kZS9lbWJlZGNvZGUuanMiLCJkaWFsb2dzL2V4cG9ydGRhdGEvZXhwb3J0ZGF0YS5qcyIsImRpYWxvZ3MvZXhwb3J0L2V4cG9ydC5qcyIsImRpYWxvZ3MvZXh0ZW5kRGF0YS9leHRlbmREYXRhLmpzIiwiZGlhbG9ncy9sb29zZWRhdGEvbG9vc2VkYXRhLmpzIiwiZGlhbG9ncy9zZWxlY3Rpc29mZXRjaGVycy9zZWxlY3Rpc29mZXRjaGVycy5qcyIsImRpcmVjdGl2ZXMvYmFycy9iYXJzLmpzIiwiZGlyZWN0aXZlcy9iYXJzL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2F1dG9Gb2N1cy9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9iYXNlbWFwL2Jhc2VtYXAuanMiLCJkaXJlY3RpdmVzL2Jhc2VtYXAvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvYmFzZW1hcFNlbGVjdG9yL2Jhc2VtYXBTZWxlY3Rvci5qcyIsImRpcmVjdGl2ZXMvYmFzZW1hcFNlbGVjdG9yL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2J1YmJsZXMvYnViYmxlcy5qcyIsImRpcmVjdGl2ZXMvYnViYmxlcy9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9jYXRlZ29yaWVzL2NhdGVnb3JpZXMuanMiLCJkaXJlY3RpdmVzL2NhdGVnb3JpZXMvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvY2F0ZWdvcnkvY2F0ZWdvcnkuanMiLCJkaXJlY3RpdmVzL2NhdGVnb3J5L2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2NpcmNsZWdyYXBoL2NpcmNsZWdyYXBoLmpzIiwiZGlyZWN0aXZlcy9jaXJjbGVncmFwaC9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9jb2xvci1ncmFkaWVudC9jb2xvci1ncmFkaWVudC5qcyIsImRpcmVjdGl2ZXMvY29sb3ItZ3JhZGllbnQvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvY29sb3JIYW5kbGUvY29sb3JIYW5kbGUuanMiLCJkaXJlY3RpdmVzL2NvbG9ySGFuZGxlL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2NvbXBhcmUvY29tcGFyZS5qcyIsImRpcmVjdGl2ZXMvY29tcGFyZS9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9jb21wb3NpdHMvY29tcG9zaXRzLmpzIiwiZGlyZWN0aXZlcy9jb21wb3NpdHMvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvY29uZmxpY3RpdGVtcy9jb25mbGljdGl0ZW1zLmpzIiwiZGlyZWN0aXZlcy9jb25mbGljdGl0ZW1zL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2NvbnRlbnRlZGl0YWJsZS9jb250ZW50ZWRpdGFibGUuanMiLCJkaXJlY3RpdmVzL2NvbnRlbnRlZGl0YWJsZS9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9leHBvcnQvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvZXhwb3J0L2V4cG9ydC5qcyIsImRpcmVjdGl2ZXMvZXhwb3J0Q2hvb3Nlci9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9leHBvcnRDaG9vc2VyL2V4cG9ydENob29zZXIuanMiLCJkaXJlY3RpdmVzL2ZpbGVEcm9wem9uZS9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9maWxlRHJvcHpvbmUvZmlsZURyb3B6b25lLmpzIiwiZGlyZWN0aXZlcy9ncmFkaWVudENyZWF0b3IvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvZ3JhZGllbnRDcmVhdG9yL2dyYWRpZW50Q3JlYXRvci5qcyIsImRpcmVjdGl2ZXMvZ3JhZGllbnRDcmVhdG9yQ2xpY2tBcmVhL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2dyYWRpZW50Q3JlYXRvckNsaWNrQXJlYS9ncmFkaWVudENyZWF0b3JDbGlja0FyZWEuanMiLCJkaXJlY3RpdmVzL2hpc3RvcnkvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvaGlzdG9yeS9oaXN0b3J5LmpzIiwiZGlyZWN0aXZlcy9pbWFnZUNvbG9yL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2ltYWdlQ29sb3IvaW1hZ2VDb2xvci5qcyIsImRpcmVjdGl2ZXMvaW1hZ2VVcGxvYWRlci9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9pbWFnZVVwbG9hZGVyL2ltYWdlVXBsb2FkZXIuanMiLCJkaXJlY3RpdmVzL2luZGljYXRvci9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9pbmRpY2F0b3IvaW5kaWNhdG9yLmpzIiwiZGlyZWN0aXZlcy9pbmRpY2F0b3JNZW51L2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL2luZGljYXRvck1lbnUvaW5kaWNhdG9yTWVudS5qcyIsImRpcmVjdGl2ZXMvaW5kaWNhdG9ycy9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9pbmRpY2F0b3JzL2luZGljYXRvcnMuanMiLCJkaXJlY3RpdmVzL2luZGl6ZXMvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvaW5kaXplcy9pbmRpemVzLmpzIiwiZGlyZWN0aXZlcy9tZWRpYW4vZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvbWVkaWFuL21lZGlhbi5qcyIsImRpcmVjdGl2ZXMvcGFuZWxzL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3BhbmVscy9wYW5lbHMuanMiLCJkaXJlY3RpdmVzL3BhcnNlQ29uZmxpY3RDc3YvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvcGFyc2VDb25mbGljdENzdi9wYXJzZUNvbmZsaWN0Q3N2LmpzIiwiZGlyZWN0aXZlcy9wYXJzZUNvbmZsaWN0RXZlbnRzQ3N2L2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3BhcnNlQ29uZmxpY3RFdmVudHNDc3YvcGFyc2VDb25mbGljdEV2ZW50c0Nzdi5qcyIsImRpcmVjdGl2ZXMvcGFyc2Vjc3YvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvcGFyc2Vjc3YvcGFyc2Vjc3YuanMiLCJkaXJlY3RpdmVzL3BpZWNoYXJ0L2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3BpZWNoYXJ0L3BpZWNoYXJ0LmpzIiwiZGlyZWN0aXZlcy9yb3VuZGJhci9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy9yb3VuZGJhci9yb3VuZGJhci5qcyIsImRpcmVjdGl2ZXMvc2ltcGxlbGluZWNoYXJ0L2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3NpbXBsZWxpbmVjaGFydC9zaW1wbGVsaW5lY2hhcnQuanMiLCJkaXJlY3RpdmVzL3NsaWRlVG9nZ2xlL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3NsaWRlVG9nZ2xlL3NsaWRlVG9nZ2xlLmpzIiwiZGlyZWN0aXZlcy9zdHlsZXMvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvc3R5bGVzL3N0eWxlcy5qcyIsImRpcmVjdGl2ZXMvc3ViaW5kZXgvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvc3ViaW5kZXgvc3ViaW5kZXguanMiLCJkaXJlY3RpdmVzL3N1bmJ1cnN0L2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3N1bmJ1cnN0L3N1bmJ1cnN0LmpzIiwiZGlyZWN0aXZlcy90cmVlbWVudS9kZWZpbml0aW9uLmpzIiwiZGlyZWN0aXZlcy90cmVlbWVudS90cmVlbWVudS5qcyIsImRpcmVjdGl2ZXMvdHJlZXZpZXcvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvdHJlZXZpZXcvdHJlZXZpZXcuanMiLCJkaXJlY3RpdmVzL3RyaWFuZ2xlLWdyYXBoL2RlZmluaXRpb24uanMiLCJkaXJlY3RpdmVzL3RyaWFuZ2xlLWdyYXBoL3RyaWFuZ2xlLWdyYXBoLmpzIiwiZGlyZWN0aXZlcy93ZWlnaHQvZGVmaW5pdGlvbi5qcyIsImRpcmVjdGl2ZXMvd2VpZ2h0L3dlaWdodC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxJQUFBLE1BQUEsUUFBQSxPQUFBLE9BQUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7Ozs7Q0FJQSxRQUFBLE9BQUEsY0FBQSxDQUFBLGFBQUEsMEJBQUEsYUFBQTtDQUNBLFFBQUEsT0FBQSxtQkFBQSxDQUFBLG1CQUFBLGlCQUFBLFFBQUEsUUFBQSxhQUFBLFlBQUEsa0JBQUEsaUJBQUEsZUFBQSxpQkFBQSxhQUFBLFdBQUEsVUFBQSxhQUFBLGlCQUFBLGNBQUEsYUFBQSxlQUFBLGFBQUEsdUJBQUEsY0FBQSxjQUFBLHFCQUFBO0NBQ0EsUUFBQSxPQUFBLGVBQUE7Q0FDQSxRQUFBLE9BQUEsZ0JBQUEsQ0FBQSxpQkFBQSxhQUFBLGFBQUEsZUFBQTtDQUNBLFFBQUEsT0FBQSxrQkFBQSxDQUFBLGNBQUE7Q0FDQSxRQUFBLE9BQUEsY0FBQTs7OztBQ2xCQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsY0FBQSxxRUFBQSxTQUFBLGdCQUFBLG9CQUFBLG1CQUFBOztFQUVBLElBQUEsVUFBQSxTQUFBLFVBQUE7R0FDQSxPQUFBLGdCQUFBLFdBQUEsTUFBQSxXQUFBOzs7RUFHQSxtQkFBQSxVQUFBOztFQUVBO0lBQ0EsTUFBQSxPQUFBO0lBQ0EsVUFBQTtJQUNBLE9BQUE7S0FDQSxRQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7O0tBRUEsTUFBQTtLQUNBLFFBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7S0FFQSxhQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLFlBQUE7SUFDQSxLQUFBO0lBQ0EsT0FBQTs7S0FFQSxZQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLFlBQUE7SUFDQSxLQUFBO0lBQ0EsVUFBQTs7O0lBR0EsTUFBQSxrQkFBQTtJQUNBLEtBQUE7SUFDQSxPQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUEsUUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7Ozs7SUFNQSxNQUFBLG9CQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7SUFDQSxTQUFBO0tBQ0Esa0NBQUEsU0FBQSxhQUFBLE9BQUE7TUFDQSxPQUFBLFlBQUEsT0FBQSxNQUFBOzs7SUFHQSxPQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUEsUUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7OztJQUtBLE1BQUEsYUFBQTtJQUNBLFVBQUE7SUFDQSxLQUFBO0lBQ0EsU0FBQTtLQUNBLGdDQUFBLFNBQUEsa0JBQUE7TUFDQSxPQUFBLGlCQUFBOzs7OztHQUtBLE1BQUEsb0JBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLE9BQUE7S0FDQSxZQUFBO01BQ0EsYUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOztLQUVBLFNBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7OztJQUlBLE1BQUEsMEJBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLE9BQUE7S0FDQSxZQUFBO01BQ0EsYUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOztLQUVBLFNBQUE7TUFDQSxhQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLG9CQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7SUFDQSxTQUFBO0tBQ0EsNEJBQUEsU0FBQSxnQkFBQTtNQUNBLE9BQUEsZUFBQTs7S0FFQSwrQkFBQSxTQUFBLGdCQUFBO01BQ0EsT0FBQSxlQUFBLGdCQUFBO09BQ0EsTUFBQTtPQUNBLE9BQUE7T0FDQSxPQUFBO09BQ0EsS0FBQTs7O0tBR0EsMkJBQUEsU0FBQSxnQkFBQTtNQUNBLE9BQUEsZUFBQTs7S0FFQSwrQkFBQSxTQUFBLGdCQUFBO01BQ0EsT0FBQSxlQUFBLGNBQUE7T0FDQSxZQUFBO09BQ0EsTUFBQTs7OztJQUlBLE9BQUE7S0FDQSxZQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLCtCQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7O0lBRUEsTUFBQSx5Q0FBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsUUFBQTtJQUNBLFNBQUE7S0FDQSw4Q0FBQSxTQUFBLGdCQUFBLGNBQUE7TUFDQSxPQUFBLGVBQUEsYUFBQSxhQUFBOzs7SUFHQSxPQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7Ozs7Ozs7Ozs7Ozs7O0lBZUEsTUFBQSw0QkFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBOztJQUVBLE1BQUEsaUNBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLFFBQUE7SUFDQSxTQUFBO0tBQ0EsMENBQUEsU0FBQSxnQkFBQSxjQUFBO01BQ0EsSUFBQSxhQUFBLE1BQUEsR0FBQSxPQUFBO01BQ0EsT0FBQSxlQUFBLFFBQUEsYUFBQTs7O0lBR0EsT0FBQTtLQUNBLFNBQUE7TUFDQSxhQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLHFDQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7SUFDQSxTQUFBO0tBQ0EsK0NBQUEsU0FBQSxnQkFBQSxjQUFBO01BQ0EsT0FBQSxlQUFBLGdCQUFBO09BQ0EsTUFBQTtPQUNBLE9BQUE7T0FDQSxPQUFBO09BQ0EsS0FBQTs7OztJQUlBLE9BQUE7S0FDQSxlQUFBO01BQ0EsYUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSxpREFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsUUFBQTs7SUFFQSxNQUFBLCtCQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7O0lBRUEsTUFBQSx3Q0FBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsUUFBQTtJQUNBLFNBQUE7S0FDQSw2Q0FBQSxTQUFBLGdCQUFBLGNBQUE7TUFDQSxJQUFBLGFBQUEsTUFBQSxPQUFBO09BQ0EsT0FBQTs7TUFFQSxPQUFBLGVBQUEsWUFBQSxhQUFBOzs7SUFHQSxPQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7Ozs7R0FLQSxNQUFBLG9CQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7SUFDQSxPQUFBO0tBQ0EsWUFBQTtNQUNBLGFBQUEsUUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSwwQkFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBOztJQUVBLE1BQUEsbUJBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLE9BQUE7S0FDQSxTQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7O0tBRUEsWUFBQTtNQUNBLGFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7OztJQUlBLE1BQUEsa0JBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLFFBQUE7SUFDQSxPQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUEsUUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOztLQUVBLFlBQUE7TUFDQSxhQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLG1CQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7SUFDQSxRQUFBO0lBQ0EsT0FBQTtLQUNBLFNBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7S0FFQSxZQUFBO01BQ0EsYUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSxjQUFBO0lBQ0EsVUFBQTtJQUNBLEtBQUE7SUFDQSxTQUFBO0tBQ0EsMkJBQUEsU0FBQSxhQUFBO01BQ0EsT0FBQSxZQUFBLE9BQUEsa0JBQUEsS0FBQSxTQUFBLFdBQUE7T0FDQSxPQUFBOzs7OztJQUtBLE1BQUEscUJBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtLQUNBLFVBQUE7O0lBRUEsT0FBQTtLQUNBLGVBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7OztJQUlBLE1BQUEsNkJBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtLQUNBLFVBQUE7O0lBRUEsUUFBQTtJQUNBLFdBQUE7SUFDQSxZQUFBO0lBQ0EsT0FBQTtLQUNBLFdBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7S0FFQSxZQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLHVDQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7SUFDQSxXQUFBO0lBQ0EsWUFBQTs7SUFFQSxNQUFBLCtDQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7SUFDQSxXQUFBO0lBQ0EsWUFBQTs7SUFFQSxNQUFBLHVEQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7SUFDQSxXQUFBO0lBQ0EsWUFBQTs7SUFFQSxNQUFBLHFCQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7SUFDQSxNQUFBO0tBQ0EsVUFBQTs7SUFFQSxPQUFBO0tBQ0EsWUFBQTtNQUNBLGFBQUEsUUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSw2QkFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsUUFBQTtJQUNBLE1BQUE7S0FDQSxVQUFBOztJQUVBLE9BQUE7S0FDQSxTQUFBO01BQ0EsYUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSxpQ0FBQTtJQUNBLEtBQUE7SUFDQSxRQUFBO0lBQ0EsU0FBQTtLQUNBLCtDQUFBLFNBQUEsZ0JBQUEsY0FBQTtNQUNBLE9BQUEsZUFBQSxnQkFBQTtPQUNBLE1BQUE7T0FDQSxPQUFBO09BQ0EsT0FBQTtPQUNBLEtBQUE7Ozs7SUFJQSxPQUFBO0tBQ0EsZUFBQTtNQUNBLGFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7OztJQUlBLE1BQUEsbUNBQUE7SUFDQSxLQUFBO0lBQ0EsUUFBQTtJQUNBLFlBQUE7SUFDQSxPQUFBO0tBQ0EsZUFBQTtNQUNBLGFBQUEsUUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSxvQ0FBQTtJQUNBLEtBQUE7SUFDQSxRQUFBO0lBQ0EsT0FBQTtLQUNBLGVBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7OztJQUlBLE1BQUEsc0JBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLE1BQUE7S0FDQSxVQUFBOztJQUVBLE9BQUE7S0FDQSxZQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLDhCQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7SUFDQSxRQUFBO0lBQ0EsTUFBQTtLQUNBLFVBQUE7O0lBRUEsT0FBQTtLQUNBLFNBQUE7TUFDQSxhQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7Ozs7SUFJQSxNQUFBLGtCQUFBO0lBQ0EsS0FBQTtJQUNBLFNBQUE7S0FDQSwrQkFBQSxTQUFBLGdCQUFBO01BQ0EsT0FBQSxlQUFBLGNBQUE7T0FDQSxNQUFBO09BQ0EsT0FBQTtPQUNBLE9BQUE7T0FDQSxLQUFBOzs7S0FHQSw0QkFBQSxTQUFBLGdCQUFBO01BQ0EsT0FBQSxlQUFBOztLQUVBLCtCQUFBLFNBQUEsZ0JBQUE7TUFDQSxPQUFBLGVBQUEsY0FBQTtPQUNBLFlBQUE7T0FDQSxNQUFBOzs7O0lBSUEsT0FBQTtLQUNBLFlBQUE7TUFDQSxhQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7Ozs7SUFLQSxNQUFBLHlCQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7SUFDQSxPQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTs7OztJQUlBLE1BQUEsdUJBQUE7SUFDQSxLQUFBO0lBQ0EsU0FBQTtLQUNBLDhDQUFBLFNBQUEsZ0JBQUEsY0FBQTtNQUNBLE9BQUEsZUFBQSxlQUFBLGFBQUE7OztJQUdBLE9BQUE7S0FDQSxZQUFBO01BQ0EsYUFBQSxRQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7OztJQUdBLFFBQUE7S0FDQSxNQUFBO01BQ0EsUUFBQTtNQUNBLE9BQUE7TUFDQSxTQUFBOztLQUVBLFFBQUE7TUFDQSxRQUFBO01BQ0EsT0FBQTtNQUNBLFNBQUE7O0tBRUEsS0FBQTtNQUNBLFFBQUE7TUFDQSxPQUFBO01BQ0EsU0FBQTs7Ozs7SUFLQSxNQUFBLDRCQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7SUFDQSxTQUFBO0tBQ0EsbUNBQUEsU0FBQSxnQkFBQSxRQUFBOztNQUVBLE9BQUEsZUFBQSxpQkFBQSxPQUFBLE9BQUEsSUFBQSxPQUFBLE9BQUEsTUFBQSxPQUFBLE9BQUE7OztJQUdBLE9BQUE7S0FDQSxTQUFBO01BQ0EsYUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBOzs7O0lBSUEsTUFBQSxrQkFBQTtJQUNBLEtBQUE7SUFDQSxTQUFBO0tBQ0EseUNBQUEsU0FBQSxnQkFBQSxjQUFBO01BQ0EsT0FBQSxlQUFBLFVBQUEsYUFBQTs7S0FFQSxnQ0FBQSxTQUFBLGtCQUFBO01BQ0EsT0FBQSxpQkFBQTs7O0lBR0EsT0FBQTtLQUNBLFlBQUE7TUFDQSxhQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7O0tBRUEsWUFBQTtNQUNBLGFBQUE7Ozs7SUFJQSxNQUFBLHVCQUFBO0lBQ0EsS0FBQTtJQUNBLE9BQUE7S0FDQSxTQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7TUFDQSxhQUFBLFFBQUE7Ozs7SUFJQSxNQUFBLDJCQUFBO0lBQ0EsS0FBQTs7Ozs7Ozs7Ozs7Ozs7SUFjQSxNQUFBLG1DQUFBO0lBQ0EsS0FBQTs7SUFFQSxNQUFBLGdCQUFBO0lBQ0EsVUFBQTtJQUNBLEtBQUE7O0lBRUEsTUFBQSxzQkFBQTtJQUNBLEtBQUE7SUFDQSxTQUFBO0tBQ0EseUJBQUEsU0FBQSxhQUFBO01BQ0EsT0FBQSxZQUFBLElBQUE7O0tBRUEsMkJBQUEsU0FBQSxhQUFBO01BQ0EsT0FBQSxZQUFBLElBQUE7OztJQUdBLE9BQUE7S0FDQSxZQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7TUFDQSxhQUFBLFFBQUE7O0tBRUEsU0FBQTtNQUNBLGFBQUEsUUFBQTs7OztJQUlBLE1BQUEsNkJBQUE7SUFDQSxLQUFBO0lBQ0EsU0FBQTtLQUNBLHdDQUFBLFNBQUEsYUFBQSxjQUFBO01BQ0EsT0FBQSxZQUFBLElBQUEsdUJBQUEsYUFBQSxLQUFBOzs7SUFHQSxPQUFBO0tBQ0EsWUFBQTtNQUNBLFlBQUE7TUFDQSxjQUFBO01BQ0EsYUFBQSxRQUFBOztLQUVBLFNBQUE7TUFDQSxhQUFBLFFBQUE7Ozs7SUFJQSxNQUFBLDhCQUFBO0lBQ0EsS0FBQTtJQUNBLFNBQUE7S0FDQSwwQ0FBQSxTQUFBLGFBQUEsY0FBQTtNQUNBLE9BQUEsWUFBQSxJQUFBLHNCQUFBLGFBQUEsSUFBQTs7O0lBR0EsT0FBQTtLQUNBLFlBQUE7TUFDQSxZQUFBO01BQ0EsY0FBQTtNQUNBLGFBQUEsUUFBQTs7S0FFQSxlQUFBO0tBQ0EsU0FBQTtNQUNBLGFBQUEsUUFBQTs7OztJQUlBLE1BQUEsdUJBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLE9BQUE7S0FDQSxZQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7TUFDQSxhQUFBLFFBQUE7Ozs7SUFJQSxNQUFBLGlCQUFBO0lBQ0EsS0FBQTtJQUNBLE1BQUE7S0FDQSxVQUFBOztJQUVBLE9BQUE7S0FDQSxTQUFBO01BQ0EsYUFBQSxRQUFBOztLQUVBLE9BQUE7Ozs7OztBQ3RzQkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGNBQUEsMklBQUEsU0FBQSxZQUFBLFlBQUEsVUFBQSxPQUFBLFFBQUEsZUFBQSxTQUFBLGFBQUEsUUFBQSxvQkFBQTtFQUNBLFdBQUEsY0FBQTtFQUNBLFdBQUEsU0FBQTtFQUNBLFdBQUEsWUFBQTtFQUNBLFdBQUEsY0FBQSxjQUFBLFlBQUE7RUFDQSxXQUFBLFVBQUE7RUFDQSxXQUFBLFVBQUEsUUFBQSxTQUFBLFFBQUE7O0VBRUEsV0FBQSxTQUFBLFdBQUE7R0FDQSxRQUFBLFFBQUE7O0VBRUEsV0FBQSxhQUFBLFNBQUEsUUFBQTtHQUNBLFdBQUEsUUFBQTs7O0VBR0EsV0FBQSxJQUFBLHFCQUFBLFNBQUEsT0FBQSxTQUFBLFVBQUEsV0FBQSxZQUFBOztHQUVBLElBQUEsUUFBQSxRQUFBLENBQUEsTUFBQSxtQkFBQTtJQUNBLE9BQUEsTUFBQSx1Q0FBQTtJQUNBLE1BQUE7SUFDQSxPQUFBLE9BQUEsR0FBQTs7R0FFQSxJQUFBLFFBQUEsUUFBQSxRQUFBLEtBQUEsVUFBQTtJQUNBLFdBQUEsZUFBQSxRQUFBLEtBQUE7O0dBRUEsSUFBQSxRQUFBLFVBQUEsT0FBQTtJQUNBLFdBQUEsUUFBQTtVQUNBO0lBQ0EsV0FBQSxRQUFBOztHQUVBLElBQUEsUUFBQSxVQUFBLFNBQUE7SUFDQSxXQUFBLGNBQUE7VUFDQTtJQUNBLFdBQUEsY0FBQTs7R0FFQSxJQUFBLFFBQUEsY0FBQSxRQUFBO0lBQ0EsV0FBQSxVQUFBO1VBQ0E7SUFDQSxXQUFBLFVBQUE7O0dBRUEsSUFBQSxRQUFBLGFBQUEsTUFBQTtJQUNBLFdBQUEsWUFBQTtVQUNBO0lBQ0EsV0FBQSxZQUFBOzs7R0FHQSxJQUFBLE9BQUEsUUFBQSxTQUFBLGFBQUE7O0lBRUEsSUFBQSxRQUFBLE1BQUEsZUFBQSxlQUFBLFFBQUEsTUFBQSxlQUFBLFVBQUE7S0FDQSxXQUFBLFVBQUE7V0FDQTtLQUNBLFdBQUEsVUFBQTs7SUFFQSxJQUFBLFFBQUEsTUFBQSxlQUFBLFlBQUEsUUFBQSxNQUFBLGVBQUEsZ0JBQUE7S0FDQSxXQUFBLFdBQUE7V0FDQTtLQUNBLFdBQUEsV0FBQTs7SUFFQSxJQUFBLFFBQUEsTUFBQSxlQUFBLGdCQUFBO0tBQ0EsV0FBQSxhQUFBO1dBQ0E7S0FDQSxXQUFBLGFBQUE7O0lBRUEsSUFBQSxRQUFBLE1BQUEsZUFBQSxnQkFBQTtLQUNBLFdBQUEsV0FBQTtXQUNBO0tBQ0EsV0FBQSxXQUFBOztJQUVBLElBQUEsUUFBQSxNQUFBLGVBQUEsVUFBQTtLQUNBLFdBQUEsV0FBQTtXQUNBO0tBQ0EsV0FBQSxXQUFBOztJQUVBLElBQUEsUUFBQSxNQUFBLGVBQUEsZ0JBQUE7S0FDQSxXQUFBLGlCQUFBO1dBQ0E7S0FDQSxXQUFBLGlCQUFBOztVQUVBO0lBQ0EsSUFBQSxDQUFBLFFBQUEsWUFBQTtLQUNBLFdBQUEsYUFBQTtLQUNBLFdBQUEsV0FBQTtLQUNBLFdBQUEsV0FBQTtLQUNBLFdBQUEsV0FBQTtLQUNBLFdBQUEsVUFBQTtXQUNBO0tBQ0EsV0FBQSxVQUFBOzs7O0dBSUEsS0FBQSxRQUFBLEtBQUEsUUFBQSxjQUFBLENBQUEsS0FBQSxRQUFBLFFBQUEsd0JBQUE7SUFDQSxXQUFBLFdBQUE7VUFDQTtJQUNBLFdBQUEsV0FBQTs7R0FFQSxJQUFBLFFBQUEsUUFBQSw2QkFBQTtJQUNBLFdBQUEsWUFBQTtVQUNBO0lBQ0EsV0FBQSxZQUFBOztHQUVBLFdBQUEsZUFBQTtJQUNBLE9BQUE7SUFDQSxRQUFBOztHQUVBLFdBQUEsaUJBQUE7Ozs7O0VBS0EsV0FBQSxJQUFBLHNCQUFBLFNBQUEsT0FBQSxTQUFBOzs7O0VBSUEsV0FBQSxJQUFBLHVCQUFBLFNBQUEsT0FBQSxTQUFBOztHQUVBLFdBQUEsaUJBQUE7R0FDQSxJQUFBLE1BQUEsbUJBQUE7Ozs7R0FJQTs7O0VBR0EsU0FBQSxlQUFBO0dBQ0EsU0FBQSxXQUFBO0lBQ0EsbUJBQUEsU0FBQTtNQUNBOzs7Ozs7Ozs7Ozs7OztBQ2pJQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsY0FBQSx5QkFBQSxVQUFBLGVBQUE7OztFQUdBLGNBQUEsV0FBQTtJQUNBLGNBQUEsWUFBQTtJQUNBLGNBQUEsWUFBQTtFQUNBLGNBQUEsU0FBQTtHQUNBLEtBQUE7R0FDQSxVQUFBOztFQUVBLGNBQUEsT0FBQTtHQUNBLEtBQUE7R0FDQSxVQUFBOzs7Ozs7QUNmQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsY0FBQSwrQkFBQSxTQUFBLHFCQUFBOztFQUVBLG9CQUFBLFdBQUE7R0FDQSxRQUFBO0dBQ0EsaUJBQUEsQ0FBQSxLQUFBLEtBQUE7R0FDQSxpQkFBQTtHQUNBLFlBQUE7R0FDQSxvQkFBQTtHQUNBLHFCQUFBO0dBQ0EsWUFBQTs7RUFFQSxvQkFBQSxHQUFBLFlBQUEsU0FBQSxPQUFBOzs7Ozs7O0FDZEEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGNBQUEsK0JBQUEsU0FBQSxxQkFBQTs7RUFFQSxvQkFBQSxXQUFBOztHQUVBLFlBQUE7Ozs7O0FDUEEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGNBQUEsd0JBQUEsU0FBQSxhQUFBO1FBQ0EsYUFBQSxhQUFBOzs7OztBQ0pBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxjQUFBLGlDQUFBLFVBQUEsc0JBQUE7RUFDQSxzQkFBQSxpQkFBQTs7Ozs7QUNKQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsY0FBQSwrQkFBQSxTQUFBLHFCQUFBO0VBQ0E7SUFDQSxXQUFBO0lBQ0Esa0JBQUE7SUFDQSxRQUFBOztJQUVBLHFCQUFBO0lBQ0EsT0FBQTs7SUFFQSx1QkFBQSxTQUFBLE1BQUEsV0FBQSxNQUFBLEtBQUEsVUFBQSxVQUFBO0lBQ0EsSUFBQTtJQUNBLGdCQUFBLEtBQUE7SUFDQSxJQUFBLEtBQUEsTUFBQTtLQUNBLGNBQUEsUUFBQSxLQUFBOztJQUVBLElBQUEsS0FBQSxVQUFBO0tBQ0EsY0FBQSxZQUFBLEtBQUE7O0lBRUEsT0FBQTs7Ozs7Ozs7Ozs7Ozs7O0FDckJBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxjQUFBLG9EQUFBLFNBQUEsbUJBQUEsb0JBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBb0JBLElBQUEsVUFBQSxtQkFBQSxjQUFBLFVBQUE7R0FDQSxPQUFBO0dBQ0EsUUFBQTs7R0FFQSxtQkFBQSxjQUFBLFNBQUE7O0VBRUEsbUJBQUEsTUFBQTtHQUNBLGVBQUE7R0FDQSxjQUFBO0dBQ0EsWUFBQTs7R0FFQSxtQkFBQTs7Ozs7QUNsQ0EsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGNBQUEsd0JBQUEsU0FBQSxhQUFBOztRQUVBLFFBQUEsT0FBQSxjQUFBO1VBQ0EsYUFBQTtVQUNBLGFBQUE7VUFDQSxXQUFBO1VBQ0EsYUFBQTtVQUNBLGVBQUE7VUFDQSxtQkFBQTtVQUNBLHVCQUFBO1VBQ0EsUUFBQTtVQUNBLGFBQUE7VUFDQSxZQUFBOzs7Ozs7QUNmQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsZUFBQSxRQUFBLFlBQUEsVUFBQTtRQUNBLE9BQUEsVUFBQSxPQUFBOztZQUVBLEtBQUEsQ0FBQSxPQUFBO2NBQ0EsT0FBQTs7WUFFQSxPQUFBLE1BQUEsUUFBQSxlQUFBOzs7Ozs7O0FDVEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGVBQUEsUUFBQSxjQUFBLFVBQUE7RUFDQSxPQUFBLFNBQUEsT0FBQSxLQUFBO0dBQ0EsT0FBQSxDQUFBLENBQUEsQ0FBQSxTQUFBLE1BQUEsUUFBQSxzQkFBQSxTQUFBLElBQUE7SUFDQSxPQUFBLElBQUEsT0FBQSxHQUFBLGdCQUFBLElBQUEsT0FBQSxHQUFBO1FBQ0E7Ozs7O0FDUEEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGVBQUEsT0FBQSxjQUFBLFlBQUE7RUFDQSxPQUFBLFVBQUEsT0FBQSxNQUFBLE9BQUE7O01BRUEsSUFBQSxTQUFBO0dBQ0EsSUFBQSxJQUFBO0lBQ0EsTUFBQSxNQUFBOztHQUVBLE9BQUEsSUFBQSxLQUFBLEtBQUE7SUFDQSxJQUFBLE1BQUEsR0FBQSxPQUFBLGNBQUEsUUFBQSxLQUFBLGlCQUFBLENBQUEsR0FBQTtNQUNBLE9BQUEsS0FBQSxNQUFBOzs7R0FHQSxPQUFBOzs7Ozs7QUNmQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsZUFBQSxRQUFBLGlCQUFBLFVBQUE7RUFDQSxPQUFBLFNBQUEsU0FBQSxLQUFBO0dBQ0EsS0FBQSxDQUFBLEtBQUE7SUFDQSxPQUFBOztHQUVBLElBQUEsUUFBQSxJQUFBLE1BQUE7R0FDQSxLQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxRQUFBLEtBQUE7SUFDQSxNQUFBLEtBQUEsTUFBQSxHQUFBLE9BQUEsR0FBQSxnQkFBQSxNQUFBLEdBQUEsTUFBQTs7R0FFQSxPQUFBLE1BQUEsS0FBQTs7OztBQ1pBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxlQUFBLFFBQUEsV0FBQSxVQUFBO1FBQ0EsT0FBQSxVQUFBLE1BQUE7OzthQUdBLE9BQUEsS0FBQSxRQUFBLGNBQUE7Ozs7OztBQ1BBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxlQUFBLE9BQUEsaUJBQUEsWUFBQTtFQUNBLE9BQUEsVUFBQSxPQUFBLFdBQUE7R0FDQSxJQUFBLENBQUEsUUFBQSxTQUFBLFFBQUEsT0FBQTs7R0FFQSxJQUFBLFFBQUE7R0FDQSxLQUFBLElBQUEsYUFBQSxPQUFBO0lBQ0EsTUFBQSxLQUFBLE1BQUE7OztHQUdBLE1BQUEsS0FBQSxVQUFBLEdBQUEsR0FBQTtJQUNBLElBQUEsU0FBQSxFQUFBO0lBQ0EsSUFBQSxTQUFBLEVBQUE7SUFDQSxPQUFBLElBQUE7O0dBRUEsT0FBQTs7SUFFQSxPQUFBLHNCQUFBLFdBQUE7RUFDQSxPQUFBLFNBQUEsT0FBQSxPQUFBLFNBQUE7SUFDQSxJQUFBLFdBQUE7SUFDQSxRQUFBLFFBQUEsT0FBQSxTQUFBLE1BQUE7TUFDQSxTQUFBLEtBQUE7O0lBRUEsU0FBQSxLQUFBLFVBQUEsR0FBQSxHQUFBO01BQ0EsUUFBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLElBQUEsQ0FBQTs7SUFFQSxHQUFBLFNBQUEsU0FBQTtJQUNBLE9BQUE7OztBQUdBOzs7O0FDaENBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxlQUFBLE9BQUEsWUFBQTtDQUNBLFNBQUEsV0FBQTtFQUNBLE9BQUEsVUFBQSxPQUFBLFlBQUEsT0FBQTs7TUFFQSxJQUFBLFFBQUE7TUFDQSxJQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsTUFBQSxRQUFBLElBQUE7O1FBRUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxlQUFBLE1BQUE7VUFDQSxNQUFBLEtBQUEsTUFBQTs7OztHQUlBLE9BQUE7Ozs7O0FDZkEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGVBQUEsT0FBQSxzQkFBQSxZQUFBO1FBQ0EsT0FBQSxVQUFBLE9BQUEsT0FBQSxhQUFBO1lBQ0EsSUFBQSxNQUFBLFFBQUE7Z0JBQ0EsT0FBQTs7WUFFQSxJQUFBLFNBQUEsR0FBQTtnQkFDQSxPQUFBOztZQUVBLElBQUEsU0FBQSxNQUFBLFNBQUEsT0FBQTtnQkFDQSxRQUFBLE1BQUEsVUFBQSxHQUFBOztnQkFFQSxJQUFBLENBQUEsYUFBQTtvQkFDQSxJQUFBLFlBQUEsTUFBQSxZQUFBOztvQkFFQSxJQUFBLGNBQUEsQ0FBQSxHQUFBO3dCQUNBLFFBQUEsTUFBQSxPQUFBLEdBQUE7O3VCQUVBO29CQUNBLE9BQUEsTUFBQSxPQUFBLE1BQUEsT0FBQSxPQUFBLEtBQUE7d0JBQ0EsUUFBQSxNQUFBLE9BQUEsR0FBQSxNQUFBLFNBQUE7OztnQkFHQSxPQUFBLFFBQUE7O1lBRUEsT0FBQTs7OztBQzNCQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsZUFBQSxPQUFBLGlCQUFBLFlBQUE7UUFDQSxPQUFBLFVBQUEsT0FBQSxPQUFBO1lBQ0EsSUFBQSxNQUFBLFFBQUE7Z0JBQ0EsT0FBQTs7WUFFQSxJQUFBLFNBQUEsR0FBQTtnQkFDQSxPQUFBOztZQUVBLElBQUEsT0FBQTtnQkFDQSxJQUFBLGFBQUEsTUFBQSxNQUFBO2dCQUNBLElBQUEsV0FBQSxTQUFBLE9BQUE7b0JBQ0EsUUFBQSxXQUFBLE1BQUEsR0FBQSxPQUFBLEtBQUEsT0FBQTs7O1lBR0EsT0FBQTs7OztBQ2pCQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsZUFBQSxRQUFBLHNCQUFBLFVBQUEsTUFBQTtFQUNBLE9BQUEsVUFBQSxNQUFBO0dBQ0EsT0FBQSxLQUFBLFlBQUE7Ozs7QUNMQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsZUFBQSxPQUFBLFdBQUEsV0FBQTtFQUNBLE9BQUEsVUFBQSxRQUFBO0dBQ0EsS0FBQSxDQUFBLE9BQUE7SUFDQSxPQUFBOztHQUVBLE9BQUEsTUFBQSxVQUFBLEdBQUEsR0FBQSxnQkFBQSxNQUFBLFVBQUE7Ozs7OztBQ1JBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLDZDQUFBLFNBQUEsYUFBQSxPQUFBOztRQUVBLE9BQUE7VUFDQSxTQUFBO1VBQ0EsUUFBQTtVQUNBLGFBQUEsU0FBQSxTQUFBLE1BQUE7WUFDQSxJQUFBLFFBQUE7WUFDQSxZQUFBLE9BQUEsWUFBQSxLQUFBLFNBQUEsU0FBQTtjQUNBLE1BQUEsV0FBQTtjQUNBLEdBQUEsT0FBQSxZQUFBO2NBQ0EsUUFBQSxNQUFBO2VBQ0E7O1VBRUEsWUFBQSxTQUFBLElBQUEsU0FBQSxNQUFBO1lBQ0EsSUFBQSxRQUFBO1lBQ0EsWUFBQSxPQUFBLFdBQUEsSUFBQSxLQUFBLFNBQUEsU0FBQTtjQUNBLE1BQUEsVUFBQTtjQUNBLEdBQUEsT0FBQSxZQUFBO2NBQ0EsUUFBQSxNQUFBOzs7VUFHQSxZQUFBLFNBQUEsS0FBQTtZQUNBLE9BQUEsS0FBQSxVQUFBOztVQUVBLE1BQUEsU0FBQSxTQUFBLFNBQUEsTUFBQTtZQUNBLEdBQUEsUUFBQSxNQUFBLEtBQUEsQ0FBQSxRQUFBLEdBQUE7Y0FDQSxZQUFBLEtBQUEsWUFBQSxTQUFBLEtBQUEsU0FBQSxTQUFBO2dCQUNBLE9BQUEsUUFBQTtnQkFDQSxHQUFBLE9BQUEsWUFBQTtnQkFDQSxRQUFBO2dCQUNBLFNBQUEsU0FBQTtnQkFDQSxPQUFBLE1BQUE7Z0JBQ0EsR0FBQSxPQUFBLFVBQUE7Z0JBQ0EsTUFBQTs7O2dCQUdBO2NBQ0EsUUFBQSxPQUFBLEtBQUEsU0FBQSxTQUFBO2dCQUNBLE9BQUEsUUFBQTtnQkFDQSxHQUFBLE9BQUEsWUFBQTtnQkFDQSxRQUFBO2dCQUNBLFNBQUEsU0FBQTtnQkFDQSxPQUFBLE1BQUE7Z0JBQ0EsR0FBQSxPQUFBLFVBQUE7Z0JBQ0EsTUFBQTs7OztVQUlBLFlBQUEsU0FBQSxJQUFBLFNBQUEsTUFBQTtZQUNBLFlBQUEsT0FBQSxZQUFBLElBQUEsS0FBQSxTQUFBLFNBQUE7Y0FDQSxPQUFBLFFBQUE7Y0FDQSxHQUFBLE9BQUEsWUFBQTtjQUNBLFFBQUE7ZUFDQSxTQUFBLFNBQUE7Y0FDQSxHQUFBLE9BQUEsVUFBQTtjQUNBLE1BQUE7Ozs7Ozs7O0FDMURBLENBQUEsV0FBQTtFQUNBOztFQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLHNCQUFBLFdBQUE7O0lBRUEsSUFBQTtJQUNBLE9BQUEsY0FBQSxDQUFBLFdBQUE7Ozs7OztLQU1BLFNBQUEsWUFBQSxPQUFBLE1BQUE7TUFDQSxLQUFBLFFBQUE7TUFDQSxLQUFBLE9BQUE7OztLQUdBLE9BQUE7Ozs7Ozs7QUNqQkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGdCQUFBLFFBQUEsNkNBQUEsU0FBQSxhQUFBLFNBQUE7O0VBRUEsU0FBQSxjQUFBLE1BQUEsSUFBQTs7R0FFQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsS0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLE9BQUEsS0FBQTtJQUNBLElBQUEsS0FBQSxNQUFBLElBQUE7S0FDQSxPQUFBOztJQUVBLElBQUEsS0FBQSxVQUFBO0tBQ0EsSUFBQSxZQUFBLGNBQUEsS0FBQSxVQUFBO0tBQ0EsSUFBQSxXQUFBO01BQ0EsT0FBQTs7Ozs7R0FLQSxPQUFBOztFQUVBLE9BQUE7R0FDQSxTQUFBO0lBQ0EsWUFBQTtJQUNBLFdBQUE7SUFDQSxNQUFBO0lBQ0EsWUFBQTtJQUNBLFVBQUE7SUFDQSxRQUFBO0lBQ0EsY0FBQTtJQUNBLFNBQUE7O0dBRUEsUUFBQTtHQUNBLGNBQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxLQUFBLFFBQUEsVUFBQSxZQUFBLE9BQUEsU0FBQTs7R0FFQSxpQkFBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLEtBQUEsUUFBQSxhQUFBLFlBQUEsT0FBQSxjQUFBLFFBQUE7O0dBRUEsaUJBQUEsU0FBQSxRQUFBLGFBQUE7SUFDQSxJQUFBLGFBQUE7S0FDQSxPQUFBLFlBQUEsT0FBQSxjQUFBLFFBQUE7O0lBRUEsT0FBQSxLQUFBLFFBQUEsYUFBQSxZQUFBLE9BQUEsY0FBQSxRQUFBOztHQUVBLGFBQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxLQUFBLFFBQUEsU0FBQSxZQUFBLE9BQUEsVUFBQSxRQUFBOztHQUVBLFlBQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxLQUFBLGFBQUE7O0lBRUEsT0FBQSxLQUFBLFFBQUE7O0dBRUEsZUFBQSxTQUFBLFFBQUEsYUFBQTtJQUNBLElBQUEsYUFBQTtLQUNBLE9BQUEsS0FBQSxnQkFBQSxRQUFBOztJQUVBLElBQUEsS0FBQSxRQUFBLFdBQUEsVUFBQSxHQUFBO0tBQ0EsT0FBQSxLQUFBLGdCQUFBOztJQUVBLE9BQUEsS0FBQSxRQUFBOztHQUVBLGVBQUEsU0FBQSxRQUFBO0lBQ0EsSUFBQSxLQUFBLFFBQUEsV0FBQSxTQUFBLEdBQUE7S0FDQSxPQUFBLEtBQUEsUUFBQTs7SUFFQSxPQUFBLEtBQUEsZ0JBQUE7OztHQUdBLFdBQUEsU0FBQSxRQUFBO0lBQ0EsSUFBQSxLQUFBLFFBQUEsT0FBQSxVQUFBLEdBQUE7S0FDQSxPQUFBLEtBQUEsWUFBQTs7SUFFQSxPQUFBLEtBQUEsUUFBQTs7R0FFQSxjQUFBLFNBQUEsSUFBQTtJQUNBLElBQUEsS0FBQSxRQUFBLFdBQUEsU0FBQSxHQUFBO0tBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLEtBQUEsUUFBQSxXQUFBLFFBQUEsS0FBQTtNQUNBLElBQUEsS0FBQSxRQUFBLFdBQUEsR0FBQSxNQUFBLElBQUE7T0FDQSxPQUFBLEtBQUEsUUFBQSxXQUFBOzs7O0lBSUEsT0FBQSxLQUFBLGVBQUE7O0dBRUEsZ0JBQUEsU0FBQSxJQUFBLFNBQUE7SUFDQSxJQUFBLE9BQUE7SUFDQSxPQUFBLFlBQUEsT0FBQSxnQkFBQSxJQUFBLEtBQUEsU0FBQSxNQUFBO0tBQ0EsSUFBQSxPQUFBLFdBQUEsWUFBQTtNQUNBLFFBQUE7O0tBRUEsT0FBQSxLQUFBLFFBQUEsWUFBQTs7O0dBR0Esd0JBQUEsU0FBQSxJQUFBLFNBQUEsT0FBQTtJQUNBLFlBQUEsT0FBQSxlQUFBLElBQUEsT0FBQSxLQUFBLFNBQUEsTUFBQTtLQUNBLElBQUEsT0FBQSxXQUFBLFlBQUE7TUFDQSxRQUFBOzs7O0dBSUEsdUJBQUEsU0FBQSxJQUFBO0lBQ0EsT0FBQSxZQUFBLE9BQUEsY0FBQTs7R0FFQSxrQkFBQSxTQUFBLElBQUEsTUFBQSxRQUFBO0lBQ0EsSUFBQSxRQUFBLFVBQUEsVUFBQSxPQUFBO0tBQ0EsT0FBQSxLQUFBLFFBQUEsT0FBQSxZQUFBLE9BQUEsZ0JBQUEsS0FBQSxXQUFBLE9BQUEsYUFBQTtXQUNBLElBQUEsTUFBQTtLQUNBLE9BQUEsS0FBQSxRQUFBLE9BQUEsWUFBQSxPQUFBLGdCQUFBLEtBQUEsV0FBQTs7SUFFQSxPQUFBLEtBQUEsUUFBQSxPQUFBLFlBQUEsT0FBQSxnQkFBQSxLQUFBOztHQUVBLHFCQUFBLFNBQUEsSUFBQSxLQUFBLFFBQUE7SUFDQSxPQUFBLFlBQUEsT0FBQSxnQkFBQSxLQUFBLGNBQUEsS0FBQTtLQUNBLFFBQUE7OztHQUdBLFNBQUEsU0FBQSxJQUFBOzs7OztJQUtBLE9BQUEsS0FBQSxRQUFBLE9BQUEsWUFBQSxPQUFBLFVBQUE7OztHQUdBLGVBQUEsU0FBQSxJQUFBLE1BQUE7SUFDQSxJQUFBLE9BQUE7SUFDQSxRQUFBLFFBQUEsTUFBQSxTQUFBLE9BQUEsS0FBQTtLQUNBLElBQUEsTUFBQSxNQUFBLElBQUE7TUFDQSxLQUFBLE9BQUEsS0FBQTtNQUNBLE9BQUE7O0tBRUEsSUFBQSxNQUFBLFVBQUE7TUFDQSxJQUFBLFlBQUEsS0FBQSxjQUFBLElBQUEsTUFBQTtNQUNBLElBQUEsV0FBQTtPQUNBLE9BQUE7Ozs7SUFJQSxPQUFBOztHQUVBLGFBQUEsU0FBQSxJQUFBLE1BQUE7SUFDQSxJQUFBLFFBQUE7SUFDQSxJQUFBLE9BQUE7SUFDQSxRQUFBLFFBQUEsTUFBQSxTQUFBLE9BQUEsS0FBQTtLQUNBLElBQUEsTUFBQSxNQUFBLElBQUE7TUFDQSxRQUFBOztLQUVBLElBQUEsTUFBQSxZQUFBLE1BQUEsU0FBQSxVQUFBLENBQUEsT0FBQTtNQUNBLElBQUEsWUFBQSxLQUFBLFlBQUEsSUFBQSxNQUFBO01BQ0EsSUFBQSxXQUFBO09BQ0EsUUFBQTs7OztJQUlBLE9BQUE7O0dBRUEsU0FBQSxTQUFBLE1BQUE7SUFDQSxLQUFBLFFBQUEsUUFBQSxLQUFBOztHQUVBLFlBQUEsU0FBQSxJQUFBO0lBQ0EsS0FBQSxjQUFBLElBQUEsS0FBQSxRQUFBO0lBQ0EsT0FBQSxZQUFBLE9BQUEsVUFBQTs7R0FFQSxZQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsUUFBQSxLQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsUUFBQTs7SUFFQSxPQUFBLFFBQUE7O0dBRUEsYUFBQSxTQUFBLElBQUE7SUFDQSxJQUFBLEtBQUEsUUFBQSxXQUFBLFFBQUE7S0FDQSxPQUFBLEtBQUEsWUFBQSxJQUFBLEtBQUEsUUFBQTtXQUNBO0tBQ0EsT0FBQSxLQUFBLFFBQUEsV0FBQSxZQUFBLE9BQUEsZ0JBQUEsSUFBQTs7O0dBR0EsZ0JBQUEsU0FBQSxJQUFBO0lBQ0EsS0FBQSxjQUFBLElBQUEsS0FBQSxRQUFBO0lBQ0EsT0FBQSxZQUFBLE9BQUEsZUFBQTs7R0FFQSxZQUFBLFNBQUEsTUFBQSxRQUFBLE1BQUE7SUFDQSxJQUFBLEtBQUEsU0FBQSxHQUFBO0tBQ0EsSUFBQSxDQUFBLEtBQUEsT0FBQSxPQUFBO01BQ0EsS0FBQSxPQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsUUFBQTtZQUNBO01BQ0EsS0FBQSxRQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsT0FBQTs7S0FFQSxPQUFBLEtBQUEsUUFBQSxRQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsT0FBQTs7SUFFQSxLQUFBLFFBQUEsUUFBQSxRQUFBLEtBQUEsS0FBQSxPQUFBO0lBQ0EsT0FBQSxLQUFBLE9BQUE7SUFDQSxPQUFBLEtBQUEsUUFBQTs7R0FFQSxhQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsQ0FBQSxLQUFBLE9BQUEsT0FBQSxPQUFBLEtBQUEsUUFBQTtJQUNBLEtBQUEsUUFBQSxRQUFBLFFBQUEsS0FBQSxLQUFBLE9BQUE7SUFDQSxPQUFBLEtBQUEsT0FBQTtJQUNBLE9BQUEsS0FBQSxRQUFBOzs7Ozs7OztBQ3RNQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsZ0JBQUEsUUFBQSxvQ0FBQSxTQUFBLGFBQUE7O0VBRUEsT0FBQTtHQUNBLFdBQUE7R0FDQSxZQUFBO0dBQ0EsV0FBQTtHQUNBLFdBQUEsV0FBQTtJQUNBLE9BQUEsS0FBQSxZQUFBLFlBQUEsT0FBQSxrQkFBQTs7R0FFQSxTQUFBLFdBQUE7SUFDQSxJQUFBLENBQUEsS0FBQSxVQUFBLFFBQUE7S0FDQSxLQUFBOztJQUVBLE9BQUEsS0FBQTs7R0FFQSxlQUFBLFNBQUEsU0FBQSxXQUFBO0lBQ0EsSUFBQSxRQUFBO0lBQ0EsSUFBQSxLQUFBLFdBQUEsVUFBQSxhQUFBLEtBQUEsV0FBQTtLQUNBLFFBQUEsS0FBQTtXQUNBO0tBQ0EsS0FBQSxZQUFBO0tBQ0EsT0FBQSxZQUFBLE9BQUEsY0FBQTtNQUNBLFdBQUE7UUFDQSxLQUFBLFNBQUEsWUFBQTtNQUNBLE1BQUEsYUFBQTtNQUNBLFFBQUE7Ozs7Ozs7Ozs7QUM1QkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGdCQUFBLFFBQUEsZUFBQTtDQUNBLFlBQUEsVUFBQSxDQUFBLGVBQUE7O0NBRUEsU0FBQSxZQUFBLGFBQUEsUUFBQTtFQUNBLE9BQUE7R0FDQSxRQUFBO0dBQ0EsUUFBQTtHQUNBLE1BQUE7R0FDQSxLQUFBO0dBQ0EsUUFBQTtHQUNBLFFBQUE7OztFQUdBLFNBQUEsT0FBQSxPQUFBLFFBQUE7R0FDQSxJQUFBLE9BQUEsWUFBQSxJQUFBLE9BQUEsUUFBQTtHQUNBLEtBQUEsS0FBQSxXQUFBLElBQUEsU0FBQSxNQUFBO0lBQ0EsT0FBQSxNQUFBLEtBQUEsWUFBQTs7R0FFQSxPQUFBOzs7RUFHQSxTQUFBLE9BQUEsT0FBQSxJQUFBLE9BQUE7R0FDQSxPQUFBLFlBQUEsSUFBQSxPQUFBLElBQUEsSUFBQTs7O0VBR0EsU0FBQSxLQUFBLE9BQUEsTUFBQTtHQUNBLElBQUEsT0FBQSxZQUFBLElBQUEsT0FBQSxLQUFBO0dBQ0EsS0FBQSxLQUFBLFdBQUEsSUFBQSxTQUFBLE1BQUE7SUFDQSxPQUFBLE1BQUEsS0FBQSxLQUFBLE9BQUE7O0dBRUEsT0FBQTs7O0VBR0EsU0FBQSxJQUFBLE9BQUEsTUFBQTtHQUNBLE9BQUEsWUFBQSxJQUFBLE9BQUEsSUFBQTs7O0VBR0EsU0FBQSxPQUFBLE9BQUEsSUFBQSxNQUFBO0dBQ0EsT0FBQSxZQUFBLElBQUEsT0FBQSxJQUFBLElBQUE7OztFQUdBLFNBQUEsT0FBQSxPQUFBLElBQUE7R0FDQSxPQUFBLFlBQUEsSUFBQSxPQUFBLElBQUE7Ozs7OztBQzdDQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsZ0JBQUEsUUFBQSwrQkFBQSxTQUFBLFVBQUE7O0VBRUEsT0FBQTtHQUNBLGNBQUEsU0FBQSxVQUFBLE9BQUE7O0lBRUEsSUFBQSxVQUFBO0tBQ0EsYUFBQSxxQkFBQSxXQUFBLE1BQUEsV0FBQTs7O0lBR0EsSUFBQSxPQUFBO0tBQ0EsUUFBQSxRQUFBLE9BQUE7OztJQUdBLE9BQUEsVUFBQSxLQUFBOzs7R0FHQSxNQUFBLFVBQUE7SUFDQSxPQUFBLFVBQUE7OztHQUdBLE9BQUEsU0FBQSxPQUFBLFFBQUE7SUFDQSxVQUFBO0tBQ0EsVUFBQTtPQUNBLE1BQUE7T0FDQSxRQUFBO09BQ0EsR0FBQTs7OztHQUlBLFNBQUEsU0FBQSxPQUFBLFNBQUE7SUFDQSxPQUFBLFVBQUE7S0FDQSxVQUFBO09BQ0EsTUFBQTtPQUNBLFFBQUE7T0FDQSxHQUFBO09BQ0EsT0FBQTs7Ozs7O0FDdENBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLHdFQUFBLFNBQUEsYUFBQSxlQUFBLGFBQUE7O1FBRUEsSUFBQSxLQUFBOztRQUVBLFNBQUEsWUFBQSxNQUFBO09BQ0EsR0FBQSxtQkFBQTtPQUNBLElBQUEsR0FBQSxLQUFBLFFBQUE7UUFDQSxHQUFBLE9BQUEsS0FBQSxTQUFBLFNBQUE7U0FDQSxRQUFBLFFBQUEsU0FBQSxTQUFBLE9BQUE7VUFDQSxJQUFBLFFBQUE7VUFDQSxRQUFBLFFBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxRQUFBLFNBQUEsT0FBQTtXQUNBLElBQUEsVUFBQSxLQUFBLE1BQUEsTUFBQTtXQUNBLFFBQUEsUUFBQSxTQUFBLFNBQUEsUUFBQTtZQUNBLElBQUEsT0FBQSxVQUFBLE9BQUE7YUFDQTs7OztVQUlBLElBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBLE9BQUEsU0FBQSxHQUFBO1dBQ0EsR0FBQSxpQkFBQSxLQUFBOzs7U0FHQSxJQUFBLEdBQUEsaUJBQUEsUUFBQTtVQUNBLEdBQUEsR0FBQSxLQUFBLFdBQUE7V0FDQSxHQUFBLEtBQUEsT0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxLQUFBOztVQUVBLGNBQUEsYUFBQSxjQUFBOzs7O1VBSUEsT0FBQTs7O01BR0EsU0FBQSxjQUFBO09BQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxTQUFBLEtBQUEsS0FBQTtRQUNBLFFBQUEsUUFBQSxJQUFBLEtBQUEsSUFBQSxTQUFBLE1BQUEsR0FBQTtTQUNBLElBQUEsTUFBQSxTQUFBLE9BQUEsR0FBQTtVQUNBLEtBQUEsS0FBQSxXQUFBLGlCQUFBLFNBQUEsT0FBQSxLQUFBLEtBQUEsV0FBQSxjQUFBLFFBQUEsU0FBQSxDQUFBLEdBQUE7V0FDQSxHQUFBLEtBQUEsS0FBQSxLQUFBLEdBQUEsS0FBQTtXQUNBLElBQUEsT0FBQSxPQUFBLEdBQUE7V0FDQSxHQUFBLE9BQUEsT0FBQSxHQUFBOzs7O1FBSUEsSUFBQSxDQUFBLElBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxZQUFBO1NBQ0EsSUFBQSxRQUFBO1VBQ0EsTUFBQTtVQUNBLFNBQUE7VUFDQSxPQUFBLElBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQTtVQUNBLFFBQUEsR0FBQSxLQUFBO1VBQ0EsS0FBQTs7U0FFQSxJQUFBLGFBQUE7U0FDQSxRQUFBLFFBQUEsSUFBQSxRQUFBLFNBQUEsT0FBQSxLQUFBO1VBQ0EsSUFBQSxNQUFBLFFBQUEsR0FBQTtXQUNBLGFBQUE7OztTQUdBLElBQUEsQ0FBQSxZQUFBO1VBQ0EsSUFBQSxPQUFBLEtBQUE7VUFDQSxHQUFBLFdBQUEsS0FBQTs7Ozs7O01BTUEsU0FBQSxXQUFBO09BQ0EsSUFBQSxDQUFBLEdBQUEsS0FBQSxXQUFBO1FBQ0EsT0FBQSxNQUFBLDBDQUFBO1FBQ0EsT0FBQTs7T0FFQSxJQUFBLENBQUEsR0FBQSxLQUFBLGVBQUE7UUFDQSxPQUFBLE1BQUEsOENBQUE7UUFDQSxPQUFBOztPQUVBLElBQUEsR0FBQSxLQUFBLGlCQUFBLEdBQUEsS0FBQSxXQUFBO1FBQ0EsT0FBQSxNQUFBLG1EQUFBO1FBQ0EsT0FBQTs7O09BR0EsR0FBQSxXQUFBO09BQ0EsSUFBQSxVQUFBO09BQ0EsSUFBQSxXQUFBO09BQ0EsSUFBQSxVQUFBO09BQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxTQUFBLE1BQUEsS0FBQTtRQUNBLElBQUEsS0FBQSxLQUFBLEdBQUEsR0FBQSxLQUFBLFlBQUE7U0FDQSxZQUFBLEtBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxXQUFBLFVBQUEsSUFBQSxJQUFBOztRQUVBLFFBQUEsS0FBQSxLQUFBLEdBQUEsR0FBQSxLQUFBO1NBQ0EsS0FBQTtVQUNBLEtBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxpQkFBQTtVQUNBO1NBQ0EsS0FBQTtVQUNBLEtBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxpQkFBQTtVQUNBO1NBQ0EsS0FBQTtVQUNBLEtBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxpQkFBQTtVQUNBO1NBQ0EsS0FBQTtVQUNBLEtBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxpQkFBQTtVQUNBO1NBQ0E7VUFDQTs7UUFFQSxRQUFBLEtBQUE7U0FDQSxLQUFBLEtBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQTtTQUNBLE1BQUEsS0FBQSxLQUFBLEdBQUEsR0FBQSxLQUFBOzs7T0FHQSxJQUFBLFVBQUEsYUFBQSxRQUFBLFNBQUEsS0FBQSxlQUFBO09BQ0EsYUFBQTtPQUNBLFlBQUEsS0FBQSx3QkFBQTtRQUNBLE1BQUE7UUFDQSxLQUFBO1VBQ0EsS0FBQSxTQUFBLFVBQUE7UUFDQSxRQUFBLFFBQUEsVUFBQSxTQUFBLFNBQUEsS0FBQTtTQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBLEdBQUE7VUFDQSxJQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsR0FBQSxHQUFBLEtBQUEsZ0JBQUE7V0FDQSxJQUFBLFFBQUEsS0FBQSxTQUFBLEdBQUE7WUFDQSxJQUFBLFdBQUE7YUFDQSxPQUFBO2FBQ0EsU0FBQSxRQUFBOztZQUVBLGFBQUEsWUFBQTtrQkFDQTtZQUNBLElBQUEsT0FBQSxRQUFBLEtBQUEsTUFBQSxhQUFBO2FBQ0EsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxhQUFBLFFBQUEsS0FBQSxHQUFBO2FBQ0EsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEdBQUEsS0FBQSxpQkFBQSxRQUFBLEtBQUEsR0FBQTthQUNBLElBQUEsS0FBQSxPQUFBLFFBQUE7Y0FDQSxRQUFBLFFBQUEsS0FBQSxRQUFBLFNBQUEsT0FBQSxHQUFBO2VBQ0EsSUFBQSxNQUFBLFFBQUEsS0FBQSxNQUFBLFFBQUEsR0FBQTtnQkFDQSxHQUFBLFdBQUEsT0FBQSxHQUFBO2dCQUNBLEtBQUEsT0FBQSxPQUFBLEdBQUE7c0JBQ0EsSUFBQSxNQUFBLFFBQUEsR0FBQTtnQkFDQSxJQUFBLE1BQUEsVUFBQSxHQUFBLEtBQUEsV0FBQTtpQkFDQSxHQUFBLE9BQUEsT0FBQSxHQUFBO2lCQUNBLEtBQUEsT0FBQSxPQUFBLEdBQUE7Ozs7OzttQkFNQTs7YUFFQSxJQUFBLFFBQUE7Y0FDQSxNQUFBO2NBQ0EsU0FBQTtjQUNBLFFBQUEsR0FBQSxLQUFBOzthQUVBLElBQUEsYUFBQTthQUNBLFFBQUEsUUFBQSxHQUFBLEtBQUEsR0FBQSxRQUFBLFNBQUEsT0FBQSxHQUFBO2NBQ0EsSUFBQSxNQUFBLFFBQUEsR0FBQTtlQUNBLGFBQUE7OzthQUdBLElBQUEsQ0FBQSxZQUFBO2NBQ0EsYUFBQSxZQUFBO2NBQ0EsS0FBQSxPQUFBLEtBQUE7Ozs7Ozs7UUFPQSxHQUFBLGNBQUE7UUFDQSxJQUFBLGFBQUEsY0FBQSxRQUFBO1NBQ0EsY0FBQSxhQUFBOztVQUVBLFNBQUEsVUFBQTtRQUNBLE9BQUEsTUFBQSxzQ0FBQSxTQUFBLEtBQUE7Ozs7UUFJQSxPQUFBO1VBQ0EsYUFBQTs7Ozs7O0FDakxBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLDJDQUFBLFNBQUEsYUFBQSxRQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxVQUFBLEdBQUE7RUFDQSxHQUFBLGFBQUEsSUFBQTtFQUNBLEdBQUEsZ0JBQUEsSUFBQTtFQUNBLEdBQUE7RUFDQSxHQUFBO0VBQ0EsR0FBQTtFQUNBLEdBQUEsV0FBQTs7RUFFQSxHQUFBLGFBQUEsU0FBQSxTQUFBLE9BQUEsT0FBQTtHQUNBLElBQUEsUUFBQSxVQUFBLEdBQUEsWUFBQSxDQUFBLE9BQUE7SUFDQSxJQUFBLE9BQUEsWUFBQTtLQUNBLFFBQUEsR0FBQTtVQUNBLElBQUEsUUFBQSxVQUFBLEdBQUEsYUFBQSxDQUFBLE9BQUE7SUFDQSxJQUFBLE9BQUEsWUFBQTtLQUNBLEdBQUEsV0FBQSxLQUFBO1VBQ0E7SUFDQSxHQUFBLFdBQUEsS0FBQTtJQUNBLEdBQUEsV0FBQSxZQUFBLE9BQUEsV0FBQSxLQUFBLFNBQUEsVUFBQTtLQUNBLEdBQUEsVUFBQTtLQUNBLFFBQUEsUUFBQSxHQUFBLFlBQUEsU0FBQSxVQUFBO01BQ0EsSUFBQSxPQUFBLFlBQUE7T0FDQSxTQUFBLEdBQUE7O0tBRUEsR0FBQSxXQUFBO09BQ0E7Ozs7RUFJQSxHQUFBLFlBQUEsU0FBQSxJQUFBLFNBQUEsT0FBQSxPQUFBO0dBQ0EsSUFBQSxRQUFBLFVBQUEsR0FBQSxhQUFBLEdBQUEsU0FBQSxNQUFBLE1BQUEsQ0FBQSxPQUFBO0lBQ0EsSUFBQSxPQUFBLFlBQUE7S0FDQSxRQUFBLEdBQUE7VUFDQTtJQUNBLEdBQUEsY0FBQSxLQUFBO0lBQ0EsR0FBQSxjQUFBLFlBQUEsT0FBQSxXQUFBLElBQUEsS0FBQSxTQUFBLFVBQUE7S0FDQSxHQUFBLFdBQUE7S0FDQSxJQUFBLENBQUEsR0FBQSxTQUFBLE9BQUE7TUFDQSxHQUFBLFNBQUEsUUFBQSxJQUFBOztLQUVBLFFBQUEsUUFBQSxHQUFBLGVBQUEsU0FBQSxVQUFBO01BQ0EsSUFBQSxPQUFBLFlBQUE7T0FDQSxTQUFBLEdBQUE7O0tBRUEsR0FBQSxjQUFBO09BQ0E7Ozs7RUFJQSxHQUFBLFlBQUEsU0FBQSxNQUFBOztHQUVBLE9BQUEsR0FBQSxXQUFBOztFQUVBLEdBQUEsYUFBQSxTQUFBLElBQUEsU0FBQSxTQUFBLGFBQUE7R0FDQSxJQUFBLFFBQUEsVUFBQSxHQUFBLGFBQUEsR0FBQSxTQUFBLE1BQUEsSUFBQTtJQUNBLEdBQUEsVUFBQSxHQUFBLFNBQUEsTUFBQSxVQUFBOztJQUVBLElBQUEsQ0FBQSxhQUFBO0tBQ0EsSUFBQSxHQUFBLFFBQUEsUUFBQSxhQUFBO01BQ0EsR0FBQSxZQUFBLEdBQUE7WUFDQTtNQUNBLEdBQUEsWUFBQSxHQUFBLGtCQUFBLEdBQUEsUUFBQTs7OztJQUlBLElBQUEsT0FBQSxZQUFBO0tBQ0EsUUFBQSxHQUFBLFNBQUEsR0FBQTtVQUNBO0lBQ0EsR0FBQSxVQUFBLElBQUEsU0FBQSxNQUFBO0tBQ0EsR0FBQSxVQUFBLEdBQUEsU0FBQSxNQUFBLFVBQUE7S0FDQSxJQUFBLENBQUE7TUFDQSxHQUFBLFlBQUEsR0FBQSxrQkFBQSxHQUFBLFFBQUE7S0FDQSxJQUFBLE9BQUEsWUFBQTtNQUNBLFFBQUEsR0FBQSxTQUFBLEdBQUE7Ozs7RUFJQSxHQUFBLGVBQUEsU0FBQSxJQUFBLFNBQUEsV0FBQSxTQUFBO0dBQ0EsSUFBQSxRQUFBLE9BQUEsYUFBQSxjQUFBLE9BQUE7O0dBRUEsR0FBQSxVQUFBLElBQUEsU0FBQSxVQUFBO0lBQ0EsR0FBQSxXQUFBLElBQUEsU0FBQSxTQUFBLElBQUEsS0FBQTtLQUNBLElBQUEsQ0FBQSxPQUFBLEdBQUEsWUFBQSxHQUFBLGNBQUE7S0FDQSxRQUFBLEdBQUEsV0FBQSxHQUFBLFNBQUEsR0FBQTtPQUNBLENBQUE7Ozs7Ozs7Ozs7O0VBV0EsR0FBQSxvQkFBQSxTQUFBLE1BQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsTUFBQSxTQUFBLE1BQUE7SUFDQSxJQUFBLEtBQUEsUUFBQSxlQUFBLENBQUEsT0FBQTtLQUNBLFFBQUE7V0FDQTtLQUNBLElBQUEsQ0FBQSxPQUFBO01BQ0EsUUFBQSxHQUFBLGtCQUFBLEtBQUE7Ozs7R0FJQSxPQUFBOztFQUVBLEdBQUEsZ0JBQUEsU0FBQSxjQUFBO0dBQ0EsSUFBQSxPQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsU0FBQSxPQUFBLFNBQUEsU0FBQSxLQUFBO0lBQ0EsSUFBQSxPQUFBLFFBQUEsZ0JBQUEsYUFBQTtLQUNBLElBQUEsUUFBQSxnQkFBQSxjQUFBO01BQ0EsT0FBQTs7O0lBR0EsUUFBQSxRQUFBLFFBQUEsVUFBQSxTQUFBLFdBQUE7S0FDQSxJQUFBLFVBQUEsZ0JBQUEsY0FBQTtNQUNBLE9BQUE7Ozs7R0FJQSxPQUFBOztFQUVBLEdBQUEsT0FBQSxTQUFBLFNBQUEsT0FBQTtHQUNBLElBQUEsR0FBQSxTQUFBLE1BQUEsS0FBQSxDQUFBLEdBQUEsU0FBQSxJQUFBO0lBQ0EsWUFBQSxLQUFBLFdBQUEsR0FBQSxVQUFBLEtBQUEsU0FBQSxVQUFBO0tBQ0EsR0FBQSxXQUFBO0tBQ0EsR0FBQSxRQUFBLEtBQUEsR0FBQTtLQUNBLE9BQUEsUUFBQTtLQUNBLElBQUEsT0FBQSxZQUFBO01BQ0EsUUFBQTtPQUNBLFNBQUEsVUFBQTtLQUNBLE9BQUEsTUFBQTtLQUNBLElBQUEsT0FBQSxVQUFBO01BQ0EsTUFBQTs7VUFFQTtJQUNBLEdBQUEsU0FBQSxPQUFBLEtBQUEsU0FBQSxVQUFBO0tBQ0EsSUFBQSxPQUFBLFlBQUE7TUFDQSxPQUFBLFFBQUE7S0FDQSxRQUFBO0tBQ0EsR0FBQSxXQUFBLFdBQUEsSUFBQSxXQUFBLElBQUE7T0FDQSxTQUFBLFVBQUE7S0FDQSxPQUFBLE1BQUE7S0FDQSxJQUFBLE9BQUEsVUFBQTtNQUNBLE1BQUE7Ozs7RUFJQSxHQUFBLGFBQUEsU0FBQSxJQUFBLFNBQUEsT0FBQTtHQUNBLFlBQUEsT0FBQSxXQUFBLElBQUEsS0FBQSxTQUFBLFVBQUE7SUFDQSxJQUFBLE9BQUEsWUFBQTtLQUNBLE9BQUEsUUFBQTtJQUNBLFFBQUE7TUFDQSxTQUFBLFVBQUE7SUFDQSxJQUFBLE9BQUEsVUFBQTtLQUNBLE1BQUE7Ozs7Ozs7O0FDaktBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLGdCQUFBLFVBQUE7UUFDQSxJQUFBLFdBQUE7VUFDQSxTQUFBO1VBQ0EsU0FBQTtVQUNBLFVBQUE7VUFDQSxhQUFBO1VBQ0EsU0FBQTtVQUNBLFFBQUE7VUFDQSxPQUFBO1VBQ0EsVUFBQTtVQUNBLE9BQUE7VUFDQSxRQUFBOzs7UUFHQSxPQUFBO1VBQ0EsWUFBQSxTQUFBLEtBQUE7WUFDQSxPQUFBLFNBQUE7O1VBRUEsUUFBQSxVQUFBO1lBQ0EsT0FBQTs7Ozs7OztBQ3RCQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsZ0JBQUEsUUFBQSwwREFBQSxTQUFBLGNBQUEsYUFBQSxRQUFBOztFQUVBLElBQUEsY0FBQTtJQUNBLE1BQUE7SUFDQSxRQUFBO0lBQ0EsWUFBQTtJQUNBLE1BQUE7S0FDQSxXQUFBO0tBQ0EsZUFBQTtLQUNBLFlBQUE7S0FDQSxjQUFBO0tBQ0EsT0FBQTs7SUFFQSxZQUFBO0lBQ0EsVUFBQTs7R0FFQSxTQUFBLGFBQUE7O0VBRUEsSUFBQSxDQUFBLGFBQUEsSUFBQSxlQUFBO0dBQ0EsY0FBQSxhQUFBLGNBQUE7SUFDQSxvQkFBQSxLQUFBLEtBQUE7SUFDQSxnQkFBQTtJQUNBLGFBQUE7O0dBRUEsY0FBQSxZQUFBLElBQUE7U0FDQTtHQUNBLGNBQUEsYUFBQSxJQUFBO0dBQ0EsVUFBQSxZQUFBLElBQUE7O0VBRUEsT0FBQTtHQUNBLE9BQUEsV0FBQTtJQUNBLE9BQUEsR0FBQTtJQUNBLElBQUEsYUFBQSxJQUFBLGVBQUE7S0FDQSxZQUFBLE9BQUE7O0lBRUEsT0FBQSxjQUFBO0tBQ0EsTUFBQTtLQUNBLFFBQUE7S0FDQSxZQUFBO0tBQ0EsTUFBQTtNQUNBLFdBQUE7TUFDQSxlQUFBO01BQ0EsWUFBQTtNQUNBLGNBQUE7O0tBRUEsVUFBQTtLQUNBLFlBQUE7OztHQUdBLFNBQUEsU0FBQSxNQUFBO0lBQ0EsT0FBQSxZQUFBLEtBQUEsS0FBQTs7R0FFQSxjQUFBLFNBQUEsTUFBQTtJQUNBLE9BQUEsWUFBQSxXQUFBLEtBQUE7O0dBRUEsYUFBQSxTQUFBLE1BQUE7SUFDQSxPQUFBLFlBQUEsU0FBQSxLQUFBOztHQUVBLGFBQUEsU0FBQSxPQUFBO0lBQ0EsT0FBQSxZQUFBLFdBQUEsS0FBQTs7R0FFQSxnQkFBQSxTQUFBLE1BQUE7SUFDQSxJQUFBLFFBQUEsWUFBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLFFBQUEsQ0FBQSxJQUFBLFlBQUEsU0FBQSxPQUFBLE9BQUEsS0FBQTs7R0FFQSxTQUFBLFNBQUEsTUFBQTtJQUNBLE9BQUEsWUFBQSxPQUFBOztHQUVBLGFBQUEsU0FBQSxLQUFBO0lBQ0EsT0FBQSxZQUFBLEtBQUEsWUFBQTs7R0FFQSxpQkFBQSxTQUFBLEtBQUE7SUFDQSxPQUFBLFlBQUEsS0FBQSxnQkFBQTs7R0FFQSxnQkFBQSxTQUFBLEtBQUE7SUFDQSxPQUFBLFlBQUEsS0FBQSxlQUFBOztHQUVBLGNBQUEsU0FBQSxLQUFBO0lBQ0EsT0FBQSxZQUFBLEtBQUEsYUFBQTs7R0FFQSxXQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsWUFBQSxTQUFBOztHQUVBLG1CQUFBLFdBQUE7O0lBRUEsWUFBQSxJQUFBLGdCQUFBOztHQUVBLGNBQUEsU0FBQSxLQUFBLE1BQUE7SUFDQSxPQUFBLFlBQUEsV0FBQSxPQUFBOztHQUVBLHdCQUFBLFNBQUEsTUFBQTtJQUNBLE9BQUEsWUFBQSxZQUFBLFdBQUEsS0FBQSxlQUFBOztHQUVBLHFCQUFBLFdBQUE7SUFDQSxPQUFBLGNBQUEsWUFBQSxJQUFBOztHQUVBLGFBQUEsV0FBQTtJQUNBLE9BQUE7O0dBRUEsU0FBQSxXQUFBO0lBQ0EsSUFBQSxPQUFBLGVBQUEsYUFBQSxPQUFBO0lBQ0EsT0FBQSxZQUFBOztHQUVBLFNBQUEsV0FBQTtJQUNBLElBQUEsT0FBQSxlQUFBLGFBQUEsT0FBQTtJQUNBLE9BQUEsWUFBQTs7R0FFQSxhQUFBLFdBQUE7SUFDQSxPQUFBLFlBQUE7O0dBRUEsYUFBQSxXQUFBO0lBQ0EsT0FBQSxZQUFBLEtBQUE7O0dBRUEsaUJBQUEsV0FBQTtJQUNBLE9BQUEsWUFBQSxLQUFBOztHQUVBLFdBQUEsV0FBQTtJQUNBLElBQUEsT0FBQSxlQUFBLGFBQUEsT0FBQTtJQUNBLE9BQUEsWUFBQTs7R0FFQSxjQUFBLFdBQUE7SUFDQSxJQUFBLE9BQUEsZUFBQSxhQUFBLE9BQUE7SUFDQSxPQUFBLFlBQUE7O0dBRUEsZUFBQSxXQUFBO0lBQ0EsT0FBQSxZQUFBLEtBQUE7O0dBRUEsYUFBQSxXQUFBO0lBQ0EsT0FBQSxZQUFBLEtBQUE7O0dBRUEsY0FBQSxTQUFBLEtBQUE7SUFDQSxPQUFBLFlBQUEsWUFBQSxXQUFBOztHQUVBLGVBQUEsV0FBQTtJQUNBLElBQUEsT0FBQSxlQUFBLGFBQUEsT0FBQTtJQUNBLE9BQUEsWUFBQTs7R0FFQSxpQkFBQSxXQUFBO0lBQ0EsT0FBQTs7R0FFQSxnQkFBQSxXQUFBO0lBQ0EsT0FBQSxZQUFBOztHQUVBLGdCQUFBLFdBQUE7SUFDQSxPQUFBLFlBQUEsV0FBQSxPQUFBLEdBQUE7O0dBRUEsYUFBQSxXQUFBO0lBQ0EsT0FBQSxZQUFBLE9BQUEsT0FBQSxHQUFBOztHQUVBLGVBQUEsV0FBQTtJQUNBLE9BQUEsWUFBQSxXQUFBOztHQUVBLG1CQUFBLFdBQUE7SUFDQSxJQUFBLGFBQUEsSUFBQSxlQUFBO0tBQ0EsWUFBQSxPQUFBOztJQUVBLE9BQUEsY0FBQTtLQUNBLE1BQUE7S0FDQSxRQUFBO0tBQ0EsWUFBQTtLQUNBLE1BQUE7TUFDQSxXQUFBO01BQ0EsZUFBQTtNQUNBLFlBQUE7O0tBRUEsVUFBQTtLQUNBLFlBQUE7OztHQUdBLGlCQUFBLFNBQUEsV0FBQSxLQUFBLFNBQUE7SUFDQSxPQUFBLFlBQUEsT0FBQSxnQkFBQSxZQUFBLFlBQUEsS0FBQSxLQUFBLFNBQUEsTUFBQTtLQUNBLFFBQUE7Ozs7Ozs7O0FDOUtBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLGtDQUFBLFNBQUEsYUFBQTs7RUFFQSxPQUFBO0dBQ0EsT0FBQTtJQUNBLE1BQUE7S0FDQSxNQUFBO0tBQ0EsV0FBQTs7SUFFQSxVQUFBO0tBQ0EsTUFBQTtLQUNBLFVBQUE7OztHQUdBLFdBQUEsU0FBQSxPQUFBO0lBQ0EsS0FBQSxNQUFBLFNBQUEsT0FBQSxZQUFBLE9BQUEsV0FBQSxRQUFBO0lBQ0EsS0FBQSxNQUFBLFNBQUEsWUFBQSxZQUFBLE9BQUEsV0FBQSxRQUFBO0lBQ0EsS0FBQSxNQUFBLEtBQUEsT0FBQSxLQUFBLE1BQUEsU0FBQSxLQUFBO0lBQ0EsS0FBQSxNQUFBLEtBQUEsWUFBQSxLQUFBLE1BQUEsU0FBQSxVQUFBO0lBQ0EsT0FBQSxLQUFBOztHQUVBLFNBQUEsV0FBQTtJQUNBLE9BQUEsS0FBQSxNQUFBLEtBQUE7O0dBRUEsY0FBQSxXQUFBO0lBQ0EsT0FBQSxLQUFBLE1BQUEsS0FBQTs7R0FFQSxnQkFBQSxXQUFBO0lBQ0EsT0FBQSxLQUFBLE1BQUEsU0FBQTs7R0FFQSxxQkFBQSxXQUFBO0lBQ0EsT0FBQSxLQUFBLE1BQUEsU0FBQTs7R0FFQSxpQkFBQSxTQUFBLE9BQUEsS0FBQSxTQUFBO0lBQ0EsWUFBQSxPQUFBLFdBQUEsT0FBQSxLQUFBLEtBQUEsU0FBQSxNQUFBO0tBQ0EsUUFBQTs7Ozs7Ozs7QUNyQ0EsQ0FBQSxZQUFBO0VBQ0E7O0VBRUEsUUFBQSxPQUFBLGdCQUFBLFFBQUEsZ0NBQUEsVUFBQSxVQUFBOztJQUVBLE9BQUE7Ozs7Ozs7S0FPQSxTQUFBLFVBQUEsU0FBQSxNQUFBOztNQUVBLElBQUEsUUFBQSxXQUFBLE9BQUE7T0FDQSxPQUFBO1FBQ0EsTUFBQTs7Ozs7TUFLQSxJQUFBLFdBQUEsUUFBQSxXQUFBO01BQ0EsSUFBQTtNQUNBLE9BQUE7T0FDQSxLQUFBLENBQUEsUUFBQSxLQUFBLE9BQUEsS0FBQSxNQUFBOzs7O09BSUEsTUFBQSxVQUFBLE9BQUEsU0FBQTs7UUFFQSxJQUFBLENBQUEsa0JBQUE7U0FDQSxtQkFBQSxTQUFBOzs7UUFHQSxpQkFBQSxPQUFBLFVBQUEsT0FBQTtTQUNBLFFBQUEsT0FBQTs7OztRQUlBLElBQUEsUUFBQSxLQUFBLE1BQUE7U0FDQSxLQUFBLEtBQUEsTUFBQSxNQUFBOzs7Ozs7Ozs7O0FDeENBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLDZCQUFBLFNBQUEsU0FBQTs7RUFFQSxJQUFBLFFBQUE7R0FDQSxXQUFBO0dBQ0EsU0FBQTs7RUFFQSxPQUFBO0dBQ0EsTUFBQSxTQUFBLFFBQUE7SUFDQSxJQUFBLENBQUEsUUFBQTtLQUNBLE9BQUE7OztJQUdBLE9BQUEsU0FBQTtLQUNBLFNBQUE7T0FDQSxRQUFBO09BQ0EsU0FBQTtPQUNBLE9BQUE7T0FDQSxVQUFBOzs7R0FHQSxPQUFBLFNBQUEsUUFBQTtJQUNBLElBQUEsQ0FBQSxRQUFBO0tBQ0EsT0FBQTs7O0lBR0EsT0FBQSxTQUFBO0tBQ0EsU0FBQTtPQUNBLFFBQUE7T0FDQSxTQUFBO09BQ0EsTUFBQTtPQUNBLE9BQUE7T0FDQSxVQUFBOzs7Ozs7QUNsQ0EsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLGdCQUFBLFFBQUEsK0JBQUEsU0FBQSxZQUFBOzs7UUFHQSxPQUFBO1VBQ0EsS0FBQTtZQUNBLE1BQUE7O1VBRUEsUUFBQSxVQUFBO1lBQ0EsT0FBQSxLQUFBLEtBQUEsT0FBQSxZQUFBLE9BQUE7O1VBRUEsV0FBQSxVQUFBOzs7VUFHQSxXQUFBLFVBQUE7Ozs7Ozs7O0FDaEJBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxnQkFBQSxRQUFBLGtEQUFBLFNBQUEsVUFBQSxhQUFBO0VBQ0EsSUFBQSxPQUFBO0dBQ0EsUUFBQTtFQUNBLEtBQUEsa0JBQUE7R0FDQSxNQUFBO0dBQ0EsS0FBQTtHQUNBLE1BQUE7R0FDQSxjQUFBO0lBQ0EsUUFBQTtJQUNBLGlCQUFBO0lBQ0EsY0FBQTs7O0VBR0EsS0FBQSxVQUFBLEtBQUE7RUFDQSxLQUFBLFlBQUE7RUFDQSxLQUFBLFNBQUE7RUFDQSxLQUFBLFVBQUE7RUFDQSxLQUFBLE1BQUE7RUFDQSxLQUFBLE9BQUE7R0FDQSxRQUFBO0dBQ0EsUUFBQTs7RUFFQSxLQUFBLE9BQUE7R0FDQSxPQUFBO0dBQ0EsTUFBQTtHQUNBLFdBQUE7R0FDQSxNQUFBO0dBQ0EsTUFBQTtHQUNBLEtBQUE7R0FDQSxRQUFBO0dBQ0EsT0FBQTs7RUFFQSxLQUFBLE1BQUE7R0FDQSxNQUFBO0dBQ0EsU0FBQTtHQUNBLFdBQUE7R0FDQSxPQUFBOztFQUVBLEtBQUEsV0FBQTtFQUNBLEtBQUEsU0FBQTtHQUNBLFlBQUE7SUFDQSxLQUFBLEtBQUE7OztFQUdBLEtBQUEsU0FBQTtHQUNBLEtBQUE7R0FDQSxLQUFBO0dBQ0EsTUFBQTs7RUFFQSxLQUFBLFlBQUE7R0FDQSxXQUFBO0lBQ0EsS0FBQTtJQUNBLEtBQUE7O0dBRUEsV0FBQTtJQUNBLEtBQUEsQ0FBQTtJQUNBLEtBQUEsQ0FBQTs7O0VBR0EsS0FBQSxXQUFBO0dBQ0EsU0FBQTtHQUNBLFNBQUE7R0FDQSxvQkFBQTs7RUFFQSxLQUFBLFNBQUE7RUFDQSxLQUFBLFNBQUEsU0FBQSxLQUFBO0dBQ0EsT0FBQSxLQUFBLFdBQUE7O0VBRUEsS0FBQSxTQUFBLFdBQUE7R0FDQSxPQUFBLEtBQUE7O0VBRUEsS0FBQSxlQUFBLFNBQUEsU0FBQTtHQUNBLElBQUEsQ0FBQTtJQUNBLEtBQUEsVUFBQSxVQUFBLEtBQUE7O0dBRUEsS0FBQSxPQUFBLFdBQUEsU0FBQTtJQUNBLE1BQUEsUUFBQTtJQUNBLEtBQUEsUUFBQTtJQUNBLE1BQUE7SUFDQSxjQUFBO0tBQ0EsUUFBQTtLQUNBLGlCQUFBO0tBQ0EsY0FBQTs7S0FFQSxhQUFBOzs7OztFQUtBLEtBQUEsaUJBQUEsU0FBQSxPQUFBO0dBQ0EsS0FBQSxXQUFBO0lBQ0EsYUFBQSxNQUFBO0lBQ0EsaUJBQUEsTUFBQTs7R0FFQSxJQUFBLE1BQUEsbUJBQUE7SUFDQSxLQUFBLFNBQUEsZ0JBQUE7VUFDQTtJQUNBLEtBQUEsU0FBQSxnQkFBQTs7R0FFQSxJQUFBLE1BQUEsU0FBQTtJQUNBLEtBQUEsU0FBQTtLQUNBLFFBQUEsQ0FBQSxRQUFBLE1BQUEsWUFBQTtLQUNBLFFBQUEsQ0FBQSxRQUFBLEtBQUE7O1VBRUE7SUFDQSxLQUFBLFNBQUE7Ozs7RUFJQSxLQUFBLGlCQUFBLFdBQUE7R0FDQSxLQUFBLE9BQUEsV0FBQSxTQUFBLEtBQUE7O0VBRUEsS0FBQSxXQUFBLFNBQUEsR0FBQTtHQUNBLE9BQUEsS0FBQSxLQUFBLFFBQUE7O0VBRUEsS0FBQSxXQUFBLFdBQUE7R0FDQSxPQUFBLEtBQUEsS0FBQTs7RUFFQSxLQUFBLFVBQUEsV0FBQTtHQUNBLE9BQUEsS0FBQSxLQUFBOztFQUVBLEtBQUEsU0FBQSxXQUFBO0dBQ0EsT0FBQSxLQUFBLEtBQUE7O0VBRUEsS0FBQSxNQUFBLFdBQUE7R0FDQSxPQUFBLEtBQUEsS0FBQTs7RUFFQSxLQUFBLE9BQUEsV0FBQTtHQUNBLE9BQUEsS0FBQSxLQUFBOztFQUVBLEtBQUEsT0FBQSxXQUFBO0dBQ0EsT0FBQSxLQUFBLEtBQUE7O0VBRUEsS0FBQSxlQUFBLFNBQUEsT0FBQTtHQUNBLEtBQUEsU0FBQSxTQUFBLGNBQUE7R0FDQSxLQUFBLE9BQUEsUUFBQTtHQUNBLEtBQUEsT0FBQSxTQUFBO0dBQ0EsS0FBQSxNQUFBLEtBQUEsT0FBQSxXQUFBO0dBQ0EsSUFBQSxXQUFBLEtBQUEsSUFBQSxxQkFBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLFNBQUEsYUFBQSxHQUFBO0dBQ0EsU0FBQSxhQUFBLE1BQUEsU0FBQTtHQUNBLFNBQUEsYUFBQSxHQUFBO0dBQ0EsS0FBQSxJQUFBLFlBQUE7R0FDQSxLQUFBLElBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLEtBQUEsVUFBQSxLQUFBLElBQUEsYUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBOzs7RUFHQSxLQUFBLGVBQUEsU0FBQSxPQUFBOztHQUVBLEtBQUEsSUFBQSxVQUFBLEdBQUEsR0FBQSxLQUFBLE9BQUEsT0FBQSxLQUFBLE9BQUE7R0FDQSxJQUFBLFdBQUEsS0FBQSxJQUFBLHFCQUFBLEdBQUEsR0FBQSxLQUFBO0dBQ0EsU0FBQSxhQUFBLEdBQUE7R0FDQSxTQUFBLGFBQUEsTUFBQSxTQUFBO0dBQ0EsU0FBQSxhQUFBLEdBQUE7R0FDQSxLQUFBLElBQUEsWUFBQTtHQUNBLEtBQUEsSUFBQSxTQUFBLEdBQUEsR0FBQSxLQUFBO0dBQ0EsS0FBQSxVQUFBLEtBQUEsSUFBQSxhQUFBLEdBQUEsR0FBQSxLQUFBLEdBQUE7OztFQUdBLEtBQUEsb0JBQUEsU0FBQSxZQUFBOztHQUVBLEtBQUEsU0FBQSxTQUFBLGNBQUE7R0FDQSxLQUFBLE9BQUEsUUFBQTtHQUNBLEtBQUEsT0FBQSxTQUFBO0dBQ0EsS0FBQSxNQUFBLEtBQUEsT0FBQSxXQUFBO0dBQ0EsSUFBQSxXQUFBLEtBQUEsSUFBQSxxQkFBQSxHQUFBLEdBQUEsS0FBQTs7R0FFQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsV0FBQSxRQUFBLEtBQUE7SUFDQSxTQUFBLGFBQUEsS0FBQSxXQUFBLFNBQUEsS0FBQSxHQUFBLFdBQUE7O0dBRUEsS0FBQSxJQUFBLFlBQUE7R0FDQSxLQUFBLElBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLEtBQUEsVUFBQSxLQUFBLElBQUEsYUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBOzs7RUFHQSxLQUFBLG9CQUFBLFNBQUEsWUFBQTtHQUNBLElBQUEsV0FBQSxLQUFBLElBQUEscUJBQUEsR0FBQSxHQUFBLEtBQUE7R0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsV0FBQSxRQUFBLEtBQUE7SUFDQSxTQUFBLGFBQUEsS0FBQSxXQUFBLFNBQUEsS0FBQSxHQUFBLFdBQUE7O0dBRUEsS0FBQSxJQUFBLFlBQUE7R0FDQSxLQUFBLElBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLEtBQUEsVUFBQSxLQUFBLElBQUEsYUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBOzs7RUFHQSxLQUFBLGVBQUEsU0FBQSxPQUFBO0lBQ0EsT0FBQSxLQUFBLEtBQUEsWUFBQTs7Ozs7RUFLQSxLQUFBLGVBQUEsU0FBQSxlQUFBO0dBQ0EsSUFBQSxPQUFBO0dBQ0EsU0FBQSxXQUFBO0lBQ0EsS0FBQSxLQUFBLE1BQUEsUUFBQSxVQUFBOzs7O0VBSUEsS0FBQSxXQUFBLFNBQUEsT0FBQTtHQUNBLE9BQUEsS0FBQSxRQUFBOztFQUVBLEtBQUEsV0FBQSxTQUFBLE9BQUE7R0FDQSxPQUFBLEtBQUEsSUFBQSxRQUFBOztFQUVBLEtBQUEsY0FBQSxXQUFBO0dBQ0EsS0FBQSxLQUFBLE1BQUEsU0FBQSxLQUFBO0dBQ0EsS0FBQSxLQUFBLE1BQUEsUUFBQSxjQUFBO0dBQ0EsS0FBQSxLQUFBLE1BQUE7O0VBRUEsS0FBQSxhQUFBLFdBQUE7R0FDQSxLQUFBLEtBQUEsTUFBQSxTQUFBLEtBQUE7R0FDQSxLQUFBLEtBQUEsTUFBQSxRQUFBLGNBQUE7R0FDQSxLQUFBLEtBQUEsTUFBQTs7RUFFQSxLQUFBLFVBQUEsU0FBQSxNQUFBLFdBQUEsT0FBQSxRQUFBO0dBQ0EsS0FBQSxJQUFBLE9BQUE7R0FDQSxLQUFBLElBQUEsWUFBQTtHQUNBLElBQUEsT0FBQSxTQUFBLGFBQUE7SUFDQSxLQUFBLEtBQUEsWUFBQTs7R0FFQSxJQUFBLENBQUEsS0FBQSxRQUFBO0lBQ0EsSUFBQSxPQUFBLEtBQUEsS0FBQSxhQUFBLFVBQUE7S0FDQSxLQUFBLGFBQUEsS0FBQSxLQUFBO1dBQ0E7S0FDQSxLQUFBLGtCQUFBLEtBQUEsS0FBQTs7VUFFQTtJQUNBLElBQUEsT0FBQSxLQUFBLEtBQUEsYUFBQSxVQUFBO0tBQ0EsS0FBQSxhQUFBLEtBQUEsS0FBQTtXQUNBO0tBQ0EsS0FBQSxrQkFBQSxLQUFBLEtBQUE7OztHQUdBLElBQUEsUUFBQTtJQUNBLEtBQUE7OztFQUdBLEtBQUEsaUJBQUEsU0FBQSxLQUFBLE1BQUE7R0FDQSxJQUFBLE9BQUEsU0FBQSxhQUFBO0lBQ0EsSUFBQSxLQUFBLFVBQUEsR0FBQSxPQUFBO0lBQ0EsSUFBQSxTQUFBO0lBQ0EsUUFBQSxRQUFBLE1BQUEsU0FBQSxLQUFBO0tBQ0EsSUFBQSxJQUFBLE9BQUEsS0FBQTtNQUNBLFNBQUE7OztVQUdBO0lBQ0EsSUFBQSxLQUFBLElBQUEsS0FBQSxVQUFBLEdBQUEsT0FBQTtJQUNBLElBQUEsU0FBQTtJQUNBLFFBQUEsUUFBQSxLQUFBLElBQUEsTUFBQSxTQUFBLEtBQUE7S0FDQSxJQUFBLElBQUEsT0FBQSxLQUFBO01BQ0EsU0FBQTs7OztHQUlBLE9BQUE7O0VBRUEsS0FBQSxrQkFBQSxTQUFBLE1BQUE7R0FDQSxJQUFBLEtBQUEsSUFBQSxLQUFBLFVBQUEsR0FBQSxPQUFBOztFQUVBLEtBQUEsaUJBQUEsU0FBQSxPQUFBLE9BQUEsT0FBQTtHQUNBLElBQUEsT0FBQTs7R0FFQSxTQUFBLFdBQUE7SUFDQSxJQUFBLE9BQUEsU0FBQSxlQUFBLFNBQUEsTUFBQTtLQUNBLEtBQUEsS0FBQSxNQUFBLFNBQUE7V0FDQTs7S0FFQSxLQUFBLEtBQUEsTUFBQSxTQUFBLEtBQUE7O0lBRUEsSUFBQSxPQUFBLFNBQUEsYUFBQTtLQUNBLEtBQUEsS0FBQSxNQUFBLFFBQUEsVUFBQTs7SUFFQSxLQUFBLEtBQUEsTUFBQTs7O0VBR0EsS0FBQSxnQkFBQSxTQUFBLEtBQUE7R0FDQSxJQUFBLE9BQUEsS0FBQSxLQUFBLE1BQUEsVUFBQSxhQUFBO0lBQ0EsUUFBQSxRQUFBLEtBQUEsS0FBQSxNQUFBLE9BQUEsS0FBQSxLQUFBLE9BQUEsU0FBQSxVQUFBLFNBQUEsU0FBQSxLQUFBO0tBQ0EsSUFBQSxLQUFBO01BQ0EsSUFBQSxPQUFBO09BQ0EsUUFBQSxXQUFBO1lBQ0E7TUFDQSxRQUFBLFdBQUE7Ozs7SUFJQSxLQUFBOzs7O0VBSUEsS0FBQSxxQkFBQSxTQUFBLEtBQUEsVUFBQSxlQUFBOztHQUVBLElBQUEsT0FBQSxLQUFBLEtBQUEsTUFBQSxPQUFBLEtBQUEsS0FBQSxPQUFBLFNBQUEsU0FBQSxRQUFBLGFBQUE7SUFDQSxRQUFBLElBQUE7O1VBRUE7SUFDQSxHQUFBLGNBQUE7S0FDQSxRQUFBLFFBQUEsS0FBQSxLQUFBLE1BQUEsT0FBQSxLQUFBLEtBQUEsT0FBQSxTQUFBLFVBQUEsU0FBQSxTQUFBLEtBQUE7T0FDQSxRQUFBLFdBQUE7Ozs7O0lBS0EsS0FBQSxLQUFBLE1BQUEsT0FBQSxLQUFBLEtBQUEsT0FBQSxTQUFBLFNBQUEsS0FBQSxXQUFBO0lBQ0EsS0FBQTs7OztFQUlBLEtBQUEsU0FBQSxXQUFBO0dBQ0EsS0FBQSxLQUFBLE1BQUE7O0VBRUEsS0FBQSxRQUFBLFNBQUEsT0FBQTtHQUNBLEtBQUEsYUFBQTtHQUNBLElBQUEsS0FBQSxLQUFBO0lBQ0EsS0FBQSxhQUFBO1VBQ0E7SUFDQSxLQUFBLGFBQUE7O0dBRUEsS0FBQTs7RUFFQSxLQUFBLGNBQUEsU0FBQSxLQUFBO0dBQ0EsWUFBQSxPQUFBLGtCQUFBLENBQUEsTUFBQSxLQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsWUFBQSxFQUFBLE9BQUEsS0FBQSxZQUFBLEdBQUEsR0FBQSxJQUFBLEtBQUEsWUFBQSxHQUFBLEdBQUE7S0FDQSxZQUFBLEVBQUEsT0FBQSxLQUFBLFlBQUEsR0FBQSxHQUFBLElBQUEsS0FBQSxZQUFBLEdBQUEsR0FBQTtLQUNBLFNBQUEsRUFBQSxhQUFBLFdBQUE7O0lBRUEsSUFBQSxNQUFBO0tBQ0EsQ0FBQSxHQUFBO0tBQ0EsQ0FBQSxLQUFBOzs7Ozs7OztJQVFBLEtBQUEsU0FBQSxVQUFBLFFBQUE7S0FDQSxTQUFBLElBQUE7S0FDQSxTQUFBOzs7O0VBSUEsS0FBQSxnQkFBQSxTQUFBLE1BQUEsTUFBQTs7SUFFQSxZQUFBLE9BQUEsa0JBQUEsTUFBQSxLQUFBLFNBQUEsTUFBQTtLQUNBLElBQUEsWUFBQSxFQUFBLE9BQUEsS0FBQSxZQUFBLEdBQUEsR0FBQSxJQUFBLEtBQUEsWUFBQSxHQUFBLEdBQUE7TUFDQSxZQUFBLEVBQUEsT0FBQSxLQUFBLFlBQUEsR0FBQSxHQUFBLElBQUEsS0FBQSxZQUFBLEdBQUEsR0FBQTtNQUNBLFNBQUEsRUFBQSxhQUFBLFdBQUE7O0tBRUEsSUFBQSxNQUFBO01BQ0EsQ0FBQSxLQUFBO01BQ0EsQ0FBQSxLQUFBOzs7Ozs7OztLQVFBLEtBQUEsU0FBQSxVQUFBLFFBQUE7TUFDQSxTQUFBLElBQUE7TUFDQSxTQUFBOzs7OztFQUtBLEtBQUEsaUJBQUEsU0FBQSxTQUFBOztHQUVBLElBQUEsUUFBQTtHQUNBLElBQUEsTUFBQSxRQUFBLFdBQUEsS0FBQTtHQUNBLElBQUEsU0FBQSxLQUFBLGVBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxJQUFBLE9BQUEsUUFBQTtHQUNBLFFBQUEsV0FBQTtHQUNBLFFBQUE7SUFDQSxLQUFBO0tBQ0EsSUFBQSxPQUFBLE9BQUEsVUFBQSxlQUFBLE9BQUEsVUFBQSxNQUFBO01BQ0EsSUFBQSxjQUFBLEdBQUEsTUFBQSxTQUFBLE9BQUEsQ0FBQSxLQUFBLElBQUEsVUFBQSxLQUFBLEtBQUEsSUFBQSxVQUFBLE1BQUEsTUFBQSxDQUFBLEdBQUE7O01BRUEsSUFBQSxXQUFBLFNBQUEsWUFBQSxXQUFBLE9BQUEsWUFBQTs7TUFFQSxJQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsWUFBQSxPQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsT0FBQSxLQUFBLFFBQUEsV0FBQSxLQUFBLE1BQUEsS0FBQSxRQUFBLFdBQUEsS0FBQTs7TUFFQSxNQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsWUFBQSxPQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUEsT0FBQSxLQUFBLFFBQUEsV0FBQSxLQUFBO01BQ0EsTUFBQSxVQUFBO09BQ0EsT0FBQTtPQUNBLE1BQUE7O01BRUEsTUFBQSxXQUFBO09BQ0EsT0FBQSxVQUFBLEtBQUEsUUFBQSxZQUFBLE9BQUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUE7T0FDQSxTQUFBO1FBQ0EsT0FBQSxVQUFBLEtBQUEsUUFBQSxZQUFBLE9BQUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUE7O1FBRUEsTUFBQTs7OztZQUlBO01BQ0EsTUFBQSxRQUFBO01BQ0EsTUFBQSxVQUFBO09BQ0EsT0FBQTtPQUNBLE1BQUE7Ozs7S0FJQTs7R0FFQSxPQUFBOztFQUVBLEtBQUEsZ0JBQUEsU0FBQSxTQUFBO0dBQ0EsSUFBQSxRQUFBO0dBQ0EsSUFBQSxNQUFBLFFBQUEsV0FBQSxLQUFBO0dBQ0EsSUFBQSxTQUFBLEtBQUEsZUFBQTs7R0FFQSxJQUFBLFFBQUE7O0dBRUEsSUFBQSxjQUFBLEdBQUEsTUFBQSxTQUFBLE9BQUEsQ0FBQSxLQUFBLElBQUEsVUFBQSxLQUFBLEtBQUEsSUFBQSxVQUFBLE1BQUEsTUFBQSxDQUFBLEdBQUE7R0FDQSxJQUFBLFdBQUEsU0FBQSxZQUFBLFdBQUEsT0FBQSxZQUFBO0dBQ0EsSUFBQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFlBQUEsT0FBQSxLQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsS0FBQSxRQUFBLFdBQUEsS0FBQSxNQUFBLEtBQUEsUUFBQSxXQUFBLEtBQUE7O0dBRUEsTUFBQSxRQUFBO0dBQ0EsSUFBQSxPQUFBLE9BQUEsVUFBQSxlQUFBLE9BQUEsVUFBQSxNQUFBO0lBQ0EsTUFBQSxRQUFBLFVBQUEsS0FBQSxRQUFBLFlBQUEsT0FBQSxLQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsS0FBQSxRQUFBLFdBQUEsS0FBQTs7O0dBR0EsTUFBQSxVQUFBO0lBQ0EsT0FBQTtJQUNBLE1BQUE7O0dBRUEsTUFBQSxXQUFBO0lBQ0EsT0FBQTtJQUNBLFNBQUE7S0FDQSxPQUFBO0tBQ0EsTUFBQTs7O0dBR0EsT0FBQTs7Ozs7OztBQ3hiQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwwRUFBQSxTQUFBLFFBQUEsaUJBQUEsbUJBQUE7O1FBRUEsSUFBQSxLQUFBO1FBQ0EsR0FBQSxVQUFBO1FBQ0EsR0FBQSxXQUFBO1FBQ0EsR0FBQSxVQUFBO1VBQ0EsTUFBQSxVQUFBO1lBQ0EsZ0JBQUEsS0FBQSxHQUFBLFNBQUEsU0FBQSxTQUFBO2NBQ0EsbUJBQUEsYUFBQSxHQUFBO2NBQ0EsT0FBQSxHQUFBLDZCQUFBLENBQUEsSUFBQSxTQUFBLElBQUEsTUFBQSxTQUFBOzs7VUFHQSxVQUFBOzs7UUFHQTs7UUFFQSxTQUFBLFVBQUE7VUFDQSxHQUFBLE9BQUEsT0FBQSxNQUFBLEVBQUE7WUFDQSxnQkFBQSxXQUFBLE9BQUEsT0FBQSxJQUFBLFNBQUEsU0FBQTtjQUNBLEdBQUEsVUFBQTtjQUNBLG1CQUFBLGFBQUEsR0FBQTs7O2VBR0E7WUFDQSxRQUFBLElBQUEsR0FBQTs7O1FBR0EsU0FBQSxXQUFBLE1BQUEsS0FBQTtPQUNBLFFBQUEsUUFBQSxNQUFBLFNBQUEsT0FBQSxJQUFBO1FBQ0EsR0FBQSxNQUFBLE1BQUEsS0FBQSxHQUFBO1NBQ0EsS0FBQSxPQUFBLEtBQUE7U0FDQSxPQUFBOztRQUVBLEdBQUEsTUFBQSxTQUFBO1NBQ0EsSUFBQSxZQUFBLFdBQUEsTUFBQSxNQUFBO1NBQ0EsR0FBQSxVQUFBO1VBQ0EsT0FBQTs7OztPQUlBLE9BQUE7Ozs7OztBQzVDQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSw4Q0FBQSxTQUFBLFFBQUEsZ0JBQUE7O1FBRUEsSUFBQSxLQUFBO1FBQ0EsR0FBQSxXQUFBO1FBQ0EsR0FBQSxZQUFBO01BQ0EsR0FBQSxVQUFBO09BQ0EsTUFBQTtPQUNBLE1BQUE7T0FDQSxXQUFBO09BQ0EsV0FBQTtPQUNBLFVBQUE7T0FDQSxhQUFBO09BQ0EsV0FBQSxTQUFBLElBQUEsTUFBQTtRQUNBLE9BQUEsR0FBQSw4QkFBQTtTQUNBLElBQUE7U0FDQSxNQUFBOzs7T0FHQSxVQUFBLFdBQUE7UUFDQSxPQUFBLEdBQUEsOEJBQUE7U0FDQSxJQUFBO1NBQ0EsTUFBQTs7O09BR0EsYUFBQSxXQUFBO1FBQ0EsUUFBQSxRQUFBLEdBQUEsV0FBQSxTQUFBLE1BQUEsS0FBQTtTQUNBLGdCQUFBLFdBQUEsS0FBQSxJQUFBLFNBQUEsTUFBQTtVQUNBLElBQUEsT0FBQSxPQUFBLE1BQUEsS0FBQSxJQUFBO1dBQ0EsT0FBQSxHQUFBOztnQkFFQSxJQUFBLE1BQUEsR0FBQSxTQUFBLFFBQUE7Z0JBQ0EsR0FBQSxTQUFBLE9BQUEsSUFBQTtnQkFDQSxHQUFBLFlBQUE7Ozs7Ozs7UUFPQTs7UUFFQSxTQUFBLFVBQUE7VUFDQSxnQkFBQSxZQUFBLFNBQUEsU0FBQTtZQUNBLEdBQUEsV0FBQTs7Ozs7OztBQzlDQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxvRkFBQSxTQUFBLFlBQUEsUUFBQSxRQUFBLGVBQUEsZUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLGNBQUEsV0FBQSxPQUFBLE9BQUEsSUFBQSxPQUFBLE9BQUEsV0FBQTs7RUFFQSxTQUFBLFlBQUEsU0FBQTtHQUNBLEdBQUEsY0FBQSxXQUFBLE9BQUEsT0FBQSxJQUFBLFNBQUEsU0FBQSxHQUFBLEdBQUE7O0lBRUEsSUFBQSxPQUFBLE9BQUEsS0FBQTtLQUNBLE9BQUEsR0FBQSwrQ0FBQTtNQUNBLFNBQUE7TUFDQSxXQUFBLEVBQUE7TUFDQSxVQUFBLEVBQUE7TUFDQSxLQUFBLE9BQUEsT0FBQTs7V0FFQTtLQUNBLE9BQUEsR0FBQSx1Q0FBQTtNQUNBLFNBQUE7TUFDQSxXQUFBLEVBQUE7TUFDQSxVQUFBLEVBQUE7Ozs7Ozs7RUFPQSxTQUFBLFdBQUE7R0FDQSxjQUFBLGFBQUEsY0FBQTs7Ozs7Ozs7QUNoQ0EsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsNk1BQUEsU0FBQSxRQUFBLFlBQUEsVUFBQSxRQUFBLGFBQUEsZ0JBQUEsV0FBQSxlQUFBLGdCQUFBLGNBQUEsZUFBQSxvQkFBQTs7RUFFQSxJQUFBLEtBQUE7O0VBRUEsR0FBQSxVQUFBO0VBQ0EsR0FBQSxZQUFBLEdBQUEsR0FBQTtFQUNBLEdBQUEsa0JBQUEsSUFBQSxHQUFBLFVBQUEsSUFBQSxHQUFBLGdCQUFBO0VBQ0EsR0FBQSxnQkFBQSxJQUFBLEdBQUEsY0FBQTtFQUNBLEdBQUEsWUFBQSxPQUFBLE9BQUE7RUFDQSxHQUFBLGdCQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsV0FBQTtFQUNBLEdBQUEsZ0JBQUE7OztFQUdBOztFQUVBLG1CQUFBLGFBQUEsU0FBQSxNQUFBO0dBQ0EsSUFBQSxDQUFBLG9CQUFBLEtBQUEsUUFBQSxLQUFBLE9BQUE7R0FDQSxJQUFBLEdBQUEsU0FBQTtJQUNBLGtCQUFBLEtBQUEsUUFBQSxJQUFBO0lBQ0E7VUFDQTtJQUNBLE9BQUEsR0FBQSwrQ0FBQTtLQUNBLFdBQUEsR0FBQSxjQUFBLFVBQUE7S0FDQSxVQUFBLEdBQUEsY0FBQSxVQUFBO0tBQ0EsS0FBQSxLQUFBLFFBQUE7OztJQUdBLGdCQUFBLEtBQUEsUUFBQTtJQUNBLGdCQUFBLEtBQUEsUUFBQTs7Ozs7RUFLQSxTQUFBLGtCQUFBLEtBQUEsWUFBQTtHQUNBLElBQUEsT0FBQSxHQUFBLGdCQUFBO0lBQ0EsT0FBQTtHQUNBLElBQUEsS0FBQTtHQUNBLElBQUEsTUFBQSxHQUFBLFlBQUEsUUFBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxLQUFBO0lBQ0EsSUFBQSxJQUFBLE9BQUEsS0FBQTtLQUNBLEtBQUE7OztHQUdBLElBQUEsT0FBQSxDQUFBLEdBQUE7SUFDQSxJQUFBLElBQUE7S0FDQSxHQUFBLGNBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxLQUFBLEdBQUE7S0FDQSxtQkFBQSxtQkFBQSxHQUFBLEtBQUE7O1VBRUEsSUFBQSxZQUFBO0lBQ0EsR0FBQSxZQUFBLE9BQUEsS0FBQTtJQUNBLEdBQUEsY0FBQSxPQUFBLEdBQUEsY0FBQSxRQUFBLEtBQUE7SUFDQSxtQkFBQSxtQkFBQSxLQUFBOzs7OztFQUtBLFNBQUEsaUJBQUE7R0FDQSxPQUFBLEdBQUEsdURBQUE7SUFDQSxXQUFBLEdBQUEsWUFBQSxLQUFBOztHQUVBLG1CQUFBLGNBQUEsT0FBQSxPQUFBLEtBQUEsR0FBQTs7O0VBR0EsU0FBQSxXQUFBLFVBQUE7R0FDQSxJQUFBLFVBQUE7SUFDQSxHQUFBLFVBQUE7SUFDQSxHQUFBLGNBQUEsS0FBQSxHQUFBO0lBQ0EsbUJBQUE7SUFDQSxPQUFBLEdBQUEsdURBQUE7S0FDQSxXQUFBLEdBQUEsWUFBQSxLQUFBOztVQUVBO0lBQ0EsR0FBQSxVQUFBO0lBQ0EsbUJBQUE7SUFDQSxPQUFBLEdBQUE7SUFDQSxtQkFBQSxtQkFBQSxPQUFBLE9BQUEsS0FBQTs7O0lBR0EsR0FBQSxjQUFBO0lBQ0EsR0FBQSxnQkFBQTs7Ozs7RUFLQSxTQUFBLGFBQUEsVUFBQTtHQUNBLEdBQUEsY0FBQSxhQUFBLE9BQUEsT0FBQSxJQUFBLE9BQUEsT0FBQSxTQUFBLE9BQUEsT0FBQSxXQUFBLFNBQUEsV0FBQSxTQUFBLFVBQUE7SUFDQSxHQUFBLG9CQUFBO0lBQ0EsZ0JBQUEsV0FBQTs7Ozs7RUFLQSxTQUFBLGdCQUFBO0dBQ0EsSUFBQSxHQUFBLGNBQUEsUUFBQSxRQUFBLGFBQUE7SUFDQSxJQUFBLE1BQUE7SUFDQSxRQUFBLFFBQUEsR0FBQSxjQUFBLFNBQUEsT0FBQSxTQUFBLE1BQUEsS0FBQTtLQUNBLElBQUEsS0FBQSxNQUFBLEdBQUEsa0JBQUEsSUFBQTtNQUNBLE1BQUE7OztJQUdBLEdBQUEsT0FBQSxHQUFBLGdCQUFBLE9BQUEsWUFBQTtLQUNBLE9BQUEsR0FBQSwrQ0FBQTtNQUNBLFNBQUEsTUFBQTtNQUNBLFdBQUEsR0FBQSxrQkFBQTtNQUNBLFVBQUEsR0FBQSxrQkFBQTtNQUNBLElBQUEsR0FBQSxnQkFBQTs7O1FBR0E7S0FDQSxPQUFBLEdBQUEsdUNBQUE7TUFDQSxTQUFBLE1BQUE7TUFDQSxXQUFBLEdBQUEsa0JBQUE7TUFDQSxVQUFBLEdBQUEsa0JBQUE7OztVQUdBO0lBQ0EsSUFBQSxHQUFBLGNBQUEsUUFBQSxNQUFBLEdBQUEsa0JBQUEsT0FBQSxJQUFBO0tBQ0EsSUFBQSxNQUFBO0tBQ0EsUUFBQSxRQUFBLEdBQUEsY0FBQSxTQUFBLE9BQUEsU0FBQSxNQUFBLEtBQUE7TUFDQSxJQUFBLEtBQUEsTUFBQSxHQUFBLGtCQUFBLE9BQUEsSUFBQTtPQUNBLE1BQUE7OztLQUdBLEdBQUEsT0FBQSxHQUFBLGdCQUFBLE9BQUEsWUFBQTtNQUNBLE9BQUEsR0FBQSwrQ0FBQTtPQUNBLFNBQUEsTUFBQTtPQUNBLFdBQUEsR0FBQSxrQkFBQTtPQUNBLFVBQUEsR0FBQSxrQkFBQTtPQUNBLElBQUEsR0FBQSxnQkFBQTs7O1NBR0E7TUFDQSxPQUFBLEdBQUEsdUNBQUE7T0FDQSxTQUFBLE1BQUE7T0FDQSxXQUFBLEdBQUEsa0JBQUE7T0FDQSxVQUFBLEdBQUEsa0JBQUE7OztXQUdBO0tBQ0EsR0FBQSxPQUFBLEdBQUEsZ0JBQUEsT0FBQSxZQUFBO01BQ0EsT0FBQSxHQUFBLCtDQUFBO09BQ0EsV0FBQSxHQUFBLGtCQUFBO09BQ0EsVUFBQSxHQUFBLGtCQUFBO09BQ0EsSUFBQSxHQUFBLGdCQUFBOzs7U0FHQTtNQUNBLE9BQUEsR0FBQSx1Q0FBQTtPQUNBLFdBQUEsR0FBQSxrQkFBQTtPQUNBLFVBQUEsR0FBQSxrQkFBQTs7O0tBR0E7Ozs7O0VBS0EsU0FBQSxjQUFBLFFBQUE7R0FDQSxPQUFBLEdBQUEsK0NBQUE7SUFDQSxLQUFBLE9BQUE7O0dBRUEsbUJBQUEsbUJBQUEsT0FBQSxLQUFBLE1BQUE7R0FDQSxnQkFBQSxPQUFBO0dBQ0EsZ0JBQUEsT0FBQTs7O0VBR0EsU0FBQSxpQkFBQSxNQUFBO0dBQ0EsSUFBQSxNQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsV0FBQSxTQUFBLEtBQUEsS0FBQTtJQUNBLElBQUEsT0FBQSxNQUFBO0tBQ0EsTUFBQTs7O0dBR0EsZ0JBQUE7R0FDQSxPQUFBOzs7RUFHQSxTQUFBLG9CQUFBLEtBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsS0FBQSxPQUFBLEtBQUE7S0FDQSxRQUFBOzs7R0FHQSxPQUFBOzs7RUFHQSxTQUFBLGdCQUFBLEtBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsS0FBQSxPQUFBLEtBQUE7S0FDQSxHQUFBLGtCQUFBOzs7R0FHQSxPQUFBOzs7RUFHQSxTQUFBLGdCQUFBLEtBQUE7R0FDQSxJQUFBLENBQUEsT0FBQSxPQUFBLFdBQUE7SUFDQSxtQkFBQSxZQUFBOzs7O0dBSUEsYUFBQSxnQkFBQSxHQUFBLGNBQUEsVUFBQSxjQUFBLEtBQUEsU0FBQSxNQUFBO0lBQ0EsR0FBQSxVQUFBO0lBQ0EsbUJBQUEsbUJBQUEsS0FBQSxNQUFBO0lBQ0EsV0FBQSxjQUFBOzs7OztFQUtBLFNBQUEsZ0JBQUEsTUFBQSxNQUFBO0dBQ0EsZUFBQSx1QkFBQSxLQUFBLGNBQUEsU0FBQSxXQUFBO0lBQ0EsR0FBQSxPQUFBLFVBQUE7SUFDQSxHQUFBLFlBQUE7SUFDQSxHQUFBLGNBQUEsT0FBQTtJQUNBLEdBQUEsZ0JBQUE7S0FDQSxPQUFBLEdBQUEsY0FBQSxVQUFBLE1BQUEsY0FBQTtLQUNBLE9BQUE7S0FDQSxNQUFBLEdBQUEsVUFBQTtLQUNBLGVBQUE7S0FDQSxPQUFBO0tBQ0EsUUFBQTtLQUNBLFNBQUE7O0lBRUEsbUJBQUEsYUFBQSxLQUFBLE1BQUE7SUFDQSxtQkFBQSxlQUFBLEtBQUE7SUFDQSxtQkFBQSxRQUFBLFVBQUEsTUFBQSxXQUFBLEtBQUEsTUFBQSxZQUFBOztJQUVBLElBQUEsT0FBQSxRQUFBLFlBQUE7S0FDQTs7TUFFQTtJQUNBLE1BQUE7Ozs7O0VBS0EsU0FBQSxXQUFBO0dBQ0EsY0FBQSxhQUFBLFVBQUE7OztFQUdBLFNBQUEsZUFBQTtHQUNBLFNBQUEsV0FBQTs7SUFFQSxHQUFBLGtCQUFBO0lBQ0EsYUFBQSxXQUFBO0tBQ0EsSUFBQSxPQUFBLE9BQUEsS0FBQTtNQUNBLGdCQUFBLE9BQUEsT0FBQTtNQUNBLGdCQUFBLE9BQUEsT0FBQTs7TUFFQSxJQUFBLE9BQUEsT0FBQSxXQUFBO09BQ0EsSUFBQSxZQUFBLE9BQUEsT0FBQSxVQUFBLE1BQUE7T0FDQSxRQUFBLFFBQUEsV0FBQSxTQUFBLFNBQUE7UUFDQSxrQkFBQTs7T0FFQSxHQUFBLFlBQUE7T0FDQSxtQkFBQSxjQUFBLE9BQUEsT0FBQSxLQUFBLEdBQUE7OztTQUdBO01BQ0EsR0FBQSxrQkFBQTs7S0FFQSxJQUFBLE9BQUEsR0FBQSxjQUFBLFdBQUEsYUFBQTtNQUNBLEdBQUEsR0FBQSxjQUFBLFFBQUEsWUFBQTtRQUNBOzs7Ozs7Ozs7RUFTQSxTQUFBLFdBQUE7R0FDQTs7O0VBR0EsT0FBQSxPQUFBLHdCQUFBLFNBQUEsR0FBQSxFQUFBO0dBQ0EsR0FBQSxNQUFBLEtBQUEsT0FBQSxFQUFBLE1BQUEsYUFBQSxPQUFBO0dBQ0EsR0FBQSxPQUFBLEtBQUEsWUFBQTtJQUNBLEdBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxPQUFBOztHQUVBLEdBQUE7Ozs7OztBQ2pTQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwwREFBQSxTQUFBLGFBQUEsUUFBQSxRQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsVUFBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsTUFBQTs7RUFFQSxHQUFBLFdBQUE7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsSUFBQSxPQUFBO0lBQ0EsU0FBQSxHQUFBO0lBQ0EsUUFBQSxHQUFBOztHQUVBLFlBQUEsSUFBQSxxQkFBQSxLQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUE7SUFDQSxPQUFBLEdBQUE7Ozs7Ozs7O0FDbEJBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLGlKQUFBLFNBQUEsVUFBQSxRQUFBLFFBQUEsWUFBQSxvQkFBQSxVQUFBLFdBQUEsU0FBQSxlQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsV0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsZ0JBQUE7R0FDQTtHQUNBO0dBQ0E7R0FDQTtHQUNBO0dBQ0E7R0FDQTtHQUNBO0dBQ0E7O0VBRUEsR0FBQSxhQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsY0FBQSxHQUFBLE1BQUEsU0FBQSxPQUFBLENBQUEsR0FBQSxJQUFBLE1BQUEsQ0FBQSxHQUFBO0VBQ0EsR0FBQSxTQUFBLENBQUEsV0FBQSxXQUFBLFdBQUEsV0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsV0FBQTtFQUNBLEdBQUEsc0JBQUE7RUFDQSxHQUFBLGdCQUFBO0dBQ0EsT0FBQTtHQUNBLE9BQUE7R0FDQSxNQUFBO0dBQ0EsZUFBQTtHQUNBLE1BQUE7R0FDQSxPQUFBOzs7RUFHQTs7RUFFQSxTQUFBLFdBQUE7O0dBRUEsV0FBQSxTQUFBO0dBQ0EsUUFBQSxVQUFBLEtBQUEsU0FBQSxVQUFBOztJQUVBLEdBQUEsWUFBQTtJQUNBLG1CQUFBO0lBQ0EsbUJBQUEsUUFBQSxHQUFBLFdBQUEsR0FBQSxRQUFBO0lBQ0EsbUJBQUEsU0FBQTtJQUNBLG1CQUFBLGFBQUE7SUFDQSxtQkFBQTs7O0lBR0EsUUFBQSxRQUFBLEdBQUEsU0FBQSxTQUFBLFNBQUEsUUFBQTtLQUNBLElBQUEsSUFBQSxHQUFBLFVBQUEsUUFBQSxPQUFBO0tBQ0EsSUFBQSxLQUFBLENBQUEsR0FBQTtNQUNBLEdBQUEsVUFBQSxLQUFBLE9BQUE7TUFDQSxHQUFBLFVBQUEsS0FBQTtNQUNBLG1CQUFBLG1CQUFBLE9BQUEsS0FBQTs7Ozs7SUFLQSxtQkFBQSxlQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQW9CQSxTQUFBLGFBQUEsS0FBQSxHQUFBOztHQUVBLElBQUEsVUFBQSxtQkFBQSxlQUFBLElBQUEsUUFBQSxXQUFBO0dBQ0EsSUFBQSxPQUFBLFFBQUEsZ0JBQUEsYUFBQTtJQUNBLE9BQUEsR0FBQSw2QkFBQTtLQUNBLEtBQUEsUUFBQTs7Ozs7RUFLQSxTQUFBLFdBQUE7R0FDQSxjQUFBLGFBQUEsZ0JBQUE7OztFQUdBLFNBQUEsYUFBQTtHQUNBLGNBQUEsYUFBQTs7O0VBR0EsU0FBQSxjQUFBLFNBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxJQUFBLE1BQUEsUUFBQSxXQUFBLG1CQUFBLEtBQUE7R0FDQSxJQUFBLFNBQUEsbUJBQUEsZUFBQTtHQUNBLElBQUEsUUFBQTtHQUNBLElBQUEsV0FBQSxTQUFBLEdBQUEsWUFBQSxXQUFBLE9BQUEsWUFBQTs7R0FFQSxJQUFBLFFBQUEsVUFBQSxtQkFBQSxRQUFBLFlBQUEsT0FBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBO0dBQ0EsTUFBQSxRQUFBO0dBQ0EsTUFBQSxVQUFBO0lBQ0EsT0FBQTtJQUNBLE1BQUE7O0dBRUEsTUFBQSxXQUFBO0lBQ0EsT0FBQTtJQUNBLFNBQUE7S0FDQSxPQUFBO0tBQ0EsTUFBQTs7O0dBR0EsT0FBQTs7O0VBR0EsU0FBQSxjQUFBO0dBQ0EsSUFBQSxHQUFBLFlBQUEsTUFBQSxPQUFBO0dBQ0EsSUFBQSxHQUFBLFNBQUEsV0FBQSxHQUFBLFNBQUE7SUFDQSxPQUFBO0dBQ0EsSUFBQSxHQUFBLFNBQUEsVUFBQSxHQUFBLFNBQUE7SUFDQSxPQUFBOztHQUVBLE9BQUE7OztFQUdBLFNBQUEsc0JBQUE7R0FDQSxJQUFBLEdBQUEsZUFBQSxPQUFBO0dBQ0EsT0FBQTs7Ozs7O0FDdklBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLG9DQUFBLFNBQUEsWUFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxXQUFBLGdCQUFBO0dBQ0E7R0FDQTtHQUNBO0dBQ0E7R0FDQTtHQUNBO0dBQ0E7R0FDQTtHQUNBOztFQUVBLEdBQUEsYUFBQTs7RUFFQSxTQUFBLFdBQUEsTUFBQTtHQUNBLFFBQUEsSUFBQSxNQUFBLFdBQUE7R0FDQSxJQUFBLElBQUEsV0FBQSxjQUFBLFFBQUE7R0FDQSxJQUFBLElBQUEsQ0FBQSxHQUFBO0lBQ0EsV0FBQSxjQUFBLE9BQUEsR0FBQTtVQUNBO0lBQ0EsV0FBQSxjQUFBLEtBQUE7OztHQUdBLElBQUEsV0FBQSxjQUFBLFVBQUEsR0FBQTtJQUNBLFdBQUEsZ0JBQUE7S0FDQTtLQUNBO0tBQ0E7S0FDQTtLQUNBO0tBQ0E7S0FDQTtLQUNBO0tBQ0E7OztHQUdBOzs7O0FDMUNBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHNJQUFBLFNBQUEsVUFBQSxRQUFBLFlBQUEsU0FBQSxRQUFBLG9CQUFBLGFBQUEsZUFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLGFBQUE7RUFDQSxHQUFBLGNBQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxDQUFBLEdBQUEsSUFBQSxNQUFBLENBQUEsR0FBQTtFQUNBLEdBQUEsU0FBQSxDQUFBLFdBQUEsV0FBQSxXQUFBLFdBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLGNBQUE7RUFDQSxHQUFBLGdCQUFBO0dBQ0EsT0FBQTtHQUNBLE9BQUE7R0FDQSxNQUFBO0dBQ0EsZUFBQTtHQUNBLE1BQUE7R0FDQSxPQUFBOztFQUVBOztFQUVBLFNBQUEsV0FBQTs7R0FFQSxXQUFBLFNBQUE7R0FDQSxXQUFBLGVBQUE7O0dBRUEsUUFBQSxVQUFBLEtBQUEsU0FBQSxVQUFBO0lBQ0EsR0FBQSxZQUFBO0lBQ0EsR0FBQSxVQUFBLEtBQUEsR0FBQSxPQUFBO0lBQ0EsR0FBQSxXQUFBO0lBQ0EsbUJBQUEsY0FBQSxHQUFBLE9BQUE7SUFDQSxtQkFBQSxRQUFBLEdBQUEsV0FBQSxHQUFBLFFBQUE7SUFDQSxtQkFBQSxTQUFBO0lBQ0EsbUJBQUEsYUFBQTtJQUNBLG1CQUFBLG1CQUFBLEdBQUEsT0FBQSxLQUFBO0lBQ0EsV0FBQSxlQUFBO0lBQ0EsUUFBQSxRQUFBLEdBQUEsT0FBQSxXQUFBLFNBQUEsVUFBQTtLQUNBLElBQUEsQ0FBQSxHQUFBLFVBQUEsR0FBQSxXQUFBO0tBQ0EsSUFBQSxTQUFBLFVBQUEsR0FBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7O0tBRUEsUUFBQSxRQUFBLFVBQUEsU0FBQSxNQUFBLElBQUE7TUFDQSxHQUFBLFFBQUEsR0FBQTtPQUNBLEdBQUEsR0FBQSxTQUFBLFFBQUEsUUFBQSxDQUFBLEVBQUE7UUFDQSxHQUFBLFNBQUEsS0FBQTtRQUNBLFdBQUEsZUFBQSxHQUFBOzs7OztLQUtBLFFBQUEsUUFBQSxTQUFBLFNBQUEsU0FBQSxRQUFBO01BQ0EsSUFBQSxJQUFBLEdBQUEsVUFBQSxRQUFBLE9BQUE7TUFDQSxJQUFBLEtBQUEsQ0FBQSxLQUFBLE9BQUEsT0FBQSxHQUFBLE9BQUEsS0FBQTtPQUNBLEdBQUEsVUFBQSxLQUFBLE9BQUE7T0FDQSxtQkFBQSxtQkFBQSxPQUFBLEtBQUE7Ozs7O0lBS0EsbUJBQUEsZUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUF1QkEsU0FBQSxhQUFBO0dBQ0EsY0FBQSxhQUFBOzs7RUFHQSxTQUFBLGNBQUE7R0FDQSxJQUFBLEdBQUEsWUFBQSxNQUFBLE9BQUE7R0FDQSxJQUFBLEdBQUEsU0FBQSxXQUFBLEdBQUEsU0FBQTtJQUNBLE9BQUE7R0FDQSxJQUFBLEdBQUEsU0FBQSxVQUFBLEdBQUEsU0FBQTtJQUNBLE9BQUE7O0dBRUEsT0FBQTs7O0VBR0EsU0FBQSxhQUFBLEtBQUEsR0FBQTs7R0FFQSxJQUFBLFVBQUEsbUJBQUEsZUFBQSxJQUFBLFFBQUEsV0FBQTtHQUNBLElBQUEsT0FBQSxRQUFBLGdCQUFBLGFBQUE7O0lBRUEsT0FBQSxHQUFBLDZCQUFBO0tBQ0EsS0FBQSxRQUFBOzs7OztFQUtBLFNBQUEsY0FBQSxTQUFBO0dBQ0EsSUFBQSxRQUFBO0dBQ0EsSUFBQSxNQUFBLFFBQUEsV0FBQSxtQkFBQSxLQUFBO0dBQ0EsSUFBQSxTQUFBLG1CQUFBLGVBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxJQUFBLFdBQUEsU0FBQSxHQUFBLFlBQUEsV0FBQSxPQUFBLFlBQUE7O0dBRUEsSUFBQSxRQUFBLFVBQUEsbUJBQUEsUUFBQSxZQUFBLE9BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUEsT0FBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQTtHQUNBLElBQUEsWUFBQSxVQUFBLG1CQUFBLFFBQUEsWUFBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUEsTUFBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQTtHQUNBLE1BQUEsUUFBQTtHQUNBLE1BQUEsVUFBQTtJQUNBLE9BQUE7SUFDQSxNQUFBOztHQUVBLElBQUEsVUFBQTtJQUNBLE9BQUE7SUFDQSxNQUFBOztHQUVBLElBQUEsT0FBQSxHQUFBLE9BQUEsS0FBQTtJQUNBLFVBQUE7S0FDQSxPQUFBO0tBQ0EsTUFBQTs7SUFFQSxRQUFBOztHQUVBLE1BQUEsV0FBQTtJQUNBLE9BQUE7SUFDQSxTQUFBOztHQUVBLE9BQUE7Ozs7OztBQzNJQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSw0SkFBQSxVQUFBLFVBQUEsUUFBQSxZQUFBLFFBQUEsV0FBQSxTQUFBLG9CQUFBLGFBQUEsZUFBQSxZQUFBOzs7RUFHQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFFBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLGFBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGNBQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxDQUFBLEdBQUEsSUFBQSxNQUFBLENBQUEsR0FBQTtFQUNBLEdBQUEsU0FBQSxDQUFBLFdBQUEsV0FBQSxXQUFBLFdBQUE7RUFDQSxHQUFBLGNBQUE7R0FDQSxZQUFBO0dBQ0EsWUFBQTtHQUNBLFVBQUE7O0VBRUEsR0FBQSxTQUFBO0dBQ0EsVUFBQTtHQUNBLE1BQUEsQ0FBQSxHQUFBLEdBQUE7O0VBRUEsR0FBQSx1QkFBQTtFQUNBLEdBQUEsaUJBQUE7OztFQUdBOztFQUVBLFNBQUEsV0FBQTtHQUNBLFdBQUEsU0FBQTtHQUNBLG1CQUFBLFNBQUE7R0FDQSxtQkFBQSxhQUFBO0dBQ0EsUUFBQSxVQUFBLEtBQUEsVUFBQSxVQUFBO0lBQ0EsR0FBQSxVQUFBO0lBQ0EsbUJBQUEsUUFBQSxHQUFBLFNBQUEsR0FBQSxRQUFBOztHQUVBLFVBQUEsVUFBQSxLQUFBLFVBQUEsVUFBQTtJQUNBLEdBQUEsWUFBQTtJQUNBOzs7Ozs7OztFQVFBLFNBQUEsZUFBQTs7R0FFQSxJQUFBLFdBQUE7SUFDQSxXQUFBOztJQUVBLFdBQUE7Ozs7OztFQU1BLFNBQUEsWUFBQTtHQUNBLEdBQUEsWUFBQTtHQUNBLEdBQUEsc0JBQUE7R0FDQSxHQUFBLHNCQUFBO0lBQ0EsU0FBQTtJQUNBLEtBQUE7SUFDQSxLQUFBO0lBQ0EsTUFBQTtJQUNBLFVBQUE7O0dBRUEsR0FBQSxZQUFBLENBQUE7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUEsR0FBQSxPQUFBO01BQ0E7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUEsR0FBQSxPQUFBO01BQ0E7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUEsR0FBQSxPQUFBO01BQ0E7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUEsR0FBQSxPQUFBO01BQ0E7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUEsR0FBQSxPQUFBOzs7R0FHQSxHQUFBLGdCQUFBLENBQUE7SUFDQSxNQUFBO0lBQ0EsU0FBQTtJQUNBLE9BQUE7SUFDQSxPQUFBO01BQ0E7SUFDQSxNQUFBO0lBQ0EsT0FBQTtJQUNBLFNBQUE7SUFDQSxPQUFBO01BQ0E7SUFDQSxNQUFBO0lBQ0EsT0FBQTtJQUNBLFNBQUE7SUFDQSxPQUFBOzs7OztFQUtBLFNBQUEsYUFBQTtHQUNBLGNBQUEsYUFBQTs7O0VBR0EsU0FBQSxxQkFBQSxNQUFBOztHQUVBLElBQUEsSUFBQSxHQUFBLE9BQUEsS0FBQSxRQUFBO0dBQ0EsSUFBQSxJQUFBLENBQUEsR0FBQTtJQUNBLEdBQUEsT0FBQSxLQUFBLE9BQUEsR0FBQTtVQUNBO0lBQ0EsR0FBQSxPQUFBLEtBQUEsS0FBQTs7R0FFQSxJQUFBLEdBQUEsT0FBQSxLQUFBLFVBQUEsR0FBQTtJQUNBLEdBQUEsT0FBQSxPQUFBLENBQUEsR0FBQSxHQUFBOztHQUVBOzs7RUFHQSxTQUFBLGFBQUEsVUFBQTtHQUNBLEdBQUE7R0FDQSxRQUFBLFNBQUE7R0FDQSxLQUFBO0lBQ0EsR0FBQSxjQUFBLEdBQUE7SUFDQTtHQUNBLEtBQUE7SUFDQSxHQUFBLGNBQUEsR0FBQTtJQUNBO0dBQ0EsS0FBQTtJQUNBLEdBQUEsY0FBQSxHQUFBO0lBQ0E7R0FDQTs7O0dBR0EsUUFBQSxTQUFBO0dBQ0EsS0FBQTtJQUNBLEdBQUEsb0JBQUE7SUFDQSxHQUFBLFVBQUEsR0FBQTtJQUNBO0dBQ0EsS0FBQTtJQUNBLEdBQUEsb0JBQUE7SUFDQSxHQUFBLFVBQUEsR0FBQTtJQUNBO0dBQ0EsS0FBQTtJQUNBLEdBQUEsb0JBQUE7SUFDQSxHQUFBLFVBQUEsR0FBQTtJQUNBO0dBQ0EsS0FBQTtJQUNBLEdBQUEsb0JBQUE7SUFDQSxHQUFBLFVBQUEsR0FBQTtJQUNBO0dBQ0EsS0FBQTtJQUNBLEdBQUEsb0JBQUE7SUFDQSxHQUFBLFVBQUEsR0FBQTtJQUNBO0dBQ0E7O0dBRUEsYUFBQSxTQUFBOztFQUVBLFNBQUEsYUFBQSxRQUFBO0dBQ0EsUUFBQSxRQUFBLFNBQUEsU0FBQSxJQUFBO0lBQ0EsR0FBQSxHQUFBLFVBQUEsUUFBQSxJQUFBLFFBQUEsQ0FBQSxFQUFBO0tBQ0EsR0FBQSxVQUFBLEtBQUEsSUFBQTs7OztFQUlBLFNBQUEsa0JBQUE7R0FDQTtHQUNBLFFBQUEsUUFBQSxHQUFBLFdBQUEsVUFBQSxVQUFBO0lBQ0EsSUFBQSxHQUFBLE9BQUEsS0FBQSxRQUFBO0tBQ0EsSUFBQSxHQUFBLE9BQUEsS0FBQSxRQUFBLFNBQUEsV0FBQSxDQUFBLEdBQUE7TUFDQSxhQUFBOztXQUVBO0tBQ0EsYUFBQTs7O0dBR0EsR0FBQSxRQUFBOztHQUVBLG1CQUFBOzs7RUFHQSxTQUFBLGFBQUEsS0FBQSxHQUFBO0dBQ0EsSUFBQSxVQUFBLG1CQUFBLGVBQUEsSUFBQSxRQUFBLFdBQUE7R0FDQSxJQUFBLE9BQUEsUUFBQSxnQkFBQSxhQUFBO0lBQ0EsT0FBQSxHQUFBLDZCQUFBO0tBQ0EsS0FBQSxRQUFBOzs7OztFQUtBLFNBQUEsZUFBQSxTQUFBO0dBQ0EsSUFBQSxRQUFBO0dBQ0EsSUFBQSxNQUFBLFFBQUEsV0FBQSxtQkFBQSxLQUFBO0dBQ0EsSUFBQSxTQUFBLG1CQUFBLGVBQUE7O0dBRUEsSUFBQSxRQUFBO0dBQ0EsSUFBQSxPQUFBLFFBQUE7R0FDQSxRQUFBLFdBQUE7R0FDQSxHQUFBLEdBQUEsVUFBQSxRQUFBLFFBQUEsQ0FBQSxFQUFBO0lBQ0EsTUFBQSxRQUFBO0lBQ0EsTUFBQSxVQUFBO0tBQ0EsT0FBQTtLQUNBLE1BQUE7OztPQUdBO0lBQ0EsUUFBQTtJQUNBLEtBQUE7S0FDQSxJQUFBLE9BQUEsT0FBQSxVQUFBLGVBQUEsT0FBQSxVQUFBLFFBQUEsS0FBQTtNQUNBLElBQUEsV0FBQSxTQUFBLEdBQUEsWUFBQSxXQUFBLE9BQUEsWUFBQTtNQUNBLElBQUEsUUFBQSxVQUFBLG1CQUFBLFFBQUEsWUFBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUEsTUFBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQTtNQUNBLE1BQUEsUUFBQSxVQUFBLG1CQUFBLFFBQUEsWUFBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUE7TUFDQSxNQUFBLFVBQUE7T0FDQSxPQUFBO09BQ0EsTUFBQTs7TUFFQSxNQUFBLFdBQUE7T0FDQSxPQUFBLFVBQUEsbUJBQUEsUUFBQSxZQUFBLE9BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUEsT0FBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQSxNQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBO09BQ0EsU0FBQTtRQUNBLE9BQUE7UUFDQSxNQUFBOzs7O1lBSUE7TUFDQSxNQUFBLFFBQUE7TUFDQSxNQUFBLFVBQUE7T0FDQSxPQUFBO09BQ0EsTUFBQTs7OztLQUlBOzs7OztHQUtBLE9BQUE7R0FDQTs7Ozs7QUN0UEEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsMENBQUEsU0FBQSxRQUFBLGVBQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsR0FBQSxVQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsVUFBQTtHQUNBLE1BQUE7R0FDQSxNQUFBO0dBQ0EsV0FBQTtHQUNBLFdBQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFdBQUEsU0FBQSxJQUFBLE1BQUE7SUFDQSxPQUFBLEdBQUEsNkJBQUE7S0FDQSxJQUFBO0tBQ0EsTUFBQTs7O0dBR0EsVUFBQSxXQUFBO0lBQ0EsT0FBQSxHQUFBLDZCQUFBO0tBQ0EsSUFBQTtLQUNBLE1BQUE7OztHQUdBLGFBQUEsV0FBQTtJQUNBLFFBQUEsUUFBQSxHQUFBLFdBQUEsU0FBQSxNQUFBLEtBQUE7S0FDQSxHQUFBLGNBQUEsV0FBQSxLQUFBLElBQUEsU0FBQSxNQUFBO01BQ0EsSUFBQSxPQUFBLE9BQUEsTUFBQSxLQUFBLElBQUE7T0FDQSxPQUFBLEdBQUE7O01BRUEsSUFBQSxNQUFBLEdBQUEsUUFBQSxRQUFBO01BQ0EsR0FBQSxjQUFBLFFBQUEsT0FBQSxLQUFBO01BQ0EsR0FBQSxZQUFBOzs7Ozs7Ozs7O0VBVUEsR0FBQSxjQUFBLFdBQUEsU0FBQSxNQUFBOzs7OztBQzlDQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwyREFBQSxTQUFBLFFBQUEsUUFBQSxlQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLFVBQUE7R0FDQSxTQUFBO0lBQ0EsUUFBQSxTQUFBLE9BQUEsT0FBQSxNQUFBLFVBQUE7S0FDQSxLQUFBLGVBQUEsS0FBQTtLQUNBLEtBQUEsT0FBQTs7SUFFQSxVQUFBLFNBQUEsT0FBQSxPQUFBLE1BQUEsVUFBQTs7O0lBR0EsVUFBQSxXQUFBO0tBQ0EsT0FBQSxHQUFBOztJQUVBLG1CQUFBLFdBQUE7S0FDQSxJQUFBLE9BQUE7TUFDQSxJQUFBLEtBQUE7TUFDQSxPQUFBO01BQ0EsTUFBQTs7S0FFQSxHQUFBLGNBQUEsU0FBQSxNQUFBLEtBQUE7OztJQUdBLGFBQUEsV0FBQTtLQUNBLFFBQUEsUUFBQSxHQUFBLFVBQUEsU0FBQSxNQUFBLEtBQUE7TUFDQSxXQUFBLE1BQUEsR0FBQSxjQUFBLFNBQUE7O01BRUEsR0FBQSxXQUFBOzs7SUFHQSxZQUFBLFNBQUEsT0FBQSxNQUFBLFVBQUEsTUFBQTtLQUNBLFdBQUEsTUFBQSxHQUFBLE9BQUE7S0FDQSxHQUFBLFlBQUE7O0lBRUEsTUFBQSxXQUFBO0tBQ0EsR0FBQSxjQUFBLEtBQUEsU0FBQSxVQUFBOztNQUVBLE9BQUEsR0FBQSw2QkFBQTtPQUNBLElBQUEsU0FBQTtPQUNBLE1BQUEsU0FBQTs7Ozs7Ozs7Ozs7Ozs7OztHQWdCQSxPQUFBO0lBQ0EsT0FBQSxTQUFBLE1BQUE7S0FDQSxPQUFBLEdBQUEsbUNBQUE7TUFDQSxTQUFBLEtBQUE7TUFDQSxXQUFBLEtBQUE7Ozs7R0FJQSxVQUFBO0dBQ0EsV0FBQTtHQUNBLGtCQUFBOzs7RUFHQSxJQUFBLE9BQUEsT0FBQSxNQUFBLEdBQUE7R0FDQSxHQUFBLGNBQUEsVUFBQSxPQUFBLE9BQUE7U0FDQTtHQUNBLEdBQUEsY0FBQSxVQUFBO0lBQ0EsT0FBQTs7Ozs7RUFLQSxTQUFBLFdBQUEsTUFBQSxNQUFBO0dBQ0EsUUFBQSxRQUFBLE1BQUEsU0FBQSxPQUFBLEtBQUE7SUFDQSxJQUFBLE1BQUEsTUFBQSxLQUFBLElBQUE7S0FDQSxLQUFBLE9BQUEsS0FBQTtLQUNBLE9BQUE7O0lBRUEsSUFBQSxNQUFBLFVBQUE7S0FDQSxJQUFBLFlBQUEsV0FBQSxNQUFBLE1BQUE7S0FDQSxJQUFBLFdBQUE7TUFDQSxPQUFBOzs7O0dBSUEsT0FBQTs7Ozs7O0FDaEdBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLDREQUFBLFNBQUEsY0FBQSxRQUFBLFNBQUE7O1FBRUEsSUFBQSxLQUFBO1FBQ0EsR0FBQSxXQUFBLGNBQUE7UUFDQTs7UUFFQSxTQUFBLFVBQUE7VUFDQSxTQUFBLFVBQUE7Y0FDQSxHQUFBLFdBQUEsY0FBQTs7Ozs7Ozs7Ozs7O0FDWEEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsNE1BQUEsU0FBQSxRQUFBLFFBQUEsVUFBQSxnQkFBQSxlQUFBLGdCQUFBLGFBQUEsa0JBQUEsb0JBQUEsa0JBQUEsb0JBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGNBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLGVBQUEsQ0FBQSxJQUFBLEdBQUEsWUFBQSx1QkFBQSxPQUFBLElBQUEsR0FBQSxZQUFBLHVCQUFBO0VBQ0EsR0FBQSxtQkFBQTtHQUNBLGtCQUFBOztFQUVBLEdBQUEsV0FBQTtHQUNBO0lBQ0EsTUFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsSUFBQSxLQUFBOztHQUVBO0lBQ0EsTUFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsSUFBQSxLQUFBOztHQUVBO0lBQ0EsTUFBQTtJQUNBLEtBQUE7SUFDQSxNQUFBO0lBQ0EsSUFBQSxLQUFBOzs7RUFHQTs7RUFFQSxTQUFBLFdBQUE7O0dBRUEsU0FBQSxXQUFBO0lBQ0EsR0FBQSxXQUFBLGNBQUE7Ozs7O0lBS0EsR0FBQSxPQUFBLGNBQUEsR0FBQSxTQUFBLE9BQUEsT0FBQSxPQUFBO0lBQ0EsSUFBQSxPQUFBLEdBQUEsUUFBQSxhQUFBLE9BQUEsR0FBQSw2QkFBQTtLQUNBLElBQUEsT0FBQSxPQUFBO0tBQ0EsTUFBQSxPQUFBLE9BQUE7O0lBRUEsSUFBQSxDQUFBLEdBQUEsS0FBQSxPQUFBO0tBQ0EsR0FBQSxLQUFBLFFBQUE7TUFDQSxZQUFBO01BQ0EsYUFBQTtNQUNBLG1CQUFBO01BQ0EsWUFBQTtNQUNBLGVBQUE7TUFDQSxlQUFBO01BQ0EsbUJBQUE7TUFDQSxpQkFBQTtNQUNBLFNBQUE7TUFDQSxhQUFBO01BQ0EsV0FBQTs7O0lBR0EsZUFBQSx1QkFBQSxHQUFBLEtBQUEsY0FBQSxTQUFBLFdBQUE7S0FDQSxHQUFBLE9BQUEsVUFBQTtLQUNBLEdBQUEsWUFBQTs7S0FFQSxtQkFBQSxRQUFBLFVBQUEsTUFBQSxXQUFBLEdBQUEsS0FBQSxNQUFBLFlBQUE7S0FDQSxpQkFBQSxjQUFBLFNBQUEsWUFBQTtNQUNBLEdBQUEsYUFBQTtRQUNBLEdBQUEsS0FBQTs7T0FFQTtLQUNBLE1BQUE7Ozs7O0VBS0EsU0FBQSxjQUFBLE1BQUEsSUFBQTtHQUNBLElBQUE7R0FDQSxRQUFBLFFBQUEsTUFBQSxTQUFBLE1BQUE7SUFDQSxJQUFBLEtBQUEsTUFBQSxJQUFBO0tBQ0EsUUFBQTtXQUNBO0tBQ0EsSUFBQSxLQUFBLFlBQUEsQ0FBQTtNQUNBLFFBQUEsY0FBQSxLQUFBLFVBQUE7OztHQUdBLE9BQUE7R0FDQTs7O0VBR0EsT0FBQSxPQUFBLGlCQUFBLFNBQUEsR0FBQSxHQUFBO0dBQ0EsSUFBQSxNQUFBLEtBQUEsQ0FBQSxFQUFBLFNBQUE7R0FDQSxtQkFBQSxhQUFBLEVBQUE7R0FDQSxtQkFBQSxNQUFBLEVBQUE7S0FDQTs7Ozs7QUMvRkEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsa0dBQUEsU0FBQSxZQUFBLFFBQUEsZUFBQSxvQkFBQSxlQUFBOztRQUVBLElBQUEsS0FBQTtRQUNBLEdBQUEsZ0JBQUE7UUFDQTs7UUFFQSxTQUFBLFVBQUE7VUFDQSxHQUFBLGNBQUEsVUFBQSxPQUFBLE9BQUEsSUFBQSxTQUFBLFNBQUE7O1FBRUEsV0FBQSxjQUFBOzs7OztBQ1pBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHVEQUFBLFNBQUEsWUFBQSxnQkFBQTtJQUNBLElBQUEsS0FBQTtJQUNBLEdBQUEsYUFBQTs7SUFFQSxHQUFBLFNBQUE7SUFDQSxHQUFBLFVBQUE7TUFDQSxXQUFBO1FBQ0Esa0JBQUEsVUFBQTtVQUNBLEdBQUEsUUFBQTtVQUNBLFFBQUEsUUFBQSxHQUFBLFdBQUEsU0FBQSxLQUFBO1lBQ0EsZUFBQTs7VUFFQSxlQUFBLFdBQUEsYUFBQSxVQUFBLEdBQUE7VUFDQSxlQUFBLFdBQUEsVUFBQSxVQUFBLEdBQUE7Ozs7SUFJQSxTQUFBLFlBQUEsR0FBQTtNQUNBLElBQUEsTUFBQSxHQUFBLE9BQUEsUUFBQTtNQUNBLEdBQUEsT0FBQSxDQUFBLEVBQUE7UUFDQSxHQUFBLE9BQUEsS0FBQTs7O0lBR0EsU0FBQSxlQUFBLElBQUE7TUFDQSxZQUFBLElBQUE7TUFDQSxHQUFBLElBQUEsU0FBQTtRQUNBLFFBQUEsUUFBQSxJQUFBLFVBQUEsU0FBQSxNQUFBO1VBQ0EsWUFBQSxNQUFBO1VBQ0EsZUFBQTs7O0tBR0E7SUFDQSxTQUFBLFVBQUEsS0FBQTtJQUNBLEdBQUEsS0FBQSxXQUFBLFNBQUEsS0FBQSxHQUFBLE9BQUEsU0FBQSxFQUFBO0tBQ0EsSUFBQSxRQUFBO0tBQ0EsUUFBQSxRQUFBLEtBQUEsWUFBQSxTQUFBLElBQUE7TUFDQSxHQUFBLEdBQUEsT0FBQSxRQUFBLElBQUEsTUFBQSxDQUFBLEVBQUE7T0FDQSxRQUFBOzs7S0FHQSxPQUFBOztJQUVBLE9BQUE7Ozs7O0FDN0NBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLDhGQUFBLFNBQUEsT0FBQSxRQUFBLGdCQUFBLFlBQUEsWUFBQSxTQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsVUFBQTtFQUNBLEdBQUEsU0FBQTtHQUNBLE1BQUE7R0FDQSxRQUFBLFVBQUE7SUFDQSxHQUFBLE9BQUEsUUFBQSxRQUFBLGlCQUFBO0tBQ0EsT0FBQSxHQUFBLHdCQUFBLENBQUEsT0FBQTs7UUFFQTtLQUNBLGVBQUEsWUFBQTtLQUNBLGVBQUEsWUFBQTtLQUNBLE9BQUEsR0FBQTs7Ozs7RUFLQSxPQUFBLE9BQUEsVUFBQSxDQUFBLE9BQUEsZUFBQSxRQUFBLGFBQUEsU0FBQSxHQUFBLEVBQUE7R0FDQSxHQUFBLE1BQUEsR0FBQTtHQUNBLEdBQUEsYUFBQTs7RUFFQSxPQUFBLE9BQUEsVUFBQSxDQUFBLE9BQUEsZUFBQSxRQUFBLFVBQUEsU0FBQSxHQUFBLEVBQUE7R0FDQSxHQUFBLE1BQUEsR0FBQTtHQUNBLEdBQUEsVUFBQTs7Ozs7QUM3QkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsNEhBQUEsU0FBQSxPQUFBLFVBQUEsYUFBQSxPQUFBLGVBQUEsWUFBQSxPQUFBLFFBQUEsU0FBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxXQUFBLGtCQUFBO0VBQ0EsR0FBQSxVQUFBO0VBQ0EsR0FBQSxXQUFBO0VBQ0EsR0FBQSxXQUFBO0VBQ0EsR0FBQSxhQUFBOztFQUVBLEdBQUEsZUFBQSxTQUFBLFNBQUE7R0FDQSxNQUFBLGFBQUE7OztFQUdBLFNBQUEsaUJBQUE7SUFDQSxPQUFBLE1BQUE7O0VBRUEsU0FBQSxTQUFBO0dBQ0EsTUFBQSxNQUFBLEdBQUEsTUFBQSxLQUFBLFNBQUEsU0FBQTtJQUNBLE9BQUEsUUFBQTs7TUFFQSxNQUFBLFNBQUEsU0FBQTtJQUNBLE9BQUEsTUFBQSx3Q0FBQTs7O0VBR0EsU0FBQSxVQUFBO0dBQ0EsR0FBQSxNQUFBLGtCQUFBO0lBQ0EsTUFBQSxTQUFBLEtBQUEsU0FBQSxLQUFBO0tBQ0EsR0FBQSxPQUFBLFFBQUEsS0FBQTtNQUNBLE9BQUEsR0FBQTs7S0FFQSxPQUFBLFFBQUE7T0FDQSxNQUFBLFNBQUEsU0FBQTs7Ozs7O0lBTUEsU0FBQSxTQUFBLGFBQUEsSUFBQTtNQUNBLFlBQUE7S0FDQTtFQUNBLFNBQUEsWUFBQTtHQUNBLFdBQUEsY0FBQSxDQUFBLFdBQUE7R0FDQSxjQUFBLFdBQUEsV0FBQTtHQUNBOztFQUVBLFNBQUEsY0FBQTtHQUNBLFNBQUEsVUFBQTtJQUNBLFlBQUEsT0FBQSxPQUFBLEtBQUEsVUFBQSxLQUFBO0tBQ0EsSUFBQTs7TUFFQTs7RUFFQSxXQUFBLGNBQUE7RUFDQSxPQUFBLE9BQUEsVUFBQTtHQUNBLE9BQUEsV0FBQTtLQUNBLFNBQUEsUUFBQTtHQUNBLE9BQUEsZUFBQSxXQUFBOztFQUVBLE9BQUEsT0FBQSxxQkFBQSxTQUFBLEVBQUEsRUFBQTtHQUNBLEdBQUEsS0FBQSxHQUFBLE9BQUE7R0FDQTs7RUFFQSxPQUFBLE9BQUEsV0FBQSxFQUFBLE9BQUEsU0FBQSxTQUFBLFNBQUEsT0FBQTtLQUNBLEdBQUEsY0FBQTs7Ozs7OztBQ2xFQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSw0QkFBQSxTQUFBLFlBQUE7UUFDQSxJQUFBLEtBQUE7O1FBRUEsWUFBQSxPQUFBLFNBQUEsQ0FBQSxhQUFBLE9BQUEsS0FBQSxTQUFBLFNBQUE7VUFDQSxHQUFBLFVBQUE7Ozs7Ozs7QUNQQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwrQkFBQSxVQUFBLFdBQUE7RUFDQSxLQUFBLFdBQUE7R0FDQSxhQUFBO0dBQ0EsV0FBQTtHQUNBLHlCQUFBO0dBQ0Esa0JBQUE7OztFQUdBLEtBQUEsZUFBQSxVQUFBLE1BQUEsSUFBQTtHQUNBLFVBQUEsS0FBQSxVQUFBO0tBQ0EsTUFBQTtLQUNBLFFBQUEsd0JBQUEsT0FBQTtLQUNBLEdBQUE7S0FDQSxZQUFBOzs7O0lBSUEsS0FBQSxnQkFBQSxXQUFBO0dBQ0EsVUFBQSxLQUFBOztLQUVBLGFBQUE7U0FDQSxrQkFBQTs7S0FFQSxLQUFBLFVBQUEsUUFBQTs7T0FFQSxZQUFBOzs7Ozs7Ozs7QUM1QkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsbUxBQUEsU0FBQSxRQUFBLFFBQUEsWUFBQSxZQUFBLFNBQUEsUUFBQSxVQUFBLFFBQUEsb0JBQUEsTUFBQSxXQUFBLGFBQUEsYUFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLE1BQUE7O0VBRUEsR0FBQSxhQUFBLEtBQUEsU0FBQTtFQUNBLEdBQUEsa0JBQUEsS0FBQSxTQUFBO0VBQ0EsR0FBQSxjQUFBOztFQUVBLEdBQUEsWUFBQTtFQUNBLEdBQUEsYUFBQSxtQkFBQTtFQUNBLEdBQUEsa0JBQUEsbUJBQUE7RUFDQSxHQUFBLHNCQUFBLEdBQUEsa0JBQUE7RUFDQSxHQUFBLFlBQUEsbUJBQUEsS0FBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsVUFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsVUFBQTtHQUNBLFFBQUE7R0FDQSxXQUFBOztFQUVBLEdBQUEsVUFBQTtHQUNBLGFBQUE7Ozs7RUFJQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxXQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxxQkFBQTtFQUNBLEdBQUEsVUFBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsY0FBQTs7RUFFQSxHQUFBLGtCQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsbUJBQUE7RUFDQSxHQUFBLHFCQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsWUFBQTs7RUFFQSxHQUFBLFdBQUE7O0VBRUEsR0FBQSxZQUFBOztFQUVBOztFQUVBLFNBQUEsV0FBQTs7R0FFQSxHQUFBLGdCQUFBLEtBQUEsU0FBQSxXQUFBO0lBQ0EsR0FBQSxXQUFBLEtBQUEsU0FBQSxNQUFBO0tBQ0EsR0FBQSxPQUFBO0tBQ0EsR0FBQSxZQUFBO0tBQ0EsSUFBQSxDQUFBLEdBQUEsVUFBQSxPQUFBO01BQ0EsR0FBQSxVQUFBLFFBQUE7T0FDQSxRQUFBO09BQ0EsU0FBQTtPQUNBLGNBQUE7OztLQUdBLGFBQUEsR0FBQSxVQUFBLE1BQUE7S0FDQTtLQUNBLElBQUEsT0FBQSxPQUFBLE1BQUE7TUFDQSxHQUFBLFNBQUEsT0FBQSxPQUFBO01BQ0E7O0tBRUEsSUFBQSxPQUFBLE9BQUEsV0FBQTtNQUNBLEdBQUEsT0FBQTtNQUNBLEdBQUEsUUFBQSxVQUFBLEtBQUEsR0FBQTtNQUNBLEdBQUEsUUFBQSxTQUFBO01BQ0EsV0FBQSxTQUFBO01BQ0EsSUFBQSxZQUFBLE9BQUEsT0FBQSxVQUFBLE1BQUE7TUFDQSxRQUFBLFFBQUEsV0FBQSxTQUFBLEtBQUE7T0FDQSxHQUFBLFFBQUEsVUFBQSxLQUFBLGVBQUE7OztNQUdBLFVBQUEsS0FBQSxHQUFBLFFBQUE7TUFDQSxZQUFBLE9BQUEsa0JBQUEsV0FBQSxLQUFBLFNBQUEsTUFBQTtPQUNBLEdBQUEsT0FBQTs7Ozs7Ozs7RUFRQSxTQUFBLFNBQUE7R0FDQSxRQUFBLFFBQUE7O0VBRUEsU0FBQSxVQUFBLEtBQUE7O0dBRUEsT0FBQSxHQUFBLDBCQUFBO0lBQ0EsR0FBQSxLQUFBO0lBQ0EsS0FBQSxLQUFBO0lBQ0EsS0FBQSxPQUFBLE9BQUE7OztFQUdBLFNBQUEsV0FBQTtHQUNBLElBQUEsY0FBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLFVBQUEsVUFBQSxTQUFBLE1BQUE7SUFDQSxHQUFBLE1BQUEsU0FBQSxTQUFBLEVBQUE7S0FDQSxjQUFBOzs7R0FHQSxPQUFBOztFQUVBLFNBQUEsZUFBQSxTQUFBO0dBQ0EsSUFBQSxXQUFBLE1BQUEsR0FBQSxjQUFBLElBQUE7SUFDQSxHQUFBLGFBQUE7VUFDQTtJQUNBLEdBQUEsYUFBQTs7R0FFQSxHQUFBLGVBQUEsR0FBQSxhQUFBLGtCQUFBO0dBQ0E7O0VBRUEsU0FBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLFdBQUEsZUFBQTtHQUNBLGdCQUFBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBO0dBQ0EsR0FBQSxZQUFBLENBQUEsR0FBQTtHQUNBLEdBQUEsWUFBQSxHQUFBLGFBQUEsT0FBQSxpQkFBQTs7O0VBR0EsU0FBQSxXQUFBLEtBQUE7R0FDQSxHQUFBLFVBQUE7O0dBRUEsR0FBQTs7R0FFQSxXQUFBLFFBQUE7R0FDQTs7RUFFQSxTQUFBLG1CQUFBLEtBQUE7R0FDQSxJQUFBLEdBQUEsV0FBQTtJQUNBLFNBQUEsV0FBQTtLQUNBLEdBQUEsVUFBQSxPQUFBLEdBQUEscUJBQUEsU0FBQSxHQUFBLFFBQUEsS0FBQSxXQUFBOzs7R0FHQTs7O0VBR0EsU0FBQSxXQUFBO0dBQ0EsSUFBQSxDQUFBLEdBQUEsU0FBQTtJQUNBOztHQUVBLElBQUEsT0FBQTtHQUNBLElBQUEsT0FBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBO0lBQ0EsS0FBQSxHQUFBLFVBQUEsUUFBQSxXQUFBLEtBQUEsR0FBQSxVQUFBO0lBQ0EsS0FBQSxXQUFBLFdBQUEsS0FBQSxHQUFBLFVBQUE7OztHQUdBLE9BQUEsR0FBQSxLQUFBLFFBQUEsR0FBQSxXQUFBO0dBQ0EsR0FBQSxRQUFBLEdBQUEsVUFBQSxPQUFBLFdBQUE7R0FDQSxHQUFBLGdCQUFBO0lBQ0EsT0FBQSxHQUFBLFVBQUEsTUFBQSxjQUFBO0lBQ0EsT0FBQSxHQUFBLFVBQUEsT0FBQTtJQUNBLE1BQUEsR0FBQSxLQUFBOzs7R0FHQSxPQUFBOzs7RUFHQSxTQUFBLFFBQUEsU0FBQTs7R0FFQSxJQUFBLE9BQUEsR0FBQSxLQUFBLFFBQUEsV0FBQTtHQUNBLE9BQUE7Ozs7RUFJQSxTQUFBLGFBQUE7R0FDQSxHQUFBLE9BQUEsQ0FBQSxHQUFBO0dBQ0E7OztFQUdBLFNBQUEsZ0JBQUE7R0FDQSxPQUFBLEdBQUEsVUFBQSxDQUFBLEdBQUE7R0FDQTs7O0VBR0EsU0FBQSxnQkFBQSxLQUFBO0dBQ0EsWUFBQSxPQUFBLFdBQUEsT0FBQSxPQUFBLElBQUEsS0FBQSxLQUFBLFNBQUEsTUFBQTtJQUNBLEdBQUEsUUFBQSxPQUFBO0lBQ0EsZUFBQTs7Ozs7RUFLQSxTQUFBLGVBQUEsS0FBQTtHQUNBLElBQUEsQ0FBQSxPQUFBLE9BQUEsV0FBQTtJQUNBLFlBQUEsT0FBQSxrQkFBQSxDQUFBLE1BQUEsS0FBQSxTQUFBLE1BQUE7S0FDQSxHQUFBLE9BQUE7Ozs7OztFQU1BLFNBQUEsZ0JBQUEsTUFBQTtHQUNBLElBQUEsUUFBQSxDQUFBLEdBQUEsUUFBQSxVQUFBLENBQUEsUUFBQSxHQUFBLFFBQUEsUUFBQTtJQUNBLEdBQUE7Ozs7RUFJQSxTQUFBLG1CQUFBO0dBQ0EsR0FBQSxRQUFBLFlBQUEsQ0FBQSxHQUFBO0dBQ0EsR0FBQSxRQUFBLFNBQUEsQ0FBQSxHQUFBLFFBQUE7R0FDQSxJQUFBLEdBQUEsUUFBQSxRQUFBO0lBQ0EsR0FBQSxPQUFBO0lBQ0EsV0FBQSxTQUFBO0lBQ0EsR0FBQSxVQUFBLFFBQUEsY0FBQTtJQUNBLEdBQUEsVUFBQSxTQUFBOztVQUVBO0lBQ0EsV0FBQSxTQUFBO0lBQ0EsUUFBQSxRQUFBLEdBQUEsVUFBQSxPQUFBLEdBQUEscUJBQUEsVUFBQSxTQUFBLFNBQUE7S0FDQSxRQUFBLFdBQUE7O0lBRUEsR0FBQSxVQUFBLE9BQUEsR0FBQSxxQkFBQSxTQUFBLEdBQUEsUUFBQSxLQUFBLFdBQUE7SUFDQSxHQUFBLFVBQUEsUUFBQSxjQUFBO0lBQ0EsR0FBQSxVQUFBLFNBQUE7SUFDQSxZQUFBLE9BQUEsa0JBQUEsQ0FBQSxHQUFBLFFBQUEsTUFBQSxLQUFBLFNBQUEsTUFBQTtLQUNBLEdBQUEsT0FBQTs7SUFFQSxPQUFBLEdBQUEsMkJBQUE7S0FDQSxJQUFBLE9BQUEsT0FBQTtLQUNBLE1BQUEsT0FBQSxPQUFBO0tBQ0EsTUFBQSxPQUFBLE9BQUE7Ozs7R0FJQTs7RUFFQSxTQUFBLG1CQUFBLFNBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxRQUFBLFdBQUEsU0FBQSxLQUFBLEtBQUE7SUFDQSxJQUFBLFdBQUEsT0FBQSxPQUFBLEdBQUEsU0FBQTtLQUNBLEdBQUEsUUFBQSxVQUFBLE9BQUEsS0FBQTtLQUNBLFFBQUE7OztHQUdBLElBQUEsQ0FBQSxPQUFBO0lBQ0EsR0FBQSxRQUFBLFVBQUEsS0FBQTtJQUNBO0dBQ0EsSUFBQSxPQUFBO0dBQ0EsSUFBQSxVQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsUUFBQSxXQUFBLFNBQUEsTUFBQSxLQUFBO0lBQ0EsS0FBQSxLQUFBLEtBQUE7SUFDQSxJQUFBLEtBQUEsR0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLEtBQUE7S0FDQSxRQUFBLEtBQUEsS0FBQTs7O0dBR0EsSUFBQSxLQUFBLFNBQUEsR0FBQTtJQUNBLFlBQUEsT0FBQSxrQkFBQSxNQUFBLEtBQUEsU0FBQSxNQUFBO0tBQ0EsR0FBQSxPQUFBOztJQUVBLE9BQUEsR0FBQSxtQ0FBQTtLQUNBLE9BQUEsT0FBQSxPQUFBO0tBQ0EsTUFBQSxPQUFBLE9BQUE7S0FDQSxXQUFBLFFBQUEsS0FBQTs7OztHQUlBLE9BQUEsQ0FBQTtHQUNBOzs7RUFHQSxTQUFBLFlBQUE7R0FDQSxJQUFBLENBQUEsR0FBQSxTQUFBO0lBQ0EsT0FBQTs7O0dBR0EsT0FBQSxDQUFBLEdBQUEsUUFBQSxHQUFBLFdBQUEsS0FBQTtHQUNBOzs7RUFHQSxTQUFBLGNBQUE7R0FDQSxJQUFBLENBQUEsR0FBQSxTQUFBO0lBQ0EsT0FBQTs7R0FFQSxPQUFBLEdBQUEsUUFBQSxpQkFBQSxJQUFBLGtCQUFBO0dBQ0E7OztFQUdBLFNBQUEsT0FBQSxHQUFBOzs7O0VBSUEsU0FBQSxVQUFBLE1BQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsS0FBQSxVQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsS0FBQSxlQUFBLEdBQUEsUUFBQSxZQUFBLE1BQUE7S0FDQSxHQUFBLGFBQUE7O0lBRUEsVUFBQTs7R0FFQSxPQUFBOzs7RUFHQSxTQUFBLFdBQUE7R0FDQSxVQUFBLEdBQUE7R0FDQTs7O0VBR0EsU0FBQSxnQkFBQSxNQUFBO0dBQ0EsSUFBQSxTQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxTQUFBLEtBQUE7SUFDQSxJQUFBLElBQUEsV0FBQSxNQUFBO0tBQ0EsU0FBQTs7O0dBR0EsT0FBQTtHQUNBOzs7RUFHQSxTQUFBLGVBQUEsS0FBQTtHQUNBLElBQUEsU0FBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxLQUFBO0lBQ0EsSUFBQSxJQUFBLE9BQUEsS0FBQTtLQUNBLFNBQUE7Ozs7R0FJQSxPQUFBO0dBQ0E7OztFQUdBLFNBQUEsYUFBQSxPQUFBOztHQUVBLEdBQUEsU0FBQSxTQUFBLGNBQUE7R0FDQSxHQUFBLE9BQUEsUUFBQTtHQUNBLEdBQUEsT0FBQSxTQUFBO0dBQ0EsR0FBQSxNQUFBLEdBQUEsT0FBQSxXQUFBO0dBQ0EsSUFBQSxXQUFBLEdBQUEsSUFBQSxxQkFBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLFNBQUEsYUFBQSxHQUFBO0dBQ0EsU0FBQSxhQUFBLE1BQUEsU0FBQTtHQUNBLFNBQUEsYUFBQSxHQUFBO0dBQ0EsR0FBQSxJQUFBLFlBQUE7R0FDQSxHQUFBLElBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLEdBQUEsVUFBQSxHQUFBLElBQUEsYUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBOzs7OztFQUtBLFNBQUEsYUFBQSxPQUFBO0dBQ0EsSUFBQSxXQUFBLEdBQUEsSUFBQSxxQkFBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLFNBQUEsYUFBQSxHQUFBO0dBQ0EsU0FBQSxhQUFBLE1BQUEsU0FBQTtHQUNBLFNBQUEsYUFBQSxHQUFBO0dBQ0EsR0FBQSxJQUFBLFlBQUE7R0FDQSxHQUFBLElBQUEsU0FBQSxHQUFBLEdBQUEsS0FBQTtHQUNBLEdBQUEsVUFBQSxHQUFBLElBQUEsYUFBQSxHQUFBLEdBQUEsS0FBQSxHQUFBOztHQUVBOzs7RUFHQSxTQUFBLGNBQUEsU0FBQTtHQUNBLElBQUEsUUFBQTtHQUNBLElBQUEsTUFBQSxRQUFBLFdBQUEsR0FBQTtHQUNBLElBQUEsU0FBQSxlQUFBO0dBQ0EsSUFBQSxRQUFBLEdBQUEsVUFBQSxRQUFBOzs7R0FHQSxJQUFBLFdBQUEsU0FBQSxNQUFBLE1BQUEsT0FBQSxVQUFBOztHQUVBLElBQUEsUUFBQSxVQUFBLEdBQUEsUUFBQSxZQUFBLE9BQUEsR0FBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLEdBQUEsUUFBQSxXQUFBLEtBQUEsTUFBQSxHQUFBLFFBQUEsV0FBQSxLQUFBO0dBQ0EsTUFBQSxRQUFBO0dBQ0EsTUFBQSxVQUFBO0lBQ0EsT0FBQTtJQUNBLE1BQUE7O0dBRUEsTUFBQSxXQUFBO0lBQ0EsT0FBQTtJQUNBLFNBQUE7S0FDQSxPQUFBO0tBQ0EsTUFBQTs7O0dBR0EsT0FBQTtHQUNBOzs7RUFHQSxTQUFBLGVBQUEsU0FBQTs7R0FFQSxJQUFBLFFBQUE7R0FDQSxJQUFBLE1BQUEsUUFBQSxXQUFBLEdBQUE7O0dBRUEsSUFBQSxTQUFBLGVBQUE7R0FDQSxJQUFBLFFBQUEsR0FBQSxVQUFBLFFBQUE7R0FDQSxJQUFBLE9BQUEsUUFBQTtHQUNBLElBQUEsT0FBQSxHQUFBLFFBQUEsS0FBQTtJQUNBLFFBQUEsV0FBQTs7O0dBR0EsUUFBQTtJQUNBLEtBQUE7S0FDQSxJQUFBLE9BQUEsT0FBQSxVQUFBLGFBQUE7OztNQUdBLElBQUEsV0FBQSxTQUFBLE1BQUEsTUFBQSxTQUFBLE9BQUEsV0FBQTs7TUFFQSxJQUFBLFFBQUEsVUFBQSxHQUFBLFFBQUEsWUFBQSxPQUFBLEdBQUEsUUFBQSxXQUFBLEtBQUEsT0FBQSxHQUFBLFFBQUEsV0FBQSxLQUFBLE1BQUEsR0FBQSxRQUFBLFdBQUEsS0FBQTtNQUNBLE1BQUEsUUFBQSxVQUFBLEdBQUEsUUFBQSxZQUFBLE9BQUEsR0FBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLEdBQUEsUUFBQSxXQUFBLEtBQUE7TUFDQSxNQUFBLFVBQUE7T0FDQSxPQUFBO09BQ0EsTUFBQTs7TUFFQSxNQUFBLFdBQUE7T0FDQSxPQUFBLFVBQUEsR0FBQSxRQUFBLFlBQUEsT0FBQSxHQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsR0FBQSxRQUFBLFdBQUEsS0FBQTtPQUNBLFNBQUE7UUFDQSxPQUFBO1FBQ0EsTUFBQTs7O01BR0E7WUFDQTs7TUFFQSxNQUFBLFFBQUE7TUFDQSxNQUFBLFVBQUE7T0FDQSxPQUFBO09BQ0EsTUFBQTs7Ozs7R0FLQSxJQUFBLFFBQUEsTUFBQSxTQUFBLG1CQUFBLFlBQUEsU0FBQTtJQUNBLE1BQUEsY0FBQSxXQUFBO0tBQ0EsSUFBQSxRQUFBO01BQ0EsTUFBQSxRQUFBLFdBQUE7TUFDQSxVQUFBLENBQUEsS0FBQTtNQUNBLFVBQUE7O0tBRUEsT0FBQTs7O0dBR0EsT0FBQTtHQUNBOztFQUVBLE9BQUEsT0FBQSxjQUFBLFNBQUEsR0FBQSxHQUFBO0dBQ0EsSUFBQSxNQUFBLEdBQUE7SUFDQTs7O0dBR0EsSUFBQSxFQUFBLEtBQUE7SUFDQSxJQUFBLEVBQUEsS0FBQTtLQUNBLEdBQUEsVUFBQSxPQUFBLEdBQUEscUJBQUEsU0FBQSxFQUFBLEtBQUEsV0FBQTs7SUFFQTtJQUNBLGdCQUFBLEVBQUE7SUFDQSxHQUFBLFVBQUEsT0FBQSxHQUFBLHFCQUFBLFNBQUEsRUFBQSxLQUFBLFdBQUE7SUFDQSxJQUFBLE9BQUEsUUFBQSxRQUFBLDZCQUFBLE9BQUEsUUFBQSxRQUFBLGtCQUFBO0tBQ0EsT0FBQSxHQUFBLDJCQUFBO01BQ0EsSUFBQSxPQUFBLE9BQUE7TUFDQSxNQUFBLE9BQUEsT0FBQTtNQUNBLE1BQUEsRUFBQTs7O1VBR0E7SUFDQSxPQUFBLEdBQUEsa0JBQUE7S0FDQSxJQUFBLE9BQUEsT0FBQTtLQUNBLE1BQUEsT0FBQSxPQUFBOzs7O0VBSUEsT0FBQSxPQUFBLDBCQUFBLFNBQUEsR0FBQSxHQUFBO0dBQ0EsSUFBQSxNQUFBLEdBQUE7SUFDQTs7R0FFQSxRQUFBLElBQUE7R0FDQSxJQUFBLEVBQUE7SUFDQSxhQUFBLEVBQUE7UUFDQTtJQUNBLGFBQUE7SUFDQTtHQUNBLEdBQUE7Ozs7Ozs7Ozs7Ozs7R0FhQSxJQUFBLEdBQUEsUUFBQSxLQUFBO0lBQ0EsSUFBQSxPQUFBLE9BQUEsV0FBQTtLQUNBLE9BQUEsR0FBQSxtQ0FBQTtNQUNBLElBQUEsRUFBQTtNQUNBLE1BQUEsRUFBQTtNQUNBLE1BQUEsR0FBQSxRQUFBO01BQ0EsV0FBQSxPQUFBLE9BQUE7O1dBRUE7S0FDQSxPQUFBLEdBQUEsMkJBQUE7TUFDQSxJQUFBLEVBQUE7TUFDQSxNQUFBLEVBQUE7TUFDQSxNQUFBLEdBQUEsUUFBQTs7O1VBR0E7SUFDQSxPQUFBLEdBQUEsa0JBQUE7S0FDQSxJQUFBLEVBQUE7S0FDQSxNQUFBLEVBQUE7Ozs7Ozs7RUFPQSxPQUFBLE9BQUEsV0FBQSxTQUFBLEdBQUEsR0FBQTtHQUNBLElBQUEsTUFBQSxHQUFBO0lBQ0E7Ozs7Ozs7O0dBUUEsSUFBQSxZQUFBLEVBQUEsT0FBQSxFQUFBLFlBQUEsR0FBQSxHQUFBLElBQUEsRUFBQSxZQUFBLEdBQUEsR0FBQTtJQUNBLFlBQUEsRUFBQSxPQUFBLEVBQUEsWUFBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLFlBQUEsR0FBQSxHQUFBO0lBQ0EsU0FBQSxFQUFBLGFBQUEsV0FBQTs7R0FFQSxJQUFBLE1BQUE7SUFDQSxDQUFBLEdBQUE7SUFDQSxDQUFBLEtBQUE7O0dBRUEsSUFBQSxHQUFBLFFBQUEsUUFBQTtJQUNBLE1BQUE7S0FDQSxDQUFBLEdBQUE7S0FDQSxDQUFBLEdBQUE7OztHQUdBLEdBQUEsSUFBQSxVQUFBLFFBQUE7SUFDQSxTQUFBLElBQUE7SUFDQSxTQUFBOzs7O0VBSUEsT0FBQSxJQUFBLHVCQUFBLFNBQUEsT0FBQSxTQUFBLFVBQUEsV0FBQSxZQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQW1DQSxTQUFBLGdCQUFBO0dBQ0EsSUFBQSxNQUFBLG1CQUFBO0lBQ0EsR0FBQSxNQUFBO0lBQ0EsR0FBQSxZQUFBLG1CQUFBO0lBQ0EsU0FBQSxXQUFBO0tBQ0EsSUFBQSxPQUFBLE9BQUEsV0FBQTtNQUNBLEdBQUEsVUFBQSxRQUFBLGNBQUE7TUFDQSxHQUFBLFVBQUEsU0FBQTtNQUNBLEdBQUEsVUFBQSxPQUFBLEdBQUEscUJBQUEsU0FBQSxHQUFBLFFBQUEsS0FBQSxXQUFBO01BQ0EsSUFBQSxZQUFBLE9BQUEsT0FBQSxVQUFBLE1BQUE7TUFDQSxRQUFBLFFBQUEsV0FBQSxTQUFBLEtBQUE7T0FDQSxHQUFBLFVBQUEsT0FBQSxHQUFBLHFCQUFBLFNBQUEsS0FBQSxXQUFBOzs7WUFHQTtNQUNBLEdBQUEsVUFBQSxTQUFBO01BQ0EsSUFBQSxPQUFBLE9BQUEsTUFBQTtPQUNBLEdBQUEsVUFBQSxPQUFBLEdBQUEscUJBQUEsU0FBQSxPQUFBLE9BQUEsTUFBQSxXQUFBOzs7OztJQUtBLEdBQUEsVUFBQSxRQUFBLFVBQUEsU0FBQSxLQUFBLEdBQUE7O0tBRUEsSUFBQSxDQUFBLEdBQUEsUUFBQSxRQUFBO01BQ0EsSUFBQSxJQUFBLGVBQUEsSUFBQSxRQUFBLFdBQUEsR0FBQTtNQUNBLElBQUEsT0FBQSxFQUFBLEdBQUEsVUFBQSxTQUFBLGFBQUE7T0FDQSxXQUFBLFFBQUE7T0FDQSxHQUFBLFVBQUEsZUFBQSxJQUFBLFFBQUEsV0FBQSxHQUFBO2FBQ0E7T0FDQSxPQUFBLE1BQUEsZ0NBQUEsSUFBQSxRQUFBLFdBQUE7O1lBRUE7TUFDQSxJQUFBLElBQUEsZUFBQSxJQUFBLFFBQUEsV0FBQSxHQUFBO01BQ0EsSUFBQSxPQUFBLEVBQUEsR0FBQSxVQUFBLFNBQUEsYUFBQTtPQUNBLEdBQUEsbUJBQUE7YUFDQTtPQUNBLE9BQUEsTUFBQSxnQ0FBQSxJQUFBLFFBQUEsV0FBQTs7Ozs7Ozs7O0FDbG5CQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxzQ0FBQSxVQUFBLE9BQUEsUUFBQTs7SUFFQSxPQUFBLFNBQUE7Ozs7QUNMQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSx5R0FBQSxVQUFBLFFBQUEsUUFBQSxTQUFBLFVBQUEsUUFBQSxlQUFBLGNBQUE7OztFQUdBLElBQUEsS0FBQTtFQUNBLEdBQUEsT0FBQSxhQUFBO0VBQ0EsR0FBQSxPQUFBLGFBQUE7RUFDQSxHQUFBLFNBQUEsYUFBQTtFQUNBLEdBQUEsYUFBQSxhQUFBO0VBQ0EsR0FBQSxXQUFBO0lBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLHFCQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsZUFBQTtJQUNBLEdBQUEsa0JBQUE7RUFDQSxHQUFBLHNCQUFBOztFQUVBLEdBQUEsVUFBQTtJQUNBLEdBQUEsUUFBQTtFQUNBLEdBQUEsUUFBQTtHQUNBLFFBQUE7R0FDQSxPQUFBO0dBQ0EsT0FBQTtHQUNBLE1BQUE7OztFQUdBOztFQUVBLFNBQUEsV0FBQTtHQUNBO0tBQ0E7OztFQUdBLFNBQUEsWUFBQTtHQUNBLElBQUEsQ0FBQSxHQUFBLE1BQUE7SUFDQSxPQUFBLEdBQUE7OztJQUdBLFNBQUEsVUFBQTtHQUNBLFNBQUEsVUFBQTtJQUNBLElBQUEsT0FBQSxRQUFBLFdBQUEsR0FBQSxNQUFBLFFBQUEsR0FBQSxLQUFBO09BQ0EsR0FBQSxRQUFBO0lBQ0EsSUFBQSxTQUFBO0lBQ0EsSUFBQSxRQUFBO0tBQ0EsUUFBQSxRQUFBLElBQUEsU0FBQSxPQUFBLEVBQUE7S0FDQSxHQUFBLE1BQUEsU0FBQSxPQUFBO01BQ0EsUUFBQTs7O09BR0EsUUFBQSxRQUFBLElBQUEsT0FBQSxTQUFBLE1BQUE7U0FDQSxHQUFBLE1BQUEsS0FBQSxNQUFBLEtBQUEsR0FBQSxLQUFBOztJQUVBLEdBQUEsYUFBQSxHQUFBLE1BQUE7Ozs7O0VBS0EsU0FBQSxPQUFBLFdBQUE7R0FDQSxHQUFBLFNBQUE7R0FDQTs7RUFFQSxTQUFBLGNBQUEsT0FBQTtHQUNBLE9BQUEsR0FBQSxPQUFBLFFBQUEsV0FBQSxHQUFBLE1BQUEsQ0FBQSxRQUFBO0dBQ0E7O0VBRUEsU0FBQSxtQkFBQSxNQUFBLE9BQUE7OztHQUdBOztFQUVBLFNBQUEsZUFBQSxNQUFBO0dBQ0EsT0FBQSxLQUFBLE9BQUEsU0FBQSxJQUFBLFlBQUE7Ozs7Ozs7RUFPQSxTQUFBLGFBQUEsR0FBQSxLQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxVQUFBLE1BQUEsR0FBQTtJQUNBLFFBQUEsUUFBQSxLQUFBLE1BQUEsVUFBQSxPQUFBLEdBQUE7S0FDQSxJQUFBLEtBQUEsS0FBQTtNQUNBLFFBQUEsUUFBQSxHQUFBLEtBQUEsR0FBQSxRQUFBLFNBQUEsT0FBQSxFQUFBO09BQ0EsR0FBQSxNQUFBLFVBQUEsSUFBQTtRQUNBLElBQUEsTUFBQSxRQUFBLEtBQUEsTUFBQSxRQUFBLEdBQUE7U0FDQSxhQUFBOztRQUVBLGFBQUE7UUFDQSxHQUFBLEtBQUEsR0FBQSxPQUFBLE9BQUEsR0FBQTs7O01BR0EsT0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBOzs7O0dBSUEsYUFBQTtHQUNBLE9BQUE7OztFQUdBLFNBQUEsaUJBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxVQUFBLFVBQUEsTUFBQSxLQUFBO0lBQ0EsUUFBQSxRQUFBLEtBQUEsUUFBQSxVQUFBLE9BQUEsR0FBQTtLQUNBLElBQUEsTUFBQSxRQUFBLEtBQUEsTUFBQSxRQUFBLEdBQUE7TUFDQSxHQUFBO01BQ0EsYUFBQTs7S0FFQSxHQUFBO0tBQ0EsYUFBQTs7SUFFQSxHQUFBLEtBQUEsT0FBQSxHQUFBLEtBQUEsUUFBQSxPQUFBOztHQUVBLEdBQUEsV0FBQTtHQUNBLGFBQUE7R0FDQSxJQUFBLEdBQUEsS0FBQSxVQUFBLEdBQUE7SUFDQSxHQUFBO0lBQ0EsT0FBQSxHQUFBOzs7O0VBSUEsU0FBQSxlQUFBO0dBQ0EsR0FBQSxXQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxVQUFBLE1BQUEsS0FBQTtJQUNBLElBQUEsS0FBQSxPQUFBLFFBQUE7S0FDQSxHQUFBLFNBQUEsS0FBQTs7Ozs7RUFLQSxTQUFBLFVBQUE7R0FDQSxHQUFBLE1BQUEsR0FBQSxTQUFBO0dBQ0EsY0FBQSxhQUFBLFdBQUE7OztFQUdBLFNBQUEsYUFBQTtHQUNBLEdBQUEsT0FBQTs7O0VBR0EsU0FBQSxrQkFBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsVUFBQSxLQUFBLEdBQUE7SUFDQSxRQUFBLFFBQUEsSUFBQSxNQUFBLFVBQUEsTUFBQSxLQUFBO0tBQ0EsSUFBQSxNQUFBLFNBQUEsT0FBQSxHQUFBO01BQ0EsSUFBQSxLQUFBLFdBQUEsaUJBQUEsU0FBQSxPQUFBLEtBQUEsS0FBQSxXQUFBLGNBQUEsUUFBQSxTQUFBLENBQUEsR0FBQTtPQUNBLElBQUEsUUFBQTtRQUNBLE1BQUE7UUFDQSxTQUFBO1FBQ0EsUUFBQTtRQUNBLE9BQUE7O09BRUEsSUFBQSxPQUFBLEtBQUE7T0FDQSxHQUFBLE9BQUEsS0FBQTs7Ozs7Ozs7Ozs7O0FDM0pBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHNIQUFBLFNBQUEsWUFBQSxRQUFBLFFBQUEsY0FBQSxhQUFBLGVBQUEsUUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsT0FBQSxhQUFBO0VBQ0EsR0FBQSxPQUFBLGFBQUE7RUFDQSxHQUFBLFNBQUEsYUFBQTtFQUNBLEdBQUEsYUFBQSxhQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxXQUFBOztFQUVBOztFQUVBLFNBQUEsV0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQWtDQSxTQUFBLGNBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsS0FBQSxLQUFBO0lBQ0EsUUFBQSxRQUFBLElBQUEsTUFBQSxTQUFBLE1BQUEsR0FBQTtLQUNBLElBQUEsTUFBQSxTQUFBLE9BQUEsR0FBQTtNQUNBLEtBQUEsS0FBQSxXQUFBLGlCQUFBLHlCQUFBLEtBQUEsV0FBQSxjQUFBLFFBQUEsU0FBQSxDQUFBLEdBQUE7T0FDQSxHQUFBLEtBQUEsS0FBQSxLQUFBLEtBQUE7T0FDQSxJQUFBLE9BQUEsT0FBQSxHQUFBO09BQ0EsR0FBQSxPQUFBLE9BQUEsR0FBQTs7OztJQUlBLElBQUEsQ0FBQSxJQUFBLEtBQUEsR0FBQSxLQUFBLFlBQUE7S0FDQSxJQUFBLFFBQUE7TUFDQSxNQUFBO01BQ0EsU0FBQTtNQUNBLE9BQUEsSUFBQSxLQUFBLEdBQUEsS0FBQTtNQUNBLFFBQUEsR0FBQSxLQUFBO01BQ0EsS0FBQTs7S0FFQSxJQUFBLGFBQUE7S0FDQSxRQUFBLFFBQUEsSUFBQSxRQUFBLFNBQUEsT0FBQSxLQUFBO01BQ0EsSUFBQSxNQUFBLFFBQUEsR0FBQTtPQUNBLGFBQUE7OztLQUdBLElBQUEsQ0FBQSxZQUFBO01BQ0EsSUFBQSxPQUFBLEtBQUE7TUFDQSxHQUFBLFdBQUEsS0FBQTs7OztHQUlBLGFBQUE7OztFQUdBLFNBQUEsV0FBQTs7R0FFQSxJQUFBLENBQUEsR0FBQSxLQUFBLFdBQUE7SUFDQSxPQUFBLE1BQUEsMENBQUE7SUFDQSxPQUFBOztHQUVBLElBQUEsQ0FBQSxHQUFBLEtBQUEsZUFBQTtJQUNBLE9BQUEsTUFBQSw4Q0FBQTtJQUNBLE9BQUE7O0dBRUEsSUFBQSxHQUFBLEtBQUEsaUJBQUEsR0FBQSxLQUFBLFdBQUE7SUFDQSxPQUFBLE1BQUEsbURBQUE7SUFDQSxPQUFBOztHQUVBLFdBQUEsaUJBQUE7R0FDQSxHQUFBLFdBQUE7R0FDQSxJQUFBLFVBQUE7R0FDQSxJQUFBLFdBQUE7R0FDQSxJQUFBLFVBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQSxLQUFBO0lBQ0EsSUFBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFlBQUE7S0FDQSxZQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUEsV0FBQSxVQUFBLElBQUEsSUFBQTs7SUFFQSxRQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUE7S0FDQSxLQUFBO01BQ0EsS0FBQSxLQUFBLEdBQUEsS0FBQSxpQkFBQTtNQUNBO0tBQ0EsS0FBQTtNQUNBLEtBQUEsS0FBQSxHQUFBLEtBQUEsaUJBQUE7TUFDQTtLQUNBLEtBQUE7TUFDQSxLQUFBLEtBQUEsR0FBQSxLQUFBLGlCQUFBO01BQ0E7S0FDQSxLQUFBO01BQ0EsS0FBQSxLQUFBLEdBQUEsS0FBQSxpQkFBQTtNQUNBO0tBQ0E7TUFDQTs7SUFFQSxRQUFBLEtBQUE7S0FDQSxLQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUE7S0FDQSxNQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUE7OztHQUdBLElBQUEsVUFBQSxhQUFBLFFBQUEsU0FBQSxLQUFBLGVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQSxLQUFBLHdCQUFBO0lBQ0EsTUFBQTtJQUNBLEtBQUE7TUFDQSxLQUFBLFNBQUEsVUFBQTtJQUNBLFdBQUEsaUJBQUE7SUFDQSxRQUFBLFFBQUEsVUFBQSxTQUFBLFNBQUEsS0FBQTtLQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBLEdBQUE7TUFDQSxJQUFBLFFBQUEsUUFBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLGdCQUFBO09BQ0EsSUFBQSxRQUFBLEtBQUEsU0FBQSxHQUFBO1FBQ0EsSUFBQSxXQUFBO1NBQ0EsT0FBQTtTQUNBLFNBQUEsUUFBQTs7UUFFQSxhQUFBLFlBQUE7Y0FDQSxHQUFBLFFBQUEsS0FBQSxVQUFBLEVBQUE7UUFDQSxJQUFBLE9BQUEsUUFBQSxRQUFBLGFBQUE7U0FDQSxHQUFBLEtBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQSxhQUFBLFFBQUEsS0FBQSxHQUFBO1NBQ0EsR0FBQSxLQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsaUJBQUEsUUFBQSxLQUFBLEdBQUE7U0FDQSxJQUFBLEtBQUEsT0FBQSxRQUFBO1VBQ0EsUUFBQSxRQUFBLEtBQUEsUUFBQSxTQUFBLE9BQUEsR0FBQTtXQUNBLElBQUEsTUFBQSxRQUFBLEtBQUEsTUFBQSxRQUFBLEdBQUE7WUFDQSxHQUFBLFdBQUEsT0FBQSxHQUFBO1lBQ0EsS0FBQSxPQUFBLE9BQUEsR0FBQTtrQkFDQSxJQUFBLE1BQUEsUUFBQSxHQUFBO1lBQ0EsSUFBQSxNQUFBLFVBQUEsR0FBQSxLQUFBLFdBQUE7YUFDQSxHQUFBLE9BQUEsT0FBQSxHQUFBO2FBQ0EsS0FBQSxPQUFBLE9BQUEsR0FBQTs7Ozs7O2VBTUE7O1NBRUEsSUFBQSxRQUFBO1VBQ0EsTUFBQTtVQUNBLFNBQUE7VUFDQSxRQUFBLEdBQUEsS0FBQTs7U0FFQSxJQUFBLGFBQUE7U0FDQSxRQUFBLFFBQUEsR0FBQSxLQUFBLEdBQUEsUUFBQSxTQUFBLE9BQUEsR0FBQTtVQUNBLFFBQUEsSUFBQTtVQUNBLElBQUEsTUFBQSxRQUFBLEdBQUE7V0FDQSxhQUFBOzs7U0FHQSxJQUFBLENBQUEsWUFBQTtVQUNBLGFBQUEsWUFBQTtVQUNBLEtBQUEsT0FBQSxLQUFBOzs7Ozs7O0lBT0EsR0FBQSxjQUFBO0lBQ0EsYUFBQTtJQUNBLElBQUEsYUFBQSxjQUFBLFFBQUE7S0FDQSxjQUFBLGFBQUE7O01BRUEsU0FBQSxVQUFBO0lBQ0EsV0FBQSxpQkFBQTtJQUNBLE9BQUEsTUFBQSxzQ0FBQSxTQUFBLEtBQUE7Ozs7RUFJQSxHQUFBLGFBQUE7O0VBRUEsU0FBQSxhQUFBO0dBQ0EsSUFBQSxhQUFBO0lBQ0EsTUFBQTs7R0FFQSxJQUFBLE9BQUE7SUFDQSxTQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxTQUFBLE1BQUEsS0FBQTtJQUNBLElBQUEsS0FBQSxPQUFBLFVBQUEsR0FBQTtLQUNBLEtBQUEsS0FBQSxHQUFBLE9BQUEsR0FBQSxLQUFBO0tBQ0EsR0FBQSxHQUFBLEtBQUEsY0FBQSxHQUFBLEtBQUEsY0FBQSxRQUFBO01BQ0EsT0FBQSxLQUFBLEtBQUEsR0FBQSxLQUFBOztLQUVBLFdBQUEsS0FBQSxLQUFBLEtBQUE7V0FDQTtLQUNBLE9BQUEsTUFBQSwrQkFBQTtLQUNBOzs7R0FHQSxRQUFBLElBQUE7R0FDQSxZQUFBLEtBQUEsaUJBQUEsR0FBQSxVQUFBLGFBQUEsV0FBQSxZQUFBLEtBQUEsU0FBQSxLQUFBO0lBQ0EsSUFBQSxPQUFBLE1BQUE7S0FDQSxPQUFBLFFBQUEsV0FBQSxLQUFBLFNBQUEsd0JBQUEsR0FBQSxLQUFBLE1BQUE7S0FDQSxHQUFBLE9BQUEsYUFBQTtLQUNBLE9BQUEsR0FBQTs7Ozs7Ozs7QUMzTkEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsc0VBQUEsVUFBQSxRQUFBLGNBQUEsYUFBQSxRQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsT0FBQSxhQUFBO0VBQ0EsR0FBQSxPQUFBLGFBQUE7RUFDQSxHQUFBLFNBQUEsYUFBQTtFQUNBLEdBQUEsYUFBQSxhQUFBO0VBQ0EsR0FBQSxXQUFBOzs7RUFHQTs7RUFFQSxTQUFBLFdBQUE7Ozs7R0FJQTs7O0VBR0EsU0FBQSxZQUFBO0dBQ0EsSUFBQSxDQUFBLEdBQUEsTUFBQTtJQUNBLE9BQUEsR0FBQTs7OztFQUlBLFNBQUEsU0FBQSxPQUFBO0dBQ0EsSUFBQSxPQUFBO0lBQ0EsSUFBQSxhQUFBO0tBQ0EsTUFBQTs7SUFFQSxJQUFBLFVBQUE7SUFDQSxJQUFBLGFBQUE7S0FDQSxTQUFBO0lBQ0EsR0FBQSxVQUFBO0lBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxVQUFBLE1BQUEsS0FBQTtLQUNBLElBQUEsS0FBQSxPQUFBLFVBQUEsR0FBQTtNQUNBLEdBQUEsS0FBQSxLQUFBLEdBQUEsS0FBQSxZQUFBO09BQ0EsS0FBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLEdBQUEsS0FBQTs7T0FFQSxHQUFBLEdBQUEsS0FBQSxjQUFBLEdBQUEsS0FBQSxjQUFBLFFBQUE7UUFDQSxPQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUE7OztPQUdBLEdBQUEsS0FBQSxXQUFBLEtBQUEsS0FBQSxHQUFBLEtBQUEsV0FBQSxVQUFBLElBQUEsZUFBQTtPQUNBLFdBQUEsS0FBQSxLQUFBLEtBQUE7O1VBRUE7T0FDQSxRQUFBLEtBQUE7Ozs7WUFJQTtNQUNBLE9BQUEsTUFBQSwrQkFBQTtNQUNBOzs7SUFHQSxRQUFBLFFBQUEsR0FBQSxZQUFBLFVBQUEsTUFBQSxLQUFBO0tBQ0EsSUFBQSxPQUFBLEdBQUEsS0FBQSxhQUFBLE9BQUEsR0FBQSxLQUFBLGVBQUE7TUFDQSxJQUFBLFdBQUE7TUFDQSxJQUFBLE9BQUEsR0FBQSxXQUFBLEtBQUEsU0FBQSxhQUFBO09BQ0EsV0FBQSxHQUFBLFdBQUEsS0FBQSxNQUFBOztNQUVBLElBQUEsUUFBQTtPQUNBLFVBQUE7T0FDQSxTQUFBLEdBQUEsV0FBQSxLQUFBO09BQ0EsZUFBQSxHQUFBLFdBQUEsS0FBQTtPQUNBLG1CQUFBLEdBQUEsV0FBQSxLQUFBLEtBQUEsTUFBQTtPQUNBLGFBQUEsR0FBQSxXQUFBLEtBQUEsYUFBQTtPQUNBLFlBQUE7T0FDQSxtQkFBQSxHQUFBLFdBQUEsS0FBQSxhQUFBLE1BQUE7O01BRUEsSUFBQSxhQUFBO01BQ0EsUUFBQSxRQUFBLEdBQUEsV0FBQSxLQUFBLFlBQUEsVUFBQSxLQUFBO09BQ0EsV0FBQSxLQUFBLElBQUE7O01BRUEsTUFBQSxhQUFBO01BQ0EsT0FBQSxLQUFBOzs7SUFHQSxHQUFBLEtBQUEsU0FBQTtJQUNBLEdBQUEsUUFBQSxTQUFBLEVBQUE7S0FDQSxPQUFBLE1BQUEsT0FBQSxRQUFBLFNBQUEsWUFBQTs7O0lBR0EsWUFBQSxLQUFBLGVBQUEsR0FBQSxNQUFBLEtBQUEsVUFBQSxVQUFBO0tBQ0EsWUFBQSxLQUFBLGlCQUFBLFNBQUEsYUFBQSxXQUFBLFlBQUEsS0FBQSxVQUFBLEtBQUE7TUFDQSxJQUFBLE9BQUEsTUFBQTtPQUNBLE9BQUEsUUFBQSxXQUFBLEtBQUEsU0FBQSx3QkFBQSxHQUFBLEtBQUEsTUFBQTtPQUNBLGFBQUE7T0FDQSxPQUFBLEdBQUE7T0FDQSxHQUFBLE9BQUE7T0FDQSxHQUFBLE9BQUE7O01BRUEsR0FBQSxVQUFBOztPQUVBLFVBQUEsVUFBQTtLQUNBLElBQUEsU0FBQSxTQUFBO01BQ0EsT0FBQSxNQUFBLFNBQUEsU0FBQTs7O0tBR0EsR0FBQSxVQUFBOzs7Ozs7OztBQ3ZHQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSx1Q0FBQSxTQUFBLGFBQUE7TUFDQSxJQUFBLEtBQUE7TUFDQSxHQUFBLE9BQUEsYUFBQTtNQUNBLEdBQUEsT0FBQSxhQUFBO01BQ0EsR0FBQSxhQUFBLGFBQUE7TUFDQSxHQUFBLG1CQUFBLE9BQUEsS0FBQSxHQUFBLFlBQUE7Ozs7O0FDUkEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsaUhBQUEsU0FBQSxRQUFBLFFBQUEsbUJBQUEsU0FBQSxhQUFBLGFBQUEsT0FBQTs7O1FBR0EsSUFBQSxLQUFBO1FBQ0EsR0FBQSxNQUFBO1FBQ0EsR0FBQSxNQUFBO1FBQ0EsR0FBQSxhQUFBO1FBQ0EsR0FBQSxRQUFBO1FBQ0EsR0FBQSxPQUFBLGFBQUE7UUFDQSxHQUFBLE9BQUEsYUFBQTtRQUNBLEdBQUEsU0FBQSxhQUFBO1FBQ0EsR0FBQSxZQUFBLGFBQUE7UUFDQSxHQUFBLGlCQUFBO1FBQ0EsbUJBQUEsYUFBQTs7UUFFQTs7UUFFQSxTQUFBLFVBQUE7VUFDQTs7O1FBR0EsU0FBQSxXQUFBO1VBQ0EsR0FBQSxDQUFBLEdBQUEsS0FBQTtZQUNBLE9BQUEsR0FBQTs7OztRQUlBLE9BQUEsT0FBQSxVQUFBLEVBQUEsT0FBQSxhQUFBLG9CQUFBLFNBQUEsRUFBQSxFQUFBO1VBQ0EsR0FBQSxNQUFBLEVBQUE7VUFDQSxHQUFBLFlBQUE7VUFDQSxHQUFBLE1BQUE7VUFDQSxHQUFBLE1BQUE7VUFDQSxHQUFBLEdBQUEsVUFBQSxNQUFBO1lBQ0EsbUJBQUEsYUFBQSxHQUFBLFVBQUEsTUFBQTs7VUFFQTtZQUNBLGFBQUE7OztRQUdBLE9BQUEsT0FBQSxnQkFBQSxTQUFBLEVBQUEsRUFBQTtVQUNBLEdBQUEsTUFBQSxHQUFBO1VBQ0EsR0FBQSxPQUFBLEVBQUEsWUFBQSxhQUFBO1lBQ0EsR0FBQSxFQUFBLFlBQUEsRUFBQSxTQUFBO2NBQ0EsR0FBQSxFQUFBLE1BQUE7Z0JBQ0EsbUJBQUEsYUFBQSxFQUFBLE1BQUE7O2tCQUVBO2tCQUNBLG1CQUFBLGFBQUE7O2NBRUE7OztjQUdBO1lBQ0EsR0FBQSxPQUFBLEVBQUEsY0FBQSxZQUFBO2NBQ0EsR0FBQSxFQUFBLFdBQUEsT0FBQTtnQkFDQSxtQkFBQSxhQUFBLEVBQUEsV0FBQSxHQUFBLE1BQUE7O2tCQUVBO2dCQUNBLG1CQUFBLGFBQUE7OztZQUdBOztVQUVBLGFBQUEsdUJBQUE7VUFDQSxhQUFBO1VBQ0E7OztRQUdBLFNBQUEsUUFBQTtVQUNBLEdBQUEsTUFBQTtVQUNBLEdBQUEsTUFBQTtVQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBLElBQUE7Y0FDQSxHQUFBLE1BQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxHQUFBLFVBQUEsY0FBQSxHQUFBO2NBQ0EsR0FBQSxNQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsR0FBQSxVQUFBLGNBQUEsR0FBQTs7VUFFQSxHQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxDQUFBLEdBQUEsSUFBQSxHQUFBLE1BQUEsTUFBQSxDQUFBLEVBQUE7O1FBRUEsU0FBQSxjQUFBLElBQUE7VUFDQSxJQUFBLFFBQUE7VUFDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQSxJQUFBO2FBQ0EsR0FBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLGNBQUEsSUFBQTtlQUNBLFFBQUEsS0FBQSxLQUFBLEdBQUEsVUFBQTs7O1VBR0EsT0FBQTs7UUFFQSxTQUFBLGVBQUEsU0FBQTtPQUNBLElBQUEsUUFBQTtPQUNBLElBQUEsTUFBQSxRQUFBLFdBQUE7T0FDQSxJQUFBLFFBQUEsY0FBQSxRQUFBLEdBQUE7T0FDQSxJQUFBLFFBQUEsR0FBQSxVQUFBO09BQ0EsSUFBQSxPQUFBLFFBQUE7O09BRUEsUUFBQTtPQUNBLEtBQUE7O1NBRUEsSUFBQSxXQUFBLFNBQUEsTUFBQSxNQUFBLFNBQUEsR0FBQSxNQUFBLFdBQUE7U0FDQSxJQUFBLFFBQUEsVUFBQSxtQkFBQSxTQUFBLFlBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBLE1BQUEsbUJBQUEsU0FBQSxXQUFBLEtBQUE7Y0FDQSxNQUFBLFFBQUEsVUFBQSxtQkFBQSxTQUFBLGFBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBO1NBQ0EsTUFBQSxVQUFBO1VBQ0EsT0FBQTtVQUNBLE1BQUE7O1NBRUEsTUFBQSxXQUFBO1VBQ0EsT0FBQSxVQUFBLG1CQUFBLFNBQUEsWUFBQSxPQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBLE9BQUEsbUJBQUEsU0FBQSxXQUFBLEtBQUE7VUFDQSxTQUFBO1dBQ0EsT0FBQTtXQUNBLE1BQUE7OztTQUdBOzs7O09BSUEsSUFBQSxRQUFBLE1BQUEsU0FBQSxtQkFBQSxVQUFBLFNBQUE7UUFDQSxNQUFBLGNBQUEsWUFBQTtTQUNBLElBQUEsUUFBQTtVQUNBLE1BQUEsUUFBQSxXQUFBO1VBQ0EsVUFBQSxDQUFBLEtBQUE7VUFDQSxVQUFBOztTQUVBLE9BQUE7OztPQUdBLE9BQUE7O1FBRUEsU0FBQSxjQUFBO1VBQ0EsR0FBQSxVQUFBLFNBQUE7VUFDQSxHQUFBLFVBQUE7O1FBRUEsU0FBQSxnQkFBQTtVQUNBO09BQ0EsWUFBQSxPQUFBLE9BQUEsS0FBQSxVQUFBLEtBQUE7UUFDQSxHQUFBLE1BQUE7UUFDQSxHQUFBLFlBQUEsbUJBQUE7UUFDQSxTQUFBLFlBQUE7VUFDQTs7Ozs7Ozs7QUMzSUEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsb0dBQUEsU0FBQSxPQUFBLFFBQUEsUUFBQSxZQUFBLGVBQUEsYUFBQTtNQUNBLElBQUEsS0FBQTtNQUNBLEdBQUEsT0FBQSxhQUFBO01BQ0EsR0FBQSxPQUFBLGFBQUE7TUFDQSxhQUFBO01BQ0EsR0FBQSxhQUFBLGFBQUE7TUFDQSxHQUFBLG1CQUFBO01BQ0EsR0FBQSxZQUFBO01BQ0EsR0FBQSxZQUFBO01BQ0EsR0FBQSxXQUFBO01BQ0EsR0FBQSxXQUFBOzs7TUFHQSxTQUFBLGlCQUFBLElBQUE7UUFDQSxHQUFBLE9BQUEsYUFBQSxhQUFBLFFBQUEsWUFBQTtVQUNBLGFBQUEsYUFBQSxJQUFBO1lBQ0EsWUFBQTtZQUNBLE1BQUE7OztRQUdBLEdBQUEsY0FBQTtRQUNBLEdBQUEsWUFBQSxhQUFBLGFBQUE7UUFDQSxhQUFBOztNQUVBLFNBQUEsVUFBQSxLQUFBO1FBQ0EsR0FBQSxPQUFBLFFBQUEsYUFBQSxPQUFBO0tBQ0EsSUFBQSxLQUFBLFNBQUEsS0FBQSxRQUFBLEtBQUEsZ0JBQUEsS0FBQSxNQUFBLFVBQUEsR0FBQTtNQUNBLE9BQUE7O0tBRUEsT0FBQTs7SUFFQSxTQUFBLFVBQUEsS0FBQTtRQUNBLEdBQUEsT0FBQSxRQUFBLGVBQUEsT0FBQSxLQUFBLGNBQUEsYUFBQSxPQUFBO0tBQ0EsT0FBQSxVQUFBLFNBQUEsS0FBQSxXQUFBLFNBQUEsT0FBQTs7TUFFQSxTQUFBLFVBQUE7UUFDQSxJQUFBLE9BQUE7UUFDQSxRQUFBLFFBQUEsR0FBQSxZQUFBLFNBQUEsVUFBQTtVQUNBLEdBQUEsVUFBQSxXQUFBO1lBQ0E7Ozs7UUFJQSxHQUFBLFFBQUEsT0FBQSxLQUFBLEdBQUEsWUFBQSxPQUFBO1VBQ0EsT0FBQTs7UUFFQSxPQUFBOztNQUVBLFNBQUEsV0FBQTs7VUFFQSxHQUFBLENBQUEsR0FBQSxLQUFBLGNBQUEsQ0FBQSxHQUFBLEtBQUEsS0FBQTtZQUNBLGNBQUEsYUFBQSxXQUFBO1lBQ0EsT0FBQTs7TUFFQSxJQUFBLGFBQUE7T0FDQSxNQUFBOztNQUVBLElBQUEsVUFBQTtNQUNBLElBQUEsYUFBQTtPQUNBLFNBQUE7TUFDQSxHQUFBLFVBQUE7TUFDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFVBQUEsTUFBQSxLQUFBO09BQ0EsSUFBQSxLQUFBLE9BQUEsVUFBQSxHQUFBO1FBQ0EsR0FBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFlBQUE7U0FDQSxLQUFBLEtBQUEsT0FBQSxLQUFBLEtBQUEsR0FBQSxLQUFBOztTQUVBLEdBQUEsR0FBQSxLQUFBLGNBQUEsR0FBQSxLQUFBLGNBQUEsUUFBQTtVQUNBLE9BQUEsS0FBQSxLQUFBLEdBQUEsS0FBQTs7O1NBR0EsR0FBQSxLQUFBLFdBQUEsS0FBQSxLQUFBLEdBQUEsS0FBQSxXQUFBLFVBQUEsSUFBQSxlQUFBO1NBQ0EsV0FBQSxLQUFBLEtBQUEsS0FBQTs7WUFFQTtnQkFDQSxHQUFBLEdBQUEsS0FBQSxLQUFBO2tCQUNBLEtBQUEsS0FBQSxPQUFBLEdBQUEsS0FBQTtrQkFDQSxHQUFBLEtBQUEsV0FBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFdBQUEsVUFBQSxJQUFBLGVBQUE7V0FDQSxXQUFBLEtBQUEsS0FBQSxLQUFBOztvQkFFQTttQkFDQSxRQUFBLEtBQUE7Ozs7Ozs7Y0FPQTtRQUNBLE9BQUEsTUFBQSwrQkFBQTtRQUNBOzs7TUFHQSxRQUFBLFFBQUEsR0FBQSxZQUFBLFVBQUEsTUFBQSxLQUFBO09BQ0EsSUFBQSxPQUFBLEdBQUEsS0FBQSxhQUFBLE9BQUEsR0FBQSxLQUFBLGVBQUE7UUFDQSxJQUFBLFdBQUE7UUFDQSxJQUFBLE9BQUEsR0FBQSxXQUFBLEtBQUEsU0FBQSxhQUFBO1NBQ0EsV0FBQSxHQUFBLFdBQUEsS0FBQSxNQUFBOztRQUVBLElBQUEsUUFBQTtTQUNBLFVBQUE7U0FDQSxTQUFBLEdBQUEsV0FBQSxLQUFBO1NBQ0EsZUFBQSxHQUFBLFdBQUEsS0FBQTtTQUNBLG1CQUFBLEdBQUEsV0FBQSxLQUFBLEtBQUEsTUFBQTtTQUNBLGFBQUEsR0FBQSxXQUFBLEtBQUEsYUFBQTtTQUNBLFlBQUE7U0FDQSxtQkFBQSxHQUFBLFdBQUEsS0FBQSxhQUFBLE1BQUE7O1FBRUEsSUFBQSxhQUFBO1FBQ0EsUUFBQSxRQUFBLEdBQUEsV0FBQSxLQUFBLFlBQUEsVUFBQSxLQUFBO1NBQ0EsV0FBQSxLQUFBLElBQUE7O1FBRUEsTUFBQSxhQUFBO1FBQ0EsT0FBQSxLQUFBOzs7TUFHQSxHQUFBLEtBQUEsU0FBQTtNQUNBLEdBQUEsUUFBQSxTQUFBLEVBQUE7T0FDQSxPQUFBLE1BQUEsT0FBQSxRQUFBLFNBQUEsWUFBQTtZQUNBLE9BQUE7OztNQUdBLFlBQUEsS0FBQSxlQUFBLEdBQUEsTUFBQSxLQUFBLFVBQUEsVUFBQTtPQUNBLFlBQUEsS0FBQSxpQkFBQSxTQUFBLGFBQUEsV0FBQSxZQUFBLEtBQUEsVUFBQSxLQUFBO1FBQ0EsSUFBQSxPQUFBLE1BQUE7U0FDQSxPQUFBLFFBQUEsV0FBQSxLQUFBLFNBQUEsd0JBQUEsR0FBQSxLQUFBLE1BQUE7U0FDQSxhQUFBO1NBQ0EsT0FBQSxHQUFBO1NBQ0EsR0FBQSxPQUFBO1NBQ0EsR0FBQSxPQUFBOztRQUVBLEdBQUEsVUFBQTs7U0FFQSxVQUFBLFVBQUE7T0FDQSxJQUFBLFNBQUEsU0FBQTtRQUNBLE9BQUEsTUFBQSxTQUFBLFNBQUE7OztPQUdBLEdBQUEsVUFBQTs7OztNQUlBLFNBQUEsY0FBQTs7Ozs7Ozs7OztLQVVBLE9BQUEsT0FBQSxVQUFBLEVBQUEsT0FBQSxhQUFBLG9CQUFBLFNBQUEsRUFBQSxFQUFBO1FBQ0EsR0FBQSxNQUFBLEVBQUE7UUFDQSxHQUFBLFdBQUEsRUFBQSxlQUFBO1FBQ0E7TUFDQSxPQUFBLE9BQUEsVUFBQSxFQUFBLE9BQUEsYUFBQSxvQkFBQSxTQUFBLEVBQUEsRUFBQTtRQUNBLElBQUEsTUFBQSxLQUFBLE9BQUEsS0FBQSxlQUFBLEtBQUEsTUFBQTtRQUNBLEdBQUEsQ0FBQSxHQUFBLGtCQUFBO1VBQ0EsR0FBQSxjQUFBLEdBQUEsV0FBQSxFQUFBLGFBQUE7VUFDQSxHQUFBLGFBQUEsR0FBQSxXQUFBLEVBQUEsYUFBQTtVQUNBLEdBQUEsVUFBQSxHQUFBLFdBQUEsRUFBQSxhQUFBO1VBQ0EsR0FBQSxnQkFBQSxHQUFBLFdBQUEsRUFBQSxhQUFBO1VBQ0EsR0FBQSxZQUFBLEdBQUEsV0FBQSxFQUFBLGFBQUE7VUFDQSxHQUFBLFdBQUEsR0FBQSxXQUFBLEVBQUEsYUFBQTs7VUFFQSxjQUFBLGFBQUEsZ0JBQUE7ZUFDQTs7Ozs7Ozs7Ozs7QUN6S0EsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsbUJBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsd0NBQUEsU0FBQSxZQUFBO01BQ0EsSUFBQSxLQUFBO01BQ0EsR0FBQSxPQUFBLFlBQUE7Ozs7QUNMQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSx1Q0FBQSxTQUFBLFlBQUE7TUFDQSxJQUFBLEtBQUE7O01BRUEsR0FBQSxPQUFBOztNQUVBOztNQUVBLFNBQUEsVUFBQTtRQUNBLFlBQUEsU0FBQSxLQUFBLFNBQUEsS0FBQTtVQUNBLEdBQUEsT0FBQTtZQUNBOzs7O01BSUEsU0FBQSxhQUFBO1FBQ0EsUUFBQSxJQUFBLEdBQUE7UUFDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsS0FBQTtZQUNBLEtBQUEsT0FBQSxLQUFBLE1BQUEsS0FBQTs7Ozs7OztBQ3BCQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwrS0FBQSxTQUFBLFFBQUEsY0FBQSxhQUFBLFNBQUEsUUFBQSxTQUFBLGFBQUEsUUFBQSxhQUFBLGNBQUEsbUJBQUE7Ozs7Ozs7Ozs7Ozs7OztRQWVBLElBQUEsS0FBQTtRQUNBLEdBQUEsTUFBQTtRQUNBLEdBQUEsT0FBQTtRQUNBLEdBQUEsV0FBQTtRQUNBLEdBQUEsV0FBQTtRQUNBLEdBQUEsZUFBQTtRQUNBLEdBQUEsbUJBQUE7UUFDQSxHQUFBLGtCQUFBOztRQUVBLEdBQUEsU0FBQTtRQUNBLEdBQUEsU0FBQTtRQUNBLEdBQUEsWUFBQTtRQUNBLEdBQUEsbUJBQUE7UUFDQSxHQUFBLGFBQUE7UUFDQSxHQUFBLGNBQUE7UUFDQSxHQUFBLGVBQUE7UUFDQSxHQUFBLGdCQUFBO1FBQ0EsR0FBQSxPQUFBO1FBQ0EsR0FBQSxZQUFBOzs7UUFHQSxHQUFBLGdCQUFBO1FBQ0EsR0FBQSxzQkFBQTtRQUNBLEdBQUEsbUJBQUE7UUFDQSxHQUFBLGlCQUFBO1FBQ0EsR0FBQSxxQkFBQTtRQUNBLEdBQUEscUJBQUE7UUFDQSxHQUFBLHVCQUFBO1FBQ0EsR0FBQSx5QkFBQTtRQUNBLEdBQUEsV0FBQTtRQUNBLEdBQUEsaUJBQUE7UUFDQSxHQUFBLFlBQUE7UUFDQSxHQUFBLGNBQUE7UUFDQSxHQUFBLFlBQUE7O1FBRUEsR0FBQSxRQUFBLGFBQUE7O1FBRUEsR0FBQSxPQUFBO1VBQ0EsV0FBQTtVQUNBLGNBQUE7VUFDQSxNQUFBOztRQUVBLEdBQUEsUUFBQTtVQUNBLFFBQUE7VUFDQSxPQUFBO1VBQ0EsT0FBQTtVQUNBLE1BQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7UUFtQkE7O1FBRUEsU0FBQSxVQUFBOztVQUVBLGFBQUE7O1FBRUEsU0FBQSxVQUFBLE9BQUE7VUFDQSxPQUFBLFNBQUEsV0FBQTs7UUFFQSxTQUFBLGdCQUFBLFFBQUE7U0FDQSxJQUFBLFFBQUE7Y0FDQSxNQUFBO2NBQ0EsU0FBQTtVQUNBLE9BQUE7VUFDQSxNQUFBOzs7U0FHQSxPQUFBOztRQUVBLFNBQUEsVUFBQTtXQUNBLFlBQUEsT0FBQSxPQUFBLEtBQUEsVUFBQSxLQUFBO2NBQ0EsR0FBQSxZQUFBLG1CQUFBO2NBQ0EsU0FBQSxVQUFBO2dCQUNBLEdBQUEsVUFBQSxTQUFBOzs7Ozs7UUFNQSxTQUFBLHFCQUFBO1VBQ0EsR0FBQSxnQkFBQSxDQUFBLEdBQUE7VUFDQSxHQUFBLEdBQUEsY0FBQTtZQUNBLEdBQUE7OztRQUdBLFNBQUEsZUFBQTtVQUNBLEdBQUEsQ0FBQSxHQUFBLFVBQUE7WUFDQSxZQUFBLE9BQUEsZUFBQSxLQUFBLFNBQUEsU0FBQTtjQUNBLEdBQUEsWUFBQTtjQUNBLEdBQUEsb0JBQUEsSUFBQSxHQUFBLGtCQUFBOzs7OztRQUtBLFNBQUEsaUJBQUEsU0FBQTtVQUNBLE9BQUEsR0FBQSxrQkFBQSxRQUFBLFlBQUEsQ0FBQSxJQUFBLE9BQUE7O1FBRUEsU0FBQSxnQkFBQSxVQUFBLEtBQUE7VUFDQSxRQUFBLFFBQUEsTUFBQSxTQUFBLE1BQUEsSUFBQTs7Z0JBRUEsR0FBQSxRQUFBLFNBQUE7a0JBQ0EsS0FBQSxPQUFBLEtBQUE7a0JBQ0EsR0FBQSxpQkFBQSxPQUFBLEdBQUEsaUJBQUEsUUFBQSxPQUFBO2tCQUNBLEdBQUEsa0JBQUEsT0FBQSxHQUFBLGtCQUFBLFFBQUEsTUFBQTs7O2NBR0EsZ0JBQUEsVUFBQSxLQUFBOzs7UUFHQSxTQUFBLGVBQUEsU0FBQTtVQUNBLElBQUEsTUFBQSxHQUFBLGtCQUFBLFFBQUE7VUFDQSxJQUFBLE1BQUEsQ0FBQSxFQUFBO1lBQ0EsR0FBQSxrQkFBQSxPQUFBLEtBQUE7WUFDQSxnQkFBQSxVQUFBLEdBQUE7O2NBRUE7WUFDQSxHQUFBLGtCQUFBLEtBQUE7WUFDQSxHQUFBLEdBQUEsaUJBQUEsVUFBQSxLQUFBLE9BQUEsR0FBQSxpQkFBQSxHQUFBLFdBQUEsWUFBQTtjQUNBLEdBQUEsaUJBQUEsR0FBQSxNQUFBLEtBQUE7O2dCQUVBO2dCQUNBLEdBQUEsT0FBQSxLQUFBOzs7Ozs7UUFNQSxTQUFBLGVBQUEsTUFBQTtVQUNBLFFBQUEsUUFBQSxPQUFBLFNBQUEsTUFBQSxJQUFBO1lBQ0EsTUFBQSxLQUFBLFNBQUEsU0FBQSxNQUFBLE1BQUE7WUFDQSxlQUFBLE1BQUE7OztRQUdBLFNBQUEsbUJBQUEsS0FBQTtVQUNBLFFBQUEsSUFBQTs7UUFFQSxTQUFBLG1CQUFBLEtBQUE7VUFDQSxRQUFBLElBQUE7O1FBRUEsU0FBQSxxQkFBQSxLQUFBO1VBQ0EsSUFBQSxNQUFBLEdBQUEsaUJBQUEsUUFBQTtVQUNBLElBQUEsTUFBQSxDQUFBLEVBQUE7WUFDQSxHQUFBLGlCQUFBLE9BQUEsS0FBQTs7Y0FFQTtZQUNBLEdBQUEsaUJBQUEsS0FBQTs7O1FBR0EsU0FBQSx1QkFBQSxLQUFBO1VBQ0EsT0FBQSxHQUFBLGlCQUFBLFFBQUEsUUFBQSxDQUFBOztRQUVBLFNBQUEsVUFBQTtVQUNBLElBQUEsV0FBQTtZQUNBLE1BQUE7WUFDQSxRQUFBO1lBQ0EsTUFBQTs7O1VBR0EsR0FBQSxHQUFBLGlCQUFBLFVBQUEsS0FBQSxPQUFBLEdBQUEsaUJBQUEsR0FBQSxXQUFBLFlBQUE7WUFDQSxHQUFBLGlCQUFBLEdBQUEsTUFBQSxLQUFBOztlQUVBLEdBQUEsR0FBQSxpQkFBQSxTQUFBLEdBQUE7Y0FDQSxRQUFBLFFBQUEsR0FBQSxrQkFBQSxTQUFBLE1BQUEsSUFBQTtrQkFDQSxTQUFBLE1BQUEsS0FBQTtrQkFDQSxnQkFBQSxNQUFBLEdBQUE7O2NBRUEsR0FBQSxPQUFBLEtBQUE7Y0FDQSxHQUFBLG1CQUFBOztjQUVBO1lBQ0EsR0FBQSxPQUFBLEtBQUE7OztRQUdBLFNBQUEsZ0JBQUE7VUFDQSxJQUFBLFdBQUE7WUFDQSxNQUFBO1lBQ0EsUUFBQTtZQUNBLE1BQUE7O1VBRUEsUUFBQSxRQUFBLEdBQUEsa0JBQUEsU0FBQSxNQUFBLElBQUE7WUFDQSxTQUFBLE1BQUEsS0FBQTs7VUFFQSxHQUFBLE9BQUEsS0FBQTtVQUNBLEdBQUEsbUJBQUE7O1FBRUEsU0FBQSxVQUFBLEtBQUE7VUFDQSxHQUFBLFdBQUE7O1FBRUEsU0FBQSxZQUFBLE1BQUEsS0FBQTtZQUNBLGdCQUFBLE1BQUE7O1FBRUEsU0FBQSxXQUFBO1VBQ0EsR0FBQSxHQUFBLGFBQUE7WUFDQTs7VUFFQSxHQUFBLGVBQUE7VUFDQSxHQUFBLE9BQUEsR0FBQSxZQUFBLFlBQUE7WUFDQSxPQUFBLE1BQUEsNkJBQUE7WUFDQSxHQUFBLGVBQUE7WUFDQTs7VUFFQSxHQUFBLENBQUEsR0FBQSxTQUFBLE1BQUE7WUFDQSxPQUFBLE1BQUEsNkJBQUE7WUFDQSxHQUFBLGVBQUE7WUFDQTs7VUFFQSxHQUFBLFNBQUEsT0FBQSxHQUFBO1VBQ0EsWUFBQSxLQUFBLFNBQUEsR0FBQSxVQUFBLEtBQUEsU0FBQSxTQUFBO1lBQ0EsR0FBQSxlQUFBO1lBQ0EsT0FBQSxRQUFBLCtCQUFBO1lBQ0EsT0FBQSxHQUFBLGtCQUFBLENBQUEsTUFBQSxTQUFBO1lBQ0EsU0FBQSxTQUFBO1lBQ0EsR0FBQSxlQUFBO1lBQ0EsT0FBQSxNQUFBLFNBQUEsUUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUN0UEEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsaUdBQUEsVUFBQSxRQUFBLFVBQUEsWUFBQSxZQUFBLGdCQUFBO0lBQ0EsSUFBQSxLQUFBO0lBQ0EsR0FBQSxXQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxVQUFBO0dBQ0EsV0FBQTtHQUNBLFNBQUEsU0FBQSxLQUFBO0lBQ0EsT0FBQSxHQUFBLHdDQUFBLENBQUEsR0FBQSxLQUFBOzs7Ozs7QUNWQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwySkFBQSxVQUFBLFFBQUEsU0FBQSxTQUFBLFFBQUEsWUFBQSxTQUFBLFFBQUEsWUFBQSxZQUFBLGdCQUFBLFFBQUE7O0VBRUEsSUFBQSxLQUFBOztFQUVBLEdBQUEsYUFBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsa0JBQUE7O0VBRUEsR0FBQSxTQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxZQUFBO0dBQ0EsUUFBQTtHQUNBLFdBQUE7R0FDQSxPQUFBO0dBQ0EsV0FBQTs7OztFQUlBLEdBQUEsVUFBQTtHQUNBLFVBQUE7SUFDQSxLQUFBO0lBQ0EsS0FBQTtJQUNBLFVBQUE7SUFDQSxVQUFBO0lBQ0EsU0FBQTtJQUNBLFlBQUE7SUFDQSxXQUFBLFNBQUEsSUFBQSxLQUFBO0tBQ0EsT0FBQSxHQUFBLGlDQUFBLENBQUEsR0FBQSxJQUFBLEtBQUE7O0lBRUEsU0FBQSxVQUFBO0tBQ0EsT0FBQSxHQUFBLGlDQUFBLENBQUEsR0FBQSxHQUFBLE1BQUE7O0lBRUEsWUFBQSxVQUFBO0tBQ0EsUUFBQSxRQUFBLEdBQUEsVUFBQSxRQUFBLFNBQUEsTUFBQSxJQUFBO01BQ0EsZUFBQSxXQUFBLEtBQUEsSUFBQSxLQUFBLFNBQUEsS0FBQTtPQUNBLEdBQUEsT0FBQSxPQUFBLE1BQUEsS0FBQSxHQUFBO1FBQ0EsT0FBQSxHQUFBOztPQUVBLEdBQUEsVUFBQSxVQUFBOzs7Ozs7R0FNQSxXQUFBO0lBQ0EsS0FBQTtJQUNBLEtBQUE7SUFDQSxTQUFBO0lBQ0EsWUFBQTtJQUNBLFNBQUEsVUFBQTtLQUNBLE9BQUEsR0FBQSx3Q0FBQSxDQUFBLEdBQUE7O0lBRUEsV0FBQSxTQUFBLElBQUEsS0FBQTs7S0FFQSxPQUFBLEdBQUEsd0NBQUEsQ0FBQSxHQUFBOztJQUVBLFlBQUEsVUFBQTtLQUNBLFFBQUEsUUFBQSxHQUFBLFVBQUEsV0FBQSxTQUFBLE1BQUEsSUFBQTtNQUNBLGVBQUEsZUFBQSxLQUFBLElBQUEsS0FBQSxTQUFBLEtBQUE7T0FDQSxHQUFBLE9BQUEsT0FBQSxNQUFBLEtBQUEsR0FBQTtRQUNBLE9BQUEsR0FBQTs7T0FFQSxHQUFBLFVBQUEsYUFBQTs7Ozs7OztHQU9BLE9BQUE7SUFDQSxLQUFBO0lBQ0EsS0FBQTtJQUNBLFVBQUE7Ozs7O0VBS0EsU0FBQSxnQkFBQSxNQUFBO0dBQ0EsUUFBQTtJQUNBLEtBQUE7TUFDQSxPQUFBLEdBQUE7S0FDQTtJQUNBLEtBQUE7TUFDQSxPQUFBLEdBQUE7S0FDQTtJQUNBLEtBQUE7TUFDQSxHQUFBLE9BQUEsT0FBQSxPQUFBLE1BQUEsWUFBQTtRQUNBLE9BQUEsR0FBQSxnQ0FBQTtTQUNBLEdBQUEsT0FBQSxPQUFBOzs7VUFHQTtRQUNBLE9BQUEsR0FBQTs7S0FFQTtJQUNBLEtBQUE7O0tBRUE7SUFDQTs7Ozs7RUFLQSxPQUFBLElBQUEsdUJBQUEsU0FBQSxPQUFBLFNBQUEsVUFBQSxXQUFBLFdBQUE7SUFDQSxHQUFBLE9BQUEsU0FBQSxNQUFBLFlBQUE7SUFDQSxHQUFBLFNBQUE7O09BRUE7SUFDQSxHQUFBLFNBQUEsU0FBQTs7R0FFQSxHQUFBLFFBQUEsS0FBQSxRQUFBLGtDQUFBLENBQUEsRUFBQTtJQUNBLEdBQUEsY0FBQTs7O1FBR0EsR0FBQSxRQUFBLEtBQUEsUUFBQSxrQ0FBQSxDQUFBLEVBQUE7SUFDQSxHQUFBLGNBQUE7O1FBRUEsR0FBQSxRQUFBLEtBQUEsUUFBQSwrQkFBQSxDQUFBLEVBQUE7SUFDQSxHQUFBLGNBQUE7Ozs7Ozs7QUMzSEEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsaUlBQUEsVUFBQSxRQUFBLE9BQUEsVUFBQSxvQkFBQSxhQUFBLGdCQUFBLFdBQUE7O0VBRUEsSUFBQSxLQUFBO0lBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxRQUFBO0VBQ0EsR0FBQSxNQUFBO0VBQ0EsR0FBQSxNQUFBO0VBQ0EsR0FBQSxXQUFBO0VBQ0E7O0VBRUEsZUFBQSxpQkFBQSxPQUFBLE9BQUEsSUFBQSxLQUFBLFNBQUEsS0FBQTtHQUNBLElBQUEsYUFBQTtHQUNBLEdBQUEsT0FBQSxHQUFBLFVBQUEsU0FBQSxZQUFBO0lBQ0EsUUFBQSxRQUFBLEdBQUEsVUFBQSxZQUFBLFNBQUEsSUFBQTtLQUNBLEdBQUEsT0FBQSxJQUFBLFNBQUEsWUFBQTtNQUNBLGFBQUEsSUFBQSxNQUFBOzs7O1FBSUEsR0FBQSxHQUFBLFVBQUEsTUFBQTtJQUNBLGFBQUEsR0FBQSxVQUFBLE1BQUE7O0dBRUEsbUJBQUEsYUFBQTtHQUNBLEdBQUEsT0FBQTtHQUNBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsR0FBQSxPQUFBLFFBQUEsUUFBQSxxQ0FBQTtJQUNBLEdBQUEsT0FBQSxPQUFBLFNBQUEsY0FBQTtLQUNBLEdBQUEsV0FBQTs7U0FFQSxHQUFBLE9BQUEsT0FBQSxTQUFBLFVBQUE7S0FDQSxHQUFBLFdBQUE7O1NBRUEsR0FBQSxPQUFBLE9BQUEsU0FBQSxRQUFBO0tBQ0EsR0FBQSxXQUFBOztTQUVBLEdBQUEsT0FBQSxPQUFBLFNBQUEsYUFBQTtLQUNBLEdBQUEsV0FBQTs7UUFFQTtLQUNBLEdBQUEsV0FBQTs7OztFQUlBLFNBQUEsUUFBQTtHQUNBLEdBQUEsTUFBQTtHQUNBLEdBQUEsTUFBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBLElBQUE7S0FDQSxHQUFBLE1BQUEsS0FBQSxJQUFBLEtBQUEsT0FBQSxHQUFBO0tBQ0EsR0FBQSxNQUFBLEtBQUEsSUFBQSxLQUFBLE9BQUEsR0FBQTs7R0FFQSxHQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxDQUFBLEdBQUEsSUFBQSxHQUFBLE1BQUEsTUFBQSxDQUFBLEVBQUE7O0VBRUEsU0FBQSxjQUFBLElBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQSxJQUFBO0tBQ0EsR0FBQSxLQUFBLE9BQUEsSUFBQTtNQUNBLFFBQUEsS0FBQTs7O0dBR0EsT0FBQTs7RUFFQSxTQUFBLGVBQUEsU0FBQTtHQUNBLElBQUEsUUFBQTtHQUNBLElBQUEsTUFBQSxRQUFBLFdBQUE7R0FDQSxJQUFBLFFBQUEsY0FBQSxRQUFBLEdBQUE7R0FDQSxJQUFBLE9BQUEsUUFBQTs7R0FFQSxRQUFBO0lBQ0EsS0FBQTtLQUNBLElBQUEsV0FBQSxTQUFBLE1BQUEsTUFBQSxTQUFBLEdBQUEsTUFBQSxXQUFBO0tBQ0EsSUFBQSxRQUFBLFVBQUEsbUJBQUEsU0FBQSxZQUFBLE9BQUEsbUJBQUEsU0FBQSxXQUFBLEtBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQSxNQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBO0tBQ0EsTUFBQSxRQUFBLFVBQUEsbUJBQUEsU0FBQSxhQUFBLE9BQUEsbUJBQUEsU0FBQSxXQUFBLEtBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQTtLQUNBLE1BQUEsVUFBQTtNQUNBLE9BQUE7TUFDQSxNQUFBOztLQUVBLE1BQUEsV0FBQTtNQUNBLE9BQUEsVUFBQSxtQkFBQSxTQUFBLFlBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBO01BQ0EsU0FBQTtPQUNBLE9BQUE7T0FDQSxNQUFBOzs7S0FHQTs7O0dBR0EsT0FBQTs7RUFFQSxTQUFBLGdCQUFBO0dBQ0E7R0FDQSxZQUFBLE9BQUEsT0FBQSxLQUFBLFVBQUEsS0FBQTtJQUNBLEdBQUEsTUFBQTtJQUNBLEdBQUEsWUFBQSxtQkFBQTtJQUNBLFNBQUEsWUFBQTtNQUNBLEdBQUEsVUFBQSxTQUFBOzs7Ozs7RUFNQSxPQUFBLElBQUEsdUJBQUEsVUFBQTtHQUNBOzs7Ozs7O0FDM0dBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHVFQUFBLFVBQUEsWUFBQSxZQUFBLGdCQUFBOztJQUVBLElBQUEsS0FBQTtJQUNBLEdBQUEsYUFBQTs7Ozs7O0FDTkEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsMkhBQUEsVUFBQSxRQUFBLE9BQUEsVUFBQSxvQkFBQSxhQUFBLGdCQUFBLE9BQUE7O0VBRUEsSUFBQSxLQUFBOztJQUVBLEdBQUEsUUFBQTtFQUNBLEdBQUEsUUFBQTtFQUNBLEdBQUEsTUFBQTtFQUNBLEdBQUEsTUFBQTtFQUNBLEdBQUEsV0FBQTtFQUNBO0lBQ0EsR0FBQSxVQUFBO01BQ0EsUUFBQTtRQUNBLFVBQUEsVUFBQTtVQUNBLE9BQUEsR0FBQTs7SUFFQSxrQkFBQSxVQUFBO0tBQ0EsSUFBQSxPQUFBO01BQ0EsT0FBQTs7S0FFQSxHQUFBLE1BQUEsU0FBQSxLQUFBOztJQUVBLFlBQUEsVUFBQTtLQUNBLFFBQUEsSUFBQTtLQUNBLFFBQUEsUUFBQSxHQUFBLFNBQUEsU0FBQSxNQUFBLElBQUE7TUFDQSxlQUFBLFdBQUEsS0FBQSxJQUFBLEtBQUEsU0FBQSxLQUFBO09BQ0EsV0FBQSxLQUFBLEdBQUEsTUFBQTtPQUNBLEdBQUEsV0FBQTs7OztJQUlBLFlBQUEsU0FBQSxNQUFBLEtBQUEsU0FBQSxLQUFBO0tBQ0EsZUFBQSxXQUFBLEtBQUEsSUFBQSxLQUFBLFNBQUEsS0FBQTtNQUNBLFdBQUEsS0FBQSxHQUFBLE1BQUE7TUFDQSxHQUFBLFlBQUE7Ozs7TUFJQSxVQUFBOzs7RUFHQTs7O0VBR0EsU0FBQSxRQUFBOzs7RUFHQSxTQUFBLFdBQUEsTUFBQSxLQUFBO0dBQ0EsUUFBQSxRQUFBLE1BQUEsU0FBQSxPQUFBLElBQUE7SUFDQSxHQUFBLE1BQUEsTUFBQSxLQUFBLEdBQUE7S0FDQSxLQUFBLE9BQUEsS0FBQTtLQUNBLE9BQUE7O0lBRUEsR0FBQSxNQUFBLFNBQUE7S0FDQSxJQUFBLFlBQUEsV0FBQSxNQUFBLE1BQUE7S0FDQSxHQUFBLFVBQUE7TUFDQSxPQUFBOzs7O0dBSUEsT0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFvQkEsU0FBQSxXQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBbUJBLFNBQUEsUUFBQTtHQUNBLEdBQUEsTUFBQTtHQUNBLEdBQUEsTUFBQTtHQUNBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBLElBQUE7S0FDQSxHQUFBLE1BQUEsS0FBQSxJQUFBLEtBQUEsT0FBQSxHQUFBO0tBQ0EsR0FBQSxNQUFBLEtBQUEsSUFBQSxLQUFBLE9BQUEsR0FBQTs7R0FFQSxHQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsT0FBQSxDQUFBLEdBQUEsSUFBQSxHQUFBLE1BQUEsTUFBQSxDQUFBLEVBQUE7O0VBRUEsU0FBQSxjQUFBLElBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQSxJQUFBO0tBQ0EsR0FBQSxLQUFBLE9BQUEsSUFBQTtNQUNBLFFBQUEsS0FBQTs7O0dBR0EsT0FBQTs7RUFFQSxTQUFBLGVBQUEsU0FBQTtHQUNBLElBQUEsUUFBQTtHQUNBLElBQUEsTUFBQSxRQUFBLFdBQUE7R0FDQSxJQUFBLFFBQUEsY0FBQSxRQUFBLEdBQUE7R0FDQSxJQUFBLE9BQUEsUUFBQTs7R0FFQSxRQUFBO0lBQ0EsS0FBQTtLQUNBLElBQUEsV0FBQSxTQUFBLE1BQUEsTUFBQSxTQUFBLEdBQUEsTUFBQSxXQUFBO0tBQ0EsSUFBQSxRQUFBLFVBQUEsbUJBQUEsU0FBQSxZQUFBLE9BQUEsbUJBQUEsU0FBQSxXQUFBLEtBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQSxNQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBO0tBQ0EsTUFBQSxRQUFBLFVBQUEsbUJBQUEsU0FBQSxhQUFBLE9BQUEsbUJBQUEsU0FBQSxXQUFBLEtBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQTtLQUNBLE1BQUEsVUFBQTtNQUNBLE9BQUE7TUFDQSxNQUFBOztLQUVBLE1BQUEsV0FBQTtNQUNBLE9BQUEsVUFBQSxtQkFBQSxTQUFBLFlBQUEsT0FBQSxtQkFBQSxTQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFNBQUEsV0FBQSxLQUFBO01BQ0EsU0FBQTtPQUNBLE9BQUE7T0FDQSxNQUFBOzs7S0FHQTs7O0dBR0EsT0FBQTs7RUFFQSxTQUFBLGdCQUFBO0dBQ0E7R0FDQSxZQUFBLE9BQUEsT0FBQSxLQUFBLFVBQUEsS0FBQTtJQUNBLEdBQUEsTUFBQTtJQUNBLEdBQUEsWUFBQSxtQkFBQTtJQUNBLFNBQUEsWUFBQTtNQUNBLEdBQUEsVUFBQSxTQUFBOzs7Ozs7RUFNQSxPQUFBLElBQUEsdUJBQUEsVUFBQTtHQUNBOzs7Ozs7O0FDL0pBLENBQUEsVUFBQTtJQUNBO0lBQ0EsUUFBQSxPQUFBLG1CQUFBLFdBQUEsb0NBQUEsU0FBQSxlQUFBO1FBQ0EsSUFBQSxLQUFBO1FBQ0EsR0FBQSxZQUFBLGVBQUE7Ozs7QUNKQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxtSUFBQSxTQUFBLFFBQUEsU0FBQSxVQUFBLFdBQUEsV0FBQSxnQkFBQSxvQkFBQSxRQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsVUFBQTtFQUNBLEdBQUEsU0FBQSxNQUFBLEdBQUEsZUFBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsT0FBQSxNQUFBLEdBQUEsU0FBQTtFQUNBLEdBQUEsUUFBQTtHQUNBLEtBQUEsQ0FBQTtHQUNBLEtBQUE7O0VBRUEsR0FBQSxVQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxVQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxjQUFBOztFQUVBLEdBQUEsYUFBQTtFQUNBLEdBQUEsVUFBQTtFQUNBLEdBQUEsWUFBQTs7RUFFQTs7RUFFQSxTQUFBLFdBQUE7R0FDQTtHQUNBLG1CQUFBLFNBQUE7R0FDQSxtQkFBQSxhQUFBO0dBQ0EsU0FBQSxXQUFBOzs7O0lBSUEsSUFBQSxPQUFBLE9BQUEsTUFBQTtLQUNBLEdBQUEsT0FBQSxPQUFBLE9BQUE7S0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsR0FBQSxVQUFBLE1BQUEsUUFBQSxLQUFBO01BQ0EsSUFBQSxHQUFBLFVBQUEsTUFBQSxHQUFBLFFBQUEsT0FBQSxPQUFBLE1BQUE7T0FDQSxHQUFBLFNBQUE7OztXQUdBLElBQUEsQ0FBQSxHQUFBLFFBQUE7S0FDQSxHQUFBLFNBQUE7OztJQUdBLElBQUEsR0FBQSxVQUFBLFFBQUE7S0FDQSxJQUFBLE9BQUEsT0FBQSxVQUFBLE9BQUE7TUFDQSxHQUFBLFNBQUEsT0FBQSxPQUFBO01BQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsVUFBQSxPQUFBLFFBQUEsS0FBQTtPQUNBLElBQUEsR0FBQSxVQUFBLE9BQUEsR0FBQSxVQUFBLE9BQUEsT0FBQSxRQUFBO1FBQ0EsR0FBQSxlQUFBOzs7WUFHQSxJQUFBLENBQUEsR0FBQSxjQUFBO01BQ0EsR0FBQSxlQUFBOztXQUVBLElBQUEsQ0FBQSxHQUFBLGNBQUE7S0FDQSxHQUFBLGVBQUE7O0lBRUEsUUFBQSxHQUFBLE1BQUEsR0FBQTs7OztFQUlBLFNBQUEsYUFBQTtHQUNBLEdBQUEsUUFBQTtJQUNBLEtBQUEsQ0FBQTtJQUNBLEtBQUE7Ozs7RUFJQSxTQUFBLGNBQUE7O0dBRUEsSUFBQSxPQUFBLFFBQUEsUUFBQSx1QkFBQTtJQUNBLE9BQUEsR0FBQTtVQUNBO0lBQ0EsT0FBQSxHQUFBOzs7OztFQUtBLFNBQUEsUUFBQSxTQUFBO0dBQ0EsSUFBQSxPQUFBLEdBQUEsS0FBQSxRQUFBLFdBQUE7R0FDQSxPQUFBOzs7RUFHQSxTQUFBLFlBQUE7R0FDQSxJQUFBLENBQUEsR0FBQSxTQUFBO0lBQ0EsT0FBQTs7O0dBR0EsT0FBQSxDQUFBLEdBQUEsUUFBQSxHQUFBLFdBQUEsS0FBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxLQUFBO0dBQ0EsR0FBQSxVQUFBO0dBQ0E7R0FDQTs7RUFFQSxTQUFBLHFCQUFBO0dBQ0EsT0FBQSxHQUFBLHVCQUFBO0lBQ0EsS0FBQSxHQUFBLFFBQUE7O0dBRUEsU0FBQSxVQUFBO0tBQ0E7OztHQUdBOztFQUVBLFNBQUEsYUFBQSxLQUFBLEdBQUE7R0FDQSxJQUFBLElBQUEsbUJBQUEsZUFBQSxJQUFBLFFBQUEsV0FBQSxtQkFBQSxLQUFBO0dBQ0EsSUFBQSxPQUFBLEVBQUEsU0FBQSxhQUFBO0lBQ0EsR0FBQSxVQUFBO0lBQ0E7VUFDQTtJQUNBLE9BQUEsTUFBQTs7OztFQUlBLFNBQUEsYUFBQTtHQUNBLGVBQUEsb0JBQUEsR0FBQSxVQUFBLElBQUEsR0FBQSxRQUFBLEtBQUEsR0FBQSxRQUFBLEtBQUEsU0FBQSxNQUFBO0lBQ0EsR0FBQSxjQUFBOzs7O0VBSUEsU0FBQSxRQUFBLE1BQUE7R0FDQSxHQUFBLE9BQUE7R0FDQSxTQUFBLFdBQUE7SUFDQSxPQUFBLEdBQUEsdUJBQUE7S0FDQSxNQUFBOztNQUVBOzs7O0VBSUEsU0FBQSxVQUFBLFFBQUE7R0FDQSxHQUFBLFNBQUEsVUFBQTtHQUNBLFNBQUEsV0FBQTtJQUNBLE9BQUEsR0FBQSx1QkFBQTtLQUNBLFFBQUEsR0FBQTs7TUFFQTs7O0VBR0EsU0FBQSxRQUFBLE1BQUEsUUFBQTtHQUNBLGVBQUEsaUJBQUEsR0FBQSxVQUFBLElBQUEsR0FBQSxNQUFBLEdBQUEsUUFBQSxLQUFBLFNBQUEsS0FBQTtJQUNBO0lBQ0EsR0FBQSxPQUFBO0lBQ0EsSUFBQSxNQUFBO0lBQ0EsSUFBQSxPQUFBLE9BQUEsS0FBQTtLQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLEtBQUEsUUFBQSxLQUFBO01BQ0EsSUFBQSxHQUFBLEtBQUEsR0FBQSxPQUFBLE9BQUEsT0FBQSxLQUFBO09BQ0EsR0FBQSxVQUFBLEdBQUEsS0FBQTtPQUNBLE1BQUEsR0FBQSxRQUFBOzs7OztJQUtBLFFBQUEsUUFBQSxHQUFBLE1BQUEsU0FBQSxNQUFBO0tBQ0EsS0FBQSxPQUFBLEdBQUEsS0FBQSxRQUFBLFFBQUE7S0FDQSxJQUFBLEdBQUEsU0FBQTtNQUNBLElBQUEsS0FBQSxPQUFBLEdBQUEsUUFBQSxLQUFBO09BQ0EsV0FBQTs7O0tBR0EsR0FBQSxNQUFBLE1BQUEsR0FBQSxJQUFBLENBQUEsR0FBQSxNQUFBLEtBQUEsV0FBQSxLQUFBO0tBQ0EsR0FBQSxNQUFBLE1BQUEsR0FBQSxJQUFBLENBQUEsR0FBQSxNQUFBLEtBQUEsV0FBQSxLQUFBOzs7SUFHQSxHQUFBLGdCQUFBO0tBQ0EsT0FBQSxHQUFBLFVBQUEsT0FBQSxjQUFBO0tBQ0EsT0FBQTtLQUNBLE1BQUEsR0FBQSxLQUFBOzs7SUFHQTtJQUNBLEdBQUEsY0FBQSxHQUFBLE1BQUEsU0FBQSxPQUFBLENBQUEsR0FBQSxNQUFBLEtBQUEsR0FBQSxNQUFBLE1BQUEsTUFBQSxDQUFBLEdBQUE7SUFDQSxtQkFBQSxRQUFBLEdBQUEsTUFBQSxHQUFBLFVBQUEsT0FBQSxZQUFBOzs7Ozs7O0VBT0EsU0FBQSxlQUFBLFNBQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxJQUFBLE1BQUEsUUFBQSxXQUFBLG1CQUFBLEtBQUE7R0FDQSxJQUFBLFNBQUEsbUJBQUEsZUFBQTs7R0FFQSxJQUFBLFFBQUE7R0FDQSxJQUFBLE9BQUEsUUFBQTtHQUNBLFFBQUEsV0FBQTtHQUNBLElBQUEsR0FBQSxTQUFBO0lBQ0EsSUFBQSxHQUFBLFFBQUEsT0FBQSxLQUFBO0tBQ0EsUUFBQSxXQUFBOzs7Ozs7R0FNQSxRQUFBO0lBQ0EsS0FBQTtLQUNBLElBQUEsT0FBQSxPQUFBLFVBQUEsZUFBQSxPQUFBLFVBQUEsTUFBQTs7TUFFQSxJQUFBLFdBQUEsU0FBQSxHQUFBLFlBQUEsV0FBQSxPQUFBLFlBQUE7TUFDQSxJQUFBLFFBQUEsVUFBQSxtQkFBQSxRQUFBLFlBQUEsT0FBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBLE1BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUE7TUFDQSxNQUFBLFFBQUEsVUFBQSxtQkFBQSxRQUFBLFlBQUEsT0FBQSxtQkFBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBO01BQ0EsTUFBQSxVQUFBO09BQ0EsT0FBQTtPQUNBLE1BQUE7O01BRUEsTUFBQSxXQUFBO09BQ0EsT0FBQSxVQUFBLG1CQUFBLFFBQUEsWUFBQSxPQUFBLG1CQUFBLFFBQUEsV0FBQSxLQUFBLE9BQUEsbUJBQUEsUUFBQSxXQUFBLEtBQUE7T0FDQSxTQUFBO1FBQ0EsT0FBQTtRQUNBLE1BQUE7Ozs7WUFJQTtNQUNBLE1BQUEsUUFBQTtNQUNBLE1BQUEsVUFBQTtPQUNBLE9BQUE7T0FDQSxNQUFBOzs7O0tBSUE7O0dBRUEsT0FBQTtHQUNBOzs7RUFHQSxHQUFBLG9CQUFBLFNBQUEsZUFBQSxjQUFBOztHQUVBLFFBQUEsR0FBQSxNQUFBLEdBQUE7Ozs7OztBQzVPQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSw4Q0FBQSxVQUFBLFNBQUEsTUFBQTs7RUFFQSxJQUFBLEtBQUE7SUFDQSxHQUFBLE9BQUE7SUFDQSxHQUFBLGdCQUFBO0VBQ0EsR0FBQSxxQkFBQTs7SUFFQSxTQUFBLGNBQUEsT0FBQTtHQUNBLE9BQUEsR0FBQSxPQUFBLFFBQUEsV0FBQSxHQUFBLE1BQUEsQ0FBQSxRQUFBO0dBQ0E7O0VBRUEsU0FBQSxtQkFBQSxNQUFBLE9BQUE7OztHQUdBOzs7Ozs7QUNqQkEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEseURBQUEsU0FBQSxZQUFBLFFBQUEsT0FBQSxPQUFBO1FBQ0EsSUFBQSxLQUFBO1FBQ0EsR0FBQSxZQUFBO1FBQ0EsR0FBQSxVQUFBO1FBQ0EsR0FBQSxnQkFBQTs7UUFFQSxHQUFBLE9BQUE7VUFDQSxNQUFBO1VBQ0EsU0FBQTs7O1FBR0E7O1FBRUEsU0FBQSxVQUFBO1VBQ0EsR0FBQTs7O1FBR0EsU0FBQSxlQUFBOztVQUVBLEdBQUEsTUFBQSxrQkFBQTs7OztRQUlBLFNBQUEsU0FBQTtVQUNBLE1BQUEsTUFBQSxHQUFBLE1BQUEsS0FBQSxTQUFBLFNBQUE7WUFDQSxPQUFBLFFBQUE7WUFDQSxRQUFBLElBQUEsV0FBQTtZQUNBLE9BQUEsR0FBQSxXQUFBLGFBQUEsTUFBQSxRQUFBLFlBQUEsV0FBQSxhQUFBO2FBQ0EsTUFBQSxTQUFBLFNBQUE7WUFDQSxPQUFBLE1BQUEsd0NBQUE7Ozs7Ozs7QUNoQ0EsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsWUFBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxrSEFBQSxTQUFBLFFBQUEsWUFBQSxTQUFBLFFBQUEsYUFBQSxrQkFBQSxvQkFBQTs7O0VBR0EsSUFBQSxPQUFBO0dBQ0EsVUFBQTtFQUNBLElBQUEsT0FBQSxhQUFBLEtBQUE7R0FDQSxPQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLElBQUEsU0FBQSxtQkFBQSxLQUFBO0VBQ0EsR0FBQSxxQkFBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsY0FBQSxFQUFBLFVBQUEsbUZBQUEsUUFBQTtHQUNBLFFBQUE7R0FDQSxpQkFBQTtHQUNBLE1BQUE7R0FDQSxjQUFBOztFQUVBLEdBQUEsWUFBQTtHQUNBLFdBQUE7SUFDQSxLQUFBO0lBQ0EsS0FBQTs7R0FFQSxXQUFBO0lBQ0EsS0FBQSxDQUFBO0lBQ0EsS0FBQSxDQUFBOzs7RUFHQSxHQUFBLFdBQUE7R0FDQSxRQUFBOztFQUVBLEdBQUEsZUFBQTtHQUNBLE9BQUE7SUFDQSxTQUFBO0lBQ0EsT0FBQTs7OztFQUlBLElBQUEsWUFBQSxFQUFBO0VBQ0EsVUFBQSxZQUFBO0VBQ0EsVUFBQSxhQUFBLFdBQUE7R0FDQSxFQUFBLEtBQUEsV0FBQSxNQUFBOztFQUVBLFVBQUEsUUFBQSxXQUFBOztHQUVBLElBQUEsWUFBQSxFQUFBLFFBQUEsT0FBQSxPQUFBO0dBQ0EsSUFBQSxPQUFBLEVBQUEsUUFBQSxPQUFBLEtBQUEsa0NBQUE7R0FDQSxLQUFBLGNBQUE7R0FDQSxLQUFBLFFBQUE7R0FDQSxFQUFBLFNBQUEsd0JBQUE7R0FDQSxFQUFBLFNBQUEsWUFBQSxXQUFBLFNBQUEsV0FBQTtLQUNBLElBQUEsTUFBQSxtQkFBQTtLQUNBLElBQUEsR0FBQSxTQUFBO01BQ0EsSUFBQSxZQUFBLEdBQUE7TUFDQSxHQUFBLFVBQUE7WUFDQTtNQUNBLElBQUEsU0FBQSxHQUFBO01BQ0EsR0FBQSxZQUFBO01BQ0EsR0FBQSxVQUFBOzs7O0dBSUEsT0FBQTs7RUFFQSxJQUFBLFdBQUEsRUFBQTtFQUNBLFNBQUEsWUFBQTtFQUNBLFNBQUEsYUFBQSxXQUFBO0dBQ0EsRUFBQSxLQUFBLFdBQUEsTUFBQTs7RUFFQSxTQUFBLFFBQUEsV0FBQTtHQUNBLElBQUEsWUFBQSxFQUFBLFFBQUEsT0FBQSxPQUFBO0dBQ0EsSUFBQSxPQUFBLEVBQUEsUUFBQSxPQUFBLEtBQUEsa0NBQUE7R0FDQSxJQUFBLE9BQUEsRUFBQSxRQUFBLE9BQUEsV0FBQSw2QkFBQTtHQUNBLEtBQUEsUUFBQTtHQUNBLEtBQUEsY0FBQTtHQUNBLEVBQUEsU0FBQSx3QkFBQTtHQUNBLEVBQUEsU0FBQSxZQUFBLFdBQUEsU0FBQSxXQUFBO0tBQ0EsSUFBQSxNQUFBLG1CQUFBO0tBQ0EsSUFBQSxRQUFBLENBQUEsV0FBQSxZQUFBOztLQUVBLEdBQUEsT0FBQSxTQUFBLEtBQUEsUUFBQSx5Q0FBQSxDQUFBLEVBQUE7T0FDQSxPQUFBLEdBQUEsc0NBQUE7UUFDQSxJQUFBLE9BQUEsT0FBQTtRQUNBLE1BQUEsT0FBQSxPQUFBO1FBQ0EsU0FBQSxPQUFBLE9BQUE7UUFDQSxXQUFBLE9BQUEsT0FBQTtRQUNBLFNBQUEsT0FBQSxPQUFBO1NBQ0E7UUFDQSxPQUFBOztPQUVBLFdBQUEsY0FBQTs7O0dBR0EsT0FBQTs7OztFQUlBLFNBQUEsYUFBQSxhQUFBO0lBQ0EsSUFBQSxNQUFBLG1CQUFBLE9BQUE7SUFDQSxRQUFBLElBQUE7SUFDQSxJQUFBLEdBQUEsU0FBQTtLQUNBLElBQUEsWUFBQSxHQUFBO0tBQ0EsR0FBQSxVQUFBO1dBQ0E7S0FDQSxJQUFBLFNBQUEsR0FBQTtLQUNBLEdBQUEsWUFBQTtLQUNBLEdBQUEsVUFBQTs7Ozs7RUFLQSxZQUFBLE9BQUEsT0FBQSxLQUFBLFNBQUEsS0FBQTs7R0FFQSxtQkFBQSxPQUFBOztHQUVBLElBQUEsTUFBQSxvREFBQSxtQkFBQSxZQUFBLCtDQUFBLG1CQUFBO0dBQ0EsSUFBQSxRQUFBLElBQUEsRUFBQSxVQUFBLFVBQUE7SUFDQSxLQUFBO0lBQ0EsT0FBQTtJQUNBLGFBQUE7SUFDQSxpQkFBQSxDQUFBLG1CQUFBLFlBQUE7SUFDQSxhQUFBO0lBQ0Esc0JBQUEsU0FBQSxTQUFBO0tBQ0EsT0FBQSxRQUFBLFdBQUE7O0lBRUEsUUFBQSxTQUFBLFNBQUEsU0FBQTs7S0FFQSxPQUFBOztJQUVBLE9BQUEsU0FBQSxTQUFBO0tBQ0EsSUFBQSxRQUFBO0tBQ0EsTUFBQSxRQUFBO0tBQ0EsTUFBQSxVQUFBO01BQ0EsT0FBQTtNQUNBLE1BQUE7O0tBRUEsT0FBQTs7OztHQUlBLElBQUEsU0FBQSxtQkFBQSxTQUFBO0dBQ0EsSUFBQSxXQUFBO0dBQ0EsSUFBQSxXQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoSkEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsMEVBQUEsU0FBQSxRQUFBLFlBQUEsb0JBQUEsUUFBQTs7UUFFQSxJQUFBLEtBQUE7UUFDQSxHQUFBLFlBQUEsT0FBQSxRQUFBLEdBQUE7UUFDQSxHQUFBLFVBQUEsT0FBQSxRQUFBLEdBQUE7UUFDQSxHQUFBLE9BQUEsT0FBQSxRQUFBLEdBQUE7UUFDQSxHQUFBLFVBQUE7UUFDQSxHQUFBLFlBQUEsbUJBQUE7UUFDQSxHQUFBLFVBQUE7UUFDQSxHQUFBLFlBQUE7UUFDQSxHQUFBLGNBQUE7O1FBRUEsU0FBQSxXQUFBO1VBQ0EsSUFBQSxPQUFBO1VBQ0EsUUFBQSxRQUFBLEdBQUEsTUFBQSxTQUFBLE1BQUE7WUFDQSxLQUFBLEdBQUEsVUFBQSxvQkFBQSxXQUFBLEtBQUEsR0FBQSxVQUFBO1lBQ0EsS0FBQSxXQUFBLFNBQUEsS0FBQTs7VUFFQSxJQUFBLFNBQUEsUUFBQSxXQUFBLEdBQUEsTUFBQSxDQUFBLEdBQUEsVUFBQSxrQkFBQSxVQUFBO1VBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLE9BQUEsUUFBQSxLQUFBO1lBQ0EsSUFBQSxPQUFBLEdBQUEsT0FBQSxHQUFBLFFBQUEsS0FBQTtjQUNBLE9BQUEsSUFBQTs7O1VBR0EsR0FBQSxRQUFBLEdBQUEsVUFBQSxpQkFBQSxXQUFBO1VBQ0EsR0FBQSxnQkFBQTtjQUNBLE1BQUEsR0FBQSxVQUFBO2NBQ0EsTUFBQSxHQUFBLFVBQUEsaUJBQUE7OztRQUdBLFNBQUEsUUFBQSxRQUFBO1VBQ0EsSUFBQSxTQUFBLFFBQUEsV0FBQSxHQUFBLE1BQUEsQ0FBQSxHQUFBLFVBQUEsa0JBQUEsVUFBQTtVQUNBLElBQUEsT0FBQTtVQUNBLFFBQUEsUUFBQSxRQUFBLFNBQUEsTUFBQSxJQUFBO1lBQ0EsR0FBQSxLQUFBLFdBQUEsUUFBQSxRQUFBO2NBQ0EsT0FBQTs7O1VBR0EsT0FBQSxLQUFBOztRQUVBLFNBQUEsWUFBQTtPQUNBLElBQUEsQ0FBQSxHQUFBLFNBQUE7UUFDQSxPQUFBOztPQUVBLE9BQUEsQ0FBQSxHQUFBLFFBQUEsR0FBQSxXQUFBLEtBQUE7T0FDQTs7TUFFQSxTQUFBLGNBQUE7T0FDQSxJQUFBLENBQUEsR0FBQSxTQUFBO1FBQ0EsT0FBQTs7T0FFQSxPQUFBLEdBQUEsUUFBQSxpQkFBQSxJQUFBLGtCQUFBO09BQ0E7O1FBRUEsT0FBQSxPQUFBLGNBQUEsVUFBQSxHQUFBLEdBQUE7VUFDQSxJQUFBLE1BQUEsR0FBQTtZQUNBOzs7WUFHQSxHQUFBLEVBQUEsSUFBQTtjQUNBLEdBQUEsVUFBQSxPQUFBLG1CQUFBLFNBQUEsRUFBQSxLQUFBLFdBQUE7O1lBRUE7WUFDQSxnQkFBQSxFQUFBOzs7Ozs7Ozs7QUNuRUEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsZ0JBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsY0FBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSwwQkFBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxZQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLDhEQUFBLFNBQUEsUUFBQSxlQUFBLFlBQUE7UUFDQSxJQUFBLEtBQUE7UUFDQSxHQUFBLGVBQUE7UUFDQSxHQUFBLGFBQUEsUUFBQSxPQUFBLFFBQUEsR0FBQTs7UUFFQSxHQUFBLE9BQUEsVUFBQTs7WUFFQSxZQUFBLEtBQUEsa0JBQUEsR0FBQSxjQUFBLEtBQUEsU0FBQSxLQUFBO2NBQ0EsT0FBQSxRQUFBLEdBQUEsY0FBQSxLQUFBO2NBQ0EsT0FBQSxRQUFBLEdBQUEsS0FBQSxlQUFBO2NBQ0EsY0FBQTs7Ozs7UUFLQSxHQUFBLE9BQUEsVUFBQTtTQUNBLGNBQUE7Ozs7Ozs7QUNuQkEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsMERBQUEsU0FBQSxRQUFBLFlBQUEsY0FBQTs7TUFFQSxJQUFBLEtBQUE7TUFDQSxHQUFBLE9BQUE7TUFDQSxHQUFBLEtBQUEsUUFBQSxPQUFBLFFBQUEsR0FBQTs7TUFFQSxHQUFBLE9BQUEsVUFBQTs7VUFFQSxZQUFBLEtBQUEsa0JBQUEsR0FBQSxNQUFBLEtBQUEsU0FBQSxLQUFBO1lBQ0EsT0FBQSxRQUFBLEdBQUEsYUFBQSxLQUFBO1lBQ0EsT0FBQSxRQUFBLEdBQUEsS0FBQSxPQUFBO1lBQ0EsY0FBQTs7Ozs7TUFLQSxHQUFBLE9BQUEsVUFBQTtRQUNBLGNBQUE7Ozs7Ozs7O0FDcEJBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLDJDQUFBLFNBQUEsUUFBQSxjQUFBOztRQUVBLE9BQUEsT0FBQSxVQUFBO1lBQ0EsUUFBQSxJQUFBLE9BQUE7WUFDQSxPQUFBLEdBQUE7WUFDQSxjQUFBOzs7UUFHQSxPQUFBLE9BQUEsVUFBQTtTQUNBLGNBQUE7Ozs7Ozs7QUNaQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSw0Q0FBQSxTQUFBLFFBQUEsY0FBQTs7UUFFQSxPQUFBLE9BQUEsVUFBQTs7WUFFQSxjQUFBOzs7UUFHQSxPQUFBLE9BQUEsVUFBQTtTQUNBLGNBQUE7Ozs7Ozs7QUNYQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxtREFBQSxTQUFBLFFBQUEsY0FBQTs7UUFFQSxPQUFBLE9BQUEsVUFBQTs7OztRQUlBLE9BQUEsT0FBQSxVQUFBO1NBQ0EsY0FBQTs7Ozs7OztBQ1ZBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLGdEQUFBLFNBQUEsUUFBQSxjQUFBOzs7UUFHQSxPQUFBLE9BQUEsVUFBQTs7OztRQUlBLE9BQUEsT0FBQSxVQUFBO1NBQ0EsY0FBQTs7Ozs7OztBQ1hBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLGdFQUFBLFVBQUEsUUFBQSxjQUFBLGVBQUE7RUFDQSxPQUFBLFFBQUEsR0FBQSxtQkFBQTtFQUNBLE9BQUEsUUFBQSxHQUFBLGNBQUE7RUFDQSxPQUFBLFFBQUEsR0FBQSxVQUFBO0VBQ0EsT0FBQSxRQUFBLEdBQUEsZUFBQTtFQUNBLE9BQUEsUUFBQSxHQUFBLGFBQUE7RUFDQSxPQUFBLFFBQUEsR0FBQSxXQUFBO0VBQ0EsT0FBQSxPQUFBLFlBQUE7O0dBRUEsUUFBQSxRQUFBLE9BQUEsUUFBQSxHQUFBLEtBQUEsR0FBQSxNQUFBLFVBQUEsTUFBQSxLQUFBO0lBQ0EsSUFBQSxPQUFBLFFBQUE7S0FDQSxJQUFBLE9BQUEsYUFBQSxhQUFBLFFBQUEsYUFBQTtNQUNBLGFBQUEsYUFBQSxLQUFBO09BQ0EsYUFBQTtPQUNBLE9BQUE7OztLQUdBLElBQUEsT0FBQSxhQUFBLGFBQUE7S0FDQSxJQUFBLE9BQUEsUUFBQSxHQUFBLGFBQUE7TUFDQSxLQUFBLGVBQUEsT0FBQSxRQUFBLEdBQUE7O0tBRUEsSUFBQSxPQUFBLFFBQUEsR0FBQSxZQUFBO01BQ0EsS0FBQSxPQUFBLE9BQUEsUUFBQSxHQUFBOztLQUVBLElBQUEsT0FBQSxRQUFBLEdBQUEsY0FBQTtNQUNBLEtBQUEsYUFBQSxPQUFBLFFBQUEsR0FBQTs7S0FFQSxJQUFBLE9BQUEsUUFBQSxHQUFBLFVBQUE7TUFDQSxLQUFBLFlBQUEsT0FBQSxRQUFBLEdBQUE7O0tBRUEsSUFBQSxPQUFBLFFBQUEsR0FBQSxTQUFBOztNQUVBLElBQUEsT0FBQSxLQUFBLFNBQUEsYUFBQTtPQUNBLEtBQUEsUUFBQSxPQUFBLFFBQUEsR0FBQTtPQUNBLEtBQUEsV0FBQSxPQUFBLFFBQUEsR0FBQSxTQUFBOzs7Ozs7R0FNQSxjQUFBO0dBQ0EsYUFBQTs7OztFQUlBLE9BQUEsT0FBQSxZQUFBO0dBQ0EsT0FBQSxRQUFBLEdBQUEsY0FBQTtHQUNBLE9BQUEsUUFBQSxHQUFBLGVBQUE7R0FDQSxPQUFBLFFBQUEsR0FBQSxhQUFBO0dBQ0EsY0FBQTs7Ozs7OztBQ3BEQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSw4Q0FBQSxTQUFBLFFBQUEsY0FBQTtRQUNBLE9BQUEsT0FBQSxPQUFBLFFBQUEsR0FBQTtRQUNBLEdBQUEsT0FBQSxPQUFBLFFBQUEsR0FBQSxLQUFBLE1BQUEsT0FBQSxTQUFBLFlBQUE7VUFDQSxPQUFBLFFBQUEsR0FBQSxLQUFBLE1BQUEsT0FBQSxRQUFBOztZQUVBO1VBQ0EsR0FBQSxPQUFBLFFBQUEsR0FBQSxLQUFBLE1BQUEsT0FBQSxNQUFBLE1BQUE7WUFDQSxPQUFBLFFBQUEsT0FBQSxRQUFBLEdBQUEsS0FBQSxNQUFBLE9BQUEsTUFBQTs7VUFFQSxHQUFBLE9BQUEsUUFBQSxHQUFBLEtBQUEsTUFBQSxPQUFBLE1BQUEsWUFBQTtZQUNBLE9BQUEsY0FBQSxPQUFBLFFBQUEsR0FBQSxLQUFBLE1BQUEsT0FBQSxNQUFBOzs7O1FBSUEsT0FBQSxPQUFBLFVBQUE7VUFDQSxPQUFBLFFBQUEsR0FBQSxLQUFBLE1BQUEsT0FBQSxNQUFBLFFBQUEsT0FBQTtVQUNBLE9BQUEsUUFBQSxHQUFBLEtBQUEsTUFBQSxPQUFBLE1BQUEsY0FBQSxPQUFBO1VBQ0EsY0FBQTs7O1FBR0EsT0FBQSxPQUFBLFVBQUE7U0FDQSxjQUFBOzs7Ozs7O0FDeEJBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLDJDQUFBLFNBQUEsUUFBQSxjQUFBO1FBQ0EsT0FBQSxPQUFBLE9BQUEsUUFBQSxHQUFBLFNBQUE7UUFDQSxPQUFBLE9BQUEsVUFBQTs7WUFFQSxjQUFBOzs7UUFHQSxPQUFBLE9BQUEsVUFBQTtTQUNBLGNBQUE7Ozs7Ozs7QUNYQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxxREFBQSxTQUFBLFFBQUEsTUFBQSxlQUFBO0VBQ0EsT0FBQSxHQUFBLE1BQUEsS0FBQSxtQkFBQSx1Q0FBQSxPQUFBLEdBQUEsS0FBQSxLQUFBLE1BQUEsT0FBQSxHQUFBLEtBQUE7RUFDQSxPQUFBLE9BQUEsV0FBQTs7R0FFQSxRQUFBLElBQUEsT0FBQTs7O0VBR0EsT0FBQSxPQUFBLFdBQUE7R0FDQSxjQUFBOzs7Ozs7O0FDWEEsQ0FBQSxVQUFBO0lBQ0E7O0lBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsOENBQUEsU0FBQSxRQUFBLGNBQUE7O1FBRUEsT0FBQSxPQUFBLFVBQUE7Ozs7UUFJQSxPQUFBLE9BQUEsVUFBQTtTQUNBLGNBQUE7Ozs7Ozs7QUNWQSxDQUFBLFVBQUE7SUFDQTs7SUFFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxnREFBQSxTQUFBLFFBQUEsY0FBQTs7UUFFQSxPQUFBLE9BQUEsVUFBQTs7OztRQUlBLE9BQUEsT0FBQSxVQUFBO1NBQ0EsY0FBQTs7Ozs7OztBQ1ZBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHdEQUFBLFNBQUEsT0FBQSxRQUFBLGNBQUE7O1FBRUEsT0FBQSxPQUFBLFVBQUE7WUFDQSxPQUFBLEdBQUEsV0FBQTtZQUNBLE9BQUEsR0FBQSxLQUFBLFlBQUEsT0FBQSxHQUFBLFVBQUE7WUFDQSxPQUFBLEdBQUEsS0FBQSxnQkFBQSxPQUFBLEdBQUEsVUFBQTtZQUNBLE9BQUEsR0FBQTtXQUNBLGNBQUE7OztRQUdBLE9BQUEsT0FBQSxVQUFBO1VBQ0EsT0FBQSxHQUFBO1NBQ0EsY0FBQTs7Ozs7OztBQ2ZBLENBQUEsVUFBQTtJQUNBOztJQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHVEQUFBLFNBQUEsUUFBQSxRQUFBLGNBQUE7O1FBRUEsT0FBQSxPQUFBLFVBQUE7O1lBRUEsT0FBQSxHQUFBO1lBQ0EsT0FBQSxHQUFBLE9BQUEsUUFBQTtZQUNBLGNBQUE7OztRQUdBLE9BQUEsT0FBQSxVQUFBO1NBQ0EsY0FBQTs7Ozs7OztBQ2JBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHFFQUFBLFVBQUEsUUFBQSxjQUFBLGVBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLE9BQUEsYUFBQTtFQUNBLEdBQUEsTUFBQSxLQUFBO0VBQ0EsR0FBQSxPQUFBLGFBQUE7RUFDQSxHQUFBLE9BQUEsWUFBQTtHQUNBLGNBQUE7OztFQUdBLEdBQUEsT0FBQSxZQUFBO0dBQ0EsY0FBQTs7RUFFQSxPQUFBLE9BQUEsV0FBQSxVQUFBLEdBQUEsR0FBQTtHQUNBLElBQUEsTUFBQSxHQUFBO0lBQ0E7O0dBRUEsUUFBQSxRQUFBLEdBQUEsVUFBQSxNQUFBLEtBQUE7SUFDQSxJQUFBLEtBQUEsTUFBQSxLQUFBLEdBQUEsR0FBQSxNQUFBO0tBQ0EsUUFBQSxRQUFBLEtBQUEsTUFBQSxRQUFBLFVBQUEsT0FBQSxHQUFBO01BQ0EsSUFBQSxNQUFBLFFBQUEsS0FBQSxNQUFBLFFBQUEsR0FBQTtPQUNBLGFBQUE7T0FDQSxLQUFBLE1BQUEsT0FBQSxPQUFBLEdBQUE7YUFDQSxJQUFBLE1BQUEsUUFBQSxHQUFBO09BQ0EsSUFBQSxNQUFBLFVBQUEsR0FBQSxLQUFBO1FBQ0EsYUFBQTtRQUNBLEtBQUEsTUFBQSxPQUFBLE9BQUEsR0FBQTs7OztLQUlBLEdBQUEsS0FBQSxPQUFBLEtBQUE7OztHQUdBLElBQUEsR0FBQSxLQUFBLFVBQUEsR0FBQTtJQUNBLGNBQUE7O0tBRUE7Ozs7O0FDdENBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLFlBQUEsWUFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFFBQUE7O0VBRUEsU0FBQSxNQUFBLE1BQUE7R0FDQSxHQUFBLENBQUEsR0FBQSxNQUFBO0dBQ0EsT0FBQSxHQUFBLEtBQUEsS0FBQTs7Ozs7O0FDVkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsUUFBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtHQUNBLGtCQUFBO0lBQ0EsTUFBQTtJQUNBLFNBQUE7SUFDQSxXQUFBOztHQUVBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTs7Ozs7Ozs7O0FDaEJBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLDBCQUFBLFNBQUEsVUFBQTtFQUNBLE9BQUE7UUFDQSxVQUFBO1FBQ0EsTUFBQSxTQUFBLFFBQUEsVUFBQTtZQUNBLFNBQUEsVUFBQTtnQkFDQSxTQUFBLEdBQUE7ZUFDQTs7Ozs7Ozs7QUNUQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxlQUFBLFdBQUE7OztFQUdBLElBQUEsS0FBQTtFQUNBLEdBQUEsV0FBQSxRQUFBLEtBQUEsR0FBQTtFQUNBLEdBQUEsa0JBQUE7RUFDQSxHQUFBLGNBQUE7R0FDQSxNQUFBO0dBQ0EsV0FBQTtHQUNBLFdBQUE7R0FDQSxXQUFBO0dBQ0EsYUFBQTtHQUNBLG1CQUFBO0dBQ0EsVUFBQTtHQUNBLFdBQUE7R0FDQSxVQUFBO0dBQ0EsWUFBQTtHQUNBLFdBQUEsR0FBQSxRQUFBO0dBQ0EsYUFBQSxHQUFBLFFBQUE7OztFQUdBLFNBQUEsZ0JBQUEsTUFBQTtHQUNBLElBQUEsUUFBQTtHQUNBLEdBQUEsT0FBQSxHQUFBLEtBQUEsT0FBQSxZQUFBO0lBQ0EsT0FBQTs7R0FFQSxJQUFBLE9BQUEsUUFBQSxVQUFBO0lBQ0EsUUFBQSxRQUFBLE1BQUEsU0FBQSxHQUFBO0tBQ0EsSUFBQSxHQUFBLEtBQUEsSUFBQSxRQUFBLEtBQUEsQ0FBQSxHQUFBO01BQ0EsUUFBQTs7O1VBR0E7SUFDQSxJQUFBLEdBQUEsS0FBQSxJQUFBLFFBQUEsUUFBQSxDQUFBLEdBQUE7S0FDQSxRQUFBOzs7R0FHQSxPQUFBOzs7Ozs7QUN4Q0EsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsV0FBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtJQUNBLE1BQUE7SUFDQSxTQUFBOztHQUVBLGtCQUFBO0dBQ0EsUUFBQTtHQUNBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTs7Ozs7Ozs7O0FDaEJBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLGlFQUFBLFNBQUEsaUJBQUEsbUJBQUE7O0dBRUEsSUFBQSxLQUFBO0dBQ0EsR0FBQSxXQUFBO0dBQ0EsR0FBQSxXQUFBO0dBQ0EsR0FBQSxTQUFBO0dBQ0EsR0FBQSxZQUFBO0dBQ0EsR0FBQSxXQUFBO0lBQ0EsaUJBQUE7SUFDQSxTQUFBO0lBQ0EsU0FBQTtJQUNBLGFBQUE7O0dBRUEsR0FBQSxTQUFBLG1CQUFBO0dBQ0EsR0FBQSxZQUFBLG1CQUFBOztHQUVBOztHQUVBLFNBQUEsVUFBQTtJQUNBLEdBQUEsQ0FBQSxHQUFBLE1BQUE7S0FDQSxHQUFBLFFBQUE7TUFDQSxXQUFBOzs7SUFHQSxnQkFBQSxZQUFBLFNBQUEsU0FBQTtLQUNBLEdBQUEsV0FBQTtLQUNBLEdBQUEsR0FBQSxNQUFBLGNBQUEsRUFBQTtNQUNBLFFBQUEsUUFBQSxHQUFBLFVBQUEsU0FBQSxLQUFBLElBQUE7T0FDQSxHQUFBLElBQUEsTUFBQSxHQUFBLE1BQUEsV0FBQTtRQUNBLEdBQUEsV0FBQTs7Ozs7OztHQU9BLFNBQUEsT0FBQSxJQUFBO0lBQ0EsR0FBQSxXQUFBO0lBQ0EsR0FBQSxNQUFBLGFBQUEsSUFBQTtJQUNBLEdBQUEsTUFBQSxVQUFBOztHQUVBLFNBQUEsVUFBQSxJQUFBO0lBQ0EsT0FBQTtLQUNBLElBQUEsSUFBQTtLQUNBLFlBQUEsSUFBQTtLQUNBLEtBQUE7Ozs7Ozs7O0FDaERBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLG1CQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxNQUFBO0lBQ0EsT0FBQTs7R0FFQSxrQkFBQTtHQUNBLFFBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7OztBQ2ZBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLGVBQUEsVUFBQTs7Ozs7OztBQ0hBLENBQUEsWUFBQTtDQUNBOztDQUVBLFNBQUEsY0FBQSxXQUFBLE9BQUE7RUFDQSxJQUFBLFlBQUE7RUFDQSxJQUFBLE9BQUEsU0FBQSxlQUFBO0VBQ0EsR0FBQSxRQUFBLEtBQUE7R0FDQSxRQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsT0FBQSwrQ0FBQSxZQUFBOztFQUVBO0VBQ0EsU0FBQSxZQUFBLFNBQUEsTUFBQSxPQUFBLFNBQUE7R0FDQSxRQUFBLFFBQUEsU0FBQSxjQUFBLE1BQUEsWUFBQSxLQUFBO0dBQ0EsUUFBQSxRQUFBLFNBQUEsY0FBQSxNQUFBLFlBQUEsSUFBQSxXQUFBOztHQUVBLE9BQUEsZUFBQSxPQUFBLE1BQUE7O0VBRUEsU0FBQSxjQUFBO0dBQ0EsUUFBQSxRQUFBLFNBQUEsY0FBQSxNQUFBLFlBQUEsSUFBQSxXQUFBOztFQUVBLFNBQUEsZUFBQSxPQUFBLEdBQUEsU0FBQTtHQUNBLElBQUEsT0FBQSxNQUFBO0dBQ0EsSUFBQSxVQUFBO0dBQ0EsSUFBQSxVQUFBO0dBQ0EsSUFBQSxNQUFBLFFBQUEsS0FBQSxPQUFBO0dBQ0EsSUFBQSxRQUFBLE9BQUE7R0FDQSxJQUFBLE1BQUEsUUFBQSxRQUFBLFNBQUEsY0FBQSxPQUFBO0dBQ0EsSUFBQSxNQUFBLFNBQUEsY0FBQSxNQUFBO0dBQ0EsSUFBQSxRQUFBLElBQUEsd0JBQUEsTUFBQSxFQUFBLElBQUEsTUFBQTtHQUNBLElBQUEsU0FBQSxJQUFBLHdCQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsU0FBQTtHQUNBLE9BQUEsUUFBQSxRQUFBLFNBQUEsY0FBQSxPQUFBLElBQUEsT0FBQSxRQUFBLE1BQUEsSUFBQSxRQUFBLFNBQUE7O0VBRUEsT0FBQTtHQUNBLGFBQUE7R0FDQSxhQUFBO0dBQ0EsZ0JBQUE7OztDQUdBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLHdDQUFBLFVBQUEsVUFBQSxjQUFBO0VBQ0EsSUFBQTtFQUNBLFdBQUEsWUFBQTtHQUNBLE9BQUE7SUFDQSxPQUFBO0lBQ0EsUUFBQTtJQUNBLGdCQUFBO0lBQ0EsV0FBQTtJQUNBLEtBQUE7SUFDQSxPQUFBO0lBQ0EsUUFBQTtJQUNBLFNBQUE7SUFDQSxTQUFBO0lBQ0EsUUFBQTtJQUNBLFlBQUEsR0FBQSxNQUFBLFVBQUEsT0FBQSxDQUFBLE1BQUEsT0FBQSxNQUFBLENBQUEsV0FBQTtJQUNBLFlBQUE7SUFDQSxjQUFBO0lBQ0EsVUFBQTtJQUNBLFNBQUEsY0FBQSxtQkFBQTs7O0VBR0EsT0FBQTtHQUNBLFVBQUE7R0FDQSxPQUFBO0lBQ0EsV0FBQTtJQUNBLFdBQUE7SUFDQSxTQUFBO0lBQ0EsWUFBQTtJQUNBLFNBQUE7SUFDQSxTQUFBOztHQUVBLFNBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxNQUFBLE9BQUEsU0FBQTtJQUNBLElBQUEsVUFBQSxRQUFBLE9BQUEsWUFBQTtJQUNBLElBQUEsUUFBQTtLQUNBLFFBQUE7S0FDQSxTQUFBO0tBQ0EsU0FBQTs7SUFFQSxJQUFBLGFBQUEsR0FBQSxJQUFBLE1BQUEsV0FBQSxVQUFBLEdBQUE7S0FDQSxPQUFBLFdBQUEsRUFBQTs7O0lBR0EsUUFBQSxlQUFBLEdBQUEsTUFBQSxNQUFBLFNBQUEsS0FBQSxPQUFBLENBQUEsR0FBQSxhQUFBLE1BQUEsQ0FBQSxHQUFBO0lBQ0EsUUFBQSxTQUFBO0tBQ0EsR0FBQSxRQUFBLFFBQUE7S0FDQSxHQUFBLFFBQUEsU0FBQTs7SUFFQSxRQUFBLGNBQUE7O0lBRUEsSUFBQSxlQUFBLFlBQUE7S0FDQSxHQUFBLE1BQUEsUUFBQSxTQUFBLFVBQUEsS0FBQSxNQUFBLFFBQUEsU0FBQSxHQUFBLFNBQUEsU0FBQSxFQUFBO01BQ0EsUUFBQSxRQUFBLE1BQUEsUUFBQSxVQUFBLFVBQUEsT0FBQSxPQUFBO09BQ0EsSUFBQSxTQUFBLE1BQUE7T0FDQSxHQUFBLE1BQUEsWUFBQSxFQUFBO1FBQ0EsU0FBQSxNQUFBLE1BQUE7OztPQUdBLElBQUEsSUFBQTtRQUNBLE1BQUEsTUFBQTtRQUNBLE1BQUEsTUFBQTtRQUNBLE9BQUEsTUFBQTtRQUNBLE9BQUE7UUFDQSxNQUFBLE1BQUE7UUFDQSxTQUFBLGFBQUEsV0FBQSxNQUFBO1FBQ0EsTUFBQTtRQUNBLFNBQUEsTUFBQTs7T0FFQSxPQUFBLEtBQUE7T0FDQSxRQUFBLFFBQUEsTUFBQSxVQUFBLFVBQUEsTUFBQTtRQUNBLElBQUEsTUFBQSxVQUFBLEtBQUEsT0FBQTtTQUNBLElBQUEsUUFBQSxLQUFBO1NBQ0EsR0FBQSxLQUFBLFlBQUEsRUFBQTtVQUNBLFFBQUEsS0FBQSxNQUFBOztjQUVBLEdBQUEsTUFBQSxZQUFBLEVBQUE7VUFDQSxRQUFBLE1BQUEsTUFBQTs7U0FFQSxJQUFBLE9BQUE7VUFDQSxNQUFBLEtBQUE7VUFDQSxRQUFBLE1BQUEsVUFBQSxLQUFBLFFBQUEsTUFBQTtVQUNBLE9BQUEsTUFBQSxVQUFBLEtBQUE7VUFDQSxNQUFBLEtBQUE7VUFDQSxPQUFBLE1BQUE7VUFDQSxHQUFBLFFBQUEsT0FBQTtVQUNBLEdBQUEsUUFBQSxPQUFBO1VBQ0EsT0FBQTtVQUNBLE1BQUEsS0FBQTtVQUNBLFNBQUEsYUFBQSxXQUFBLEtBQUE7VUFDQSxNQUFBO1VBQ0EsU0FBQTs7U0FFQSxNQUFBLEtBQUE7Ozs7TUFJQTs7O1NBR0E7O01BRUEsSUFBQSxJQUFBO09BQ0EsTUFBQSxNQUFBLFFBQUE7T0FDQSxNQUFBLE1BQUEsUUFBQTtPQUNBLE9BQUEsTUFBQSxRQUFBO09BQ0EsT0FBQSxNQUFBLFFBQUEsTUFBQSxjQUFBLE1BQUEsUUFBQTtPQUNBLE1BQUEsTUFBQSxRQUFBO09BQ0EsU0FBQSxNQUFBLFFBQUE7T0FDQSxNQUFBLE1BQUEsUUFBQTtPQUNBLFVBQUEsTUFBQSxRQUFBOztNQUVBLE9BQUEsS0FBQTtNQUNBLFFBQUEsUUFBQSxNQUFBLFFBQUEsVUFBQSxVQUFBLE1BQUE7T0FDQSxJQUFBLE1BQUEsVUFBQSxLQUFBLE9BQUE7O1FBRUEsSUFBQSxPQUFBO1NBQ0EsTUFBQSxLQUFBO1NBQ0EsUUFBQSxNQUFBLFVBQUEsS0FBQSxRQUFBLE1BQUE7U0FDQSxPQUFBLE1BQUEsVUFBQSxLQUFBLFFBQUEsTUFBQTtTQUNBLE1BQUEsS0FBQTtTQUNBLE9BQUEsTUFBQSxRQUFBO1NBQ0EsR0FBQSxRQUFBLE9BQUE7U0FDQSxHQUFBLFFBQUEsT0FBQTtTQUNBLE9BQUEsS0FBQTtTQUNBLE1BQUEsS0FBQTtTQUNBLFNBQUEsYUFBQSxXQUFBLEtBQUE7U0FDQSxNQUFBO1NBQ0EsU0FBQTs7UUFFQSxNQUFBLEtBQUE7Ozs7O0lBS0EsSUFBQSxjQUFBLFVBQUE7S0FDQSxRQUFBO0tBQ0EsU0FBQTs7SUFFQSxJQUFBLGdCQUFBLFVBQUE7S0FDQSxRQUFBLFFBQUEsT0FBQSxTQUFBLE1BQUEsSUFBQTtPQUNBLFFBQUEsWUFBQSxLQUFBLFNBQUE7UUFDQSxHQUFBLFFBQUEsUUFBQTtRQUNBLEdBQUEsUUFBQSxTQUFBLEtBQUEsSUFBQTtRQUNBLFFBQUE7Ozs7SUFJQSxJQUFBLGFBQUEsWUFBQTtLQUNBLFFBQUEsUUFBQSxNQUFBLEtBQUE7S0FDQSxRQUFBLE1BQUEsR0FBQSxPQUFBLEtBQUEsSUFBQSxPQUFBLE9BQUEsS0FBQSxTQUFBLFFBQUEsT0FBQSxLQUFBLFVBQUEsUUFBQSxRQUFBLEtBQUEsTUFBQTs7S0FFQSxJQUFBLENBQUEsUUFBQSxTQUFBO01BQ0EsSUFBQSxLQUFBLEtBQUE7TUFDQSxHQUFBLE9BQUEsVUFBQSxFQUFBO09BQ0EsSUFBQSxTQUFBLEdBQUEsSUFBQTtTQUNBLFlBQUE7U0FDQSxZQUFBO1NBQ0EsV0FBQSxDQUFBLE1BQUEsS0FBQTtTQUNBLFNBQUEsTUFBQSxLQUFBO09BQ0EsSUFBQSxZQUFBLEdBQUEsSUFBQTtTQUNBLFlBQUE7U0FDQSxZQUFBO1NBQ0EsV0FBQSxNQUFBLEtBQUE7U0FDQSxTQUFBLE9BQUEsS0FBQTs7T0FFQSxRQUFBLFNBQUEsUUFBQSxJQUFBLE9BQUE7U0FDQSxLQUFBLEtBQUE7U0FDQSxLQUFBLFFBQUEsU0FBQSxFQUFBO1NBQ0EsT0FBQSxPQUFBLEdBQUEsU0FBQTs7U0FFQSxLQUFBLE1BQUE7U0FDQSxLQUFBLGFBQUEsY0FBQSxRQUFBLE1BQUEsR0FBQSxLQUFBLFFBQUEsT0FBQSxJQUFBLFFBQUEsT0FBQSxJQUFBO09BQ0EsUUFBQSxZQUFBLFFBQUEsSUFBQSxPQUFBO1NBQ0EsS0FBQSxLQUFBO1NBQ0EsS0FBQSxNQUFBO1NBQ0EsS0FBQSxRQUFBLFNBQUEsRUFBQTtTQUNBLE9BQUEsT0FBQSxHQUFBLFNBQUE7O1NBRUEsS0FBQSxhQUFBLGNBQUEsUUFBQSxNQUFBLEdBQUEsS0FBQSxRQUFBLE9BQUEsR0FBQTs7VUFFQTtPQUNBLElBQUEsTUFBQSxHQUFBLElBQUE7U0FDQSxZQUFBLFFBQUEsTUFBQSxJQUFBO1NBQ0EsWUFBQSxRQUFBLE1BQUE7U0FDQSxXQUFBLEtBQUEsS0FBQTtTQUNBLFNBQUEsT0FBQSxLQUFBOzs7T0FHQSxRQUFBLE1BQUEsUUFBQSxJQUFBLE9BQUE7U0FDQSxLQUFBLEtBQUE7U0FDQSxLQUFBLFFBQUEsT0FBQSxHQUFBO1NBQ0EsS0FBQSxNQUFBO1NBQ0EsS0FBQSxhQUFBLGNBQUEsUUFBQSxNQUFBLEdBQUEsS0FBQSxRQUFBLE9BQUEsR0FBQTs7OztJQUlBLEdBQUEsUUFBQSxVQUFBLFFBQUEsT0FBQSxVQUFBLEVBQUE7TUFDQSxJQUFBLGFBQUEsUUFBQSxJQUFBLFVBQUEsZUFBQSxLQUFBLFFBQUEsUUFBQSxPQUFBO1FBQ0EsS0FBQSxTQUFBO1FBQ0EsS0FBQSxRQUFBLFNBQUEsRUFBQTtRQUNBLE9BQUEsRUFBQTs7Ozs7Ozs7UUFRQSxLQUFBLEtBQUE7UUFDQSxNQUFBLGFBQUE7UUFDQSxNQUFBLFVBQUE7O1FBRUEsS0FBQSxTQUFBLFFBQUE7UUFDQSxLQUFBLGVBQUE7UUFDQSxHQUFBLFNBQUEsU0FBQSxFQUFBO1FBQ0EsUUFBQSxjQUFBLEVBQUE7UUFDQSxRQUFBOztRQUVBLEtBQUEsS0FBQSxTQUFBLEVBQUE7UUFDQSxJQUFBLFFBQUEsT0FBQSxRQUFBO1FBQ0EsR0FBQSxTQUFBLEVBQUE7U0FDQSxPQUFBOztZQUVBO1NBQ0EsT0FBQSxRQUFBLFNBQUE7OztRQUdBLEtBQUEsU0FBQSxFQUFBO1FBQ0EsT0FBQSxFQUFBOzs7O0tBSUEsUUFBQSxhQUFBLFFBQUEsSUFBQSxVQUFBLFVBQUEsS0FBQSxPQUFBLFFBQUEsT0FBQSxLQUFBLEtBQUEsYUFBQSxnQkFBQSxRQUFBLFFBQUEsS0FBQSxPQUFBLFFBQUEsU0FBQSxLQUFBLEtBQUEsS0FBQSxTQUFBOzs7Ozs7S0FNQSxRQUFBLFVBQUEsUUFBQSxXQUFBLE9BQUEsVUFBQSxLQUFBLEtBQUEsR0FBQSxLQUFBLFNBQUEsVUFBQSxHQUFBO01BQ0EsT0FBQSxFQUFBLFNBQUEsUUFBQSxXQUFBLEVBQUE7U0FDQSxLQUFBLGdCQUFBLEdBQUEsS0FBQSxVQUFBLFVBQUEsR0FBQTtNQUNBLE9BQUEsR0FBQSxJQUFBLFFBQUEsV0FBQSxFQUFBLFFBQUE7UUFDQSxLQUFBLE1BQUEsVUFBQSxHQUFBOztNQUVBLE9BQUEsWUFBQSxFQUFBOztLQUVBLFFBQUEsUUFBQSxRQUFBLFdBQUEsT0FBQTtPQUNBLEtBQUEsZUFBQTtPQUNBLEtBQUEsYUFBQSxVQUFBLEdBQUE7OztPQUdBLEtBQUEsZUFBQTtPQUNBLEtBQUEsUUFBQSxTQUFBLEVBQUE7T0FDQSxPQUFBLEVBQUEsVUFBQSxTQUFBLEVBQUE7O09BRUEsTUFBQSxXQUFBLFNBQUEsRUFBQTtPQUNBLEdBQUEsRUFBQSxRQUFBO1FBQ0EsT0FBQTs7V0FFQTtRQUNBLE9BQUE7OztPQUdBLEtBQUEsVUFBQSxHQUFBO09BQ0EsT0FBQSxFQUFBLFdBQUE7O0tBRUEsUUFBQSxNQUFBLEdBQUEsYUFBQSxVQUFBLEdBQUEsR0FBQTs7TUFFQSxPQUFBLGFBQUEsR0FBQSxHQUFBO1FBQ0EsR0FBQSxZQUFBLFVBQUEsR0FBQSxHQUFBO01BQ0EsT0FBQSxhQUFBLEdBQUEsR0FBQTtRQUNBLEdBQUEsU0FBQSxVQUFBLEdBQUEsR0FBQTs7TUFFQSxRQUFBLGNBQUEsRUFBQTtNQUNBLFFBQUE7O0tBRUEsUUFBQSxRQUFBLGFBQUEsU0FBQSxRQUFBLFVBQUEsS0FBQSxLQUFBLFVBQUEsR0FBQTtNQUNBLE9BQUEsRUFBQTs7S0FFQSxRQUFBLE1BQUEsYUFBQSxTQUFBLFFBQUEsVUFBQSxLQUFBLGFBQUEsVUFBQSxHQUFBO01BQ0EsT0FBQSxFQUFBLFNBQUEsT0FBQTtRQUNBLEtBQUEsS0FBQSxVQUFBLEdBQUE7TUFDQSxPQUFBLEVBQUEsU0FBQSxNQUFBOzs7SUFHQSxJQUFBLGFBQUEsWUFBQTs7S0FFQSxNQUFBLFFBQUEsVUFBQSxHQUFBLEdBQUE7TUFDQSxRQUFBLFFBQUEsYUFBQSxTQUFBLFFBQUEsVUFBQSxNQUFBLElBQUEsUUFBQTtRQUNBLEtBQUEsS0FBQSxVQUFBLEdBQUE7UUFDQSxFQUFBLFNBQUEsRUFBQSxRQUFBLE1BQUEsVUFBQSxFQUFBLFFBQUEsTUFBQTtRQUNBLE9BQUEsTUFBQSxVQUFBLEVBQUEsUUFBQSxNQUFBOztNQUVBLFFBQUEsTUFBQSxhQUFBLFNBQUEsUUFBQSxVQUFBLE1BQUEsSUFBQSxRQUFBO1FBQ0EsS0FBQSxhQUFBLFVBQUEsR0FBQTtRQUNBLE9BQUEsQ0FBQSxNQUFBLFVBQUEsRUFBQSxRQUFBLE1BQUEsY0FBQSxPQUFBOztRQUVBLEtBQUEsS0FBQSxVQUFBLEdBQUE7UUFDQSxPQUFBLENBQUEsTUFBQSxVQUFBLEVBQUEsUUFBQSxNQUFBLGNBQUEsTUFBQTs7OztJQUlBLElBQUEsU0FBQSxVQUFBLEdBQUE7S0FDQSxPQUFBLENBQUEsS0FBQSxJQUFBLEVBQUEsUUFBQSxPQUFBOztJQUVBLElBQUEsUUFBQSxZQUFBO0tBQ0EsT0FBQSxRQUFBLFFBQUEsR0FBQSxPQUFBLFFBQUEsTUFBQSxPQUFBLEtBQUEsQ0FBQSxRQUFBLE9BQUEsUUFBQSxTQUFBLE1BQUE7O0lBRUEsSUFBQSxvQkFBQSxZQUFBO0tBQ0EsUUFBQSxNQUFBLFFBQUEsUUFBQSxnQkFBQSxPQUFBLFFBQUEsU0FBQSxNQUFBLEdBQUEsUUFBQSxVQUFBLEdBQUE7TUFDQSxRQUFBLFdBQUEsS0FBQSxvQkFBQSxFQUFBLFFBQUEsS0FBQSxhQUFBLFVBQUEsR0FBQTtPQUNBLE9BQUEsZUFBQSxFQUFBLElBQUEsTUFBQSxFQUFBLElBQUE7OztLQUdBLFFBQUEsTUFBQTs7SUFFQSxJQUFBLGlCQUFBLFlBQUE7S0FDQSxRQUFBLE1BQUEsUUFBQSxRQUFBLGdCQUFBLE9BQUEsUUFBQSxTQUFBLEtBQUEsR0FBQSxRQUFBLFVBQUEsR0FBQTtNQUNBLFFBQUEsV0FBQSxLQUFBLGlCQUFBLEVBQUEsUUFBQSxLQUFBLGFBQUEsVUFBQSxHQUFBO09BQ0EsT0FBQSxlQUFBLEVBQUEsSUFBQSxNQUFBLEVBQUEsSUFBQTs7O0tBR0EsUUFBQSxNQUFBOztJQUVBLElBQUEsc0JBQUEsVUFBQSxPQUFBO0tBQ0EsT0FBQSxDQUFBLFVBQUEsT0FBQTtNQUNBLE9BQUEsVUFBQSxHQUFBO09BQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLFFBQUEsTUFBQSxJQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsUUFBQSxPQUFBO09BQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLFFBQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsUUFBQSxRQUFBOztRQUVBOztJQUVBLElBQUEsbUJBQUEsVUFBQSxPQUFBO0tBQ0EsT0FBQSxDQUFBLFVBQUEsT0FBQTtNQUNBLE9BQUEsVUFBQSxHQUFBO09BQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLFFBQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsUUFBQSxRQUFBO09BQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxDQUFBLE1BQUEsRUFBQSxNQUFBLFFBQUEsU0FBQSxRQUFBLFFBQUE7O1FBRUE7O0lBRUEsSUFBQSxtQkFBQSxVQUFBLE9BQUE7S0FDQSxPQUFBLENBQUEsVUFBQSxPQUFBO01BQ0EsT0FBQSxVQUFBLEdBQUE7O09BRUEsSUFBQTtPQUNBLFNBQUEsUUFBQSxZQUFBLEVBQUE7T0FDQSxFQUFBLElBQUEsRUFBQSxJQUFBLENBQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxPQUFBLFNBQUEsUUFBQSxRQUFBO09BQ0EsT0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLENBQUEsT0FBQSxJQUFBLEVBQUEsTUFBQSxPQUFBLFNBQUEsUUFBQSxRQUFBOztRQUVBOztJQUVBLElBQUEsZUFBQSxVQUFBLE1BQUEsR0FBQSxTQUFBO0tBQ0EsSUFBQTtLQUNBLElBQUEsYUFBQTtNQUNBLE9BQUE7O0tBRUEsVUFBQSxvREFBQSxLQUFBLE1BQUE7S0FDQSxXQUFBLDBCQUFBLEtBQUEsT0FBQTtLQUNBLFFBQUEsUUFBQSxLQUFBLEtBQUEsVUFBQSxVQUFBLE1BQUE7TUFDQSxHQUFBLE1BQUEsVUFBQSxLQUFBLFFBQUEsR0FBQTtPQUNBLFdBQUE7T0FDQSxXQUFBLG9EQUFBLE1BQUEsVUFBQSxLQUFBLE1BQUE7T0FDQSxXQUFBLHlDQUFBLEtBQUEsU0FBQSxLQUFBLFNBQUEsT0FBQSxNQUFBLFVBQUEsS0FBQSxNQUFBLFNBQUEsS0FBQSxTQUFBO09BQ0EsV0FBQTs7Ozs7O0tBTUEsU0FBQSxRQUFBLFFBQUEsWUFBQSxTQUFBLE1BQUEsR0FBQSxPQUFBLE1BQUEsWUFBQTs7O0lBR0EsSUFBQSxlQUFBLFVBQUEsTUFBQSxHQUFBLFNBQUE7S0FDQSxPQUFBLFFBQUEsUUFBQTs7O0lBR0EsTUFBQSxPQUFBLGFBQUEsVUFBQSxNQUFBLFNBQUE7S0FDQSxRQUFBLFFBQUE7O0tBRUEsSUFBQSxRQUFBLFdBQUEsTUFBQTtNQUNBO01BQ0E7TUFDQTtZQUNBO01BQ0E7O0tBRUEsR0FBQSxPQUFBLFVBQUEsS0FBQSxRQUFBLFVBQUEsS0FBQTtPQUNBOztTQUVBO09BQ0E7Ozs7SUFJQSxNQUFBLE9BQUEsV0FBQSxVQUFBLEdBQUEsR0FBQTtLQUNBLEdBQUEsTUFBQSxFQUFBO01BQ0E7O0tBRUEsR0FBQSxPQUFBLEVBQUEsR0FBQSxZQUFBLFlBQUE7TUFDQSxRQUFBLFFBQUE7TUFDQTtNQUNBO01BQ0E7TUFDQTs7TUFFQSxHQUFBLE9BQUEsVUFBQSxLQUFBLFFBQUEsVUFBQSxLQUFBO1FBQ0E7OztVQUdBOztRQUVBOzs7OztJQUtBLE1BQUEsT0FBQSxhQUFBLFVBQUEsTUFBQSxNQUFBO0tBQ0EsSUFBQSxTQUFBLE1BQUE7TUFDQTs7S0FFQSxJQUFBLFFBQUEsT0FBQTtNQUNBO1lBQ0E7TUFDQTs7Ozs7Ozs7QUM1Y0EsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsdURBQUEsVUFBQSxTQUFBLFFBQUEsYUFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGFBQUE7R0FDQSxPQUFBLFVBQUE7SUFDQSxHQUFBLGlCQUFBOztHQUVBLFNBQUEsU0FBQSxTQUFBO0lBQ0EsR0FBQSxpQkFBQTs7Ozs7Ozs7QUNYQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsV0FBQSxjQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxNQUFBO0dBQ0Esa0JBQUE7SUFDQSxNQUFBO0lBQ0EsWUFBQTtJQUNBLFFBQUE7SUFDQSxNQUFBOztHQUVBLFFBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7OztBQ2xCQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxpRkFBQSxTQUFBLFFBQUEsU0FBQSxRQUFBLGFBQUEsZUFBQTs7RUFFQSxJQUFBLEtBQUE7O0VBRUEsR0FBQSxlQUFBO0VBQ0EsR0FBQSxzQkFBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFNBQUEsZUFBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsT0FBQTtFQUNBOztFQUVBLFNBQUEsVUFBQTtHQUNBLG9CQUFBLEdBQUE7R0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBO0lBQ0EsR0FBQSxTQUFBLFVBQUEsR0FBQSxNQUFBLEdBQUE7SUFDQSxHQUFBLE9BQUEsUUFBQSxLQUFBLEdBQUE7OztFQUdBLFNBQUEsb0JBQUEsS0FBQTtHQUNBLFFBQUEsUUFBQSxNQUFBLFNBQUEsS0FBQTtJQUNBLEdBQUEsVUFBQSxLQUFBO0lBQ0EsR0FBQSxLQUFBLFNBQUE7S0FDQSxvQkFBQSxLQUFBOzs7O0VBSUEsU0FBQSxvQkFBQSxPQUFBO0dBQ0EsT0FBQSxRQUFBLGNBQUEsUUFBQSxXQUFBLEdBQUEsV0FBQSxVQUFBLE9BQUE7OztFQUdBLFNBQUEsV0FBQTtHQUNBLElBQUEsR0FBQSxLQUFBLFNBQUEsR0FBQSxLQUFBLE1BQUEsVUFBQSxHQUFBO0lBQ0EsT0FBQTs7R0FFQSxPQUFBOztFQUVBLFNBQUEsY0FBQSxLQUFBO0dBQ0EsR0FBQSxPQUFBLFFBQUEsWUFBQTtJQUNBLEdBQUEsS0FBQSxZQUFBO0lBQ0EsR0FBQSxLQUFBLFNBQUE7SUFDQSxPQUFBOztHQUVBLEdBQUEsS0FBQSxNQUFBLEdBQUEsS0FBQSxHQUFBO0lBQ0EsT0FBQSxNQUFBLGlDQUFBO0lBQ0EsT0FBQTs7R0FFQSxHQUFBLFNBQUE7R0FDQSxHQUFBLEtBQUEsWUFBQSxLQUFBO0dBQ0EsR0FBQSxLQUFBLFNBQUE7O0VBRUEsU0FBQSxVQUFBLEtBQUEsS0FBQTtHQUNBLElBQUEsUUFBQTtHQUNBLFFBQUEsUUFBQSxNQUFBLFNBQUEsT0FBQSxJQUFBO0lBQ0EsR0FBQSxNQUFBLE1BQUEsS0FBQSxVQUFBO0tBQ0EsUUFBQTs7SUFFQSxHQUFBLE1BQUEsWUFBQSxDQUFBLE1BQUE7S0FDQSxJQUFBLFlBQUEsVUFBQSxNQUFBLE1BQUE7S0FDQSxHQUFBLFVBQUE7TUFDQSxRQUFBOzs7O0dBSUEsT0FBQTs7RUFFQSxTQUFBLFVBQUE7R0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBO0tBQ0EsSUFBQSxZQUFBLFVBQUEsR0FBQSxNQUFBLEdBQUE7S0FDQSxJQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsVUFBQSxTQUFBLFFBQUEsS0FBQTtNQUNBLEdBQUEsVUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLEtBQUEsR0FBQTtPQUNBLFVBQUEsU0FBQSxPQUFBLEVBQUE7Ozs7T0FJQTtJQUNBLElBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLFdBQUEsUUFBQSxLQUFBO0tBQ0EsR0FBQSxHQUFBLFdBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQSxHQUFBO01BQ0EsR0FBQSxXQUFBLE9BQUEsRUFBQTs7OztHQUlBLEdBQUEsR0FBQSxLQUFBLFVBQUE7SUFDQSxJQUFBLFlBQUEsVUFBQSxHQUFBLE1BQUEsR0FBQTtJQUNBLFVBQUEsU0FBQSxLQUFBLEdBQUE7OztPQUdBO0lBQ0EsR0FBQSxXQUFBLEtBQUEsR0FBQTs7O0VBR0EsU0FBQSxjQUFBLEtBQUE7R0FDQSxRQUFBLElBQUEsR0FBQSxLQUFBLFdBQUEsR0FBQSxLQUFBO0dBQ0EsR0FBQSxHQUFBLEtBQUEsYUFBQSxHQUFBLEtBQUEsVUFBQTs7S0FFQTs7O0dBR0EsT0FBQSxRQUFBLDZCQUFBO0dBQ0EsT0FBQSxhQUFBO0dBQ0EsR0FBQSxPQUFBLFFBQUEsS0FBQSxHQUFBOztFQUVBLFNBQUEsYUFBQSxPQUFBO0dBQ0EsR0FBQSxNQUFBO0lBQ0EsR0FBQSxHQUFBLEtBQUEsR0FBQTtLQUNBLEdBQUEsR0FBQSxLQUFBLGdCQUFBO01BQ0EsR0FBQSxLQUFBLE9BQUEsS0FBQTs7U0FFQTtNQUNBLFlBQUEsT0FBQSxjQUFBLEdBQUEsS0FBQSxJQUFBLEdBQUEsTUFBQSxLQUFBOzs7O1FBSUE7S0FDQSxZQUFBLEtBQUEsY0FBQSxHQUFBLE1BQUEsS0FBQSxVQUFBLE1BQUE7TUFDQSxHQUFBLEtBQUEsV0FBQTtTQUNBLElBQUEsU0FBQSxVQUFBLE1BQUEsR0FBQTtTQUNBLEdBQUEsQ0FBQSxPQUFBLFNBQUE7VUFDQSxPQUFBLFdBQUE7O1NBRUEsT0FBQSxTQUFBLEtBQUE7U0FDQSxPQUFBLFdBQUE7O1VBRUE7T0FDQSxHQUFBLFdBQUEsS0FBQTs7TUFFQSxPQUFBLFFBQUEsK0JBQUE7TUFDQSxHQUFBLFFBQUEsU0FBQTs7Ozs7Ozs7OztBQ25JQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsV0FBQSxZQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxNQUFBO0dBQ0Esa0JBQUE7SUFDQSxNQUFBO0lBQ0EsWUFBQTtJQUNBLFFBQUE7SUFDQSxNQUFBOztHQUVBLFFBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7OztBQ2xCQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxtQkFBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsVUFBQSw0QkFBQSxTQUFBLFVBQUE7RUFDQSxJQUFBLFdBQUEsV0FBQTtHQUNBLE9BQUE7SUFDQSxPQUFBO0lBQ0EsUUFBQTtJQUNBLE9BQUE7SUFDQSxNQUFBO0lBQ0EsT0FBQTs7O0VBR0EsT0FBQTtHQUNBLFVBQUE7R0FDQSxZQUFBO0dBQ0EsT0FBQTtJQUNBLFNBQUE7SUFDQSxNQUFBOztHQUVBLE1BQUEsU0FBQSxRQUFBLFNBQUEsUUFBQTs7O0lBR0EsT0FBQSxVQUFBLFFBQUEsT0FBQSxZQUFBLE9BQUE7SUFDQSxJQUFBLElBQUEsSUFBQSxLQUFBOztJQUVBLElBQUEsU0FBQSxHQUFBLE1BQUE7TUFDQSxPQUFBLENBQUEsR0FBQSxPQUFBLFFBQUE7TUFDQSxNQUFBLENBQUEsR0FBQTtNQUNBLE1BQUE7OztJQUdBLElBQUEsTUFBQSxHQUFBLE9BQUEsUUFBQSxJQUFBLE9BQUE7TUFDQSxLQUFBLFNBQUEsT0FBQSxRQUFBO01BQ0EsS0FBQSxVQUFBLE9BQUEsUUFBQTtNQUNBLE9BQUE7O0lBRUEsSUFBQSxZQUFBLElBQUEsT0FBQTtNQUNBLEtBQUEsYUFBQSxlQUFBLE9BQUEsUUFBQSxRQUFBLElBQUEsTUFBQSxPQUFBLFFBQUEsU0FBQSxJQUFBO01BQ0EsTUFBQSxhQUFBLFVBQUE7TUFDQSxHQUFBLE9BQUEsUUFBQSxTQUFBO09BQ0EsT0FBQSxPQUFBLFFBQUEsU0FBQTs7TUFFQSxPQUFBOzs7SUFHQSxJQUFBLGFBQUEsVUFBQSxPQUFBO01BQ0EsS0FBQSxLQUFBLE9BQUEsUUFBQSxRQUFBLElBQUE7TUFDQSxLQUFBLGdCQUFBO01BQ0EsS0FBQSxVQUFBLE9BQUEsUUFBQTtNQUNBLE1BQUEsV0FBQTtNQUNBLEtBQUEsUUFBQTs7SUFFQSxJQUFBLE1BQUEsR0FBQSxJQUFBO01BQ0EsV0FBQTtNQUNBLFlBQUEsU0FBQSxHQUFBO01BQ0EsT0FBQSxPQUFBLFFBQUEsUUFBQSxJQUFBOztNQUVBLFlBQUEsU0FBQSxHQUFBO01BQ0EsT0FBQSxPQUFBLFFBQUEsUUFBQTs7O0lBR0EsSUFBQSxjQUFBLFVBQUEsT0FBQTtNQUNBLE1BQUE7TUFDQSxVQUFBLElBQUEsS0FBQSxLQUFBOztNQUVBLE1BQUEsUUFBQSxPQUFBLFFBQUE7TUFDQSxLQUFBLEtBQUE7SUFDQSxJQUFBLE9BQUEsVUFBQSxVQUFBO01BQ0EsS0FBQSxDQUFBO01BQ0E7TUFDQSxPQUFBO01BQ0EsS0FBQSxTQUFBLEdBQUE7TUFDQSxJQUFBLENBQUEsT0FBQSxRQUFBO09BQ0EsT0FBQSxPQUFBO01BQ0EsT0FBQSxJQUFBLE1BQUEsT0FBQSxRQUFBOztNQUVBLE1BQUEsUUFBQSxPQUFBLFFBQUE7TUFDQSxNQUFBLGVBQUE7TUFDQSxNQUFBLGFBQUEsV0FBQTs7TUFFQSxPQUFBOzs7TUFHQSxLQUFBLGVBQUE7TUFDQSxLQUFBLEtBQUEsU0FBQSxHQUFBOztNQUVBLE9BQUE7Ozs7O0lBS0EsU0FBQSxVQUFBLFFBQUE7S0FDQSxXQUFBO09BQ0EsU0FBQTtPQUNBLEtBQUEsVUFBQSxPQUFBLFFBQUE7OztLQUdBLFlBQUE7T0FDQSxTQUFBO09BQ0EsTUFBQSxRQUFBLE9BQUEsUUFBQTtPQUNBLEtBQUEsVUFBQSxPQUFBLFVBQUEsSUFBQSxLQUFBOztLQUVBLEtBQUEsYUFBQSxTQUFBLEtBQUEsTUFBQSxRQUFBLFNBQUEsR0FBQTtNQUNBLElBQUEsQ0FBQSxPQUFBLFFBQUEsZUFBQTtPQUNBLElBQUEsT0FBQSxLQUFBLFlBQUEsTUFBQTtPQUNBLElBQUEsSUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBLEtBQUE7T0FDQSxPQUFBLFNBQUEsR0FBQTtRQUNBLEtBQUEsY0FBQSxRQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsS0FBQTs7YUFFQTtPQUNBLElBQUEsT0FBQSxLQUFBLFlBQUEsTUFBQTtPQUNBLElBQUEsSUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBLEtBQUE7T0FDQSxPQUFBLFNBQUEsR0FBQTtRQUNBLEtBQUEsY0FBQSxDQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsS0FBQSxLQUFBLE1BQUEsT0FBQSxRQUFBOzs7UUFHQSxNQUFBLFFBQUEsT0FBQSxRQUFBOzs7O0lBSUEsU0FBQSxTQUFBLFlBQUEsVUFBQTtLQUNBLFdBQUEsVUFBQSxLQUFBLFNBQUEsR0FBQTs7TUFFQSxJQUFBLGNBQUEsR0FBQSxZQUFBLEVBQUEsVUFBQTtNQUNBLE9BQUEsU0FBQSxHQUFBO09BQ0EsRUFBQSxXQUFBLFlBQUE7T0FDQSxPQUFBLElBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWtCQSxPQUFBLE9BQUEsUUFBQSxTQUFBLEdBQUEsR0FBQTs7O0tBR0EsSUFBQSxDQUFBLEdBQUE7TUFDQSxFQUFBLE9BQUEsUUFBQSxTQUFBLE9BQUEsUUFBQTs7S0FFQSxTQUFBLFdBQUE7TUFDQSxVQUFBLEVBQUEsT0FBQSxRQUFBOzs7SUFHQSxPQUFBLE9BQUEsV0FBQSxTQUFBLEdBQUEsR0FBQTtLQUNBLElBQUEsTUFBQSxLQUFBLENBQUEsR0FBQTs7S0FFQSxTQUFBLFdBQUE7O01BRUEsVUFBQSxPQUFBLEtBQUEsT0FBQSxRQUFBOztPQUVBOzs7Ozs7OztBQ2xLQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxnQ0FBQSxTQUFBLFFBQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQTtFQUNBLEdBQUEsYUFBQTtHQUNBLFdBQUEsVUFBQSxVQUFBLE9BQUEsU0FBQTtRQUNBLElBQUEsYUFBQSxPQUFBLFNBQUEsU0FBQSxJQUFBLFNBQUEsY0FBQTtJQUNBLEdBQUEsT0FBQSxNQUFBOzs7R0FHQSxVQUFBLFVBQUEsVUFBQSxPQUFBLFNBQUE7Ozs7OztFQU1BLFNBQUEsWUFBQSxLQUFBO0dBQ0EsR0FBQSxTQUFBLE9BQUEsS0FBQTs7Ozs7O0FDckJBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLGlCQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxPQUFBO0dBQ0Esa0JBQUE7SUFDQSxVQUFBOztHQUVBLE1BQUEsU0FBQSxPQUFBLFNBQUEsT0FBQTs7O0lBR0EsSUFBQSxRQUFBLFFBQUEsU0FBQSxHQUFBLGNBQUE7SUFDQSxJQUFBLFNBQUE7SUFDQSxJQUFBLE1BQUEsR0FBQSxPQUFBLFFBQUEsSUFBQSxPQUFBO0lBQ0EsSUFBQSxLQUFBLFNBQUE7TUFDQSxLQUFBLFVBQUE7SUFDQSxJQUFBLE1BQUEsSUFBQSxPQUFBO0lBQ0EsSUFBQSxVQUFBLElBQUEsT0FBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTs7SUFFQSxJQUFBLE9BQUEsSUFBQSxPQUFBO01BQ0EsS0FBQSxTQUFBO01BQ0EsS0FBQSxVQUFBO01BQ0EsTUFBQSxRQUFBOzs7SUFHQSxTQUFBLGVBQUE7O0tBRUEsSUFBQSxXQUFBLFFBQUEsVUFBQTtPQUNBLEtBQUEsTUFBQSxHQUFBLFVBQUEsU0FBQSxFQUFBO09BQ0EsT0FBQSxFQUFBOzs7S0FHQTtPQUNBO09BQ0EsT0FBQTtPQUNBLEtBQUEsVUFBQSxTQUFBLEdBQUE7T0FDQSxRQUFBLElBQUEsRUFBQTtPQUNBLE9BQUEsRUFBQSxNQUFBOztPQUVBLE1BQUEsY0FBQSxTQUFBLEdBQUE7T0FDQSxPQUFBLEVBQUE7OztLQUdBLFNBQUEsT0FBQTs7Ozs7SUFLQSxNQUFBLE9BQUEsZUFBQSxTQUFBLEdBQUEsR0FBQTtLQUNBLElBQUEsTUFBQSxHQUFBLE9BQUE7O0tBRUE7T0FDQTs7SUFFQTs7Ozs7Ozs7QUNqRUEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsbUJBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFVBQUEseUNBQUEsU0FBQSxXQUFBLFVBQUE7SUFDQSxPQUFBLFNBQUEsT0FBQSxNQUFBLE9BQUE7TUFDQSxJQUFBLGVBQUEsV0FBQSxnQkFBQTtNQUNBLFlBQUEsS0FBQTtNQUNBLEtBQUEsU0FBQTtNQUNBLGlCQUFBLFdBQUE7UUFDQSxPQUFBLE1BQUEsTUFBQSxNQUFBOztNQUVBLE1BQUEsT0FBQSxNQUFBLGFBQUEsU0FBQSxhQUFBLGdCQUFBO1FBQ0EsSUFBQSxTQUFBLG9CQUFBO1FBQ0EscUJBQUEsQ0FBQTtRQUNBLHNCQUFBO1FBQ0EsS0FBQSxJQUFBLFFBQUEsc0JBQUEsWUFBQSxRQUFBLHNCQUFBLEtBQUEsSUFBQSx3QkFBQTtRQUNBLElBQUEsWUFBQSxVQUFBLE1BQUE7VUFDQSxPQUFBLEtBQUEsSUFBQSxTQUFBLFlBQUE7ZUFDQTtVQUNBLFVBQUEsTUFBQSxrQkFBQTtVQUNBLElBQUEsQ0FBQSxTQUFBO1lBQ0EsT0FBQSxZQUFBLFFBQUEsZUFBQTs7O1NBR0E7TUFDQSxNQUFBLE9BQUEscUJBQUEsU0FBQSxtQkFBQTtRQUNBLElBQUE7UUFDQSxrQkFBQTtRQUNBLEtBQUEsWUFBQSxpQkFBQSxzQkFBQTtRQUNBLE9BQUEsS0FBQSxZQUFBLFlBQUEsc0JBQUE7O01BRUEsb0JBQUE7TUFDQSxLQUFBLEtBQUEsWUFBQSxTQUFBLE9BQUE7UUFDQSxJQUFBO1FBQ0EsY0FBQSxNQUFBLFVBQUE7UUFDQSxJQUFBLGFBQUE7VUFDQSxPQUFBOzs7TUFHQSxnQkFBQSxXQUFBO1FBQ0EsSUFBQTtRQUNBLGtCQUFBO1FBQ0EsTUFBQSxPQUFBLFdBQUE7VUFDQSxPQUFBLE1BQUEscUJBQUE7O1FBRUEsS0FBQSxTQUFBO1FBQ0EsSUFBQSxDQUFBLG1CQUFBO1VBQ0EsT0FBQSxVQUFBLEtBQUEsWUFBQSxvQkFBQSxTQUFBLE9BQUE7WUFDQSxPQUFBLE1BQUEsT0FBQSxXQUFBOztjQUVBLGdCQUFBLE9BQUEsQ0FBQSxNQUFBLFFBQUEsVUFBQSxHQUFBLHdCQUFBLFFBQUEsVUFBQSxHQUFBO2NBQ0EsSUFBQSxnQkFBQSxPQUFBLEdBQUE7Z0JBQ0EsT0FBQSxnQkFBQSxPQUFBO3FCQUNBLElBQUEsZ0JBQUEsT0FBQSxHQUFBO2dCQUNBLE9BQUEsZ0JBQUEsT0FBQTs7Ozs7O01BTUEsVUFBQSxLQUFBLFVBQUEsV0FBQTtRQUNBLElBQUEsS0FBQSxTQUFBLGFBQUE7VUFDQSxLQUFBLFlBQUE7O1FBRUEsSUFBQSxzQkFBQSxNQUFBO1VBQ0EsVUFBQSxPQUFBLGFBQUE7VUFDQSxPQUFBLG9CQUFBOzs7TUFHQSxLQUFBLEtBQUEsVUFBQSxXQUFBO1FBQ0EsSUFBQTtRQUNBLGVBQUEsTUFBQSxVQUFBO1FBQ0EsSUFBQSxjQUFBO1VBQ0EsT0FBQSxNQUFBLE9BQUEsV0FBQTtZQUNBLE9BQUEsTUFBQSxrQkFBQTs7OztNQUlBLE9BQUEsU0FBQSxXQUFBO1FBQ0EsSUFBQTtRQUNBLGtCQUFBO1FBQ0EsSUFBQSxnQkFBQSxhQUFBLE1BQUEsa0JBQUE7VUFDQSxnQkFBQSxZQUFBO1VBQ0EsTUFBQSxxQkFBQTtVQUNBLE9BQUE7Ozs7Ozs7O0FDcEZBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLGVBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFVBQUEsOENBQUEsU0FBQSxXQUFBLFVBQUE7O0VBRUEsSUFBQSxXQUFBLFdBQUE7R0FDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLFFBQUE7SUFDQSxRQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUE7SUFDQSxVQUFBO0lBQ0EsS0FBQTtJQUNBLEtBQUE7Ozs7RUFJQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsT0FBQTtJQUNBLFdBQUE7SUFDQSxTQUFBO0lBQ0EsU0FBQTs7R0FFQSxNQUFBLFNBQUEsT0FBQSxTQUFBLE9BQUE7SUFDQSxNQUFBLFVBQUEsUUFBQSxPQUFBLFlBQUEsTUFBQTtJQUNBLE1BQUEsUUFBQSxRQUFBLFFBQUEsR0FBQSxjQUFBO0lBQ0EsSUFBQSxZQUFBO0tBQ0EsVUFBQTs7SUFFQSxJQUFBLFNBQUEsR0FBQSxNQUFBO01BQ0EsT0FBQSxDQUFBLE1BQUEsUUFBQSxLQUFBLE1BQUEsUUFBQTtNQUNBLE1BQUEsQ0FBQSxJQUFBLE1BQUEsUUFBQSxRQUFBLE9BQUEsTUFBQSxRQUFBLFNBQUE7O0lBRUEsSUFBQSxTQUFBLEdBQUEsTUFBQTtNQUNBLE1BQUEsQ0FBQSxHQUFBLE1BQUEsUUFBQTtNQUNBLE9BQUEsQ0FBQSxHQUFBLE1BQUEsVUFBQTs7SUFFQSxJQUFBLE1BQUEsR0FBQSxPQUFBLFFBQUEsSUFBQSxPQUFBO01BQ0EsS0FBQSxTQUFBLE1BQUEsUUFBQTtNQUNBLEtBQUEsVUFBQSxNQUFBLFFBQUEsU0FBQSxNQUFBLFVBQUE7O0lBRUEsSUFBQSxZQUFBLElBQUEsT0FBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsS0FBQSxNQUFBLFFBQUE7TUFDQSxLQUFBLEtBQUEsTUFBQSxRQUFBOztJQUVBLElBQUEsUUFBQSxHQUFBLElBQUE7TUFDQSxNQUFBO01BQ0EsT0FBQTtNQUNBLFdBQUEsQ0FBQSxNQUFBLFFBQUEsS0FBQSxNQUFBLFFBQUE7O0lBRUEsSUFBQSxRQUFBLElBQUEsT0FBQTtNQUNBLEtBQUEsU0FBQTtJQUNBLElBQUEsV0FBQSxNQUFBLE9BQUE7TUFDQSxLQUFBLFNBQUE7TUFDQSxLQUFBLE1BQUEsTUFBQSxRQUFBLFNBQUEsTUFBQSxVQUFBOztJQUVBLElBQUEsVUFBQSxNQUFBLE9BQUE7TUFDQSxLQUFBLFNBQUE7TUFDQSxLQUFBLGFBQUEsV0FBQTtNQUNBLE9BQUEsZ0JBQUEsT0FBQSxNQUFBLFFBQUEsTUFBQSxNQUFBOztNQUVBLEtBQUEsTUFBQSxNQUFBLFFBQUEsU0FBQSxNQUFBLFVBQUE7O0lBRUEsSUFBQSxVQUFBLE1BQUEsT0FBQTtNQUNBLEtBQUEsU0FBQTtNQUNBLEtBQUEsYUFBQSxXQUFBO01BQ0EsT0FBQSxnQkFBQSxPQUFBLE1BQUEsUUFBQSxRQUFBOztNQUVBLEtBQUEsTUFBQSxNQUFBLFFBQUEsU0FBQSxNQUFBLFVBQUE7SUFDQSxJQUFBLFlBQUEsTUFBQSxPQUFBO01BQ0EsS0FBQSxTQUFBO01BQ0EsS0FBQTtNQUNBLEtBQUEsYUFBQSxXQUFBO01BQ0EsT0FBQTs7O0lBR0EsSUFBQSxjQUFBLE1BQUEsT0FBQTtNQUNBLEtBQUEsU0FBQTtNQUNBLEtBQUE7TUFDQSxLQUFBLGFBQUEsV0FBQTtNQUNBLE9BQUEsZ0JBQUEsTUFBQSxRQUFBLFFBQUEsSUFBQSxNQUFBOzs7SUFHQSxJQUFBLFFBQUEsVUFBQSxPQUFBO01BQ0EsS0FBQSxNQUFBO01BQ0EsS0FBQSxhQUFBO0lBQ0EsSUFBQSxTQUFBLFVBQUEsT0FBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsU0FBQSxNQUFBLFFBQUE7O0lBRUEsU0FBQSxhQUFBOztLQUVBLElBQUE7T0FDQSxTQUFBLE1BQUEsUUFBQTtPQUNBLEtBQUEsVUFBQSxDQUFBLE1BQUEsUUFBQSxVQUFBLE1BQUEsVUFBQSxZQUFBLE1BQUEsUUFBQSxTQUFBO0tBQ0EsT0FBQSxPQUFBLENBQUEsR0FBQSxNQUFBLFVBQUEsU0FBQSxNQUFBLENBQUEsR0FBQSxNQUFBLFFBQUEsVUFBQSxNQUFBLFVBQUE7Ozs7S0FJQSxHQUFBLFdBQUEsS0FBQSxPQUFBO09BQ0EsS0FBQTtPQUNBLEtBQUEsYUFBQTs7S0FFQSxJQUFBLE1BQUEsTUFBQSxVQUFBO09BQ0EsS0FBQSxNQUFBLFdBQUEsU0FBQSxHQUFBO09BQ0EsT0FBQSxRQUFBLEVBQUE7OztLQUdBLElBQUEsZ0JBQUEsSUFBQSxRQUFBLE9BQUEsS0FBQTtPQUNBLEtBQUEsU0FBQTs7S0FFQSxJQUFBLFFBQUEsY0FBQSxPQUFBO09BQ0EsS0FBQSxXQUFBLE1BQUEsUUFBQSxTQUFBLE1BQUEsUUFBQTtPQUNBLE1BQUEsUUFBQTtPQUNBLEtBQUEsU0FBQSxTQUFBLEdBQUE7T0FDQSxPQUFBOztLQUVBLElBQUEsUUFBQSxjQUFBLE9BQUE7T0FDQSxLQUFBLFNBQUE7T0FDQSxLQUFBLGFBQUE7T0FDQSxLQUFBLFNBQUEsR0FBQTtPQUNBLElBQUEsRUFBQSxRQUFBLEdBQUE7UUFDQSxPQUFBO2NBQ0EsSUFBQSxFQUFBLFFBQUEsR0FBQTtRQUNBLE9BQUE7O09BRUEsT0FBQSxFQUFBLE9BQUE7O09BRUEsS0FBQSxRQUFBLE1BQUEsUUFBQTtPQUNBLEtBQUEsS0FBQSxTQUFBLEdBQUE7T0FDQSxPQUFBLE1BQUEsUUFBQSxTQUFBOztLQUVBLElBQUEsV0FBQSxjQUFBLE9BQUE7T0FDQSxLQUFBLFdBQUEsTUFBQSxRQUFBLFNBQUEsTUFBQSxRQUFBO09BQ0EsTUFBQSxRQUFBLFNBQUEsR0FBQTtPQUNBLElBQUEsRUFBQSxPQUFBLE1BQUEsUUFBQSxLQUFBO1FBQ0EsT0FBQSxNQUFBLFFBQUE7O09BRUEsT0FBQTs7T0FFQSxLQUFBLFNBQUEsU0FBQSxHQUFBO09BQ0EsT0FBQSxNQUFBLFFBQUE7O09BRUEsS0FBQSxLQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsTUFBQSxRQUFBOztLQUVBLElBQUEsU0FBQSxjQUFBLE9BQUE7T0FDQSxLQUFBLFNBQUE7T0FDQSxLQUFBO09BQ0EsS0FBQSxTQUFBLEdBQUEsR0FBQTtRQUNBLE9BQUEsQ0FBQTs7T0FFQSxLQUFBLFNBQUEsR0FBQSxHQUFBO1FBQ0EsT0FBQSxNQUFBLFFBQUEsU0FBQTs7O09BR0EsTUFBQSxhQUFBO09BQ0EsS0FBQSxNQUFBO09BQ0EsS0FBQSxlQUFBO09BQ0EsS0FBQSxTQUFBLEdBQUE7T0FDQSxPQUFBLEVBQUE7U0FDQSxLQUFBLFFBQUEsU0FBQSxHQUFBO09BQ0EsSUFBQSxFQUFBLE9BQUEsTUFBQSxRQUFBLEtBQUE7UUFDQSxPQUFBOztPQUVBLE9BQUEsTUFBQSxRQUFBOzs7S0FHQSxJQUFBLFNBQUEsY0FBQSxPQUFBO09BQ0EsS0FBQSxTQUFBO09BQ0EsS0FBQTtPQUNBLEtBQUE7T0FDQSxNQUFBLE1BQUEsUUFBQSxTQUFBOztPQUVBLEtBQUE7T0FDQSxNQUFBLFFBQUEsTUFBQSxRQUFBO09BQ0EsS0FBQSxNQUFBO09BQ0EsS0FBQSxlQUFBOztLQUVBLElBQUEsVUFBQSxjQUFBLE9BQUE7T0FDQSxLQUFBLEtBQUE7T0FDQSxLQUFBLE1BQUE7T0FDQSxLQUFBLE9BQUEsQ0FBQSxNQUFBLFFBQUEsU0FBQSxNQUFBLE1BQUEsUUFBQSxTQUFBO09BQ0EsS0FBQSxRQUFBLE1BQUEsUUFBQTs7S0FFQSxJQUFBLFlBQUEsR0FBQSxXQUFBO09BQ0EsS0FBQSxhQUFBLFNBQUEsR0FBQSxHQUFBO09BQ0EsT0FBQSxrQkFBQSxJQUFBLE1BQUEsUUFBQSxVQUFBLE1BQUEsUUFBQSxTQUFBLEtBQUEsTUFBQTs7S0FFQSxTQUFBO09BQ0EsU0FBQSxNQUFBLFFBQUE7T0FDQSxLQUFBLE1BQUEsTUFBQSxRQUFBLFNBQUEsTUFBQSxVQUFBO0tBQ0EsUUFBQTtPQUNBLFNBQUEsTUFBQSxRQUFBO09BQ0EsS0FBQSxNQUFBLE1BQUEsUUFBQSxTQUFBLE1BQUEsVUFBQTtLQUNBLFFBQUE7T0FDQSxTQUFBLE1BQUEsUUFBQTtPQUNBLEtBQUEsTUFBQSxNQUFBLFFBQUEsU0FBQSxNQUFBLFVBQUE7S0FDQSxNQUFBO09BQ0EsU0FBQSxNQUFBLFFBQUE7T0FDQSxLQUFBLFNBQUEsU0FBQSxHQUFBO09BQ0EsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBOzs7S0FHQSxRQUFBO09BQ0EsU0FBQSxNQUFBLFFBQUE7T0FDQSxLQUFBLE1BQUEsU0FBQSxHQUFBO09BQ0EsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBOzs7S0FHQSxPQUFBO09BQ0EsU0FBQSxNQUFBLFFBQUE7T0FDQSxLQUFBO09BQ0EsS0FBQSxTQUFBLEdBQUEsR0FBQTs7UUFFQSxJQUFBLEVBQUEsTUFBQSxRQUFBLFNBQUEsTUFBQSxRQUFBLE1BQUEsR0FBQTtTQUNBLE9BQUEsT0FBQSxFQUFBLE1BQUEsUUFBQSxVQUFBLEtBQUEsd0JBQUE7O1FBRUEsT0FBQSxPQUFBLEVBQUEsTUFBQSxRQUFBLFVBQUEsTUFBQSxRQUFBOzs7T0FHQSxNQUFBLFFBQUEsU0FBQSxHQUFBO09BQ0EsSUFBQSxJQUFBLEdBQUEsWUFBQSxLQUFBLGFBQUEsU0FBQSxFQUFBLE1BQUEsUUFBQTtPQUNBLE9BQUEsU0FBQSxHQUFBO1FBQ0EsS0FBQSxjQUFBLEtBQUEsTUFBQSxFQUFBOzs7OztLQUtBLElBQUE7T0FDQTtPQUNBLFNBQUEsTUFBQSxRQUFBO09BQ0EsS0FBQSxXQUFBO09BQ0E7Ozs7OztJQU1BLE1BQUEsT0FBQSxXQUFBO0tBQ0EsT0FBQSxNQUFBO09BQ0EsU0FBQSxHQUFBLEdBQUE7S0FDQSxNQUFBLFlBQUEsUUFBQSxPQUFBLE1BQUEsV0FBQSxNQUFBO0tBQ0E7S0FDQSxTQUFBLFVBQUE7TUFDQSxJQUFBLFlBQUEsUUFBQSxRQUFBLFVBQUEsS0FBQSxjQUFBLEtBQUE7TUFDQSxJQUFBLE1BQUEsUUFBQSxRQUFBLFNBQUEsZUFBQTs7TUFFQSxJQUFBLE1BQUEsVUFBQSxXQUFBLE9BQUEsYUFBQSxLQUFBO09BQ0EsSUFBQSxJQUFBLFVBQUEsR0FBQTs7T0FFQSxHQUFBLElBQUEsT0FBQSxjQUFBLElBQUE7UUFDQSxVQUFBLEtBQUEsU0FBQSx3Q0FBQSxTQUFBLE1BQUEsVUFBQSxTQUFBLE9BQUE7OztXQUdBO1FBQ0EsVUFBQSxLQUFBLFNBQUEsd0NBQUEsU0FBQSxPQUFBLGNBQUEsUUFBQTs7YUFFQTtPQUNBLFVBQUEsS0FBQSxTQUFBOzs7O09BSUE7Ozs7Ozs7O0FDM1FBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLGlCQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLGFBQUEsV0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsY0FBQTtHQUNBLE1BQUE7R0FDQSxrQkFBQTtJQUNBLE9BQUE7SUFDQSxNQUFBO0lBQ0EsUUFBQTs7R0FFQSxRQUFBO0dBQ0EsTUFBQSxVQUFBLE9BQUEsU0FBQSxPQUFBOzs7Ozs7Ozs7QUNqQkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEscUJBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsaUJBQUEsV0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsTUFBQSxVQUFBLE9BQUEsU0FBQSxPQUFBOzs7Ozs7Ozs7QUNUQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSx1QkFBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFlBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsVUFBQSxtQkFBQSxZQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsU0FBQTtHQUNBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQSxTQUFBOzs7SUFHQSxRQUFBLFVBQUEsWUFBQTtLQUNBLFFBQUEsS0FBQSxRQUFBLGNBQUE7Ozs7SUFJQSxRQUFBLEdBQUEscUJBQUEsWUFBQTtLQUNBLE1BQUEsT0FBQTs7Ozs7O0lBTUEsU0FBQSxlQUFBO0tBQ0EsSUFBQSxPQUFBLFFBQUE7OztLQUdBLElBQUEsTUFBQSxXQUFBLFFBQUEsUUFBQTtNQUNBLE9BQUE7O0tBRUEsUUFBQSxjQUFBOzs7Ozs7Ozs7QUM5QkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsVUFBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtJQUNBLE1BQUE7SUFDQSxTQUFBO0lBQ0EsVUFBQTs7R0FFQSxrQkFBQTtHQUNBLFFBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7OztBQ2pCQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsbUJBQUEsV0FBQSxrRUFBQSxTQUFBLFFBQUEsWUFBQSxnQkFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFdBQUEsUUFBQSxLQUFBLEdBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFVBQUE7O0VBRUEsR0FBQSxjQUFBO0dBQ0EsTUFBQTtHQUNBLFdBQUE7R0FDQSxXQUFBO0dBQ0EsV0FBQTtHQUNBLFdBQUE7R0FDQSxhQUFBO0dBQ0EsbUJBQUE7R0FDQSxVQUFBO0dBQ0EsVUFBQTtHQUNBLFlBQUE7R0FDQSxXQUFBLEdBQUEsUUFBQSxRQUFBO0dBQ0EsVUFBQSxHQUFBLFFBQUEsUUFBQTtHQUNBLG1CQUFBLEdBQUEsUUFBQSxRQUFBO0dBQ0EsWUFBQSxHQUFBLFFBQUEsUUFBQTtHQUNBLGFBQUEsR0FBQSxRQUFBLFFBQUE7R0FDQSxRQUFBLEdBQUEsUUFBQSxRQUFBO0dBQ0EsVUFBQSxHQUFBLFFBQUEsUUFBQTtHQUNBLFdBQUEsR0FBQSxRQUFBO0dBQ0EsWUFBQSxHQUFBLFFBQUEsTUFBQTtHQUNBLG9CQUFBO0dBQ0Esa0JBQUEsR0FBQSxRQUFBOztFQUVBOzs7RUFHQSxTQUFBLFdBQUE7Ozs7RUFJQSxTQUFBLFlBQUE7Ozs7RUFJQSxTQUFBLFlBQUE7OztFQUdBLFNBQUEsU0FBQTtJQUNBLGNBQUEsYUFBQSxhQUFBOzs7Ozs7O0FDakRBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLGlCQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxPQUFBO0lBQ0EsV0FBQTtJQUNBLFFBQUE7SUFDQSxVQUFBO0lBQ0EsVUFBQTtJQUNBLFNBQUE7SUFDQSxpQkFBQTs7R0FFQSxrQkFBQTtHQUNBLFNBQUE7R0FDQSxNQUFBLFNBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7Ozs7QUNwQkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsNENBQUEsU0FBQSxRQUFBLFVBQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsR0FBQSxRQUFBO0VBQ0EsR0FBQSxhQUFBOzs7O0VBSUEsU0FBQSxXQUFBO0dBQ0EsSUFBQSxHQUFBLFVBQUE7SUFDQSxJQUFBLEdBQUEsU0FBQSxXQUFBO0tBQ0EsUUFBQSxRQUFBLEdBQUEsVUFBQSxTQUFBLFNBQUE7TUFDQSxJQUFBLFFBQUEsTUFBQSxHQUFBLFNBQUEsV0FBQTtPQUNBLEdBQUEsYUFBQSxRQUFBOzs7V0FHQTtLQUNBLEdBQUEsYUFBQSxHQUFBOztJQUVBLEdBQUEsUUFBQSxHQUFBLFdBQUEsUUFBQSxHQUFBOzs7O0VBSUEsT0FBQSxPQUFBLFlBQUEsU0FBQSxHQUFBLEdBQUE7R0FDQSxJQUFBLE1BQUEsR0FBQSxPQUFBOztHQUVBLEdBQUEsV0FBQSxHQUFBLFdBQUEsR0FBQTs7Ozs7QUM3QkEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFVBQUEsMkJBQUEsVUFBQSxRQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsT0FBQTtRQUNBLE1BQUE7UUFDQSxVQUFBOztHQUVBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTtJQUNBLElBQUEsV0FBQSxhQUFBLHdCQUFBO0lBQ0EseUJBQUEsVUFBQSxPQUFBO0tBQ0EsSUFBQSxTQUFBLE1BQUE7TUFDQSxNQUFBOztLQUVBLE1BQUEsYUFBQSxnQkFBQTtLQUNBLE9BQUE7O0lBRUEsaUJBQUEsTUFBQTtJQUNBLFlBQUEsVUFBQSxNQUFBO0tBQ0EsSUFBQTtLQUNBLElBQUEsQ0FBQSxDQUFBLE9BQUEsTUFBQSxrQkFBQSxLQUFBLE1BQUEsU0FBQSxPQUFBLENBQUEsT0FBQSxRQUFBLE9BQUEsTUFBQSxhQUFBO01BQ0EsT0FBQTtZQUNBO01BQ0EsTUFBQSwrQkFBQSxNQUFBLGNBQUE7TUFDQSxPQUFBOzs7SUFHQSxjQUFBLFVBQUEsTUFBQTtLQUNBLElBQUEsQ0FBQSxvQkFBQSxLQUFBLE1BQUEsbUJBQUEsT0FBQSxlQUFBLFFBQUEsUUFBQSxDQUFBLEdBQUE7TUFDQSxPQUFBO1lBQ0E7TUFDQSxPQUFBLE1BQUEseUNBQUEsZ0JBQUE7O01BRUEsT0FBQTs7O0lBR0EsUUFBQSxLQUFBLFlBQUE7SUFDQSxRQUFBLEtBQUEsYUFBQTtJQUNBLE9BQUEsUUFBQSxLQUFBLFFBQUEsVUFBQSxPQUFBO0tBQ0EsSUFBQSxNQUFBLE1BQUEsUUFBQSxNQUFBO0tBQ0EsSUFBQSxTQUFBLE1BQUE7TUFDQSxNQUFBOztLQUVBLFNBQUEsSUFBQTtLQUNBLE9BQUEsU0FBQSxVQUFBLEtBQUE7TUFDQSxJQUFBLFVBQUEsU0FBQSxZQUFBLE9BQUE7T0FDQSxPQUFBLE1BQUEsT0FBQSxZQUFBO1FBQ0EsTUFBQSxPQUFBLElBQUEsT0FBQTtRQUNBLElBQUEsUUFBQSxTQUFBLE1BQUEsV0FBQTtTQUNBLE9BQUEsTUFBQSxXQUFBOzs7OztLQUtBLE9BQUEsTUFBQSxhQUFBLE1BQUE7Ozs7O0tBS0EsTUFBQSxPQUFBO0tBQ0EsT0FBQTs7Ozs7Ozs7QUMvREEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsb0JBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFVBQUEsaUJBQUEsV0FBQTtJQUNBLE9BQUE7O01BRUEsTUFBQSxTQUFBLE9BQUEsTUFBQSxPQUFBLHFCQUFBO1FBQ0EsSUFBQSxXQUFBLEtBQUEscUJBQUEsa0JBQUE7UUFDQSxZQUFBLEtBQUE7UUFDQSxNQUFBLFVBQUEsV0FBQTtRQUNBLGtCQUFBOzs7OztRQUtBLG1CQUFBLFdBQUE7VUFDQSxPQUFBO1lBQ0EsY0FBQSxNQUFBLE1BQUEsTUFBQTtZQUNBLGNBQUEsTUFBQSxNQUFBLE1BQUE7WUFDQSxPQUFBLEtBQUEsS0FBQTtZQUNBLFFBQUEsS0FBQSxLQUFBO1lBQ0EsZUFBQSxNQUFBLE1BQUEsTUFBQTtZQUNBLGNBQUEsTUFBQSxNQUFBLE1BQUE7WUFDQSxjQUFBLE1BQUEsTUFBQSxNQUFBO1lBQ0EsY0FBQSxNQUFBLE1BQUEsTUFBQTtZQUNBLGNBQUEsTUFBQSxNQUFBLE1BQUE7Ozs7Ozs7UUFPQSxzQkFBQSxTQUFBLGVBQUE7VUFDQSxJQUFBLGFBQUEsY0FBQSxHQUFBLEdBQUEsR0FBQSxjQUFBLEtBQUEsUUFBQSxjQUFBLGNBQUEsU0FBQSxjQUFBLGNBQUEsR0FBQSxJQUFBLFNBQUEsSUFBQSxTQUFBLE9BQUEsZUFBQSxRQUFBLFFBQUEsT0FBQSxJQUFBLFNBQUEsSUFBQSxTQUFBLElBQUEsU0FBQSxJQUFBLFNBQUEsSUFBQSxNQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUE7VUFDQSxlQUFBLGNBQUE7VUFDQSxlQUFBLGNBQUE7VUFDQSxRQUFBLGNBQUE7VUFDQSxTQUFBLGNBQUE7VUFDQSxnQkFBQSxDQUFBLE9BQUEsY0FBQSxrQkFBQSxPQUFBLE9BQUE7VUFDQSxlQUFBLENBQUEsUUFBQSxjQUFBLGlCQUFBLE9BQUEsUUFBQTtVQUNBLGVBQUEsQ0FBQSxRQUFBLGNBQUEsaUJBQUEsT0FBQSxRQUFBO1VBQ0EsZUFBQSxDQUFBLFFBQUEsY0FBQSxpQkFBQSxPQUFBLFFBQUE7VUFDQSxlQUFBLENBQUEsUUFBQSxjQUFBLGlCQUFBLE9BQUEsUUFBQTtVQUNBLElBQUEsTUFBQSxVQUFBO1lBQ0EsTUFBQSxNQUFBLFlBQUEsMkNBQUEsUUFBQSxpQkFBQSxTQUFBOztVQUVBLElBQUEsTUFBQSxRQUFBO1lBQ0EsTUFBQSxNQUFBLFVBQUE7O1VBRUEsU0FBQTtVQUNBLFNBQUE7VUFDQSxRQUFBO1lBQ0EsS0FBQTtjQUNBLEtBQUEsS0FBQSxpQkFBQSxnQkFBQSxLQUFBO2dCQUNBLEtBQUE7Z0JBQ0EsS0FBQSxTQUFBLEtBQUEsS0FBQSxpQkFBQTtnQkFDQSxLQUFBO2dCQUNBLEtBQUEsU0FBQTtxQkFDQSxLQUFBLE1BQUEsaUJBQUEsZ0JBQUEsTUFBQTtnQkFDQSxLQUFBLFNBQUEsZ0JBQUEsT0FBQSxNQUFBO2dCQUNBLEtBQUE7Z0JBQ0EsS0FBQSxRQUFBO2dCQUNBLEtBQUE7cUJBQ0EsS0FBQSxPQUFBLGlCQUFBLGdCQUFBLE1BQUE7Z0JBQ0EsS0FBQTtnQkFDQSxLQUFBLFVBQUEsZ0JBQUEsUUFBQSxNQUFBO2dCQUNBLEtBQUE7Z0JBQ0EsS0FBQSxTQUFBO3FCQUNBLEtBQUEsT0FBQSxpQkFBQSxnQkFBQSxNQUFBO2dCQUNBLEtBQUEsU0FBQSxJQUFBLENBQUEsZ0JBQUEsUUFBQSxNQUFBO2dCQUNBLEtBQUE7Z0JBQ0EsS0FBQSxRQUFBO2dCQUNBLEtBQUE7cUJBQ0EsSUFBQSxPQUFBLGVBQUE7Z0JBQ0EsS0FBQTtnQkFDQSxLQUFBLFNBQUEsU0FBQSxLQUFBLGdCQUFBLFFBQUEsTUFBQTtnQkFDQSxLQUFBO2dCQUNBLEtBQUEsU0FBQTs7Y0FFQSxNQUFBLElBQUEscUJBQUEsSUFBQSxJQUFBLElBQUE7Y0FDQSxJQUFBLE1BQUEsUUFBQTtnQkFDQSxVQUFBLEdBQUEsUUFBQTtnQkFDQSxVQUFBLEdBQUEsUUFBQTtnQkFDQSxVQUFBLEdBQUEsUUFBQTtnQkFDQSxVQUFBLEdBQUEsUUFBQTtnQkFDQSxNQUFBLE1BQUEsV0FBQSx3REFBQSxVQUFBLE9BQUEsVUFBQSxPQUFBLFVBQUEsT0FBQSxVQUFBOztjQUVBO1lBQ0EsS0FBQTtjQUNBLElBQUEsUUFBQSxRQUFBO2dCQUNBLFNBQUEsU0FBQTs7Y0FFQSxJQUFBLFNBQUEsT0FBQTtnQkFDQSxTQUFBLFFBQUE7O2NBRUEsSUFBQSxhQUFBLFFBQUEsR0FBQSxHQUFBLFFBQUEsR0FBQTtjQUNBLE1BQUEsSUFBQSxxQkFBQSxLQUFBLENBQUEsUUFBQSxlQUFBLE9BQUEsUUFBQSxLQUFBLENBQUEsU0FBQSxlQUFBLE9BQUEsUUFBQSxLQUFBLEdBQUEsS0FBQSxDQUFBLFFBQUEsZUFBQSxPQUFBLFFBQUEsS0FBQSxDQUFBLFNBQUEsZUFBQSxPQUFBLFFBQUEsS0FBQSxDQUFBLFFBQUEsS0FBQTtjQUNBLElBQUEsTUFBQSxRQUFBO2dCQUNBLElBQUEsV0FBQSxLQUFBLFdBQUEsR0FBQTtrQkFDQSxNQUFBLE1BQUEsV0FBQSwwREFBQSxTQUFBLGFBQUEsU0FBQTs7Z0JBRUEsVUFBQSxHQUFBLFFBQUE7Z0JBQ0EsVUFBQSxHQUFBLFFBQUE7Z0JBQ0EsVUFBQSxHQUFBLFFBQUE7Z0JBQ0EsVUFBQSxHQUFBLFFBQUE7Z0JBQ0EsVUFBQSxHQUFBLFFBQUE7Z0JBQ0EsVUFBQSxHQUFBLFFBQUE7Z0JBQ0EsTUFBQSxNQUFBLFdBQUEsd0RBQUEsVUFBQSxPQUFBLFVBQUEsT0FBQSxVQUFBLE9BQUEsVUFBQSxPQUFBLFVBQUEsT0FBQSxVQUFBOztjQUVBO1lBQ0E7Y0FDQSxNQUFBOztVQUVBLElBQUEsTUFBQSxRQUFBO1lBQ0EsTUFBQSxNQUFBLFdBQUE7O1VBRUEsS0FBQSxLQUFBLEdBQUEsT0FBQSxhQUFBLFFBQUEsS0FBQSxNQUFBLE1BQUE7WUFDQSxjQUFBLGFBQUE7WUFDQSxJQUFBLENBQUEsWUFBQSxPQUFBO2NBQ0E7O1lBRUEsSUFBQSxhQUFBLFlBQUEsTUFBQSxZQUFBO1lBQ0EsSUFBQSxNQUFBLFFBQUE7Y0FDQSxRQUFBO2NBQ0EsVUFBQSxNQUFBLEtBQUEsWUFBQTtjQUNBLElBQUEsUUFBQTtjQUNBLElBQUEsUUFBQTtjQUNBLElBQUEsUUFBQTtjQUNBLElBQUEsV0FBQSxRQUFBLElBQUEsUUFBQTtjQUNBLE1BQUEsTUFBQSxXQUFBLHVCQUFBLFlBQUEsS0FBQSxRQUFBLG9CQUFBLGFBQUEsSUFBQSxPQUFBLElBQUEsT0FBQSxJQUFBLE9BQUEsSUFBQTs7O1VBR0EsSUFBQSxNQUFBLFFBQUE7WUFDQSxNQUFBLE1BQUEsV0FBQTs7VUFFQSxJQUFBLFVBQUEsR0FBQSxHQUFBLFFBQUEsUUFBQSxTQUFBO1VBQ0EsSUFBQSxZQUFBO1VBQ0EsSUFBQSxTQUFBLEdBQUEsR0FBQSxRQUFBLFFBQUEsU0FBQTtVQUNBLElBQUEsTUFBQSxRQUFBO1lBQ0EsTUFBQSxNQUFBLFdBQUEsc0VBQUEsQ0FBQSxRQUFBLFFBQUEsUUFBQSxvQkFBQSxRQUFBLENBQUEsU0FBQSxRQUFBLFFBQUEsb0JBQUE7Ozs7OztRQU1BLE9BQUEsTUFBQSxPQUFBLGtCQUFBLHFCQUFBOzs7Ozs7O0FDakpBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLHVCQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLG1DQUFBLFNBQUEsV0FBQTtJQUNBLE9BQUE7TUFDQSxVQUFBO01BQ0EsTUFBQSxTQUFBLE9BQUEsTUFBQTtRQUNBLElBQUEsZUFBQTtRQUNBLGdCQUFBLEtBQUEsS0FBQSxRQUFBO1FBQ0EsY0FBQTtRQUNBLFVBQUEsVUFBQSxXQUFBO1VBQ0EsT0FBQSxjQUFBOztRQUVBLFVBQUEsUUFBQSxXQUFBO1VBQ0EsT0FBQSxjQUFBOztRQUVBLEtBQUEsVUFBQSxXQUFBO1VBQ0EsSUFBQSxDQUFBLGFBQUE7WUFDQSxPQUFBLGNBQUE7OztRQUdBLEtBQUEsU0FBQSxXQUFBO1VBQ0EsT0FBQSxjQUFBOztRQUVBLEtBQUEsVUFBQSxTQUFBLE9BQUE7VUFDQSxPQUFBLGNBQUEsSUFBQTtZQUNBLE1BQUEsTUFBQTtZQUNBLEtBQUEsTUFBQSxVQUFBOzs7UUFHQSxPQUFBLEtBQUEsVUFBQSxTQUFBLE9BQUE7VUFDQSxJQUFBO1VBQ0EsY0FBQSxNQUFBLFVBQUE7VUFDQSxJQUFBLGFBQUE7WUFDQSxNQUFBLE9BQUEsV0FBQTtjQUNBLE9BQUEsTUFBQSxlQUFBLENBQUEsTUFBQSxRQUFBLEtBQUEsU0FBQSxRQUFBLEtBQUE7O1lBRUEsT0FBQSxjQUFBOzs7Ozs7Ozs7QUNyQ0EsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsZ0NBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsV0FBQSxXQUFBO0VBQ0EsSUFBQSxXQUFBLFVBQUE7R0FDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUE7OztFQUdBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxNQUFBO0lBQ0EsUUFBQTtJQUNBLFdBQUE7O0dBRUEsTUFBQSxVQUFBLFFBQUEsU0FBQSxRQUFBLFFBQUE7S0FDQSxJQUFBLFVBQUEsUUFBQSxPQUFBLFlBQUEsT0FBQTs7Ozs7Ozs7QUNuQkEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsMEJBQUEsVUFBQSxRQUFBO0VBQ0EsT0FBQSxVQUFBO0VBQ0E7O0VBRUEsU0FBQSxVQUFBO0dBQ0EsT0FBQTtHQUNBLE9BQUEsT0FBQSxXQUFBLFNBQUEsRUFBQSxFQUFBO0lBQ0EsR0FBQSxNQUFBLEVBQUE7S0FDQTs7SUFFQSxPQUFBOzs7RUFHQSxTQUFBLFNBQUE7R0FDQSxPQUFBLFVBQUE7SUFDQSxhQUFBO0lBQ0EsTUFBQSxDQUFBO0tBQ0EsUUFBQTtNQUNBLEdBQUE7TUFDQSxHQUFBOztLQUVBLE9BQUE7S0FDQSxPQUFBOztJQUVBLE9BQUEsQ0FBQTtLQUNBLFFBQUE7TUFDQSxHQUFBO01BQ0EsR0FBQSxPQUFBLFFBQUE7O0tBRUEsT0FBQTtLQUNBLE9BQUEsT0FBQSxRQUFBOzs7Ozs7OztBQ2pDQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsVUFBQSwyQkFBQSxTQUFBLFVBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLE1BQUE7SUFDQSxNQUFBOztHQUVBLE1BQUEsU0FBQSxPQUFBLFNBQUEsT0FBQTs7SUFFQSxJQUFBLFFBQUEsUUFBQTtJQUNBLE1BQUEsU0FBQSxVQUFBO0tBQ0EsTUFBQSxRQUFBLFVBQUEsY0FBQSxRQUFBOzs7SUFHQSxTQUFBLGNBQUEsT0FBQTs7S0FFQSxJQUFBLFlBQUE7TUFDQSxhQUFBO09BQ0EsR0FBQTtPQUNBLEdBQUE7T0FDQSxHQUFBOztNQUVBLFNBQUEsU0FBQSxjQUFBO01BQ0EsVUFBQSxPQUFBLGNBQUEsT0FBQSxXQUFBO01BQ0EsTUFBQSxPQUFBO01BQ0EsSUFBQSxDQUFBO01BQ0E7TUFDQSxNQUFBO09BQ0EsR0FBQTtPQUNBLEdBQUE7T0FDQSxHQUFBOztNQUVBLFFBQUE7O0tBRUEsSUFBQSxDQUFBLFNBQUE7TUFDQSxPQUFBOzs7S0FHQSxTQUFBLE9BQUEsU0FBQSxNQUFBLGlCQUFBLE1BQUEsZ0JBQUEsTUFBQTtLQUNBLFFBQUEsT0FBQSxRQUFBLE1BQUEsZ0JBQUEsTUFBQSxlQUFBLE1BQUE7O0tBRUEsUUFBQSxVQUFBLE9BQUEsR0FBQTs7S0FFQSxJQUFBO01BQ0EsT0FBQSxRQUFBLGFBQUEsR0FBQSxHQUFBLE9BQUE7T0FDQSxPQUFBLEdBQUE7O01BRUEsTUFBQTtNQUNBLE9BQUE7OztLQUdBLFNBQUEsS0FBQSxLQUFBOztLQUVBLE9BQUEsQ0FBQSxLQUFBLFlBQUEsS0FBQSxRQUFBO01BQ0EsRUFBQTtNQUNBLElBQUEsS0FBQSxLQUFBLEtBQUE7TUFDQSxJQUFBLEtBQUEsS0FBQSxLQUFBLElBQUE7TUFDQSxJQUFBLEtBQUEsS0FBQSxLQUFBLElBQUE7Ozs7S0FJQSxJQUFBLElBQUEsQ0FBQSxFQUFBLElBQUEsSUFBQTtLQUNBLElBQUEsSUFBQSxDQUFBLEVBQUEsSUFBQSxJQUFBO0tBQ0EsSUFBQSxJQUFBLENBQUEsRUFBQSxJQUFBLElBQUE7O0tBRUEsT0FBQTs7O0lBR0EsU0FBQSxXQUFBO0lBQ0EsSUFBQSxJQUFBLElBQUE7UUFDQSxJQUFBLFVBQUEsS0FBQTtRQUNBLElBQUEsVUFBQSxLQUFBO1FBQ0EsSUFBQSxVQUFBLEtBQUE7UUFDQSxHQUFBO1FBQ0EsSUFBQSxLQUFBLElBQUEsR0FBQSxHQUFBO1FBQ0EsT0FBQSxJQUFBLEtBQUEsSUFBQSxHQUFBLEdBQUE7UUFDQSxRQUFBLFNBQUEsRUFBQTtZQUNBLE9BQUEsQ0FBQSxJQUFBLEtBQUEsSUFBQSxPQUFBLElBQUE7OztJQUdBLElBQUEsUUFBQSxHQUFBO1FBQ0EsSUFBQSxJQUFBO1dBQ0E7UUFDQSxJQUFBLE9BQUE7UUFDQSxLQUFBLE1BQUE7UUFDQSxLQUFBLE1BQUE7UUFDQSxLQUFBLE1BQUE7O1FBRUEsSUFBQSxNQUFBLEdBQUE7WUFDQSxJQUFBLEtBQUE7Y0FDQSxJQUFBLE1BQUEsR0FBQTtZQUNBLElBQUEsQ0FBQSxJQUFBLEtBQUEsS0FBQTtjQUNBLElBQUEsTUFBQSxHQUFBO1lBQ0EsSUFBQSxDQUFBLElBQUEsS0FBQSxLQUFBOztRQUVBLElBQUEsSUFBQSxHQUFBO1lBQ0EsS0FBQTtjQUNBLElBQUEsSUFBQSxHQUFBO1lBQ0EsS0FBQTs7O0lBR0EsT0FBQTtRQUNBLEdBQUEsS0FBQSxNQUFBLElBQUE7U0FDQSxHQUFBLEtBQUEsTUFBQSxJQUFBO1NBQ0EsR0FBQSxLQUFBLE1BQUEsSUFBQTs7Ozs7Ozs7OztBQzdHQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxrQkFBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsV0FBQSxpQkFBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtJQUNBLE1BQUE7T0FDQSxPQUFBOztHQUVBLGtCQUFBOztHQUVBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTs7Ozs7Ozs7O0FDaEJBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHFCQUFBLFdBQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxhQUFBOztFQUVBLFNBQUEsWUFBQSxPQUFBLFVBQUEsT0FBQTtHQUNBLElBQUEsQ0FBQSxHQUFBLE1BQUEsR0FBQSxPQUFBO0dBQ0EsSUFBQSxRQUFBLEtBQUEsTUFBQTtHQUNBLEdBQUEsS0FBQSxRQUFBO0dBQ0EsR0FBQSxLQUFBLFdBQUEsTUFBQTs7O0VBR0EsU0FBQSxXQUFBLE9BQUE7R0FDQSxNQUFBO0dBQ0EsR0FBQSxLQUFBLFFBQUE7R0FDQSxHQUFBLEtBQUEsV0FBQTs7Ozs7O0FDbkJBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLGFBQUEsV0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsY0FBQTtHQUNBLE1BQUE7SUFDQSxNQUFBO0lBQ0EsU0FBQTtJQUNBLFVBQUE7O0dBRUEsa0JBQUE7R0FDQSxRQUFBOztHQUVBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQSxXQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0FDbEJBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHlIQUFBLFVBQUEsUUFBQSxhQUFBLGdCQUFBLGVBQUEsU0FBQSxRQUFBLG9CQUFBOztFQUVBLElBQUEsS0FBQTs7RUFFQSxHQUFBLFdBQUEsUUFBQSxLQUFBLEdBQUE7O0VBRUEsR0FBQSxZQUFBO0VBQ0EsR0FBQSxZQUFBOztFQUVBLEdBQUEsYUFBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGFBQUE7RUFDQSxHQUFBLGFBQUE7RUFDQSxHQUFBLGNBQUE7RUFDQSxHQUFBLFlBQUE7O0VBRUEsR0FBQSxPQUFBOztFQUVBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLGFBQUE7O0VBRUE7O0VBRUEsU0FBQSxXQUFBO0dBQ0E7OztFQUdBLFNBQUEsWUFBQSxPQUFBO0dBQ0EsT0FBQSxRQUFBLGNBQUEsR0FBQSxlQUFBLE9BQUE7O0VBRUEsU0FBQSxVQUFBLE9BQUE7R0FDQSxPQUFBLFFBQUEsY0FBQSxHQUFBLGNBQUEsT0FBQTs7O0VBR0EsU0FBQSxVQUFBO0dBQ0EsR0FBQSxnQkFBQSxZQUFBLE9BQUEsaUJBQUE7R0FDQSxHQUFBLGFBQUEsZUFBQSxjQUFBLENBQUEsS0FBQTtHQUNBLEdBQUEsZUFBQSxZQUFBLE9BQUEsaUJBQUE7R0FDQSxHQUFBLFNBQUEsWUFBQSxPQUFBLFVBQUE7OztFQUdBLFNBQUEsV0FBQTtHQUNBLElBQUEsR0FBQSxLQUFBLFNBQUEsR0FBQSxLQUFBLFFBQUEsR0FBQSxLQUFBLGdCQUFBLEdBQUEsS0FBQSxNQUFBLFVBQUEsR0FBQTtJQUNBLE9BQUE7O0dBRUEsT0FBQTs7RUFFQSxTQUFBLFdBQUE7R0FDQSxHQUFBLE9BQUEsR0FBQSxLQUFBLGNBQUEsYUFBQSxPQUFBO0dBQ0EsT0FBQSxlQUFBLEdBQUEsS0FBQSxXQUFBLFNBQUEsT0FBQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxHQUFBLEtBQUEsT0FBQSxLQUFBLFNBQUEsU0FBQTtJQUNBLEdBQUEsU0FBQTtLQUNBLE9BQUEsUUFBQSw4QkFBQTtLQUNBLEdBQUEsS0FBQSxVQUFBO0tBQ0EsR0FBQSxXQUFBLFFBQUEsS0FBQSxHQUFBOzs7Ozs7RUFNQSxTQUFBLGVBQUEsS0FBQTtHQUNBLGNBQUEsYUFBQSxlQUFBOztFQUVBLFNBQUEsV0FBQSxLQUFBO0dBQ0EsY0FBQSxhQUFBLFdBQUE7OztFQUdBLE9BQUEsT0FBQSxXQUFBLFNBQUEsR0FBQSxFQUFBO0dBQ0EsR0FBQSxLQUFBLEdBQUE7TUFDQSxHQUFBLEtBQUEsVUFBQSxDQUFBLFFBQUEsT0FBQSxHQUFBLE1BQUEsR0FBQTs7SUFFQTs7Ozs7QUM3RUEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsaUJBQUEsV0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLE9BQUE7SUFDQSxNQUFBOztHQUVBLFFBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxrQkFBQTtHQUNBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTs7SUFFQSxJQUFBLEtBQUE7SUFDQSxJQUFBLEtBQUEsUUFBQTtJQUNBLElBQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxHQUFBLGNBQUEsU0FBQSxFQUFBO0tBQ0EsUUFBQSxTQUFBO09BQ0EsR0FBQSxjQUFBLFNBQUEsRUFBQTtLQUNBLFFBQUEsWUFBQTs7Ozs7Ozs7OztBQ3ZCQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxxQkFBQSxVQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsaUJBQUE7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsT0FBQSxHQUFBLEtBQUEsY0FBQSxjQUFBOztFQUVBLFNBQUEsZ0JBQUE7R0FDQSxHQUFBLEtBQUEsY0FBQSxDQUFBLEdBQUEsS0FBQTtHQUNBLEdBQUEsS0FBQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLElBQUEsS0FBQSxTQUFBLEtBQUEsbUJBQUEsS0FBQSxnQkFBQSxLQUFBLE1BQUEsVUFBQSxHQUFBO0lBQ0EsT0FBQTs7R0FFQSxPQUFBOzs7Ozs7QUNyQkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsY0FBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtHQUNBLGtCQUFBO0lBQ0EsTUFBQTtJQUNBLFlBQUE7SUFDQSxXQUFBO0lBQ0EsUUFBQTtJQUNBLFFBQUE7O0dBRUEsUUFBQTtHQUNBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTs7Ozs7Ozs7O0FDbkJBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLGtDQUFBLFNBQUEsWUFBQTs7RUFFQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxrQkFBQTtFQUNBLEdBQUEsaUJBQUE7O0VBRUEsR0FBQSxTQUFBO0dBQ0EsS0FBQTtHQUNBLFFBQUE7R0FDQSxNQUFBO0dBQ0EsV0FBQTtHQUNBLE9BQUE7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLFlBQUE7SUFDQSxhQUFBO0lBQ0EsYUFBQTs7O0VBR0EsR0FBQSxTQUFBO0dBQ0EsT0FBQTtHQUNBLE1BQUE7O0VBRUEsR0FBQSxXQUFBO0VBQ0EsR0FBQSxhQUFBOzs7O0VBSUEsU0FBQSxXQUFBLElBQUE7R0FDQSxHQUFBLEdBQUEsZUFBQSxJQUFBO0lBQ0EsR0FBQSxjQUFBOztPQUVBO0lBQ0EsR0FBQSxjQUFBOzs7O0VBSUEsU0FBQSxhQUFBLE1BQUE7R0FDQSxPQUFBLEdBQUEsVUFBQSxRQUFBLFFBQUEsQ0FBQSxJQUFBLE9BQUE7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsR0FBQSxHQUFBLFVBQUEsT0FBQTtJQUNBLEdBQUEsWUFBQTs7T0FFQTtJQUNBLFFBQUEsUUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBO0tBQ0EsR0FBQSxHQUFBLFVBQUEsUUFBQSxTQUFBLENBQUEsRUFBQTtNQUNBLEdBQUEsVUFBQSxLQUFBOzs7Ozs7RUFNQSxTQUFBLGdCQUFBLE1BQUE7R0FDQSxJQUFBLFFBQUEsR0FBQSxVQUFBLFFBQUE7R0FDQSxJQUFBLFFBQUEsQ0FBQSxHQUFBO0lBQ0EsT0FBQSxHQUFBLFVBQUEsT0FBQSxPQUFBO1VBQ0E7SUFDQSxPQUFBLEdBQUEsVUFBQSxLQUFBOzs7RUFHQSxTQUFBLGVBQUEsTUFBQTtHQUNBLEdBQUEsR0FBQSxVQUFBLE9BQUE7S0FDQSxHQUFBLFlBQUE7S0FDQSxPQUFBOztHQUVBLEdBQUEsWUFBQTtHQUNBLFFBQUEsUUFBQSxPQUFBLFNBQUEsS0FBQTtJQUNBLEdBQUEsVUFBQSxLQUFBOzs7O0VBSUEsU0FBQSxTQUFBLGFBQUEsSUFBQTtHQUNBLFlBQUE7OztFQUdBLFNBQUEsZ0JBQUE7R0FDQSxHQUFBLEdBQUEsVUFBQSxPQUFBO0lBQ0EsUUFBQSxRQUFBLEdBQUEsV0FBQSxTQUFBLEtBQUE7TUFDQSxZQUFBLE9BQUEsY0FBQSxLQUFBLElBQUEsS0FBQSxTQUFBLFNBQUE7T0FDQSxHQUFBLFdBQUEsT0FBQSxHQUFBLFdBQUEsUUFBQSxNQUFBOzs7SUFHQSxHQUFBLFlBQUE7Ozs7Ozs7Ozs7Ozs7QUN4RkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsV0FBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtJQUNBLE1BQUE7SUFDQSxTQUFBO0lBQ0EsVUFBQTs7R0FFQSxrQkFBQTtHQUNBLFFBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7OztBQ2pCQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxzR0FBQSxTQUFBLFFBQUEsUUFBQSxTQUFBLFVBQUEsUUFBQSxhQUFBLGVBQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsR0FBQSxXQUFBLFFBQUEsS0FBQSxHQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxPQUFBOztFQUVBLEdBQUEsY0FBQTtHQUNBLEtBQUE7R0FDQSxVQUFBO0dBQ0EsVUFBQTtHQUNBLFVBQUE7R0FDQSxVQUFBO0dBQ0EsWUFBQTtHQUNBLGtCQUFBO0dBQ0EsU0FBQTtHQUNBLFNBQUE7R0FDQSxZQUFBO0dBQ0EsV0FBQTtHQUNBLFVBQUEsR0FBQSxRQUFBLFFBQUE7R0FDQSxtQkFBQSxHQUFBLFFBQUEsUUFBQTtHQUNBLFlBQUEsR0FBQSxRQUFBLFFBQUE7R0FDQSxhQUFBLEdBQUEsUUFBQSxRQUFBOztFQUVBOzs7RUFHQSxTQUFBLFdBQUE7R0FDQTs7O0VBR0EsU0FBQSxVQUFBO0dBQ0EsR0FBQSxhQUFBLGVBQUEsY0FBQSxDQUFBLEtBQUE7R0FDQSxHQUFBLFNBQUEsWUFBQSxPQUFBLFVBQUE7R0FDQSxHQUFBLFFBQUEsWUFBQSxPQUFBLGVBQUE7O0dBRUEsR0FBQSxPQUFBLEdBQUEsS0FBQSxNQUFBLFlBQUE7SUFDQSxHQUFBLEtBQUEsZUFBQTtJQUNBLEdBQUEsS0FBQSxXQUFBOzs7RUFHQSxTQUFBLFdBQUE7R0FDQSxJQUFBLEdBQUEsS0FBQSxTQUFBLEdBQUEsS0FBQSxnQkFBQSxHQUFBLEtBQUEsTUFBQSxVQUFBLEdBQUE7SUFDQSxPQUFBOztHQUVBLE9BQUE7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsR0FBQSxPQUFBLEdBQUEsS0FBQSxjQUFBLGFBQUEsT0FBQTtHQUNBLE9BQUEsZUFBQSxHQUFBLEtBQUEsV0FBQSxTQUFBLE9BQUE7O0VBRUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxHQUFBLEtBQUEsR0FBQTtJQUNBLEdBQUEsS0FBQSxPQUFBLEtBQUEsU0FBQSxTQUFBO0tBQ0EsR0FBQSxTQUFBO01BQ0EsT0FBQSxRQUFBLDhCQUFBO01BQ0EsR0FBQSxLQUFBLFVBQUE7TUFDQSxHQUFBLFdBQUEsUUFBQSxLQUFBLEdBQUE7TUFDQSxlQUFBLFdBQUE7TUFDQSxPQUFBLEdBQUEsZ0NBQUEsQ0FBQSxHQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUEsU0FBQTs7OztPQUlBO0lBQ0EsWUFBQSxLQUFBLFNBQUEsR0FBQSxNQUFBLEtBQUEsU0FBQSxTQUFBO0tBQ0EsR0FBQSxTQUFBO01BQ0EsT0FBQSxRQUFBLDRCQUFBO01BQ0EsR0FBQSxLQUFBLFVBQUE7TUFDQSxHQUFBLFdBQUEsUUFBQSxLQUFBLEdBQUE7TUFDQSxlQUFBLFFBQUE7TUFDQSxPQUFBLEdBQUEsZ0NBQUEsQ0FBQSxHQUFBLFNBQUEsSUFBQSxLQUFBLFNBQUE7Ozs7Ozs7RUFPQSxTQUFBLFlBQUEsT0FBQSxLQUFBOzs7O0VBSUEsT0FBQSxPQUFBLFdBQUEsU0FBQSxHQUFBLEVBQUE7R0FDQSxHQUFBLEtBQUEsR0FBQTtJQUNBLEdBQUEsS0FBQSxVQUFBLENBQUEsUUFBQSxPQUFBLEdBQUEsTUFBQSxHQUFBOztJQUVBOzs7OztBQ3pGQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsVUFBQSxrQ0FBQSxTQUFBLFVBQUEsU0FBQTtFQUNBLElBQUEsV0FBQSxXQUFBO0dBQ0EsT0FBQTtJQUNBLElBQUE7SUFDQSxPQUFBO0lBQ0EsUUFBQTtJQUNBLE1BQUE7SUFDQSxPQUFBO0lBQ0EsVUFBQTtJQUNBLFdBQUE7SUFDQSxLQUFBO0lBQ0EsS0FBQTtJQUNBLFFBQUE7S0FDQSxNQUFBO0tBQ0EsT0FBQTtLQUNBLEtBQUE7S0FDQSxRQUFBOztJQUVBLFFBQUEsQ0FBQTtLQUNBLFVBQUE7S0FDQSxPQUFBO0tBQ0EsU0FBQTtPQUNBO0tBQ0EsVUFBQTtLQUNBLE9BQUE7S0FDQSxTQUFBO09BQ0E7S0FDQSxVQUFBO0tBQ0EsT0FBQTtLQUNBLFNBQUE7Ozs7RUFJQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLE9BQUE7SUFDQSxNQUFBO0lBQ0EsU0FBQTs7R0FFQSxTQUFBO0dBQ0EsTUFBQSxTQUFBLFFBQUEsU0FBQSxRQUFBLFNBQUE7O0lBRUEsSUFBQSxVQUFBLFFBQUEsT0FBQSxZQUFBO0lBQ0EsVUFBQSxRQUFBLE9BQUEsU0FBQSxPQUFBO0lBQ0EsUUFBQSxRQUFBLFFBQUEsU0FBQSxHQUFBLGNBQUEsUUFBQSxPQUFBLE9BQUEsUUFBQSxPQUFBO0lBQ0EsUUFBQSxTQUFBLElBQUEsT0FBQTtJQUNBLFFBQUEsSUFBQSxVQUFBLFFBQUEsU0FBQSxNQUFBLElBQUEsaUJBQUEsUUFBQSxTQUFBLElBQUE7O0lBRUEsSUFBQSxRQUFBLE9BQUE7S0FDQSxRQUFBLE9BQUEsR0FBQSxRQUFBLFFBQUE7O0lBRUEsSUFBQSxDQUFBLE9BQUEsUUFBQSxLQUFBO0tBQ0EsUUFBQSxRQUFBLE9BQUEsTUFBQSxTQUFBLEtBQUEsS0FBQTtNQUNBLFFBQUEsTUFBQSxHQUFBLElBQUEsQ0FBQSxRQUFBLEtBQUEsU0FBQSxJQUFBLFFBQUE7TUFDQSxRQUFBLE1BQUEsR0FBQSxJQUFBLENBQUEsUUFBQSxLQUFBLFNBQUEsSUFBQSxRQUFBOzs7O0lBSUEsSUFBQSxZQUFBLEdBQUEsT0FBQSxRQUFBLElBQUEsT0FBQTtJQUNBLElBQUEsTUFBQSxVQUFBLE9BQUE7SUFDQSxJQUFBLFVBQUEsSUFBQSxPQUFBO0lBQ0EsSUFBQSxXQUFBLFFBQUEsT0FBQTtNQUNBLEtBQUEsTUFBQSxRQUFBLFFBQUEsUUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsZ0JBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQSxPQUFBO01BQ0EsS0FBQSxNQUFBO01BQ0EsS0FBQSxVQUFBO0lBQ0EsSUFBQSxrQkFBQSxPQUFBLE9BQUE7TUFDQSxLQUFBLE1BQUE7TUFDQSxLQUFBLGdCQUFBO01BQ0EsS0FBQSxVQUFBO0lBQ0EsSUFBQSxZQUFBLE9BQUEsT0FBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsTUFBQTtNQUNBLEtBQUEsVUFBQTs7SUFFQSxJQUFBLFVBQUEsT0FBQSxPQUFBO0lBQ0EsUUFBQSxPQUFBO01BQ0EsS0FBQSxNQUFBO0lBQ0EsUUFBQSxPQUFBO01BQ0EsS0FBQSxNQUFBOztJQUVBLElBQUEsVUFBQSxJQUFBLE9BQUEsS0FBQSxLQUFBLGFBQUEsbUJBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxJQUFBLE9BQUEsUUFBQSxPQUFBO0lBQ0EsSUFBQSxTQUFBLElBQUEsT0FBQTtJQUNBLElBQUEsVUFBQSxJQUFBLE9BQUE7SUFDQSxJQUFBLFNBQUEsSUFBQSxPQUFBO01BQ0EsS0FBQSxTQUFBOzs7OztJQUtBLE9BQUEsT0FBQTtNQUNBLEtBQUEsVUFBQSxRQUFBOztJQUVBLElBQUEsSUFBQSxHQUFBLE1BQUE7SUFDQSxFQUFBLE9BQUEsQ0FBQSxRQUFBLEtBQUEsUUFBQTtNQUNBLE1BQUEsQ0FBQSxRQUFBLE9BQUEsTUFBQSxRQUFBLFFBQUEsUUFBQSxPQUFBO01BQ0EsTUFBQTs7O0lBR0EsUUFBQSxRQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7S0FDQSxTQUFBLE9BQUE7T0FDQSxLQUFBLFVBQUEsTUFBQSxXQUFBO09BQ0EsS0FBQSxjQUFBLE1BQUE7T0FDQSxLQUFBLGdCQUFBLE1BQUE7Ozs7SUFJQSxJQUFBLFFBQUEsU0FBQSxNQUFBO0tBQ0EsT0FBQSxPQUFBO09BQ0EsS0FBQSxLQUFBLFFBQUEsU0FBQTtLQUNBLElBQUEsYUFBQSxPQUFBLE9BQUE7T0FDQSxLQUFBLFFBQUE7T0FDQSxNQUFBLGFBQUEsUUFBQSxTQUFBO09BQ0EsS0FBQSxlQUFBO09BQ0EsS0FBQSxLQUFBO09BQ0EsS0FBQSxNQUFBOztLQUVBLFFBQUEsS0FBQSxhQUFBLGdCQUFBLFFBQUEsU0FBQSxRQUFBLFNBQUEsTUFBQSxPQUFBLFFBQUEsU0FBQSxJQUFBO09BQ0EsS0FBQSxTQUFBO0tBQ0EsUUFBQSxPQUFBO09BQ0EsS0FBQSxLQUFBLFFBQUEsU0FBQTtLQUNBLElBQUEsY0FBQSxRQUFBLE9BQUE7T0FDQSxLQUFBLFdBQUE7O09BRUEsSUFBQSxRQUFBLE1BQUEsTUFBQTtRQUNBLElBQUEsSUFBQSxDQUFBLFNBQUEsUUFBQSxPQUFBLE1BQUE7UUFDQSxPQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsUUFBQSxRQUFBOztPQUVBLE9BQUEsUUFBQTs7T0FFQSxNQUFBLGFBQUEsUUFBQSxTQUFBO09BQ0EsS0FBQSxlQUFBO09BQ0EsS0FBQSxLQUFBO09BQ0EsS0FBQSxNQUFBOzs7O0lBSUEsSUFBQSxRQUFBLFNBQUEsTUFBQTtLQUNBLElBQUEsT0FBQSxPQUFBLE9BQUE7T0FDQSxLQUFBLE1BQUEsUUFBQSxRQUFBO09BQ0EsS0FBQSxNQUFBO09BQ0EsS0FBQSxNQUFBLFFBQUEsUUFBQTtPQUNBLEtBQUEsTUFBQSxRQUFBO09BQ0EsS0FBQSxvQkFBQTtPQUNBLEtBQUEsZ0JBQUE7T0FDQSxLQUFBLFVBQUE7O0lBRUEsSUFBQSxhQUFBLE9BQUEsT0FBQTtJQUNBLElBQUEsU0FBQSxXQUFBLE9BQUE7TUFDQSxLQUFBLFNBQUE7TUFDQSxNQUFBLFVBQUE7SUFDQSxJQUFBLFFBQUEsV0FBQTtLQUNBLElBQUEsY0FBQSxXQUFBLE9BQUE7T0FDQSxLQUFBOzs7O0lBSUEsU0FBQSxPQUFBO0tBQ0EsRUFBQSxNQUFBLENBQUEsUUFBQSxPQUFBLE1BQUEsUUFBQSxRQUFBLFFBQUEsT0FBQTtPQUNBLE1BQUE7Ozs7Ozs7OztLQVNBO09BQ0EsS0FBQSxTQUFBLFFBQUE7T0FDQSxLQUFBLFVBQUEsUUFBQTtPQUNBLE1BQUEsZUFBQSxRQUFBLE9BQUE7Ozs7Ozs7S0FPQTtPQUNBLEtBQUEsS0FBQSxhQUFBLEdBQUEsR0FBQSxRQUFBLE9BQUEsUUFBQSxTQUFBLEdBQUEsUUFBQSxTQUFBLEdBQUEsTUFBQSxNQUFBLE1BQUE7T0FDQSxLQUFBLEtBQUEsUUFBQSxTQUFBO09BQ0EsS0FBQSxTQUFBLFFBQUE7T0FDQSxLQUFBLFVBQUEsUUFBQSxTQUFBO09BQ0EsTUFBQSxRQUFBLFdBQUEsUUFBQSxRQUFBLFFBQUEsVUFBQTtLQUNBLE9BQUEsS0FBQSxhQUFBLGVBQUEsUUFBQSxTQUFBLElBQUEsT0FBQSxRQUFBLFNBQUEsSUFBQTtPQUNBLEtBQUEsU0FBQTs7S0FFQSxJQUFBLFFBQUEsU0FBQSxNQUFBO01BQ0EsT0FBQSxLQUFBLEtBQUEsUUFBQSxTQUFBO01BQ0EsV0FBQSxLQUFBLFFBQUE7UUFDQSxNQUFBLGFBQUEsUUFBQSxTQUFBO1FBQ0EsS0FBQSxlQUFBO1FBQ0EsS0FBQSxLQUFBO1FBQ0EsS0FBQSxNQUFBO01BQ0EsUUFBQSxLQUFBLGFBQUEsZ0JBQUEsUUFBQSxTQUFBLFFBQUEsU0FBQSxNQUFBLE9BQUEsUUFBQSxTQUFBLElBQUE7UUFDQSxLQUFBLFNBQUE7TUFDQSxRQUFBLE9BQUE7UUFDQSxLQUFBLEtBQUEsUUFBQSxTQUFBOztNQUVBLFlBQUEsS0FBQSxXQUFBOztRQUVBLElBQUEsUUFBQSxNQUFBLE1BQUE7U0FDQSxJQUFBLElBQUEsQ0FBQSxTQUFBLFFBQUEsT0FBQSxNQUFBO1NBQ0EsT0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFFBQUEsUUFBQTs7UUFFQSxPQUFBLFFBQUE7O1FBRUEsTUFBQSxhQUFBLFFBQUEsU0FBQTtRQUNBLEtBQUEsZUFBQTtRQUNBLEtBQUEsS0FBQTtRQUNBLEtBQUEsTUFBQTs7TUFFQSxLQUFBLEtBQUEsTUFBQSxRQUFBLFFBQUE7UUFDQSxLQUFBLE1BQUE7UUFDQSxLQUFBLE1BQUEsUUFBQSxRQUFBO1FBQ0EsS0FBQSxNQUFBLFFBQUE7UUFDQSxLQUFBLG9CQUFBO1FBQ0EsS0FBQSxnQkFBQTtRQUNBLEtBQUEsVUFBQTs7O0tBR0E7O09BRUEsR0FBQSxhQUFBLFdBQUE7T0FDQSxnQkFBQSxhQUFBLFNBQUEsS0FBQSxLQUFBLGdCQUFBOzs7T0FHQSxHQUFBLFlBQUEsV0FBQTtPQUNBLGdCQUFBLGFBQUEsU0FBQSxLQUFBLEtBQUEsZ0JBQUE7Ozs7S0FJQTtPQUNBLEtBQUEsS0FBQSxXQUFBO09BQ0EsSUFBQSxRQUFBLFdBQUE7UUFDQSxRQUFBLENBQUEsUUFBQSxTQUFBLEtBQUEsUUFBQSxTQUFBOztPQUVBLE9BQUEsUUFBQSxTQUFBOzs7S0FHQSxJQUFBLFFBQUEsT0FBQTtNQUNBLE9BQUEsTUFBQSxRQUFBOztLQUVBLElBQUEsUUFBQSxXQUFBO01BQ0E7UUFDQSxNQUFBLGFBQUEsUUFBQSxTQUFBO1FBQ0EsS0FBQSxlQUFBLFVBQUEsS0FBQSxLQUFBOztLQUVBLElBQUEsUUFBQSxhQUFBO01BQ0EsSUFBQSxRQUFBLFdBQUE7T0FDQSxZQUFBLEtBQUEsU0FBQSxRQUFBLFlBQUEsUUFBQTs7TUFFQSxXQUFBLGFBQUEsU0FBQSxLQUFBLEtBQUEsUUFBQSxLQUFBLGFBQUEsZUFBQSxFQUFBLFFBQUEsWUFBQSxRQUFBLFVBQUEsTUFBQSxRQUFBLFNBQUEsSUFBQTtZQUNBO01BQ0EsSUFBQSxRQUFBLFdBQUE7T0FDQSxZQUFBLEtBQUE7Ozs7Ozs7O0lBUUEsU0FBQSxhQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsR0FBQSxJQUFBLElBQUEsSUFBQSxJQUFBO0tBQ0EsSUFBQTtLQUNBLFNBQUEsT0FBQSxJQUFBLEtBQUEsTUFBQTtLQUNBLFVBQUEsT0FBQSxJQUFBLElBQUE7S0FDQSxJQUFBLElBQUE7TUFDQSxVQUFBLE1BQUEsSUFBQSxNQUFBLElBQUEsWUFBQSxJQUFBLE1BQUE7WUFDQTtNQUNBLFVBQUEsTUFBQTtNQUNBLFVBQUEsTUFBQTs7S0FFQSxVQUFBLE9BQUEsSUFBQSxJQUFBO0tBQ0EsSUFBQSxJQUFBO01BQ0EsVUFBQSxNQUFBLElBQUEsTUFBQSxJQUFBLFlBQUEsQ0FBQSxJQUFBLE1BQUE7WUFDQTtNQUNBLFVBQUEsTUFBQTtNQUNBLFVBQUEsTUFBQSxDQUFBOztLQUVBLFVBQUEsT0FBQSxJQUFBLElBQUE7S0FDQSxJQUFBLElBQUE7TUFDQSxVQUFBLE1BQUEsSUFBQSxNQUFBLElBQUEsWUFBQSxDQUFBLElBQUEsTUFBQSxDQUFBO1lBQ0E7TUFDQSxVQUFBLE1BQUEsQ0FBQTtNQUNBLFVBQUEsTUFBQSxDQUFBOztLQUVBLFVBQUEsT0FBQSxJQUFBLElBQUE7S0FDQSxJQUFBLElBQUE7TUFDQSxVQUFBLE1BQUEsSUFBQSxNQUFBLElBQUEsWUFBQSxJQUFBLE1BQUEsQ0FBQTtZQUNBO01BQ0EsVUFBQSxNQUFBLENBQUE7TUFDQSxVQUFBLE1BQUE7O0tBRUEsVUFBQTtLQUNBLE9BQUE7OztJQUdBLFNBQUEsU0FBQSxPQUFBO0tBQ0EsSUFBQSxTQUFBLFNBQUEsTUFBQTtNQUNBLElBQUEsSUFBQSxDQUFBLFNBQUEsU0FBQSxNQUFBO01BQ0EsT0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFFBQUEsUUFBQTtZQUNBO01BQ0EsT0FBQSxTQUFBOzs7O0lBSUEsU0FBQSxRQUFBO0tBQ0EsSUFBQSxRQUFBLE1BQUEsU0FBQTs7S0FFQSxJQUFBLEdBQUEsTUFBQSxhQUFBO01BQ0EsUUFBQSxFQUFBLE9BQUEsR0FBQSxNQUFBLE1BQUE7TUFDQSxNQUFBLE9BQUEsQ0FBQSxPQUFBOztLQUVBLElBQUEsUUFBQSxXQUFBO01BQ0EsWUFBQSxLQUFBLFNBQUE7O0tBRUEsV0FBQSxLQUFBLGFBQUEsZUFBQSxFQUFBLFNBQUEsTUFBQSxRQUFBLFNBQUEsSUFBQTs7O0lBR0EsU0FBQSxVQUFBO0tBQ0EsSUFBQSxRQUFBO0tBQ0EsSUFBQSxRQUFBO0tBQ0EsSUFBQSxRQUFBO0tBQ0EsSUFBQSxRQUFBLE1BQUEsU0FBQTtLQUNBLFFBQUEsUUFBQSxPQUFBLE1BQUEsU0FBQSxLQUFBLEtBQUE7O01BRUEsSUFBQSxTQUFBLElBQUEsUUFBQSxXQUFBLFNBQUEsUUFBQTtPQUNBLFFBQUE7T0FDQSxRQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBbUJBLElBQUEsT0FBQTtNQUNBLFFBQUEsY0FBQTtNQUNBLFFBQUE7Ozs7OztJQU1BLE9BQUEsT0FBQSxXQUFBLFNBQUEsR0FBQSxHQUFBO0tBQ0EsSUFBQSxNQUFBLEdBQUE7TUFDQTs7S0FFQSxRQUFBLE9BQUEsR0FBQSxRQUFBLEVBQUE7S0FDQSxXQUFBLElBQUEsT0FBQTtPQUNBLE9BQUE7T0FDQSxLQUFBLE1BQUEsUUFBQSxRQUFBLE1BQUEsRUFBQTtPQUNBLEtBQUEsTUFBQTtPQUNBLEtBQUEsTUFBQTtPQUNBLEtBQUEsTUFBQTtPQUNBLEtBQUEsTUFBQTtPQUNBLEtBQUEsZ0JBQUE7S0FDQSxRQUFBLFFBQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtNQUNBLFNBQUEsT0FBQTtRQUNBLEtBQUEsVUFBQSxNQUFBLFdBQUE7UUFDQSxLQUFBLGNBQUEsTUFBQTtRQUNBLEtBQUEsZ0JBQUEsTUFBQTs7S0FFQSxLQUFBLE1BQUEsUUFBQSxVQUFBLFFBQUEsUUFBQSxNQUFBLEVBQUEsUUFBQTtLQUNBLE9BQUEsTUFBQSxRQUFBLEVBQUE7O0tBRUEsSUFBQSxRQUFBLGFBQUE7TUFDQSxJQUFBLFFBQUEsV0FBQTtPQUNBLFlBQUEsS0FBQSxTQUFBLFFBQUEsWUFBQSxHQUFBLEVBQUE7O01BRUEsV0FBQSxhQUFBLFNBQUEsS0FBQSxLQUFBLFFBQUEsS0FBQSxhQUFBLGVBQUEsRUFBQSxRQUFBLFlBQUEsS0FBQSxHQUFBLEVBQUEsVUFBQSxNQUFBLFFBQUEsU0FBQSxJQUFBO1lBQ0E7TUFDQSxJQUFBLFFBQUEsV0FBQTtPQUNBLFlBQUEsS0FBQTs7OztPQUlBO0lBQ0EsT0FBQTtLQUNBLFdBQUE7TUFDQSxPQUFBLFFBQUE7O0tBRUEsU0FBQSxVQUFBLFVBQUE7O01BRUEsSUFBQSxDQUFBLFVBQUE7T0FDQSxJQUFBLFFBQUEsV0FBQTtRQUNBLFlBQUEsS0FBQSxTQUFBOztPQUVBLFdBQUEsS0FBQSxhQUFBLGVBQUEsRUFBQSxLQUFBLE1BQUEsUUFBQSxTQUFBLElBQUE7T0FDQTs7TUFFQSxJQUFBLFFBQUEsV0FBQTtPQUNBLFlBQUEsS0FBQSxTQUFBLFNBQUEsUUFBQTs7TUFFQSxJQUFBLFlBQUEsVUFBQTtPQUNBLFdBQUEsS0FBQSxhQUFBLGVBQUEsRUFBQSxTQUFBLFFBQUEsVUFBQSxNQUFBLFFBQUEsU0FBQSxJQUFBO2FBQ0E7T0FDQSxXQUFBLGFBQUEsU0FBQSxLQUFBLEtBQUEsUUFBQSxLQUFBLGFBQUEsZUFBQSxFQUFBLFNBQUEsUUFBQSxVQUFBLE1BQUEsUUFBQSxTQUFBLElBQUE7Ozs7OztJQU1BLE9BQUEsT0FBQSxRQUFBLFNBQUEsR0FBQSxHQUFBO0tBQ0EsSUFBQSxNQUFBLEdBQUEsT0FBQTs7S0FFQSxRQUFBLE1BQUE7S0FDQSxRQUFBLE1BQUE7S0FDQSxRQUFBLFFBQUEsT0FBQSxNQUFBLFNBQUEsS0FBQSxLQUFBO01BQ0EsSUFBQSxDQUFBLE9BQUEsUUFBQSxLQUFBO09BQ0EsUUFBQSxNQUFBLEdBQUEsSUFBQSxDQUFBLFFBQUEsS0FBQSxTQUFBLElBQUEsUUFBQTtPQUNBLFFBQUEsTUFBQSxHQUFBLElBQUEsQ0FBQSxRQUFBLEtBQUEsU0FBQSxJQUFBLFFBQUE7O01BRUEsSUFBQSxJQUFBLE9BQUEsUUFBQSxZQUFBLEtBQUE7T0FDQSxJQUFBLFFBQUEsV0FBQTtRQUNBLFlBQUEsS0FBQSxTQUFBLElBQUEsS0FBQSxHQUFBLFFBQUE7O09BRUEsV0FBQSxhQUFBLFNBQUEsS0FBQSxLQUFBLFFBQUEsS0FBQSxhQUFBLGVBQUEsRUFBQSxJQUFBLEtBQUEsR0FBQSxRQUFBLFVBQUEsTUFBQSxRQUFBLFNBQUEsSUFBQTs7Ozs7S0FLQSxJQUFBLEdBQUEsTUFBQTtPQUNBLE9BQUEsQ0FBQSxRQUFBLEtBQUEsUUFBQTtPQUNBLE1BQUEsQ0FBQSxRQUFBLE9BQUEsTUFBQSxRQUFBLFFBQUEsUUFBQSxPQUFBO09BQ0EsTUFBQTs7Ozs7S0FLQSxPQUFBLE9BQUEsZUFBQSxLQUFBO0tBQ0EsUUFBQSxPQUFBLGVBQUEsS0FBQSxXQUFBOztNQUVBLElBQUEsUUFBQSxNQUFBLE1BQUE7T0FDQSxJQUFBLElBQUEsQ0FBQSxTQUFBLFFBQUEsT0FBQSxNQUFBO09BQ0EsT0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFFBQUEsUUFBQTs7TUFFQSxPQUFBLFFBQUE7O0tBRUEsUUFBQSxRQUFBLE9BQUEsTUFBQSxTQUFBLEtBQUEsS0FBQTtNQUNBLElBQUEsSUFBQSxPQUFBLFFBQUEsWUFBQSxLQUFBO09BQ0EsSUFBQSxRQUFBLFdBQUE7UUFDQSxZQUFBLEtBQUEsU0FBQSxJQUFBLEtBQUEsR0FBQSxRQUFBOztPQUVBLFdBQUEsYUFBQSxTQUFBLEtBQUEsS0FBQSxRQUFBLEtBQUEsYUFBQSxlQUFBLEVBQUEsSUFBQSxLQUFBLEdBQUEsUUFBQSxVQUFBLE1BQUEsUUFBQSxTQUFBLElBQUE7Ozs7O0lBS0EsUUFBQSxXQUFBLFdBQUE7TUFDQSxRQUFBLFFBQUEsUUFBQSxTQUFBLEdBQUEsY0FBQSxRQUFBLE9BQUEsT0FBQSxRQUFBLE9BQUE7O01BRUE7Ozs7Ozs7SUFPQSxPQUFBLE9BQUEsT0FBQSxNQUFBLFdBQUE7S0FDQSxTQUFBLFdBQUE7TUFDQSxRQUFBLFFBQUEsUUFBQSxTQUFBLEdBQUEsY0FBQSxRQUFBLE9BQUEsT0FBQSxRQUFBLE9BQUE7O01BRUE7OztJQUdBOzs7Ozs7OztBQ3hlQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxjQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLHNCQUFBLFNBQUEsU0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsTUFBQSxTQUFBLE9BQUEsU0FBQSxPQUFBOztJQUVBLElBQUEsb0JBQUEsUUFBQTtLQUNBLHlCQUFBLFFBQUEsS0FBQTtLQUNBLGtCQUFBLHVCQUFBLFNBQUE7S0FDQSxXQUFBLFNBQUEsY0FBQTtLQUNBLG9CQUFBLFFBQUEsUUFBQSxTQUFBLGNBQUE7S0FDQSxhQUFBLFFBQUEsS0FBQTs7OztJQUlBLElBQUEsWUFBQTs7S0FFQSxhQUFBLFNBQUEsY0FBQSxNQUFBO0tBQ0EsZ0JBQUE7OztJQUdBLHVCQUFBLEdBQUEsU0FBQSxTQUFBLE9BQUE7S0FDQSxNQUFBO0tBQ0EsSUFBQSxhQUFBLE9BQUE7TUFDQSxZQUFBO01BQ0Esa0JBQUEsSUFBQSxtQkFBQSxTQUFBO01BQ0EsWUFBQSxFQUFBLE1BQUEsT0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBNkNBLFNBQUEsWUFBQSxnQkFBQTtLQUNBLElBQUEsZUFBQSxTQUFBLEdBQUE7TUFDQSxXQUFBLFdBQUE7T0FDQSxlQUFBLFNBQUE7T0FDQSxZQUFBLGVBQUE7U0FDQTs7OztJQUlBLFNBQUEsWUFBQSxnQkFBQTtLQUNBLElBQUEsZUFBQSxlQUFBO0tBQ0EsU0FBQSxTQUFBLE1BQUEsR0FBQSxjQUFBLElBQUEsZ0JBQUEsU0FBQTs7S0FFQSxJQUFBLHlCQUFBO01BQ0EsZ0JBQUEsU0FBQSxhQUFBLFlBQUE7TUFDQSxTQUFBLFNBQUEsTUFBQSxHQUFBLGNBQUEsU0FBQTtNQUNBLFlBQUE7WUFDQTtNQUNBLG9CQUFBLGlCQUFBLGNBQUEsR0FBQTs7OztJQUlBLFNBQUEsZUFBQTtLQUNBLFNBQUEsS0FBQSxhQUFBLFlBQUEsWUFBQSxHQUFBLG1GQUFBLFdBQUE7TUFDQSxFQUFBLE1BQUEsWUFBQSxtQkFBQSxJQUFBO01BQ0Esb0JBQUEsdUJBQUEsU0FBQSxPQUFBLENBQUEsR0FBQSxHQUFBOzs7O0tBSUEsSUFBQSx5QkFBQTtNQUNBLGdCQUFBLFlBQUE7TUFDQSxTQUFBLEtBQUEsb0JBQUEsWUFBQTtNQUNBLFlBQUE7Ozs7SUFJQSxTQUFBLG9CQUFBLHdCQUFBLGNBQUEsT0FBQSxNQUFBO0tBQ0EsSUFBQSxTQUFBLEdBQUE7S0FDQSxJQUFBLGdCQUFBLENBQUEsS0FBQSxTQUFBLEdBQUEsUUFBQTs7S0FFQSxJQUFBLHFCQUFBO0tBQ0EsSUFBQSxzQkFBQSxjQUFBLHFCQUFBOztLQUVBLElBQUEsUUFBQSxhQUFBLEdBQUE7TUFDQSx1QkFBQSxHQUFBLG9CQUFBLFlBQUEsYUFBQTtNQUNBLFdBQUEsV0FBQTs7T0FFQSxvQkFBQSx3QkFBQSxjQUFBLFFBQUEsR0FBQTtTQUNBO1lBQ0EsSUFBQSxTQUFBLGFBQUEsR0FBQTs7TUFFQSx1QkFBQSxHQUFBLG9CQUFBLFlBQUEsYUFBQSxNQUFBLElBQUEsbUZBQUEsV0FBQTtPQUNBLElBQUEsZ0JBQUEsQ0FBQSxHQUFBO1FBQ0EsU0FBQSxTQUFBLGVBQUEsU0FBQTtRQUNBLHVCQUFBLEdBQUEsY0FBQSxTQUFBLGFBQUEsWUFBQTtjQUNBLElBQUEsV0FBQSxTQUFBLGtCQUFBLE1BQUE7UUFDQSxXQUFBLFNBQUE7O09BRUEsdUJBQUEsR0FBQSxvQkFBQSxJQUFBO09BQ0EsWUFBQTs7Ozs7O0lBTUEsU0FBQSxtQkFBQTtLQUNBLElBQUEsUUFBQSxLQUFBLE1BQUEsS0FBQSxXQUFBLGNBQUE7S0FDQSxJQUFBLE1BQUEsY0FBQTs7S0FFQSxjQUFBLE9BQUEsT0FBQTtLQUNBLE9BQUE7OztJQUdBLFNBQUEsb0JBQUE7O0tBRUEsY0FBQSxTQUFBO0tBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLFlBQUEsS0FBQTtNQUNBLGNBQUEsS0FBQTs7Ozs7Ozs7OztBQ3pKQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxjQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLHFEQUFBLFNBQUEsUUFBQSxVQUFBLFFBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLE9BQUE7SUFDQSxTQUFBO0lBQ0EsS0FBQTs7R0FFQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7O0lBRUEsSUFBQSxTQUFBO0lBQ0EsSUFBQSxVQUFBO0tBQ0EsV0FBQTtLQUNBLGFBQUE7S0FDQTtJQUNBLElBQUEsT0FBQTtJQUNBLElBQUEsV0FBQTtJQUNBLElBQUEsbUJBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQSxLQUFBO0lBQ0EsSUFBQSxRQUFBLFFBQUEsS0FBQTtJQUNBLElBQUEsYUFBQTtJQUNBLElBQUEsTUFBQTtJQUNBLElBQUEsVUFBQTtJQUNBLE1BQUEsSUFBQTtLQUNBLFNBQUE7O0lBRUEsT0FBQSxLQUFBLFNBQUEsWUFBQTtLQUNBLE1BQUEsR0FBQTs7SUFFQSxNQUFBLEtBQUEsVUFBQSxVQUFBLEdBQUE7S0FDQSxhQUFBO0tBQ0EsTUFBQTtLQUNBLFVBQUE7O0tBRUEsU0FBQTtLQUNBLFVBQUEsR0FBQSxXQUFBLEdBQUEsYUFBQSxHQUFBO0tBQ0EsT0FBQTtLQUNBLFdBQUE7S0FDQSxNQUFBLFVBQUE7S0FDQSxTQUFBLFlBQUE7O01BRUEsSUFBQSxPQUFBLE1BQUEsR0FBQSxNQUFBLEdBQUE7TUFDQSxJQUFBLE1BQUEsS0FBQSxNQUFBLE1BQUEsR0FBQSxNQUFBLElBQUE7T0FDQSxnQkFBQTtPQUNBLFFBQUE7T0FDQSxlQUFBO09BQ0EsVUFBQTtPQUNBLE1BQUEsVUFBQSxLQUFBO1FBQ0EsSUFBQSxVQUFBLElBQUEsS0FBQSxHQUFBLFVBQUEsTUFBQSxXQUFBLElBQUEsU0FBQTtRQUNBO1lBQ0EsT0FBQSxFQUFBOztRQUVBLElBQUEsS0FBQSxHQUFBLFNBQUE7UUFDQSxNQUFBLE9BQUEsUUFBQTtRQUNBLE1BQUEsUUFBQSxLQUFBLElBQUEsS0FBQTs7O09BR0EsU0FBQSxVQUFBO1FBQ0EsTUFBQTs7Ozs7Ozs7Ozs7Ozs7QUMvREEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsd0JBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsMkRBQUEsU0FBQSxRQUFBLFVBQUEsUUFBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsT0FBQTtJQUNBLFFBQUE7O0dBRUEsTUFBQSxVQUFBLE9BQUEsU0FBQSxPQUFBOztJQUVBLElBQUEsU0FBQTtJQUNBLElBQUEsVUFBQTtLQUNBLFdBQUE7S0FDQSxhQUFBO0tBQ0E7SUFDQSxJQUFBLE9BQUE7SUFDQSxJQUFBLFdBQUE7SUFDQSxJQUFBLG1CQUFBO0lBQ0EsSUFBQSxTQUFBLFFBQUEsS0FBQTtJQUNBLElBQUEsUUFBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLGFBQUE7SUFDQSxJQUFBLE1BQUE7SUFDQSxJQUFBLFVBQUE7SUFDQSxNQUFBLElBQUE7S0FDQSxTQUFBOztJQUVBLE9BQUEsS0FBQSxTQUFBLFlBQUE7S0FDQSxNQUFBLEdBQUE7O0lBRUEsTUFBQSxLQUFBLFVBQUEsVUFBQSxHQUFBO0tBQ0EsYUFBQTtLQUNBLE1BQUE7S0FDQSxVQUFBO0NBQ0EsTUFBQSxTQUFBO0tBQ0EsU0FBQTtLQUNBLFVBQUEsR0FBQSxXQUFBLEdBQUEsYUFBQSxHQUFBO0tBQ0EsT0FBQTtLQUNBLFdBQUE7S0FDQSxTQUFBLFlBQUE7O01BRUEsSUFBQSxPQUFBLE1BQUEsR0FBQSxNQUFBLEdBQUE7TUFDQSxJQUFBLE1BQUEsS0FBQSxNQUFBLE1BQUEsR0FBQSxNQUFBLElBQUE7T0FDQSxnQkFBQTtPQUNBLFFBQUE7T0FDQSxlQUFBO09BQ0EsVUFBQTtPQUNBLE1BQUEsVUFBQSxLQUFBO1FBQ0EsUUFBQSxJQUFBLEtBQUEsR0FBQTtTQUNBLEtBQUE7VUFDQSxJQUFBLEtBQUEsR0FBQSxVQUFBO1VBQ0E7U0FDQSxLQUFBO1VBQ0EsSUFBQSxLQUFBLEdBQUEsVUFBQTtVQUNBO1NBQ0EsS0FBQTtVQUNBLElBQUEsS0FBQSxHQUFBLFVBQUE7VUFDQTtTQUNBOzs7UUFHQSxHQUFBLElBQUEsT0FBQSxVQUFBLEVBQUE7U0FDQSxNQUFBLE9BQUEsS0FBQSxJQUFBLEtBQUE7O1lBRUE7U0FDQSxRQUFBLElBQUE7OztPQUdBLFNBQUEsVUFBQTtRQUNBLE1BQUE7Ozs7Ozs7Ozs7Ozs7O0FDeEVBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLDhCQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLDZEQUFBLFVBQUEsUUFBQSxVQUFBLFFBQUEsY0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsU0FBQTtHQUNBLE1BQUEsVUFBQSxRQUFBLFNBQUEsUUFBQTs7SUFFQSxJQUFBLFNBQUE7SUFDQSxJQUFBLFVBQUE7S0FDQSxXQUFBO0tBQ0EsYUFBQTtLQUNBO0lBQ0EsSUFBQSxPQUFBO0lBQ0EsSUFBQSxXQUFBO0lBQ0EsSUFBQSxtQkFBQTtJQUNBLElBQUEsU0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLFFBQUEsUUFBQSxLQUFBO0lBQ0EsSUFBQSxhQUFBO0lBQ0EsSUFBQSxNQUFBO0lBQ0EsSUFBQSxVQUFBO0lBQ0EsTUFBQSxJQUFBO0tBQ0EsU0FBQTs7SUFFQSxPQUFBLEtBQUEsU0FBQSxZQUFBO0tBQ0EsTUFBQSxHQUFBOztJQUVBLE1BQUEsS0FBQSxVQUFBLFVBQUEsR0FBQTtLQUNBLGFBQUE7S0FDQSxNQUFBO0tBQ0EsVUFBQTs7S0FFQSxTQUFBO0tBQ0EsVUFBQSxHQUFBLFdBQUEsR0FBQSxhQUFBLEdBQUE7S0FDQSxPQUFBO0tBQ0EsV0FBQTtLQUNBLFNBQUEsWUFBQTtNQUNBLGFBQUE7O01BRUEsSUFBQSxPQUFBLE1BQUEsR0FBQSxNQUFBLEdBQUE7TUFDQSxJQUFBLE1BQUEsS0FBQSxNQUFBLE1BQUEsR0FBQSxNQUFBLElBQUE7T0FDQSxnQkFBQTtPQUNBLFFBQUE7T0FDQSxlQUFBO09BQ0EsVUFBQTtPQUNBLFFBQUE7O09BRUEsT0FBQSxVQUFBLE9BQUE7UUFDQSxRQUFBLFFBQUEsTUFBQSxNQUFBLFVBQUEsS0FBQSxPQUFBOztTQUVBLElBQUEsSUFBQTtVQUNBLEtBQUE7VUFDQSxPQUFBOztTQUVBLFFBQUEsUUFBQSxLQUFBLFVBQUEsTUFBQSxLQUFBO1VBQ0EsSUFBQSxNQUFBLFNBQUEsT0FBQSxHQUFBO1dBQ0EsSUFBQSxLQUFBLFdBQUEsaUJBQUEseUJBQUEsS0FBQSxXQUFBLGNBQUEsUUFBQSxTQUFBLENBQUEsR0FBQTtZQUNBLElBQUEsUUFBQTthQUNBLE1BQUE7YUFDQSxTQUFBO2FBQ0EsUUFBQTthQUNBLE9BQUE7O1lBRUEsRUFBQSxPQUFBLEtBQUE7WUFDQSxPQUFBLEtBQUE7Ozs7U0FJQSxJQUFBLFlBQUE7VUFDQSxRQUFBLFFBQUEsS0FBQSxVQUFBLE1BQUEsS0FBQTtXQUNBLElBQUEsSUFBQSxVQUFBLEdBQUE7WUFDQSxJQUFBLE9BQUEsUUFBQSxLQUFBLFFBQUEsYUFBQTthQUNBLFFBQUEsS0FBQSxPQUFBOztZQUVBLFFBQUEsS0FBQSxLQUFBLEtBQUE7Ozs7Z0JBSUE7O1VBRUEsRUFBQSxPQUFBOztVQUVBLGFBQUEsUUFBQTs7Ozs7O09BTUEsa0JBQUEsVUFBQSxPQUFBOzs7UUFHQSxJQUFBLFFBQUEsTUFBQSxNQUFBLGNBQUE7UUFDQSxJQUFBLFlBQUE7UUFDQSxJQUFBLFdBQUEsTUFBQSxPQUFBLEdBQUEsT0FBQSxNQUFBOztRQUVBLElBQUEsU0FBQSxTQUFBLEdBQUE7U0FDQSxXQUFBLE1BQUEsT0FBQSxHQUFBLE9BQUEsTUFBQTtTQUNBLFlBQUE7O1FBRUEsSUFBQSxRQUFBOztRQUVBLEtBQUEsSUFBQSxJQUFBLEdBQUEsS0FBQSxTQUFBLFFBQUEsS0FBQTtTQUNBLElBQUEsU0FBQSxJQUFBOztVQUVBLFNBQUEsS0FBQSxTQUFBLEdBQUEsUUFBQSxlQUFBLEtBQUE7VUFDQSxJQUFBLFNBQUEsR0FBQSxRQUFBLE9BQUEsQ0FBQSxHQUFBO1dBQ0EsU0FBQSxLQUFBLFNBQUEsR0FBQSxPQUFBLEdBQUEsU0FBQSxHQUFBLFFBQUE7OztVQUdBLElBQUEsT0FBQSxTQUFBLEdBQUEsTUFBQTtVQUNBLElBQUEsS0FBQSxTQUFBLEdBQUE7V0FDQSxTQUFBLEtBQUE7V0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsS0FBQSxRQUFBLEtBQUE7WUFDQSxJQUFBLE1BQUEsS0FBQSxLQUFBO2FBQ0EsSUFBQSxJQUFBLEdBQUE7Y0FDQSxTQUFBLE1BQUE7O2FBRUEsU0FBQSxNQUFBLEtBQUE7Ozs7O1VBS0EsSUFBQSxTQUFBLEdBQUEsVUFBQSxHQUFBO1dBQ0EsTUFBQSxLQUFBOzs7O1FBSUEsSUFBQSxTQUFBLFVBQUEsTUFBQSxRQUFBO1NBQ0EsYUFBQTtTQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsS0FBQSxTQUFBLFFBQUEsS0FBQTtVQUNBLElBQUEsT0FBQSxRQUFBLFNBQUEsT0FBQSxhQUFBO1dBQ0EsUUFBQSxTQUFBLE1BQUE7O1VBRUEsUUFBQSxTQUFBLElBQUEsT0FBQTs7OztRQUlBLE9BQUEsU0FBQSxLQUFBLGFBQUEsTUFBQSxPQUFBOztPQUVBLE9BQUEsVUFBQSxLQUFBLE1BQUE7UUFDQSxhQUFBLE1BQUE7O09BRUEsVUFBQSxVQUFBLFNBQUE7O1FBRUEsYUFBQSxVQUFBOzs7UUFHQSxJQUFBLENBQUEsWUFBQTtTQUNBLFFBQUEsUUFBQSxhQUFBLGdCQUFBLE1BQUEsVUFBQSxNQUFBLEtBQUE7O1VBRUEsSUFBQSxJQUFBLGNBQUEsUUFBQSxVQUFBLENBQUEsS0FBQSxJQUFBLGNBQUEsUUFBQSxXQUFBLENBQUEsR0FBQTtXQUNBLGFBQUEsWUFBQTs7VUFFQSxJQUFBLElBQUEsY0FBQSxRQUFBLGNBQUEsQ0FBQSxHQUFBO1dBQ0EsYUFBQSxnQkFBQTs7VUFFQSxJQUFBLElBQUEsY0FBQSxRQUFBLFdBQUEsQ0FBQSxLQUFBLEtBQUEsV0FBQSxVQUFBLEdBQUE7V0FDQSxhQUFBLGFBQUE7O1VBRUEsSUFBQSxJQUFBLGNBQUEsUUFBQSxhQUFBLENBQUEsS0FBQSxJQUFBLGNBQUEsUUFBQSxVQUFBLENBQUEsR0FBQTtXQUNBLGFBQUEsZUFBQTs7O2VBR0E7U0FDQSxRQUFBLFFBQUEsU0FBQSxVQUFBLE1BQUEsS0FBQTtVQUNBLEtBQUEsU0FBQTtVQUNBLElBQUEsS0FBQSxpQkFBQSxlQUFBLE9BQUEsT0FBQSxhQUFBO1dBQ0EsSUFBQSxJQUFBO1lBQ0EsS0FBQSxJQUFBOztXQUVBLFFBQUEsUUFBQSxLQUFBLE1BQUEsVUFBQSxRQUFBLEdBQUE7WUFDQSxFQUFBLFlBQUEsS0FBQTtZQUNBLElBQUEsTUFBQSxXQUFBLFNBQUEsR0FBQTthQUNBLElBQUEsT0FBQSxXQUFBLGlCQUFBLFFBQUEsU0FBQSxLQUFBLE9BQUEsV0FBQSxjQUFBLFFBQUEsU0FBQSxDQUFBLEdBQUE7Y0FDQSxLQUFBLE9BQUEsS0FBQTtlQUNBLE1BQUE7ZUFDQSxTQUFBO2VBQ0EsUUFBQTs7Y0FFQTs7Ozs7V0FLQSxhQUFBLFFBQUE7WUFDQSxNQUFBLENBQUE7WUFDQSxRQUFBLEtBQUE7Ozs7U0FJQSxhQUFBLFlBQUE7O1FBRUEsYUFBQTs7UUFFQSxTQUFBLFVBQUE7U0FDQSxPQUFBLEtBQUEsYUFBQSxnQkFBQSxvQkFBQTtTQUNBLE9BQUEsR0FBQTs7Ozs7Ozs7Ozs7Ozs7OztBQ3hNQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxnQkFBQSxVQUFBOzs7Ozs7O0FDSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsWUFBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxNQUFBO0lBQ0EsTUFBQTtJQUNBLFlBQUE7SUFDQSxnQkFBQTtJQUNBLFFBQUE7O0dBRUEsTUFBQSxVQUFBLE9BQUEsU0FBQSxPQUFBOztLQUVBLFNBQUEsU0FBQSxFQUFBLEVBQUEsT0FBQSxDQUFBLFdBQUEsV0FBQSxXQUFBLFVBQUEsU0FBQSxXQUFBOztJQUVBLElBQUEsSUFBQSxJQUFBLFFBQUEsQ0FBQSxFQUFBLEtBQUEsR0FBQTtRQUNBLE9BQUEsSUFBQSxLQUFBLElBQUEsT0FBQSxHQUFBLE9BQUEsS0FBQTs7SUFFQSxJQUFBLFNBQUEsR0FBQSxPQUFBLFFBQUEsSUFBQSxPQUFBO2FBQ0EsS0FBQSxTQUFBLE9BQUE7T0FDQSxLQUFBLFVBQUEsT0FBQTtPQUNBLEtBQUEsU0FBQTtPQUNBLE9BQUE7YUFDQSxLQUFBLGFBQUEsYUFBQSxPQUFBLEVBQUEsRUFBQSxJQUFBLE9BQUEsRUFBQSxFQUFBO0lBQ0EsSUFBQSxVQUFBLEdBQUEsT0FBQSxRQUFBLElBQUEsT0FBQTthQUNBLEtBQUEsU0FBQSxPQUFBO09BQ0EsS0FBQSxVQUFBLE9BQUE7T0FDQSxLQUFBLFNBQUE7T0FDQSxPQUFBO2FBQ0EsS0FBQSxhQUFBLGFBQUEsT0FBQSxFQUFBLEVBQUEsSUFBQSxPQUFBLEVBQUEsRUFBQTs7O1FBR0EsSUFBQSxNQUFBLEdBQUE7TUFDQTtNQUNBLFlBQUEsT0FBQSxJQUFBO01BQ0EsWUFBQSxPQUFBLElBQUE7UUFDQSxJQUFBLE9BQUEsR0FBQTtNQUNBO01BQ0EsWUFBQSxPQUFBLElBQUE7TUFDQSxZQUFBOzs7UUFHQSxJQUFBLE1BQUEsR0FBQTtNQUNBO01BQ0EsS0FBQTtNQUNBLE1BQUEsU0FBQSxHQUFBLEVBQUEsT0FBQSxFQUFBOzs7UUFHQSxJQUFBLEtBQUE7T0FDQSxNQUFBLE1BQUE7T0FDQSxVQUFBO09BQ0EsS0FBQTtPQUNBO09BQ0EsT0FBQSxRQUFBLEtBQUEsS0FBQTthQUNBLEtBQUEsU0FBQSxHQUFBLEVBQUEsS0FBQSxXQUFBO2FBQ0EsTUFBQSxRQUFBLFNBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBO2FBQ0EsR0FBQSxZQUFBLFdBQUEsR0FBQSxXQUFBO0lBQ0EsSUFBQSxLQUFBO09BQ0EsTUFBQSxNQUFBO09BQ0EsVUFBQTtPQUNBLEtBQUE7T0FDQTtPQUNBLE9BQUE7T0FDQSxLQUFBLEtBQUE7V0FDQSxLQUFBLFNBQUEsR0FBQSxFQUFBLEtBQUEsV0FBQTtXQUNBLE1BQUEsUUFBQSxTQUFBLEdBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQTtPQUNBLE1BQUEsVUFBQTtXQUNBLEdBQUEsU0FBQTs7UUFFQSxHQUFBLFNBQUEsU0FBQSxHQUFBO1lBQ0EsT0FBQSxVQUFBLFFBQUEsS0FBQSxJQUFBLEtBQUEsYUFBQSxTQUFBO2lCQUNBLFVBQUEsS0FBQTs7O0lBR0EsSUFBQSxTQUFBLFFBQUEsS0FBQSxNQUFBO0lBQ0EsU0FBQSxXQUFBLEVBQUE7S0FDQSxNQUFBLFFBQUEsQ0FBQSxRQUFBLEVBQUEsS0FBQTs7UUFFQSxTQUFBLFVBQUEsRUFBQTs7TUFFQSxTQUFBLFFBQUEsS0FBQSxNQUFBO1lBQ0EsTUFBQSxhQUFBLENBQUEsRUFBQSxLQUFBO01BQ0EsTUFBQTs7O1FBR0EsU0FBQSxTQUFBLEVBQUE7O1lBRUEsTUFBQSxhQUFBO01BQ0EsTUFBQTs7OztRQUlBLFNBQUEsU0FBQSxHQUFBO1lBQ0EsSUFBQSxJQUFBLEdBQUEsWUFBQSxLQUFBLFVBQUE7WUFDQSxLQUFBLFdBQUEsRUFBQTtZQUNBLE9BQUEsU0FBQSxHQUFBLEVBQUEsT0FBQSxJQUFBLEVBQUE7O0lBRUEsU0FBQSxVQUFBLEdBQUE7WUFDQSxJQUFBLElBQUEsR0FBQSxZQUFBLEtBQUEsVUFBQTtZQUNBLEtBQUEsV0FBQSxFQUFBO1lBQ0EsT0FBQSxTQUFBLEdBQUEsRUFBQSxPQUFBLEtBQUEsRUFBQTs7O0lBR0EsTUFBQSxPQUFBLFFBQUEsU0FBQSxHQUFBLEVBQUE7S0FDQSxHQUFBLE1BQUEsR0FBQSxPQUFBO0tBQ0EsT0FBQSxVQUFBLFFBQUEsS0FBQSxJQUFBLElBQUEsYUFBQSxTQUFBO1FBQ0EsVUFBQSxLQUFBO0tBQ0EsUUFBQSxVQUFBLFFBQUEsS0FBQSxJQUFBLElBQUEsYUFBQSxTQUFBO1FBQ0EsVUFBQSxLQUFBOzs7Ozs7Ozs7QUNoSEEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxRQUFBLG9CQUFBLFlBQUEsZ0JBQUEsVUFBQTs7Ozs7O0FDSEEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFVBQUEsWUFBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBOztHQUVBLFlBQUE7R0FDQSxPQUFBO0lBQ0EsTUFBQTtJQUNBLFlBQUE7SUFDQSxnQkFBQTs7R0FFQSxNQUFBLFNBQUEsT0FBQSxTQUFBLE9BQUE7O0lBRUEsSUFBQSxTQUFBO01BQ0EsS0FBQTtNQUNBLE9BQUE7TUFDQSxRQUFBO01BQ0EsTUFBQTs7S0FFQSxRQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUE7S0FDQSxTQUFBLE1BQUEsT0FBQSxNQUFBLE9BQUE7S0FDQSxXQUFBO0tBQ0EsUUFBQTs7O0lBR0EsSUFBQSxRQUFBO0tBQ0EsR0FBQSxHQUFBLE1BQUE7O0lBRUEsTUFBQSxFQUFBLE9BQUEsQ0FBQSxHQUFBO0lBQ0EsTUFBQSxFQUFBLE1BQUEsQ0FBQSxRQUFBO0lBQ0EsSUFBQSxNQUFBLEdBQUEsT0FBQSxRQUFBLElBQUEsT0FBQTtNQUNBLEtBQUEsU0FBQSxRQUFBLE9BQUEsT0FBQSxPQUFBO01BQ0EsS0FBQSxVQUFBLFNBQUEsT0FBQSxNQUFBLE9BQUE7TUFDQSxPQUFBO01BQ0EsS0FBQSxhQUFBLGlCQUFBLE9BQUEsTUFBQTs7OztJQUlBLElBQUEsT0FBQSxJQUFBLFVBQUEsU0FBQSxLQUFBLE1BQUEsTUFBQSxRQUFBLE9BQUEsS0FBQSxLQUFBLFNBQUE7O0lBRUEsSUFBQSxTQUFBO01BQ0EsT0FBQTtNQUNBLEtBQUEsS0FBQSxTQUFBLEdBQUEsR0FBQTtNQUNBLE9BQUEsY0FBQSxLQUFBLFdBQUEsU0FBQSxHQUFBLFdBQUEsU0FBQSxXQUFBLEdBQUEsTUFBQSxNQUFBLE9BQUE7O01BRUEsS0FBQSxTQUFBO0lBQ0EsSUFBQSxZQUFBO01BQ0EsT0FBQTtNQUNBLEtBQUEsS0FBQSxTQUFBLEdBQUEsR0FBQTtNQUNBLE9BQUEsY0FBQSxLQUFBLFdBQUEsVUFBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLFdBQUEsU0FBQSxNQUFBLEVBQUEsRUFBQSxTQUFBLFdBQUEsR0FBQSxNQUFBLE1BQUEsT0FBQTs7Ozs7Ozs7Ozs7O0tBWUEsTUFBQSxRQUFBLFNBQUEsR0FBQTtNQUNBLE9BQUEsRUFBQTs7Ozs7Ozs7OztJQVVBLElBQUEsWUFBQTtNQUNBLE9BQUE7O0lBRUEsVUFBQSxLQUFBLFNBQUEsR0FBQTtNQUNBLE9BQUEsRUFBQTtRQUNBLEtBQUEsS0FBQSxTQUFBLEdBQUEsR0FBQTtNQUNBLE9BQUEsS0FBQSxXQUFBOztNQUVBLEtBQUEsS0FBQSxDQUFBO01BQ0EsS0FBQSxTQUFBLFNBQUEsR0FBQTtNQUNBLE9BQUE7O01BRUEsTUFBQSxPQUFBOztJQUVBLElBQUEsYUFBQTtNQUNBLE9BQUE7SUFDQSxXQUFBLEtBQUEsU0FBQSxFQUFBO01BQ0EsT0FBQSxFQUFBOztNQUVBLEtBQUEsS0FBQSxTQUFBLEdBQUEsR0FBQTtNQUNBLE9BQUEsS0FBQSxXQUFBOztNQUVBLEtBQUEsS0FBQSxTQUFBO01BQ0EsS0FBQSxTQUFBLFNBQUEsR0FBQTtNQUNBLE9BQUE7O01BRUEsTUFBQSxRQUFBLFNBQUEsRUFBQTtNQUNBLE9BQUEsRUFBQTs7OztJQUlBLFNBQUEsYUFBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLEdBQUEsSUFBQSxJQUFBLElBQUEsSUFBQTtLQUNBLElBQUE7S0FDQSxTQUFBLE9BQUEsSUFBQSxLQUFBLE1BQUE7S0FDQSxVQUFBLE9BQUEsSUFBQSxJQUFBO0tBQ0EsSUFBQSxJQUFBO01BQ0EsVUFBQSxNQUFBLElBQUEsTUFBQSxJQUFBLFlBQUEsSUFBQSxNQUFBO1lBQ0E7TUFDQSxVQUFBLE1BQUE7TUFDQSxVQUFBLE1BQUE7O0tBRUEsVUFBQSxPQUFBLElBQUEsSUFBQTtLQUNBLElBQUEsSUFBQTtNQUNBLFVBQUEsTUFBQSxJQUFBLE1BQUEsSUFBQSxZQUFBLENBQUEsSUFBQSxNQUFBO1lBQ0E7TUFDQSxVQUFBLE1BQUE7TUFDQSxVQUFBLE1BQUEsQ0FBQTs7S0FFQSxVQUFBLE9BQUEsSUFBQSxJQUFBO0tBQ0EsSUFBQSxJQUFBO01BQ0EsVUFBQSxNQUFBLElBQUEsTUFBQSxJQUFBLFlBQUEsQ0FBQSxJQUFBLE1BQUEsQ0FBQTtZQUNBO01BQ0EsVUFBQSxNQUFBLENBQUE7TUFDQSxVQUFBLE1BQUEsQ0FBQTs7S0FFQSxVQUFBLE9BQUEsSUFBQSxJQUFBO0tBQ0EsSUFBQSxJQUFBO01BQ0EsVUFBQSxNQUFBLElBQUEsTUFBQSxJQUFBLFlBQUEsSUFBQSxNQUFBLENBQUE7WUFDQTtNQUNBLFVBQUEsTUFBQSxDQUFBO01BQ0EsVUFBQSxNQUFBOztLQUVBLFVBQUE7S0FDQSxPQUFBOztJQUVBLE1BQUEsT0FBQSxRQUFBLFNBQUEsR0FBQSxFQUFBO0tBQ0EsR0FBQSxNQUFBLEdBQUEsT0FBQTs7O01BR0EsVUFBQSxhQUFBLFNBQUEsS0FBQSxLQUFBLEtBQUEsU0FBQSxHQUFBLEdBQUE7UUFDQSxJQUFBLFVBQUEsV0FBQTtRQUNBLEdBQUEsTUFBQSxLQUFBLEdBQUEsU0FBQSxHQUFBO1NBQ0EsVUFBQTs7UUFFQSxPQUFBLGNBQUEsS0FBQSxXQUFBLFVBQUEsTUFBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLFNBQUEsV0FBQSxTQUFBLE1BQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxTQUFBLFNBQUEsTUFBQSxNQUFBLE9BQUE7O01BRUEsVUFBQSxhQUFBLFNBQUEsS0FBQSxNQUFBLFFBQUEsVUFBQSxFQUFBLEdBQUE7UUFDQSxJQUFBLElBQUEsR0FBQSxZQUFBLFNBQUEsRUFBQSxRQUFBLFNBQUEsTUFBQSxLQUFBLEdBQUE7UUFDQSxPQUFBLFVBQUEsR0FBQTtTQUNBLEtBQUEsZUFBQSxLQUFBLE1BQUEsRUFBQSxLQUFBLEtBQUE7OztTQUdBLEtBQUEsT0FBQSxTQUFBLEdBQUEsRUFBQTtRQUNBLEVBQUEsUUFBQSxNQUFBLEtBQUEsR0FBQTs7Ozs7Ozs7Ozs7O0FDOUpBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLGdCQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLG1CQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxNQUFBO0dBQ0Esa0JBQUE7SUFDQSxLQUFBO0lBQ0EsVUFBQTtJQUNBLFFBQUE7O0dBRUEsTUFBQSxVQUFBLFFBQUEsU0FBQSxRQUFBOzs7Ozs7Ozs7O0FDaEJBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLGtDQUFBLFVBQUEsUUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsV0FBQSxVQUFBO0dBQ0EsT0FBQTtJQUNBLE9BQUE7OztFQUdBLEdBQUEsVUFBQSxRQUFBLE9BQUEsWUFBQSxHQUFBO0VBQ0EsR0FBQSxTQUFBO0dBQ0EsU0FBQTtHQUNBLFVBQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLGlCQUFBO0dBQ0Esa0JBQUE7R0FDQSxlQUFBO0dBQ0EsaUJBQUE7R0FDQSxVQUFBOztFQUVBLEdBQUEsUUFBQTtHQUNBLFNBQUE7SUFDQSxPQUFBOztHQUVBLE1BQUE7OztFQUdBOztFQUVBLFNBQUEsVUFBQTtHQUNBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBO0dBQ0EsR0FBQSxNQUFBLFFBQUEsTUFBQSxTQUFBLENBQUEsR0FBQSxNQUFBLEtBQUEsR0FBQSxNQUFBOztHQUVBLFNBQUEsV0FBQTtHQUNBLEdBQUEsTUFBQSxRQUFBLFFBQUE7SUFDQSxNQUFBO0lBQ0EsZ0JBQUE7SUFDQSxTQUFBO0lBQ0EsUUFBQTtLQUNBLEtBQUE7S0FDQSxPQUFBO0tBQ0EsUUFBQTtLQUNBLE1BQUE7O0lBRUEsR0FBQSxVQUFBLEdBQUE7S0FDQSxPQUFBLEVBQUE7O0lBRUEsR0FBQSxVQUFBLEdBQUE7S0FDQSxPQUFBLEVBQUE7O0lBRUEsWUFBQTtJQUNBLFlBQUE7OztJQUdBLG9CQUFBOztJQUVBLFFBQUEsQ0FBQSxHQUFBLE1BQUEsS0FBQSxHQUFBLE1BQUE7O0lBRUEsT0FBQTtLQUNBLFdBQUE7S0FDQSxtQkFBQTs7SUFFQSxPQUFBO0tBQ0EsV0FBQTtLQUNBLG1CQUFBOztJQUVBLFFBQUE7S0FDQSxZQUFBOztJQUVBLE9BQUE7S0FDQSxhQUFBOzs7OztHQUtBLElBQUEsR0FBQSxRQUFBLFVBQUEsTUFBQTtJQUNBLEdBQUEsTUFBQSxRQUFBLE1BQUEsU0FBQSxDQUFBLFNBQUEsR0FBQSxNQUFBLE1BQUEsR0FBQSxNQUFBOzs7R0FHQSxPQUFBLEdBQUE7O0VBRUEsU0FBQSxpQkFBQTtHQUNBLElBQUEsWUFBQTtHQUNBLEdBQUEsUUFBQTtJQUNBLEtBQUE7SUFDQSxLQUFBOztHQUVBLFFBQUEsUUFBQSxHQUFBLFdBQUEsVUFBQSxNQUFBLEtBQUE7SUFDQSxJQUFBLFFBQUE7S0FDQSxJQUFBO0tBQ0EsS0FBQSxLQUFBO0tBQ0EsT0FBQSxLQUFBO0tBQ0EsUUFBQTs7SUFFQSxRQUFBLFFBQUEsR0FBQSxNQUFBLFVBQUEsTUFBQSxHQUFBO0tBQ0EsTUFBQSxPQUFBLEtBQUE7TUFDQSxJQUFBO01BQ0EsR0FBQSxLQUFBLEtBQUEsT0FBQTtNQUNBLEdBQUEsS0FBQSxLQUFBLE9BQUE7O0tBRUEsR0FBQSxNQUFBLE1BQUEsS0FBQSxJQUFBLEdBQUEsTUFBQSxLQUFBLEtBQUEsS0FBQSxPQUFBO0tBQ0EsR0FBQSxNQUFBLE1BQUEsS0FBQSxJQUFBLEdBQUEsTUFBQSxLQUFBLEtBQUEsS0FBQSxPQUFBOztJQUVBLFVBQUEsS0FBQTs7R0FFQSxHQUFBLE1BQUE7R0FDQSxHQUFBLE1BQUE7R0FDQSxHQUFBLE1BQUEsT0FBQTtHQUNBLElBQUEsR0FBQSxRQUFBLFVBQUEsUUFBQTtJQUNBLEdBQUEsTUFBQSxRQUFBLE1BQUEsVUFBQSxDQUFBLFNBQUEsR0FBQSxNQUFBLE1BQUEsR0FBQSxNQUFBOztHQUVBLE9BQUE7R0FDQTtFQUNBLE9BQUEsT0FBQSxXQUFBLFVBQUEsR0FBQSxHQUFBO0dBQ0EsSUFBQSxDQUFBLEdBQUE7SUFDQTs7O0lBR0E7SUFDQTs7OztFQUlBLE9BQUEsT0FBQSxnQkFBQSxVQUFBLEdBQUEsR0FBQTtHQUNBLElBQUEsTUFBQSxHQUFBO0lBQ0E7Ozs7Ozs7OztBQ2xJQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsVUFBQSxrQkFBQSxDQUFBLGVBQUEsU0FBQSxhQUFBOztFQUVBLElBQUEsU0FBQTtRQUNBLElBQUEsU0FBQTs7UUFFQSxTQUFBLE1BQUEsSUFBQTtZQUNBLElBQUEsS0FBQSxHQUFBLEdBQUEsYUFBQTtZQUNBLElBQUEsQ0FBQSxJQUFBO2dCQUNBLEtBQUEsRUFBQTtnQkFDQSxHQUFBLEdBQUEsYUFBQSxxQkFBQTs7WUFFQSxPQUFBOztRQUVBLFNBQUEsU0FBQSxJQUFBO1lBQ0EsSUFBQSxRQUFBLE9BQUE7WUFDQSxJQUFBLENBQUEsT0FBQTtnQkFDQSxRQUFBO2dCQUNBLE9BQUEsTUFBQTs7WUFFQSxPQUFBOzs7UUFHQSxTQUFBLGVBQUEsU0FBQSxPQUFBLFVBQUEsU0FBQSxRQUFBO1lBQ0EsT0FBQSxXQUFBO2dCQUNBLE1BQUEsWUFBQTtnQkFDQSxNQUFBLFdBQUE7Z0JBQ0EsTUFBQSxTQUFBO2dCQUNBLFNBQUEsUUFBQSxRQUFBLFdBQUE7b0JBQ0EsSUFBQSxXQUFBLE1BQUEsV0FBQSxRQUFBO3dCQUNBLFFBQUEsR0FBQSxNQUFBLFNBQUE7O29CQUVBLE1BQUEsWUFBQTtvQkFDQSxNQUFBLFdBQUE7b0JBQ0EsTUFBQTs7Ozs7UUFLQSxPQUFBO1lBQ0EsT0FBQSxTQUFBLFNBQUEsUUFBQTs7b0JBRUEsSUFBQSxRQUFBLFNBQUEsTUFBQTtvQkFDQSxJQUFBLFNBQUEsQ0FBQSxNQUFBLGFBQUEsTUFBQTt3QkFDQSxNQUFBLFNBQUEsUUFBQSxHQUFBO29CQUNBLElBQUEsV0FBQSxZQUFBLFNBQUE7d0JBQ0EsTUFBQSxDQUFBLFFBQUEsU0FBQSxNQUFBLFNBQUE7d0JBQ0EsSUFBQSxDQUFBLFFBQUEsT0FBQSxTQUFBOztvQkFFQSxJQUFBLFVBQUE7d0JBQ0EsSUFBQSxNQUFBLFdBQUE7NEJBQ0EsTUFBQTs4QkFDQSxlQUFBOzZDQUNBOzZDQUNBOzZDQUNBOzZDQUNBOzRCQUNBLE9BQUEsTUFBQSxTQUFBOzs2QkFFQTs0QkFDQSxNQUFBLFNBQUE7NEJBQ0EsT0FBQSxlQUFBO2tEQUNBO2tEQUNBO2tEQUNBO2tEQUNBOzs7O2dCQUlBOztZQUVBLE9BQUEsU0FBQSxTQUFBLFFBQUE7O29CQUVBLElBQUEsUUFBQSxTQUFBLE1BQUE7b0JBQ0EsSUFBQSxTQUFBLENBQUEsTUFBQSxhQUFBLE1BQUE7d0JBQ0EsTUFBQSxTQUFBLFFBQUEsR0FBQTs7b0JBRUEsSUFBQSxXQUFBLFlBQUEsU0FBQTt3QkFDQSxNQUFBLENBQUEsUUFBQSxPQUFBLFNBQUE7d0JBQ0EsSUFBQSxDQUFBLFFBQUEsU0FBQSxNQUFBLFNBQUE7O29CQUVBLElBQUEsVUFBQTt3QkFDQSxJQUFBLE1BQUEsV0FBQTs0QkFDQSxNQUFBLFNBQUEsZUFBQTswREFDQTswREFDQTswREFDQTswREFDQTs0QkFDQSxPQUFBLE1BQUEsU0FBQTs7NkJBRUE7NEJBQ0EsTUFBQSxTQUFBOzRCQUNBLE9BQUEsZUFBQTtrREFDQTtrREFDQTtrREFDQTtrREFDQTs7OztnQkFJQTs7Ozs7O0FDdEdBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsUUFBQSxvQkFBQSxZQUFBLG1CQUFBLFVBQUE7Ozs7OztBQ0hBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLFVBQUEsV0FBQTs7RUFFQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLGFBQUE7R0FDQSxZQUFBO0dBQ0EsY0FBQTtHQUNBLE1BQUE7R0FDQSxrQkFBQTtJQUNBLE1BQUE7SUFDQSxRQUFBO0lBQ0EsUUFBQTtJQUNBLE1BQUE7O0dBRUEsUUFBQTtHQUNBLE1BQUEsVUFBQSxPQUFBLFNBQUEsT0FBQTs7Ozs7Ozs7O0FDbEJBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLHdDQUFBLFVBQUEsUUFBQSxhQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFFBQUE7O0VBRUEsU0FBQSxZQUFBLE9BQUE7R0FDQSxJQUFBLEdBQUEsS0FBQSxZQUFBLE1BQUEsSUFBQTtJQUNBLEdBQUEsS0FBQSxXQUFBO1VBQ0E7SUFDQSxHQUFBLEtBQUEsV0FBQSxNQUFBO0lBQ0EsR0FBQSxLQUFBLFFBQUE7OztFQUdBLFNBQUEsY0FBQSxNQUFBLE9BQUE7R0FDQSxPQUFBLEdBQUEsS0FBQSxZQUFBLE1BQUEsS0FBQSxPQUFBOztFQUVBLFNBQUEsWUFBQTtHQUNBLFlBQUEsS0FBQSxVQUFBLEdBQUEsT0FBQSxLQUFBLFVBQUEsTUFBQTtJQUNBLEdBQUEsT0FBQSxLQUFBO0lBQ0EsR0FBQSxjQUFBO0tBQ0EsR0FBQSxRQUFBO0lBQ0EsR0FBQSxLQUFBLFFBQUE7SUFDQSxPQUFBLFFBQUEsNEJBQUE7Ozs7Ozs7QUM1QkEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFVBQUEsWUFBQTs7Q0FFQSxTQUFBLFVBQUEsQ0FBQSxZQUFBOztDQUVBLFNBQUEsU0FBQSxVQUFBLGNBQUE7RUFDQSxPQUFBO0dBQ0EsVUFBQTtHQUNBLFNBQUE7R0FDQSxZQUFBO0dBQ0EsYUFBQTtHQUNBLE1BQUE7OztFQUdBLFNBQUEscUJBQUEsUUFBQSxTQUFBLFFBQUE7Ozs7O0FDaEJBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxtQkFBQSxXQUFBLGtEQUFBLFNBQUEsUUFBQSxTQUFBLFVBQUE7RUFDQSxPQUFBLE9BQUE7RUFDQSxPQUFBLFdBQUE7RUFDQSxPQUFBLGlCQUFBO0VBQ0EsT0FBQSxnQkFBQTtFQUNBLE9BQUEsY0FBQTtFQUNBLE9BQUEsYUFBQTtFQUNBLE9BQUEsZ0JBQUE7RUFDQSxPQUFBLGFBQUE7RUFDQTs7RUFFQSxTQUFBLFdBQUE7R0FDQSxPQUFBO0dBQ0EsT0FBQTtHQUNBLE9BQUE7R0FDQSxPQUFBO0dBQ0EsT0FBQTtHQUNBLE9BQUEsT0FBQSx1QkFBQSxTQUFBLFNBQUEsU0FBQTtJQUNBLElBQUEsWUFBQSxTQUFBO0tBQ0EsT0FBQTs7SUFFQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLE9BQUE7SUFDQSxPQUFBOztHQUVBLE9BQUEsT0FBQSxXQUFBLFNBQUEsR0FBQSxHQUFBO0lBQ0EsSUFBQSxNQUFBLEdBQUE7S0FDQTs7SUFFQSxPQUFBOzs7O0VBSUEsU0FBQSxhQUFBO0dBQ0EsT0FBQSxPQUFBLENBQUEsT0FBQTtHQUNBOztFQUVBLFNBQUEsY0FBQTtHQUNBLElBQUEsT0FBQTtHQUNBLFFBQUEsUUFBQSxPQUFBLE1BQUEsU0FBQSxNQUFBO0lBQ0EsS0FBQSxPQUFBLFFBQUEsWUFBQSxRQUFBLFdBQUEsS0FBQSxPQUFBLFFBQUEsWUFBQTtJQUNBLEtBQUEsV0FBQSxTQUFBLEtBQUE7O0dBRUEsSUFBQSxTQUFBLFFBQUEsV0FBQSxPQUFBLEtBQUEsQ0FBQSxPQUFBLFFBQUEsWUFBQSxNQUFBLFVBQUE7R0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsT0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLE9BQUEsR0FBQSxPQUFBLE9BQUEsUUFBQSxLQUFBO0tBQ0EsT0FBQSxJQUFBOzs7R0FHQSxPQUFBLFFBQUEsT0FBQSxRQUFBLFlBQUEsS0FBQSxXQUFBOztFQUVBLFNBQUEsV0FBQSxRQUFBO0dBQ0EsSUFBQSxTQUFBLFFBQUEsV0FBQSxPQUFBLEtBQUEsQ0FBQSxPQUFBLFFBQUEsWUFBQSxNQUFBLFVBQUE7R0FDQSxJQUFBLE9BQUE7R0FDQSxRQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUEsSUFBQTtJQUNBLEdBQUEsS0FBQSxXQUFBLFFBQUEsUUFBQTtLQUNBLE9BQUE7OztHQUdBLE9BQUEsS0FBQTs7RUFFQSxTQUFBLGdCQUFBO0dBQ0EsT0FBQSxVQUFBLENBQUEsT0FBQSxRQUFBLFFBQUEsWUFBQTs7O0VBR0EsU0FBQSxnQkFBQTtHQUNBLE9BQUEsZ0JBQUE7SUFDQSxPQUFBLE9BQUEsUUFBQSxRQUFBLFlBQUE7SUFDQSxPQUFBLE9BQUEsUUFBQSxRQUFBLFlBQUE7SUFDQSxVQUFBO0lBQ0EsT0FBQTtLQUNBLEtBQUE7OztHQUdBLE9BQUEsbUJBQUE7SUFDQSxPQUFBLE9BQUEsUUFBQSxRQUFBLFlBQUE7SUFDQSxPQUFBLE9BQUEsUUFBQSxRQUFBLFlBQUE7SUFDQSxVQUFBO0lBQ0EsT0FBQTtLQUNBLEtBQUE7Ozs7O0VBS0EsU0FBQSxXQUFBO0dBQ0EsT0FBQSxRQUFBO0lBQ0EsU0FBQTtLQUNBLE9BQUE7TUFDQSxNQUFBOztNQUVBLGdCQUFBO01BQ0EsUUFBQTtPQUNBLEtBQUE7T0FDQSxPQUFBO09BQ0EsUUFBQTtPQUNBLE1BQUE7O01BRUEsR0FBQSxTQUFBLEdBQUE7T0FDQSxPQUFBLEVBQUE7O01BRUEsR0FBQSxTQUFBLEdBQUE7T0FDQSxPQUFBLEVBQUE7O01BRUEsWUFBQTtNQUNBLFdBQUE7TUFDQSxvQkFBQTtNQUNBLHlCQUFBO01BQ0EsUUFBQSxDQUFBLEtBQUE7TUFDQSxPQUFBO09BQ0EsV0FBQTs7TUFFQSxPQUFBO09BQ0EsV0FBQTtPQUNBLG1CQUFBOztNQUVBLFFBQUE7T0FDQSxZQUFBO09BQ0EsUUFBQTtRQUNBLFFBQUE7OztNQUdBLE9BQUE7T0FDQSxhQUFBOzs7O0lBSUEsTUFBQTs7R0FFQSxPQUFBLE9BQUE7OztFQUdBLFNBQUEsaUJBQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxRQUFBLFFBQUEsT0FBQSxRQUFBLFlBQUEsVUFBQSxTQUFBLE1BQUEsS0FBQTtJQUNBLElBQUEsUUFBQTtLQUNBLEtBQUEsS0FBQTtLQUNBLE9BQUEsS0FBQTtLQUNBLFFBQUE7O0lBRUEsUUFBQSxRQUFBLE9BQUEsUUFBQSxLQUFBLFNBQUEsTUFBQTtLQUNBLE1BQUEsT0FBQSxLQUFBO01BQ0EsR0FBQSxLQUFBO01BQ0EsR0FBQSxLQUFBLEtBQUE7OztJQUdBLFVBQUEsS0FBQTs7R0FFQSxPQUFBLE1BQUEsT0FBQTs7Ozs7O0FDdkpBLENBQUEsWUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLFlBQUEsWUFBQTtFQUNBLElBQUEsV0FBQSxVQUFBO0lBQ0EsT0FBQTtNQUNBLE1BQUE7OztFQUdBLE9BQUE7R0FDQSxVQUFBOztHQUVBLFlBQUE7R0FDQSxPQUFBO0lBQ0EsTUFBQTs7R0FFQSxNQUFBLFVBQUEsUUFBQSxTQUFBLFFBQUE7SUFDQSxJQUFBLFVBQUEsUUFBQSxPQUFBLFlBQUE7SUFDQSxPQUFBO0lBQ0EsT0FBQTtJQUNBLElBQUEsUUFBQTtLQUNBLFNBQUE7S0FDQSxTQUFBLENBQUEsU0FBQTtLQUNBLElBQUEsR0FBQSxNQUFBLFNBQUEsTUFBQSxDQUFBLEdBQUEsSUFBQSxLQUFBO0tBQ0EsSUFBQSxHQUFBLE1BQUEsTUFBQSxTQUFBLEtBQUEsT0FBQSxDQUFBLEdBQUEsSUFBQSxNQUFBLENBQUEsR0FBQTs7S0FFQSxVQUFBO0tBQ0EsV0FBQTtLQUNBLGNBQUE7O0lBRUEsSUFBQSxNQUFBLEdBQUEsT0FBQSxRQUFBOzs7SUFHQSxJQUFBLE1BQUEsSUFBQSxPQUFBO01BQ0EsS0FBQSxTQUFBLFFBQUEsVUFBQTtNQUNBLEtBQUEsVUFBQSxTQUFBLFVBQUE7TUFDQSxPQUFBO01BQ0EsS0FBQSxhQUFBLGVBQUEsQ0FBQSxTQUFBLFNBQUEsU0FBQSxXQUFBOzs7Ozs7OztJQVFBLElBQUEsWUFBQSxHQUFBLE9BQUE7TUFDQSxLQUFBO01BQ0EsTUFBQSxVQUFBLEdBQUE7TUFDQSxPQUFBOzs7SUFHQSxJQUFBLE1BQUEsR0FBQSxJQUFBO01BQ0EsV0FBQSxVQUFBLEdBQUE7TUFDQSxPQUFBLEtBQUEsSUFBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUE7O01BRUEsU0FBQSxVQUFBLEdBQUE7TUFDQSxPQUFBLEtBQUEsSUFBQSxHQUFBLEtBQUEsSUFBQSxJQUFBLEtBQUEsSUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBOztNQUVBLFlBQUEsVUFBQSxHQUFBO01BQ0EsT0FBQSxLQUFBLElBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEtBQUEsRUFBQTs7TUFFQSxZQUFBLFVBQUEsR0FBQTtNQUNBLE9BQUEsS0FBQSxJQUFBLEdBQUEsRUFBQSxFQUFBLElBQUEsRUFBQTs7O0lBR0EsSUFBQSxXQUFBO0tBQ0EsV0FBQTtLQUNBLFdBQUE7S0FDQSxXQUFBOzs7SUFHQSxJQUFBLFFBQUEsVUFBQSxNQUFBLE9BQUE7O0lBRUEsSUFBQSxPQUFBLElBQUEsVUFBQSxRQUFBLEtBQUE7SUFDQSxLQUFBLFFBQUEsT0FBQTtNQUNBLEtBQUEsTUFBQSxVQUFBLEdBQUEsR0FBQTtNQUNBLE9BQUEsVUFBQTs7TUFFQSxLQUFBLEtBQUE7TUFDQSxLQUFBLGFBQUE7TUFDQSxLQUFBLFNBQUEsVUFBQSxHQUFBO01BQ0EsT0FBQSxFQUFBLFFBQUEsV0FBQTs7TUFFQSxNQUFBLFFBQUE7TUFDQSxHQUFBLFNBQUE7O0lBRUEsSUFBQSxPQUFBLElBQUEsVUFBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLFlBQUEsS0FBQSxRQUFBLE9BQUE7TUFDQSxNQUFBLGdCQUFBO01BQ0EsS0FBQSxlQUFBLFVBQUEsR0FBQTtNQUNBLElBQUEsRUFBQTtPQUNBLE9BQUE7OztPQUdBLE9BQUE7O01BRUEsS0FBQSxNQUFBLFVBQUEsR0FBQTtNQUNBLE9BQUEsVUFBQSxFQUFBOztNQUVBLEtBQUEsU0FBQSxVQUFBLEdBQUE7TUFDQSxPQUFBOztNQUVBLEtBQUEsTUFBQSxVQUFBLEdBQUE7TUFDQSxPQUFBLEVBQUEsUUFBQSxTQUFBOztNQUVBLEtBQUEsYUFBQSxVQUFBLEdBQUE7TUFDQSxJQUFBLFlBQUEsQ0FBQSxFQUFBLFFBQUEsSUFBQSxNQUFBLEtBQUEsU0FBQTtPQUNBLGNBQUEsRUFBQSxJQUFBLE1BQUEsSUFBQSxDQUFBO09BQ0EsUUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxNQUFBLFlBQUEsYUFBQTtPQUNBLFNBQUEsU0FBQSxZQUFBLENBQUEsS0FBQTtPQUNBLFNBQUEsQ0FBQSxFQUFBLEVBQUEsS0FBQSxlQUFBO09BQ0EsWUFBQSxRQUFBLEtBQUEsQ0FBQSxNQUFBO01BQ0EsSUFBQSxFQUFBLFFBQUEsWUFBQSxFQUFBLFFBQUEsVUFBQSxVQUFBO01BQ0EsSUFBQSxFQUFBLFNBQUEsR0FBQTtPQUNBLFNBQUEsQ0FBQTtPQUNBLFNBQUE7T0FDQSxXQUFBO2FBQ0EsSUFBQSxFQUFBLFNBQUEsR0FBQSxVQUFBLENBQUE7V0FDQSxJQUFBLEVBQUEsU0FBQSxHQUFBLFVBQUEsQ0FBQTtXQUNBLElBQUEsRUFBQSxTQUFBLEdBQUEsVUFBQTtNQUNBLE9BQUEsWUFBQSxTQUFBLGdCQUFBLFNBQUEsYUFBQSxXQUFBOztNQUVBLEdBQUEsU0FBQTs7SUFFQSxVQUFBLE9BQUE7TUFDQSxLQUFBLEtBQUE7TUFDQSxLQUFBLFVBQUEsR0FBQTs7TUFFQSxJQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQTtPQUNBLE9BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxLQUFBLE9BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxNQUFBOztPQUVBLE9BQUEsRUFBQSxLQUFBLE1BQUEsS0FBQTs7SUFFQSxVQUFBLE9BQUE7TUFDQSxLQUFBLEtBQUE7TUFDQSxLQUFBLE1BQUE7TUFDQSxLQUFBLFVBQUEsR0FBQTs7TUFFQSxJQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQTtPQUNBLE9BQUEsQ0FBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLE1BQUEsTUFBQSxPQUFBLEVBQUEsS0FBQSxNQUFBLEtBQUEsTUFBQTs7T0FFQSxPQUFBLENBQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxNQUFBLE1BQUEsT0FBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLE1BQUE7O0lBRUEsVUFBQSxPQUFBO01BQ0EsS0FBQSxLQUFBO01BQ0EsS0FBQSxNQUFBO01BQ0EsS0FBQSxVQUFBLEdBQUE7TUFDQSxJQUFBLEVBQUEsU0FBQSxLQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQSxZQUFBLEVBQUEsUUFBQTtPQUNBLE9BQUEsQ0FBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLE1BQUEsTUFBQSxPQUFBLEVBQUEsS0FBQSxNQUFBLEtBQUEsTUFBQTs7T0FFQSxPQUFBLENBQUEsRUFBQSxLQUFBLE1BQUEsS0FBQSxNQUFBLE1BQUEsT0FBQSxFQUFBLEtBQUEsTUFBQSxLQUFBLE1BQUEsSUFBQTs7O0lBR0EsU0FBQSxNQUFBLEdBQUE7O0tBRUEsS0FBQTtPQUNBLFNBQUE7T0FDQSxVQUFBLEtBQUEsU0FBQTs7OztLQUlBLEtBQUEsTUFBQSxjQUFBLFVBQUEsR0FBQTtPQUNBLE9BQUEsV0FBQSxHQUFBLEtBQUEsT0FBQSxHQUFBLE9BQUEsTUFBQSxNQUFBOztPQUVBO09BQ0EsU0FBQTtPQUNBLFVBQUEsZUFBQSxVQUFBLEdBQUE7T0FDQSxPQUFBLFlBQUE7UUFDQSxJQUFBLEVBQUE7U0FDQSxPQUFBOzs7U0FHQSxPQUFBOzs7T0FHQSxVQUFBLGFBQUEsVUFBQSxHQUFBO09BQ0EsSUFBQSxZQUFBLENBQUEsRUFBQSxRQUFBLElBQUEsTUFBQSxLQUFBLFNBQUE7T0FDQSxPQUFBLFlBQUE7UUFDQSxJQUFBLFlBQUEsQ0FBQSxFQUFBLFFBQUEsSUFBQSxNQUFBLEtBQUEsU0FBQTtTQUNBLGNBQUEsRUFBQSxJQUFBLE1BQUEsSUFBQSxDQUFBO1NBQ0EsUUFBQSxFQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxNQUFBLFlBQUEsYUFBQTtTQUNBLFNBQUEsU0FBQSxZQUFBLENBQUEsS0FBQTtTQUNBLFNBQUEsQ0FBQSxFQUFBLEVBQUEsS0FBQSxlQUFBO1NBQ0EsWUFBQSxRQUFBLEtBQUEsQ0FBQSxNQUFBO1FBQ0EsSUFBQSxFQUFBLFFBQUEsWUFBQSxFQUFBLFFBQUEsVUFBQSxVQUFBO1FBQ0EsSUFBQSxFQUFBLFNBQUEsR0FBQTtTQUNBLFNBQUEsQ0FBQTtTQUNBLFNBQUE7U0FDQSxXQUFBO2VBQ0EsSUFBQSxFQUFBLFNBQUEsR0FBQSxVQUFBLENBQUE7YUFDQSxJQUFBLEVBQUEsU0FBQSxHQUFBLFVBQUEsQ0FBQTthQUNBLElBQUEsRUFBQSxTQUFBLEdBQUEsVUFBQTtRQUNBLE9BQUEsWUFBQSxTQUFBLGdCQUFBLFNBQUEsYUFBQSxXQUFBOzs7T0FHQSxNQUFBLGdCQUFBLFVBQUEsR0FBQTtPQUNBLE9BQUEsV0FBQSxHQUFBLEtBQUEsSUFBQTs7T0FFQSxLQUFBLE9BQUEsVUFBQSxHQUFBO09BQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQSxjQUFBLFdBQUEsR0FBQSxLQUFBLE9BQUE7Ozs7O0lBS0EsU0FBQSxXQUFBLEdBQUEsR0FBQTtLQUNBLElBQUEsTUFBQSxHQUFBLE9BQUE7S0FDQSxJQUFBLEVBQUEsVUFBQTtNQUNBLE9BQUEsRUFBQSxTQUFBLEtBQUEsVUFBQSxHQUFBO09BQ0EsT0FBQSxXQUFBLEdBQUE7OztLQUdBLE9BQUE7OztJQUdBLFNBQUEsU0FBQSxHQUFBOzs7S0FHQSxJQUFBLEVBQUE7TUFDQSxPQUFBLEVBQUE7VUFDQTtNQUNBLE9BQUE7Ozs7Ozs7Ozs7OztJQVlBLFNBQUEsU0FBQSxHQUFBO0tBQ0EsSUFBQSxLQUFBLEtBQUE7TUFDQSxLQUFBLEdBQUEsWUFBQSxFQUFBLFVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQTtNQUNBLEtBQUEsR0FBQSxZQUFBLEVBQUEsVUFBQSxDQUFBLEVBQUEsR0FBQTtNQUNBLEtBQUEsR0FBQSxZQUFBLEVBQUEsU0FBQSxDQUFBLEVBQUEsSUFBQSxLQUFBLEdBQUE7O0tBRUEsT0FBQSxVQUFBLEdBQUE7TUFDQSxPQUFBLFVBQUEsR0FBQTtPQUNBLEVBQUEsT0FBQSxHQUFBO09BQ0EsRUFBQSxPQUFBLEdBQUEsSUFBQSxNQUFBLEdBQUE7T0FDQSxPQUFBLElBQUE7Ozs7O0lBS0EsU0FBQSxLQUFBLEdBQUE7S0FDQSxPQUFBLEVBQUEsV0FBQSxLQUFBLElBQUEsTUFBQSxNQUFBLEVBQUEsU0FBQSxJQUFBLFNBQUEsRUFBQSxJQUFBLEVBQUE7Ozs7Ozs7QUN4UEEsQ0FBQSxZQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsMkJBQUEsVUFBQSxRQUFBOztFQUVBLE9BQUEsV0FBQSxZQUFBO0dBQ0EsT0FBQSxRQUFBO0lBQ0EsU0FBQTtLQUNBLE9BQUE7TUFDQSxNQUFBO01BQ0EsUUFBQTtNQUNBLFlBQUE7T0FDQSxZQUFBO09BQ0EsU0FBQTtPQUNBLFVBQUE7T0FDQSxRQUFBO09BQ0EsTUFBQTtPQUNBLFlBQUE7T0FDQSxVQUFBO1FBQ0EsT0FBQTtRQUNBLFNBQUE7UUFDQSxVQUFBO1FBQ0EsUUFBQTs7O01BR0EsV0FBQTtPQUNBLFlBQUE7T0FDQSxXQUFBO09BQ0EsWUFBQTtPQUNBLGdCQUFBO09BQ0EsV0FBQTtPQUNBLGtCQUFBO09BQ0EsWUFBQTtPQUNBLFdBQUE7T0FDQSxhQUFBO09BQ0EsaUJBQUE7O09BRUEsVUFBQTtRQUNBLFFBQUE7UUFDQSxPQUFBOztPQUVBLFVBQUE7T0FDQSxRQUFBO09BQ0EsZUFBQTtPQUNBLE1BQUE7Ozs7SUFJQSxNQUFBOztHQUVBLE9BQUEsT0FBQTs7RUFFQSxJQUFBLFlBQUEsVUFBQSxNQUFBO0dBQ0EsSUFBQSxXQUFBO0dBQ0EsUUFBQSxRQUFBLE1BQUEsVUFBQSxNQUFBO0lBQ0EsSUFBQSxRQUFBO0tBQ0EsUUFBQSxLQUFBO0tBQ0EsUUFBQSxLQUFBO0tBQ0EsU0FBQSxLQUFBO0tBQ0EsWUFBQSxVQUFBLEtBQUE7O0lBRUEsR0FBQSxLQUFBLE1BQUE7S0FDQSxNQUFBLFFBQUEsS0FBQTs7SUFFQSxHQUFBLEtBQUEsS0FBQTtLQUNBLE1BQUEsT0FBQSxLQUFBOztJQUVBLFNBQUEsS0FBQTs7R0FFQSxPQUFBOztFQUVBLE9BQUEsaUJBQUEsWUFBQTtHQUNBLElBQUEsWUFBQTtJQUNBLFFBQUEsT0FBQSxLQUFBO0lBQ0EsU0FBQSxPQUFBLEtBQUEsTUFBQSxjQUFBO0lBQ0EsWUFBQSxVQUFBLE9BQUEsS0FBQTtJQUNBLFFBQUE7O0dBRUEsT0FBQSxNQUFBLE9BQUE7R0FDQSxPQUFBOztFQUVBLE9BQUEsT0FBQSxRQUFBLFVBQUEsR0FBQSxHQUFBO0dBQ0EsSUFBQSxDQUFBLEdBQUE7SUFDQTs7R0FFQSxPQUFBOzs7Ozs7QUNyRkEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLGtCQUFBLFdBQUEsWUFBQSxXQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsTUFBQTtHQUNBLGtCQUFBO0lBQ0EsUUFBQTtJQUNBLEtBQUE7SUFDQSxXQUFBOztHQUVBLFFBQUE7R0FDQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7Ozs7Ozs7OztBQ2pCQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxnQkFBQSxVQUFBOzs7OztBQ0hBLENBQUEsV0FBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxVQUFBLGdDQUFBLFNBQUEsaUJBQUE7RUFDQSxJQUFBLFVBQUE7R0FDQSxZQUFBO0dBQ0EsTUFBQTtHQUNBLE1BQUE7R0FDQSxVQUFBOztFQUVBLE9BQUE7R0FDQSxVQUFBO0dBQ0EsYUFBQTtHQUNBLFlBQUE7R0FDQSxjQUFBO0dBQ0EsT0FBQTtHQUNBLGtCQUFBO0lBQ0EsT0FBQTtJQUNBLE1BQUE7SUFDQSxXQUFBO0lBQ0EsU0FBQTtJQUNBLFFBQUE7SUFDQSxPQUFBOztHQUVBLFNBQUE7R0FDQSxTQUFBLFNBQUEsU0FBQTtJQUNBLE9BQUEsZ0JBQUEsUUFBQSxTQUFBLFNBQUEsT0FBQSxVQUFBLFFBQUEsWUFBQSxjQUFBO0tBQ0EsUUFBQSxJQUFBO0tBQ0EsUUFBQSxPQUFBLFNBQUEsTUFBQSxHQUFBOzs7Ozs7Ozs7QUM1QkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEsNEJBQUEsU0FBQSxTQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLGtCQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsa0JBQUE7RUFDQSxHQUFBLGNBQUE7RUFDQSxRQUFBLElBQUE7RUFDQTs7RUFFQSxTQUFBLFdBQUE7R0FDQSxJQUFBLE9BQUEsR0FBQSxXQUFBLGFBQUE7SUFDQSxHQUFBLFVBQUE7S0FDQSxZQUFBO0tBQ0EsTUFBQTtLQUNBLE1BQUE7S0FDQSxVQUFBOzs7R0FHQSxJQUFBLE9BQUEsR0FBQSxRQUFBLFlBQUEsYUFBQTtJQUNBLEdBQUEsUUFBQSxXQUFBOztHQUVBLElBQUEsT0FBQSxHQUFBLGFBQUEsYUFBQTtJQUNBLEdBQUEsWUFBQTs7OztFQUlBLFNBQUEsV0FBQSxPQUFBLE9BQUEsVUFBQSxNQUFBO0dBQ0EsT0FBQTs7O0VBR0EsU0FBQSxlQUFBLE9BQUEsT0FBQSxNQUFBLFVBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxPQUFBLFNBQUEsT0FBQSxLQUFBO0lBQ0EsSUFBQSxNQUFBLE1BQUEsR0FBQTtLQUNBLEdBQUEsTUFBQSxPQUFBLEtBQUE7OztHQUdBLE9BQUE7OztFQUdBLFNBQUEsZ0JBQUEsT0FBQSxNQUFBLEtBQUE7R0FDQSxJQUFBLEdBQUEsUUFBQSxXQUFBO0lBQ0EsT0FBQSxHQUFBLE1BQUEsT0FBQSxPQUFBOzs7O0VBSUEsU0FBQSxnQkFBQSxNQUFBO0dBQ0EsSUFBQSxRQUFBLENBQUE7R0FDQSxRQUFBLFFBQUEsR0FBQSxXQUFBLFNBQUEsVUFBQSxHQUFBO0lBQ0EsSUFBQSxTQUFBLE1BQUEsS0FBQSxJQUFBO0tBQ0EsUUFBQTs7O0dBR0EsSUFBQSxRQUFBLENBQUEsR0FBQTtJQUNBLEdBQUEsVUFBQSxPQUFBLE9BQUE7VUFDQTtJQUNBLEdBQUEsVUFBQSxLQUFBOztHQUVBLElBQUEsT0FBQSxHQUFBLFFBQUEsb0JBQUE7SUFDQSxHQUFBLFFBQUE7OztFQUdBLFNBQUEsWUFBQSxNQUFBOztHQUVBLEtBQUEsR0FBQSxRQUFBLFlBQUE7R0FDQSxLQUFBLFdBQUE7OztFQUdBLFNBQUEsYUFBQSxNQUFBO0dBQ0EsSUFBQSxRQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsV0FBQSxTQUFBLFVBQUE7SUFDQSxJQUFBLFNBQUEsTUFBQSxLQUFBLElBQUE7S0FDQSxRQUFBOzs7R0FHQSxPQUFBOzs7Ozs7O0VBT0EsU0FBQSxjQUFBLE1BQUE7R0FDQSxJQUFBLFFBQUE7R0FDQSxRQUFBLFFBQUEsS0FBQSxVQUFBLFNBQUEsT0FBQTtJQUNBLElBQUEsR0FBQSxVQUFBLFFBQUEsU0FBQSxDQUFBLEdBQUE7S0FDQSxRQUFBOztJQUVBLElBQUEsQ0FBQSxPQUFBO0tBQ0EsUUFBQSxjQUFBOzs7O0dBSUEsT0FBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDbkdBLENBQUEsVUFBQTtDQUNBOztDQUVBLFFBQUEsT0FBQSxrQkFBQSxXQUFBLGlCQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxPQUFBO0dBQ0Esa0JBQUE7SUFDQSxNQUFBO0lBQ0EsU0FBQTs7R0FFQSxNQUFBLFVBQUEsT0FBQSxTQUFBLE9BQUE7O0lBRUEsSUFBQSxRQUFBLFFBQUEsU0FBQSxHQUFBLGNBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQTtJQUNBLElBQUEsU0FBQSxHQUFBLE1BQUE7S0FDQSxPQUFBLENBQUEsR0FBQTtLQUNBLE1BQUEsQ0FBQSxHQUFBOztFQUVBLElBQUEsU0FBQSxHQUFBLE1BQUE7S0FDQSxPQUFBLENBQUEsR0FBQSxNQUFBLEdBQUEsS0FBQTtLQUNBLE1BQUEsQ0FBQSxRQUFBO0lBQ0EsSUFBQSxNQUFBLEdBQUEsT0FBQSxRQUFBLElBQUEsT0FBQTtNQUNBLEtBQUEsUUFBQTtNQUNBLEtBQUEsVUFBQTs7SUFFQSxJQUFBLE9BQUE7VUFDQSxVQUFBO1VBQ0EsS0FBQSxNQUFBLEdBQUE7UUFDQSxRQUFBLE9BQUE7VUFDQSxLQUFBLFNBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xDQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQSxRQUFBLFFBQUEsb0JBQUEsWUFBQSxxQkFBQSxVQUFBOzs7Ozs7QUNIQSxDQUFBLFdBQUE7Q0FDQTs7Q0FFQSxRQUFBLE9BQUEsa0JBQUEsVUFBQSxVQUFBLFdBQUE7O0VBRUEsT0FBQTtHQUNBLFVBQUE7R0FDQSxhQUFBO0dBQ0EsWUFBQTtHQUNBLGNBQUE7R0FDQSxPQUFBO0dBQ0Esa0JBQUE7SUFDQSxPQUFBO0lBQ0EsTUFBQTtJQUNBLFNBQUE7O0dBRUEsU0FBQTtHQUNBLE1BQUEsU0FBQSxPQUFBLFNBQUEsT0FBQTs7Ozs7Ozs7QUNqQkEsQ0FBQSxXQUFBO0NBQ0E7O0NBRUEsUUFBQSxPQUFBLG1CQUFBLFdBQUEseUJBQUEsU0FBQSxRQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsY0FBQTs7RUFFQTs7RUFFQSxTQUFBLFdBQUE7R0FDQTs7O0VBR0EsU0FBQSxZQUFBOztHQUVBLElBQUEsT0FBQSxHQUFBLEtBQUEsVUFBQSxlQUFBLENBQUEsR0FBQSxLQUFBLFFBQUE7SUFDQSxRQUFBLFFBQUEsR0FBQSxPQUFBLFNBQUEsT0FBQTtLQUNBLE1BQUEsU0FBQSxNQUFBLEdBQUEsTUFBQTs7Ozs7RUFLQSxTQUFBLGFBQUE7R0FDQSxJQUFBLFFBQUEsR0FBQSxLQUFBO0dBQ0EsSUFBQSxPQUFBLENBQUEsTUFBQSxVQUFBLEdBQUEsTUFBQSxTQUFBO0dBQ0EsUUFBQSxRQUFBLEdBQUEsT0FBQSxTQUFBLE9BQUE7SUFDQSxJQUFBLFVBQUEsR0FBQSxNQUFBO0tBQ0EsTUFBQSxTQUFBOzs7R0FHQSxPQUFBOzs7RUFHQSxTQUFBLGNBQUE7R0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBLElBQUEsT0FBQTtHQUNBLElBQUEsR0FBQSxLQUFBLFNBQUEsS0FBQSxHQUFBO0lBQ0EsR0FBQSxLQUFBLFNBQUEsSUFBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUE7VUFDQTtJQUNBLEdBQUEsS0FBQSxVQUFBOztHQUVBOzs7RUFHQSxTQUFBLGNBQUE7R0FDQSxHQUFBLEdBQUEsS0FBQSxVQUFBLEdBQUEsT0FBQTtHQUNBLElBQUEsR0FBQSxLQUFBLFNBQUEsS0FBQSxHQUFBO0lBQ0EsR0FBQSxLQUFBLFNBQUEsSUFBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFNBQUEsS0FBQTtVQUNBO0lBQ0EsR0FBQSxLQUFBLFVBQUE7O0dBRUE7Ozs7Ozs7QUFPQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xuXHRcdCdhcHAuY29udHJvbGxlcnMnLFxuXHRcdCdhcHAuZmlsdGVycycsXG5cdFx0J2FwcC5zZXJ2aWNlcycsXG5cdFx0J2FwcC5kaXJlY3RpdmVzJyxcblx0XHQnYXBwLnJvdXRlcycsXG5cdFx0J2FwcC5jb25maWcnXG5cdF0pO1xuXG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5yb3V0ZXMnLCBbJ3VpLnJvdXRlcicsICd1aS5yb3V0ZXIuc3RhdGUuZXZlbnRzJywgJ25nU3RvcmFnZScsICdzYXRlbGxpemVyJ10pO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJywgWydhbmd1bGFyLWNhcm91c2VsJywnbmctZHJhZ2dhYmlsbHknLCdobGpzJywgJ2Zsb3cnLCAnRkJBbmd1bGFyJywgJ2RuZExpc3RzJywgJ2FuZ3VsYXIuZmlsdGVyJywgJ2FuZ3VsYXJNb21lbnQnLCAnbmdTY3JvbGxiYXInLCAnbWRDb2xvclBpY2tlcicsICduZ0FuaW1hdGUnLCAndWkudHJlZScsICd0b2FzdHInLCAndWkucm91dGVyJywgJ21kLmRhdGEudGFibGUnLCAnbmdNYXRlcmlhbCcsICduZ1N0b3JhZ2UnLCAncmVzdGFuZ3VsYXInLCAnbmdNZEljb25zJywgJ2FuZ3VsYXItbG9hZGluZy1iYXInLCAnbmdNZXNzYWdlcycsICduZ1Nhbml0aXplJywgXCJsZWFmbGV0LWRpcmVjdGl2ZVwiLCAnbnZkMyddKTtcblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJywgW10pO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2VzJywgWydhbmd1bGFyLWNhY2hlJywgJ3VpLnJvdXRlcicsICduZ1N0b3JhZ2UnLCAncmVzdGFuZ3VsYXInLCAndG9hc3RyJ10pO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbJ25nTWF0ZXJpYWwnLCAnbmdQYXBhUGFyc2UnXSk7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29uZmlnJywgW10pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnJvdXRlcycpLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHRcdC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXHRcdHZhciBnZXRWaWV3ID0gZnVuY3Rpb24odmlld05hbWUpIHtcblx0XHRcdHJldHVybiAnL3ZpZXdzL2FwcC8nICsgdmlld05hbWUgKyAnLycgKyB2aWV3TmFtZSArICcuaHRtbCc7XG5cdFx0fTtcblxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcblxuXHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHQuc3RhdGUoJ2FwcCcsIHtcblx0XHRcdFx0YWJzdHJhY3Q6IHRydWUsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0aGVhZGVyOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogZ2V0VmlldygnaGVhZGVyJyksXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnSGVhZGVyQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG1haW46IHt9LFxuXHRcdFx0XHRcdCdtYXBAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ21hcCcpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ01hcEN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnc2lkZW1lbnVAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ3NpZGVtZW51JyksXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnU2lkZW1lbnVDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmhvbWUnLCB7XG5cdFx0XHRcdHVybDogJy8nLFxuXHRcdFx0XHR2aWV3czoge1xuXG5cdFx0XHRcdFx0J3NpZGViYXJAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2hvbWUnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdIb21lQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC51c2VyJywge1xuXHRcdFx0XHR1cmw6ICcvdXNlcicsXG5cdFx0XHRcdGFic3RyYWN0OiB0cnVlXG5cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC51c2VyLmxvZ2luJywge1xuXHRcdFx0XHR1cmw6ICcvbG9naW4nLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdtYWluQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdsb2dpbicpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0xvZ2luQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAudXNlci5wcm9maWxlJywge1xuXHRcdFx0XHR1cmw6ICcvbXktcHJvZmlsZScsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRwcm9maWxlOiBmdW5jdGlvbihEYXRhU2VydmljZSwgJGF1dGgpIHtcblx0XHRcdFx0XHRcdHJldHVybiBEYXRhU2VydmljZS5nZXRPbmUoJ21lJykuJG9iamVjdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ3VzZXInKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4Jywge1xuXHRcdFx0XHRhYnN0cmFjdDogdHJ1ZSxcblx0XHRcdFx0dXJsOiAnL2luZGV4Jyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGNvdW50cmllczogZnVuY3Rpb24oQ291bnRyaWVzU2VydmljZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIENvdW50cmllc1NlcnZpY2UuZ2V0RGF0YSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdC5zdGF0ZSgnYXBwLmluZGV4Lm15ZGF0YScsIHtcblx0XHRcdFx0dXJsOiAnL215LWRhdGEnLFxuXHRcdFx0XHRhdXRoOiB0cnVlLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FwcC9pbmRleE15RGF0YS9pbmRleE15RGF0YU1lbnUuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnSW5kZXhNeURhdGFNZW51Q3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdtYWluQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdpbmRleE15RGF0YScpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4TXlEYXRhQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5teWRhdGEuZW50cnknLCB7XG5cdFx0XHRcdHVybDogJy86bmFtZScsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3NpZGViYXJAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvdmlld3MvYXBwL2luZGV4TXlEYXRhL2luZGV4TXlEYXRhTWVudS5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleE15RGF0YU1lbnVDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvdmlld3MvYXBwL2luZGV4TXlEYXRhL2luZGV4TXlEYXRhRW50cnkuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnSW5kZXhNeURhdGFFbnRyeUN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguZWRpdG9yJywge1xuXHRcdFx0XHR1cmw6ICcvZWRpdG9yJyxcblx0XHRcdFx0YXV0aDogdHJ1ZSxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGluZGljZXM6IGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gQ29udGVudFNlcnZpY2UuZ2V0SW5kaWNlcygpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aW5kaWNhdG9yczogZnVuY3Rpb24oQ29udGVudFNlcnZpY2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5mZXRjaEluZGljYXRvcnMoe1xuXHRcdFx0XHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0XHRcdFx0XHRvcmRlcjogJ3RpdGxlJyxcblx0XHRcdFx0XHRcdFx0bGltaXQ6IDEwMDAsXG5cdFx0XHRcdFx0XHRcdGRpcjogJ0FTQydcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c3R5bGVzOiBmdW5jdGlvbihDb250ZW50U2VydmljZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIENvbnRlbnRTZXJ2aWNlLmdldFN0eWxlcygpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y2F0ZWdvcmllczogZnVuY3Rpb24oQ29udGVudFNlcnZpY2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5nZXRDYXRlZ29yaWVzKHtcblx0XHRcdFx0XHRcdFx0aW5kaWNhdG9yczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0dHJlZTogdHJ1ZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdpbmRleGVkaXRvcicpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4ZWRpdG9yQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguZWRpdG9yLmluZGljYXRvcnMnLCB7XG5cdFx0XHRcdHVybDogJy9pbmRpY2F0b3JzJyxcblx0XHRcdFx0YXV0aDogdHJ1ZSxcblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5lZGl0b3IuaW5kaWNhdG9ycy5pbmRpY2F0b3InLCB7XG5cdFx0XHRcdHVybDogJy86aWQnLFxuXHRcdFx0XHRhdXRoOiB0cnVlLFxuXHRcdFx0XHRsYXlvdXQ6ICdyb3cnLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aW5kaWNhdG9yOiBmdW5jdGlvbihDb250ZW50U2VydmljZSwgJHN0YXRlUGFyYW1zKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gQ29udGVudFNlcnZpY2UuZ2V0SW5kaWNhdG9yKCRzdGF0ZVBhcmFtcy5pZClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvdmlld3MvYXBwL2luZGV4ZWRpdG9yL2luZGV4ZWRpdG9yaW5kaWNhdG9yLmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4ZWRpdG9yaW5kaWNhdG9yQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvKnZpZXdzOntcblx0XHRcdFx0XHQnaW5mbyc6e1xuXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbWVudSc6e1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6Z2V0VmlldygnaW5kZXhlZGl0b3InKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleGVkaXRvckN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9Ki9cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5lZGl0b3IuaW5kaXplcycsIHtcblx0XHRcdFx0dXJsOiAnL2luZGl6ZXMnLFxuXHRcdFx0XHRhdXRoOiB0cnVlLFxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmVkaXRvci5pbmRpemVzLmRhdGEnLCB7XG5cdFx0XHRcdHVybDogJy86aWQvOm5hbWUnLFxuXHRcdFx0XHRhdXRoOiB0cnVlLFxuXHRcdFx0XHRsYXlvdXQ6ICdyb3cnLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aW5kZXg6IGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcblx0XHRcdFx0XHRcdGlmICgkc3RhdGVQYXJhbXMuaWQgPT0gMCkgcmV0dXJuIHt9O1xuXHRcdFx0XHRcdFx0cmV0dXJuIENvbnRlbnRTZXJ2aWNlLmdldEl0ZW0oJHN0YXRlUGFyYW1zLmlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvdmlld3MvYXBwL2luZGV4ZWRpdG9yL2luZGV4ZWRpdG9yaW5kaXplcy5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleGVkaXRvcmluZGl6ZXNDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmVkaXRvci5pbmRpemVzLmRhdGEuYWRkJywge1xuXHRcdFx0XHR1cmw6ICcvYWRkJyxcblx0XHRcdFx0bGF5b3V0OiAncm93Jyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGluZGljYXRvcnM6IGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5mZXRjaEluZGljYXRvcnMoe1xuXHRcdFx0XHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0XHRcdFx0XHRvcmRlcjogJ3RpdGxlJyxcblx0XHRcdFx0XHRcdFx0bGltaXQ6IDEwMDAsXG5cdFx0XHRcdFx0XHRcdGRpcjogJ0FTQydcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnYWRkaXRpb25hbEAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvaW5kZXhlZGl0b3IvaW5kaWNhdG9ycy5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleGluaWRjYXRvcnNDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmVkaXRvci5pbmRpY2F0b3JzLmluZGljYXRvci5kZXRhaWxzJywge1xuXHRcdFx0XHR1cmw6ICcvOmVudHJ5Jyxcblx0XHRcdFx0YXV0aDogdHJ1ZSxcblx0XHRcdFx0bGF5b3V0OiAncm93J1xuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmVkaXRvci5jYXRlZ29yaWVzJywge1xuXHRcdFx0XHR1cmw6ICcvY2F0ZWdvcmllcycsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguZWRpdG9yLmNhdGVnb3JpZXMuY2F0ZWdvcnknLCB7XG5cdFx0XHRcdHVybDogJy86aWQnLFxuXHRcdFx0XHRhdXRoOiB0cnVlLFxuXHRcdFx0XHRsYXlvdXQ6ICdyb3cnLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0Y2F0ZWdvcnk6IGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcblx0XHRcdFx0XHRcdGlmICgkc3RhdGVQYXJhbXMuaWQgPT0gJ25ldycpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHt9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIENvbnRlbnRTZXJ2aWNlLmdldENhdGVnb3J5KCRzdGF0ZVBhcmFtcy5pZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdtYWluQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FwcC9pbmRleGVkaXRvci9pbmRleGVkaXRvcmNhdGVnb3J5Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4ZWRpdG9yY2F0ZWdvcnlDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdC5zdGF0ZSgnYXBwLmluZGV4LmNyZWF0ZScsIHtcblx0XHRcdFx0dXJsOiAnL2NyZWF0ZScsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3NpZGViYXJAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2luZGV4Y3JlYXRvcicpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4Y3JlYXRvckN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguY3JlYXRlLmJhc2ljJywge1xuXHRcdFx0XHR1cmw6ICcvYmFzaWMnLFxuXHRcdFx0XHRhdXRoOiB0cnVlXG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguY2hlY2snLCB7XG5cdFx0XHRcdHVybDogJy9jaGVja2luZycsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2luZGV4Q2hlY2snKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleENoZWNrQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FwcC9pbmRleENoZWNrL2luZGV4Q2hlY2tTaWRlYmFyLmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4Q2hlY2tTaWRlYmFyQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5tZXRhJywge1xuXHRcdFx0XHR1cmw6ICcvYWRkaW5nLW1ldGEtZGF0YScsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdGxheW91dDogJ3JvdycsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2luZGV4TWV0YScpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4TWV0YUN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnc2lkZWJhckAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvaW5kZXhNZXRhL2luZGV4TWV0YU1lbnUuaHRtbCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnSW5kZXhNZXRhTWVudUN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguZmluYWwnLCB7XG5cdFx0XHRcdHVybDogJy9maW5hbCcsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdGxheW91dDogJ3JvdycsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2luZGV4RmluYWwnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleEZpbmFsQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FwcC9pbmRleEZpbmFsL2luZGV4RmluYWxNZW51Lmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4RmluYWxNZW51Q3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5leHBvcnQnLCB7XG5cdFx0XHRcdGFic3RyYWN0OiB0cnVlLFxuXHRcdFx0XHR1cmw6ICcvZXhwb3J0Jyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGNvdW50cmllczogZnVuY3Rpb24oRGF0YVNlcnZpY2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBEYXRhU2VydmljZS5nZXRPbmUoJ2NvdW50cmllcy9pc29zJykudGhlbihmdW5jdGlvbihjb3VudHJpZXMpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGNvdW50cmllcztcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmV4cG9ydC5kZXRhaWwnLCB7XG5cdFx0XHRcdHVybDogJy86aWQvOm5hbWUnLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGFnZU5hbWU6ICdFeHBvcnQgRGF0YScsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J2Z1bGxzY3JlZW5AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2V4cG9ydGVkJyksXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnRXhwb3J0ZWRDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlcicsIHtcblx0XHRcdFx0dXJsOiAnL2NoYXB0ZXIvOmNoYXB0ZXInLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGFnZU5hbWU6ICdFeHBvcnQgRGF0YScsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxheW91dDogJ2xvb3NlJyxcblx0XHRcdFx0Zml4TGF5b3V0OiB0cnVlLFxuXHRcdFx0XHRhdm9pZFJvb3RzOiB0cnVlLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdoZWFkZXJAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2NoYXB0ZXInKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdDaGFwdGVyQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdjaGFwdGVyQ29udGVudCcpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0NoYXB0ZXJDb250ZW50Q3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5leHBvcnQuZGV0YWlsLmNoYXB0ZXIuaW5kaWNhdG9yJywge1xuXHRcdFx0XHR1cmw6ICcvOmluZGljYXRvci86aW5kaW5hbWUnLFxuXHRcdFx0XHRsYXlvdXQ6ICdsb29zZScsXG5cdFx0XHRcdGZpeExheW91dDogdHJ1ZSxcblx0XHRcdFx0YXZvaWRSb290czogdHJ1ZVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeScsIHtcblx0XHRcdFx0dXJsOiAnLzppc28nLFxuXHRcdFx0XHRsYXlvdXQ6ICdsb29zZScsXG5cdFx0XHRcdGZpeExheW91dDogdHJ1ZSxcblx0XHRcdFx0YXZvaWRSb290czogdHJ1ZVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeS5jb21wYXJlJywge1xuXHRcdFx0XHR1cmw6ICcvY29tcGFyZS86Y291bnRyaWVzJyxcblx0XHRcdFx0bGF5b3V0OiAnbG9vc2UnLFxuXHRcdFx0XHRmaXhMYXlvdXQ6IHRydWUsXG5cdFx0XHRcdGF2b2lkUm9vdHM6IHRydWVcblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5leHBvcnRzJywge1xuXHRcdFx0XHR1cmw6ICcvZXhwb3J0cycsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRwYWdlTmFtZTogJ0V4cG9ydCBEYXRhJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdleHBvcnQnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdFeHBvcnRDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmV4cG9ydHMuZGV0YWlscycsIHtcblx0XHRcdFx0dXJsOiAnLzppZC86bmFtZScsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdGxheW91dDogJ3JvdycsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRwYWdlTmFtZTogJ0V4cG9ydCBEYXRhJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdtYWluQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FwcC9leHBvcnQvZXhwb3J0RGV0YWlscy5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdFeHBvcnREZXRhaWxzQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bSdcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5leHBvcnRzLmRldGFpbHMuYWRkJywge1xuXHRcdFx0XHR1cmw6ICcvYWRkJyxcblx0XHRcdFx0bGF5b3V0OiAncm93Jyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGluZGljYXRvcnM6IGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5mZXRjaEluZGljYXRvcnMoe1xuXHRcdFx0XHRcdFx0XHRwYWdlOiAxLFxuXHRcdFx0XHRcdFx0XHRvcmRlcjogJ3RpdGxlJyxcblx0XHRcdFx0XHRcdFx0bGltaXQ6IDEwMDAsXG5cdFx0XHRcdFx0XHRcdGRpcjogJ0FTQydcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnYWRkaXRpb25hbEAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvaW5kZXhlZGl0b3IvaW5kaWNhdG9ycy5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleGluaWRjYXRvcnNDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmV4cG9ydHMuZGV0YWlscy5zdHlsZScsIHtcblx0XHRcdFx0dXJsOiAnL3N0eWxlLzpzdHlsZUlkLzpzdHlsZU5hbWUnLFxuXHRcdFx0XHRsYXlvdXQ6ICdyb3cnLFxuXHRcdFx0XHRhZGRpdGlvbmFsOiAnZnVsbCcsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J2FkZGl0aW9uYWxAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2V4cG9ydFN0eWxlJyksXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnRXhwb3J0U3R5bGVDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmV4cG9ydHMuZGV0YWlscy5sYXlvdXQnLCB7XG5cdFx0XHRcdHVybDogJy9sYXlvdXQnLFxuXHRcdFx0XHRsYXlvdXQ6ICdyb3cnLFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdhZGRpdGlvbmFsQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdleHBvcnRMYXlvdXQnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdFeHBvcnRMYXlvdXRDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmJhc2VtYXBzJywge1xuXHRcdFx0XHR1cmw6ICcvYmFzZW1hcHMnLFxuXHRcdFx0XHRhdXRoOiB0cnVlLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGFnZU5hbWU6ICdFeHBvcnQgRGF0YSdcblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnc2lkZWJhckAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogZ2V0VmlldygnYmFzZW1hcHMnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdCYXNlbWFwc0N0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguYmFzZW1hcHMuZGV0YWlscycsIHtcblx0XHRcdFx0dXJsOiAnLzppZC86bmFtZScsXG5cdFx0XHRcdGF1dGg6IHRydWUsXG5cdFx0XHRcdGxheW91dDogJ3JvdycsXG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRwYWdlTmFtZTogJ0Jhc2VtYXBzJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdtYWluQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2FwcC9iYXNlbWFwcy9iYXNlbWFwRGV0YWlscy5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdCYXNlbWFwRGV0YWlsc0N0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXgubGlzdCcsIHtcblx0XHRcdFx0dXJsOiAnL2xpc3QnLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aW5kaWNhdG9yczogZnVuY3Rpb24oQ29udGVudFNlcnZpY2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5nZXRJbmRpY2F0b3JzKHtcblx0XHRcdFx0XHRcdFx0cGFnZTogMSxcblx0XHRcdFx0XHRcdFx0b3JkZXI6ICd0aXRsZScsXG5cdFx0XHRcdFx0XHRcdGxpbWl0OiAxMDAwLFxuXHRcdFx0XHRcdFx0XHRkaXI6ICdBU0MnXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aW5kaWNlczogZnVuY3Rpb24oQ29udGVudFNlcnZpY2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5mZXRjaEluZGljZXMoKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGNhdGVnb3JpZXM6IGZ1bmN0aW9uKENvbnRlbnRTZXJ2aWNlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gQ29udGVudFNlcnZpY2UuZ2V0Q2F0ZWdvcmllcyh7XG5cdFx0XHRcdFx0XHRcdGluZGljYXRvcnM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdHRyZWU6IHRydWVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnc2lkZWJhckAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogZ2V0VmlldygnZnVsbExpc3QnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdGdWxsTGlzdEN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXgubGlzdC5maWx0ZXInLCB7XG5cdFx0XHRcdHVybDogJy86ZmlsdGVyJyxcblx0XHRcdFx0bGF5b3V0OiAncm93Jyxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnbWFpbkAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvZnVsbExpc3QvZmlsdGVyLmh0bWwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0Z1bGxMaXN0Rml0bGVyQ3RybCcsXG5cdFx0XHRcdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguaW5kaWNhdG9yJywge1xuXHRcdFx0XHR1cmw6ICcvaW5kaWNhdG9yLzppZC86bmFtZS86eWVhci86Z2VuZGVyLzppc28nLFxuXHRcdFx0XHRyZXNvbHZlOiB7XG5cdFx0XHRcdFx0aW5kaWNhdG9yOiBmdW5jdGlvbihDb250ZW50U2VydmljZSwgJHN0YXRlUGFyYW1zKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gQ29udGVudFNlcnZpY2UuZmV0Y2hJbmRpY2F0b3IoJHN0YXRlUGFyYW1zLmlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3NpZGViYXJAJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2luZGljYXRvcicpLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGljYXRvclNob3dDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cGFyYW1zOiB7XG5cdFx0XHRcdFx0eWVhcjoge1xuXHRcdFx0XHRcdFx0c3F1YXNoOiB0cnVlLFxuXHRcdFx0XHRcdFx0dmFsdWU6IG51bGwsXG5cdFx0XHRcdFx0XHRkeW5hbWljOiB0cnVlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRnZW5kZXI6IHtcblx0XHRcdFx0XHRcdHNxdWFzaDogdHJ1ZSxcblx0XHRcdFx0XHRcdHZhbHVlOiBudWxsLFxuXHRcdFx0XHRcdFx0ZHluYW1pYzogdHJ1ZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aXNvOiB7XG5cdFx0XHRcdFx0XHRzcXVhc2g6IHRydWUsXG5cdFx0XHRcdFx0XHR2YWx1ZTogbnVsbCxcblx0XHRcdFx0XHRcdGR5bmFtaWM6IHRydWVcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmluZGV4LmluZGljYXRvci5pbmZvJywge1xuXHRcdFx0XHR1cmw6ICcvZGV0YWlscycsXG5cdFx0XHRcdGxheW91dDogJ3JvdycsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRkYXRhOiBmdW5jdGlvbihDb250ZW50U2VydmljZSwgJHN0YXRlKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBDb250ZW50U2VydmljZS5nZXRJbmRpY2F0b3JEYXRhKCRzdGF0ZS5wYXJhbXMuaWQsICRzdGF0ZS5wYXJhbXMueWVhciwgJHN0YXRlLnBhcmFtcy5nZW5kZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnbWFpbkAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvaW5kaWNhdG9yL2luZGljYXRvclllYXJUYWJsZS5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRpY2F0b3JZZWFyVGFibGVDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5pbmRleC5zaG93Jywge1xuXHRcdFx0XHR1cmw6ICcvOmlkLzpuYW1lJyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdGRhdGE6IGZ1bmN0aW9uKEluZGl6ZXNTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcblx0XHRcdFx0XHRcdHJldHVybiBJbmRpemVzU2VydmljZS5mZXRjaERhdGEoJHN0YXRlUGFyYW1zLmlkKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGNvdW50cmllczogZnVuY3Rpb24oQ291bnRyaWVzU2VydmljZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIENvdW50cmllc1NlcnZpY2UuZ2V0RGF0YSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnc2lkZWJhckAnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvaW5kZXgvaW5mby5odG1sJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdJbmRleEN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnc2VsZWN0ZWQnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJy92aWV3cy9hcHAvaW5kZXgvc2VsZWN0ZWQuaHRtbCcsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguc2hvdy5pbmZvJywge1xuXHRcdFx0XHR1cmw6ICcvaW5mbycsXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J21haW5AJzoge1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0luZGV4aW5mb0N0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2luZGV4aW5mbycpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguc2hvdy5zZWxlY3RlZCcsIHtcblx0XHRcdFx0dXJsOiAnLzppdGVtJyxcblx0XHRcdFx0Lyp2aWV3czp7XG5cdFx0XHRcdFx0J3NlbGVjdGVkJzp7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogZ2V0Vmlldygnc2VsZWN0ZWQnKSxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdTZWxlY3RlZEN0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0XHRcdFx0cmVzb2x2ZTp7XG5cdFx0XHRcdFx0XHRcdGdldENvdW50cnk6IGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpe1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBEYXRhU2VydmljZS5nZXRPbmUoJ25hdGlvbnMnLCAkc3RhdGVQYXJhbXMuaXRlbSkuJG9iamVjdDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSovXG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW5kZXguc2hvdy5zZWxlY3RlZC5jb21wYXJlJywge1xuXHRcdFx0XHR1cmw6ICcvY29tcGFyZS86Y291bnRyaWVzJ1xuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmNvbmZsaWN0Jywge1xuXHRcdFx0XHRhYnN0cmFjdDogdHJ1ZSxcblx0XHRcdFx0dXJsOiAnL2NvbmZsaWN0Jyxcblx0XHRcdH0pXG5cdFx0XHQuc3RhdGUoJ2FwcC5jb25mbGljdC5pbmRleCcsIHtcblx0XHRcdFx0dXJsOiAnL2luZGV4Jyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdG5hdGlvbnM6IGZ1bmN0aW9uKFJlc3Rhbmd1bGFyKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gUmVzdGFuZ3VsYXIuYWxsKCdjb25mbGljdHMvbmF0aW9ucycpO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y29uZmxpY3RzOiBmdW5jdGlvbihSZXN0YW5ndWxhcikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFJlc3Rhbmd1bGFyLmFsbCgnY29uZmxpY3RzJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdzaWRlYmFyQCc6IHtcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdDb25mbGljdHNDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdjb25mbGljdHMnKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J2xvZ29AJzoge1xuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2xvZ28nKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5zdGF0ZSgnYXBwLmNvbmZsaWN0LmluZGV4Lm5hdGlvbicsIHtcblx0XHRcdFx0dXJsOiAnL25hdGlvbi86aXNvJyxcblx0XHRcdFx0cmVzb2x2ZToge1xuXHRcdFx0XHRcdG5hdGlvbjogZnVuY3Rpb24oUmVzdGFuZ3VsYXIsICRzdGF0ZVBhcmFtcykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFJlc3Rhbmd1bGFyLm9uZSgnL2NvbmZsaWN0cy9uYXRpb25zLycsICRzdGF0ZVBhcmFtcy5pc28pLmdldCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnc2lkZWJhckAnOiB7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ29uZmxpY3RuYXRpb25DdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdjb25mbGljdG5hdGlvbicpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnbG9nb0AnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogZ2V0VmlldygnbG9nbycpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuY29uZmxpY3QuaW5kZXguZGV0YWlscycsIHtcblx0XHRcdFx0dXJsOiAnLzppZCcsXG5cdFx0XHRcdHJlc29sdmU6IHtcblx0XHRcdFx0XHRjb25mbGljdDogZnVuY3Rpb24oUmVzdGFuZ3VsYXIsICRzdGF0ZVBhcmFtcykge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFJlc3Rhbmd1bGFyLm9uZSgnL2NvbmZsaWN0cy9ldmVudHMvJywgJHN0YXRlUGFyYW1zLmlkKS5nZXQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXdzOiB7XG5cdFx0XHRcdFx0J3NpZGViYXJAJzoge1xuXHRcdFx0XHRcdFx0Y29udHJvbGxlcjogJ0NvbmZsaWN0ZGV0YWlsc0N0cmwnLFxuXHRcdFx0XHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0XHRcdFx0dGVtcGxhdGVVcmw6IGdldFZpZXcoJ2NvbmZsaWN0ZGV0YWlscycpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQnaXRlbXMtbWVudUAnOiB7fSxcblx0XHRcdFx0XHQnbG9nb0AnOiB7XG5cdFx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogZ2V0VmlldygnbG9nbycpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuY29uZmxpY3QuaW1wb3J0Jywge1xuXHRcdFx0XHR1cmw6ICcvaW1wb3J0Jyxcblx0XHRcdFx0YXV0aDogdHJ1ZSxcblx0XHRcdFx0dmlld3M6IHtcblx0XHRcdFx0XHQnc2lkZWJhckAnOiB7XG5cdFx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ29uZmxpY3RJbXBvcnRDdHJsJyxcblx0XHRcdFx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdjb25mbGljdEltcG9ydCcpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnN0YXRlKCdhcHAuaW1wb3J0Y3N2Jywge1xuXHRcdFx0XHR1cmw6ICcvaW1wb3J0ZXInLFxuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0cGFnZU5hbWU6ICdJbXBvcnQgQ1NWJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR2aWV3czoge1xuXHRcdFx0XHRcdCdtYWluQCc6IHtcblx0XHRcdFx0XHRcdHRlbXBsYXRlVXJsOiBnZXRWaWV3KCdpbXBvcnRjc3YnKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J21hcCc6IHt9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHR9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAucm91dGVzJykucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICRtZFNpZGVuYXYsICR0aW1lb3V0LCAkYXV0aCwgJHN0YXRlLCAkbG9jYWxTdG9yYWdlLCAkd2luZG93LCBsZWFmbGV0RGF0YSwgdG9hc3RyLCBWZWN0b3JsYXllclNlcnZpY2UpIHtcblx0XHQkcm9vdFNjb3BlLnNpZGViYXJPcGVuID0gdHJ1ZTtcblx0XHQkcm9vdFNjb3BlLmdyZXllZCA9IGZhbHNlO1xuXHRcdCRyb290U2NvcGUuZml4TGF5b3V0ID0gZmFsc2U7XG5cdFx0JHJvb3RTY29wZS5sb29zZUxheW91dCA9ICRsb2NhbFN0b3JhZ2UuZnVsbFZpZXcgfHwgZmFsc2U7XG5cdFx0JHJvb3RTY29wZS5zdGFydGVkID0gdHJ1ZTtcblx0XHQkcm9vdFNjb3BlLmlmcmFtZWQgPSAkd2luZG93LnNlbGYgIT09ICR3aW5kb3cudG9wO1xuXG5cdFx0JHJvb3RTY29wZS5nb0JhY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdCR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0fVxuXHRcdCRyb290U2NvcGUudG9nZ2xlTWVudSA9IGZ1bmN0aW9uKG1lbnVJZCkge1xuXHRcdFx0JG1kU2lkZW5hdihtZW51SWQpLnRvZ2dsZSgpO1xuXHRcdH1cblxuXHRcdCRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcblxuXHRcdFx0aWYgKHRvU3RhdGUuYXV0aCAmJiAhJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpIHtcblx0XHRcdFx0dG9hc3RyLmVycm9yKCdZb3VyIG5vdCBhbGxvd2VkIHRvIGdvIHRoZXJlIGJ1ZGR5IScsICdBY2Nlc3MgZGVuaWVkJyk7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHJldHVybiAkc3RhdGUuZ28oJ2FwcC5ob21lJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodG9TdGF0ZS5kYXRhICYmIHRvU3RhdGUuZGF0YS5wYWdlTmFtZSkge1xuXHRcdFx0XHQkcm9vdFNjb3BlLmN1cnJlbnRfcGFnZSA9IHRvU3RhdGUuZGF0YS5wYWdlTmFtZTtcblx0XHRcdH1cblx0XHRcdGlmICh0b1N0YXRlLmxheW91dCA9PSBcInJvd1wiKSB7XG5cdFx0XHRcdCRyb290U2NvcGUucm93ZWQgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JHJvb3RTY29wZS5yb3dlZCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRvU3RhdGUubGF5b3V0ID09IFwibG9vc2VcIikge1xuXHRcdFx0XHQkcm9vdFNjb3BlLmxvb3NlTGF5b3V0ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRyb290U2NvcGUubG9vc2VMYXlvdXQgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICh0b1N0YXRlLmFkZGl0aW9uYWwgPT0gXCJmdWxsXCIpIHtcblx0XHRcdFx0JHJvb3RTY29wZS5hZGRGdWxsID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRyb290U2NvcGUuYWRkRnVsbCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRvU3RhdGUuZml4TGF5b3V0ID09IHRydWUpIHtcblx0XHRcdFx0JHJvb3RTY29wZS5maXhMYXlvdXQgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JHJvb3RTY29wZS5maXhMYXlvdXQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHR5cGVvZiB0b1N0YXRlLnZpZXdzICE9IFwidW5kZWZpbmVkXCIpIHtcblxuXHRcdFx0XHRpZiAodG9TdGF0ZS52aWV3cy5oYXNPd25Qcm9wZXJ0eSgnc2lkZWJhckAnKSB8fCB0b1N0YXRlLnZpZXdzLmhhc093blByb3BlcnR5KCdtYWluQCcpKSB7XG5cdFx0XHRcdFx0JHJvb3RTY29wZS5zaWRlYmFyID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkcm9vdFNjb3BlLnNpZGViYXIgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodG9TdGF0ZS52aWV3cy5oYXNPd25Qcm9wZXJ0eSgnbWFpbkAnKSB8fCB0b1N0YXRlLnZpZXdzLmhhc093blByb3BlcnR5KCdhZGRpdGlvbmFsQCcpKSB7XG5cdFx0XHRcdFx0JHJvb3RTY29wZS5tYWluVmlldyA9IHRydWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JHJvb3RTY29wZS5tYWluVmlldyA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0b1N0YXRlLnZpZXdzLmhhc093blByb3BlcnR5KCdhZGRpdGlvbmFsQCcpKSB7XG5cdFx0XHRcdFx0JHJvb3RTY29wZS5hZGRpdGlvbmFsID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkcm9vdFNjb3BlLmFkZGl0aW9uYWwgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodG9TdGF0ZS52aWV3cy5oYXNPd25Qcm9wZXJ0eSgnaXRlbXMtbWVudUAnKSkge1xuXHRcdFx0XHRcdCRyb290U2NvcGUuaXRlbU1lbnUgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRyb290U2NvcGUuaXRlbU1lbnUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodG9TdGF0ZS52aWV3cy5oYXNPd25Qcm9wZXJ0eSgnbG9nb0AnKSkge1xuXHRcdFx0XHRcdCRyb290U2NvcGUubG9nb1ZpZXcgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRyb290U2NvcGUubG9nb1ZpZXcgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodG9TdGF0ZS52aWV3cy5oYXNPd25Qcm9wZXJ0eSgnZnVsbHNjcmVlbkAnKSkge1xuXHRcdFx0XHRcdCRyb290U2NvcGUuZnVsbHNjcmVlblZpZXcgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRyb290U2NvcGUuZnVsbHNjcmVlblZpZXcgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKCF0b1N0YXRlLmF2b2lkUm9vdHMpIHtcblx0XHRcdFx0XHQkcm9vdFNjb3BlLmFkZGl0aW9uYWwgPSBmYWxzZTtcblx0XHRcdFx0XHQkcm9vdFNjb3BlLml0ZW1NZW51ID0gZmFsc2U7XG5cdFx0XHRcdFx0JHJvb3RTY29wZS5sb2dvVmlldyA9IGZhbHNlO1xuXHRcdFx0XHRcdCRyb290U2NvcGUubWFpblZpZXcgPSBmYWxzZTtcblx0XHRcdFx0XHQkcm9vdFNjb3BlLnNpZGViYXIgPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRyb290U2NvcGUuc2lkZWJhciA9IHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdFx0aWYgKCh0b1N0YXRlLm5hbWUuaW5kZXhPZignY29uZmxpY3QnKSA+IC0xICYmIHRvU3RhdGUubmFtZSAhPSBcImFwcC5jb25mbGljdC5pbXBvcnRcIikpIHtcblx0XHRcdFx0JHJvb3RTY29wZS5ub0hlYWRlciA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkcm9vdFNjb3BlLm5vSGVhZGVyID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAodG9TdGF0ZS5uYW1lID09ICdhcHAuY29uZmxpY3QuaW5kZXgubmF0aW9uJykge1xuXHRcdFx0XHQkcm9vdFNjb3BlLnNob3dJdGVtcyA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkcm9vdFNjb3BlLnNob3dJdGVtcyA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0JHJvb3RTY29wZS5wcmV2aW91c1BhZ2UgPSB7XG5cdFx0XHRcdHN0YXRlOiBmcm9tU3RhdGUsXG5cdFx0XHRcdHBhcmFtczogZnJvbVBhcmFtc1xuXHRcdFx0fTtcblx0XHRcdCRyb290U2NvcGUuc3RhdGVJc0xvYWRpbmcgPSB0cnVlO1xuXHRcdFx0Ly8kbWRTaWRlbmF2KCdsZWZ0JykuY2xvc2UoKTtcblxuXG5cdFx0fSk7XG5cdFx0JHJvb3RTY29wZS4kb24oXCIkdmlld0NvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUpIHtcblxuXHRcdH0pO1xuXG5cdFx0JHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlKSB7XG5cblx0XHRcdCRyb290U2NvcGUuc3RhdGVJc0xvYWRpbmcgPSBmYWxzZTtcblx0XHRcdGlmICgkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuXG5cdFx0XHRcdC8vJG1kU2lkZW5hdignbGVmdE1lbnUnKS5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdFx0cmVzZXRNYXBTaXplKCk7XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiByZXNldE1hcFNpemUoKSB7XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE1hcCgpLmludmFsaWRhdGVTaXplKCk7XG5cdFx0XHR9LCAxMDAwKTtcblx0XHR9XG5cdFx0Lyp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgZnVuY3Rpb24oZXYpIHtcbiAgICAvLyBhdm9pZHMgc2Nyb2xsaW5nIHdoZW4gdGhlIGZvY3VzZWQgZWxlbWVudCBpcyBlLmcuIGFuIGlucHV0XG4gICAgaWYgKFxuICAgICAgICAhZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgICB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBkb2N1bWVudC5ib2R5XG4gICAgKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsSW50b1ZpZXdJZk5lZWRlZCh0cnVlKTtcbiAgICB9XG59KTsqL1xuXHR9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbmZpZycpLmNvbmZpZyhmdW5jdGlvbiAoJGF1dGhQcm92aWRlcikge1xuXHRcdC8vIFNhdGVsbGl6ZXIgY29uZmlndXJhdGlvbiB0aGF0IHNwZWNpZmllcyB3aGljaCBBUElcblx0XHQvLyByb3V0ZSB0aGUgSldUIHNob3VsZCBiZSByZXRyaWV2ZWQgZnJvbVxuXHRcdCRhdXRoUHJvdmlkZXIubG9naW5VcmwgPSAnL2FwaS9hdXRoZW50aWNhdGUvYXV0aCc7XG4gICAgJGF1dGhQcm92aWRlci5zaWdudXBVcmwgPSAnL2FwaS9hdXRoZW50aWNhdGUvYXV0aC9zaWdudXAnO1xuICAgICRhdXRoUHJvdmlkZXIudW5saW5rVXJsID0gJy9hcGkvYXV0aGVudGljYXRlL2F1dGgvdW5saW5rLyc7XG5cdFx0JGF1dGhQcm92aWRlci5mYWNlYm9vayh7XG5cdFx0XHR1cmw6ICcvYXBpL2F1dGhlbnRpY2F0ZS9mYWNlYm9vaycsXG5cdFx0XHRjbGllbnRJZDogJzc3MTk2MTgzMjkxMDA3Midcblx0XHR9KTtcblx0XHQkYXV0aFByb3ZpZGVyLmdvb2dsZSh7XG5cdFx0XHR1cmw6ICcvYXBpL2F1dGhlbnRpY2F0ZS9nb29nbGUnLFxuXHRcdFx0Y2xpZW50SWQ6ICcyNzY2MzQ1Mzc0NDAtY2d0dDE0cWoyZThpbnAwdnE1b3E5YjQ2azc0ampzM2UuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20nXG5cdFx0fSk7XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbmZpZycpLmNvbmZpZyhmdW5jdGlvbihmbG93RmFjdG9yeVByb3ZpZGVyKSB7XG5cdFx0Ly9cblx0XHRmbG93RmFjdG9yeVByb3ZpZGVyLmRlZmF1bHRzID0ge1xuXHRcdFx0dGFyZ2V0OiAnL2FwaS9pbWFnZXMvdXBsb2FkJyxcblx0XHRcdHBlcm1hbmVudEVycm9yczogWzQwNCwgNTAwLCA1MDFdLFxuXHRcdFx0bWF4Q2h1bmtSZXRyaWVzOiAxLFxuXHRcdFx0dGVzdENodW5rczogZmFsc2UsXG5cdFx0XHRjaHVua1JldHJ5SW50ZXJ2YWw6IDUwMDAsXG5cdFx0XHRzaW11bHRhbmVvdXNVcGxvYWRzOiA0LFxuXHRcdFx0c2luZ2xlRmlsZTogdHJ1ZVxuXHRcdH07XG5cdFx0Zmxvd0ZhY3RvcnlQcm92aWRlci5vbignY2F0Y2hBbGwnLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0Ly8gIGNvbnNvbGUubG9nKCdjYXRjaEFsbCcsIGFyZ3VtZW50cyk7XG5cdFx0fSk7XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbmZpZycpLmNvbmZpZyhmdW5jdGlvbihobGpzU2VydmljZVByb3ZpZGVyKSB7XG5cdFx0Ly9cblx0XHRobGpzU2VydmljZVByb3ZpZGVyLnNldE9wdGlvbnMoe1xuXHRcdFx0Ly8gcmVwbGFjZSB0YWIgd2l0aCA0IHNwYWNlc1xuXHRcdFx0dGFiUmVwbGFjZTogJyAgICAnXG5cdFx0fSk7XG5cdH0pO1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnKS5jb25maWcoZnVuY3Rpb24oJGxvZ1Byb3ZpZGVyKXtcbiAgICAgICAgJGxvZ1Byb3ZpZGVyLmRlYnVnRW5hYmxlZChmYWxzZSk7XG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29uZmlnJykuY29uZmlnKGZ1bmN0aW9uIChjZnBMb2FkaW5nQmFyUHJvdmlkZXIpe1xuXHRcdGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlU3Bpbm5lciA9IGZhbHNlO1xuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnKS5jb25maWcoZnVuY3Rpb24oUmVzdGFuZ3VsYXJQcm92aWRlcikge1xuXHRcdFJlc3Rhbmd1bGFyUHJvdmlkZXJcblx0XHRcdC5zZXRCYXNlVXJsKCcvYXBpLycpXG5cdFx0XHQuc2V0RGVmYXVsdEhlYWRlcnMoe1xuXHRcdFx0XHRhY2NlcHQ6IFwiYXBwbGljYXRpb24veC5sYXJhdmVsLnYxK2pzb25cIlxuXHRcdFx0fSlcblx0XHRcdC5zZXREZWZhdWx0SHR0cEZpZWxkcyh7XG5cdFx0XHRcdGNhY2hlOiBmYWxzZVxuXHRcdFx0fSlcblx0XHRcdC5hZGRSZXNwb25zZUludGVyY2VwdG9yKGZ1bmN0aW9uKGRhdGEsIG9wZXJhdGlvbiwgd2hhdCwgdXJsLCByZXNwb25zZSwgZGVmZXJyZWQpIHtcblx0XHRcdFx0dmFyIGV4dHJhY3RlZERhdGE7XG5cdFx0XHRcdGV4dHJhY3RlZERhdGEgPSBkYXRhLmRhdGE7XG5cdFx0XHRcdGlmIChkYXRhLm1ldGEpIHtcblx0XHRcdFx0XHRleHRyYWN0ZWREYXRhLl9tZXRhID0gZGF0YS5tZXRhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChkYXRhLmluY2x1ZGVkKSB7XG5cdFx0XHRcdFx0ZXh0cmFjdGVkRGF0YS5faW5jbHVkZWQgPSBkYXRhLmluY2x1ZGVkO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBleHRyYWN0ZWREYXRhO1xuXHRcdFx0fSk7XG5cdFx0LypcdC5zZXRFcnJvckludGVyY2VwdG9yKGZ1bmN0aW9uKHJlc3BvbnNlLCBkZWZlcnJlZCwgcmVzcG9uc2VIYW5kbGVyKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZXJycm8nKTtcblx0XHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMykge1xuXG4gICAgXHRcdHJldHVybiBmYWxzZTsgLy8gZXJyb3IgaGFuZGxlZFxuICAgIFx0fVxuXG4gICAgXHRyZXR1cm4gdHJ1ZTsgLy8gZXJyb3Igbm90IGhhbmRsZWRcblx0XHR9KTsqL1xuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbmZpZycpLmNvbmZpZyhmdW5jdGlvbigkbWRUaGVtaW5nUHJvdmlkZXIsJG1kR2VzdHVyZVByb3ZpZGVyKSB7XG5cdFx0LyogRm9yIG1vcmUgaW5mbywgdmlzaXQgaHR0cHM6Ly9tYXRlcmlhbC5hbmd1bGFyanMub3JnLyMvVGhlbWluZy8wMV9pbnRyb2R1Y3Rpb24gKi9cbi8qXHR2YXIgbmVvblRlYWxNYXAgPSAkbWRUaGVtaW5nUHJvdmlkZXIuZXh0ZW5kUGFsZXR0ZSgndGVhbCcsIHtcbiAgICAnNTAwJzogJzAwY2NhYScsXG5cdFx0J0EyMDAnOiAnMDBjY2FhJ1xuICB9KTtcblx0dmFyIHdoaXRlTWFwID0gJG1kVGhlbWluZ1Byb3ZpZGVyLmV4dGVuZFBhbGV0dGUoJ3RlYWwnLCB7XG4gICAgJzUwMCc6ICcwMGNjYWEnLFxuXHRcdCdBMjAwJzogJyNmZmYnXG4gIH0pO1xuXHR2YXIgYmx1ZU1hcCA9ICRtZFRoZW1pbmdQcm92aWRlci5leHRlbmRQYWxldHRlKCdibHVlJywge1xuICAgICc1MDAnOiAnIzAwNmJiOScsXG5cdFx0J0EyMDAnOiAnIzAwNmJiOSdcbiAgfSk7XG5cdCRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCduZW9uVGVhbCcsIG5lb25UZWFsTWFwKTtcblx0JG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ3doaXRlVGVhbCcsIHdoaXRlTWFwKTtcblx0JG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ2JsdWVyJywgYmx1ZU1hcCk7XG5cdFx0JG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0Jylcblx0XHQucHJpbWFyeVBhbGV0dGUoJ2xpZ2h0LWJsdWUnKVxuXHRcdC5hY2NlbnRQYWxldHRlKCdibHVlcicpOyovXG5cdFx0dmFyIGJsdWVNYXAgPSAkbWRUaGVtaW5nUHJvdmlkZXIuZXh0ZW5kUGFsZXR0ZSgnaW5kaWdvJywge1xuXHRcdFx0JzUwMCc6ICcjMDA2YmI5Jyxcblx0XHRcdCdBMjAwJzogJyMwMDZiYjknXG5cdFx0fSk7XG5cdFx0XHQkbWRUaGVtaW5nUHJvdmlkZXIuZGVmaW5lUGFsZXR0ZSgnYmx1ZXInLCBibHVlTWFwKTtcblxuXHRcdCRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG5cdFx0LnByaW1hcnlQYWxldHRlKCdibHVlcicpXG5cdFx0LmFjY2VudFBhbGV0dGUoJ2dyZXknKVxuXHRcdC53YXJuUGFsZXR0ZSgncmVkJyk7XG5cblx0XHQgJG1kR2VzdHVyZVByb3ZpZGVyLnNraXBDbGlja0hpamFjaygpO1xuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb25maWcnKS5jb25maWcoZnVuY3Rpb24odG9hc3RyQ29uZmlnKXtcbiAgICAgICAgLy9cbiAgICAgICAgYW5ndWxhci5leHRlbmQodG9hc3RyQ29uZmlnLCB7XG4gICAgICAgICAgYXV0b0Rpc21pc3M6IHRydWUsXG4gICAgICAgICAgY29udGFpbmVySWQ6ICd0b2FzdC1jb250YWluZXInLFxuICAgICAgICAgIG1heE9wZW5lZDogMixcbiAgICAgICAgICBuZXdlc3RPblRvcDogdHJ1ZSxcbiAgICAgICAgICBwb3NpdGlvbkNsYXNzOiAndG9hc3QtYm90dG9tLXJpZ2h0JyxcbiAgICAgICAgICBwcmV2ZW50RHVwbGljYXRlczogZmFsc2UsXG4gICAgICAgICAgcHJldmVudE9wZW5EdXBsaWNhdGVzOiBmYWxzZSxcbiAgICAgICAgICB0YXJnZXQ6ICdib2R5JyxcbiAgICAgICAgICBjbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBwcm9ncmVzc0Jhcjp0cnVlXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnKS5maWx0ZXIoICdhbHBoYW51bScsIGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiggaW5wdXQgKXtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoICFpbnB1dCApe1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC8oW14wLTlBLVpdKS9nLFwiXCIpO1xuXG4gICAgICAgIH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmZpbHRlcnMnKS5maWx0ZXIoICdjYXBpdGFsaXplJywgZnVuY3Rpb24oKXtcblx0XHRyZXR1cm4gZnVuY3Rpb24oaW5wdXQsIGFsbCkge1xuXHRcdFx0cmV0dXJuICghIWlucHV0KSA/IGlucHV0LnJlcGxhY2UoLyhbXlxcV19dK1teXFxzLV0qKSAqL2csZnVuY3Rpb24odHh0KXtcblx0XHRcdFx0cmV0dXJuIHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTtcblx0XHRcdH0pIDogJyc7XG5cdFx0fTtcblx0fSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJykuZmlsdGVyKCdmaW5kYnluYW1lJywgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIG5hbWUsIGZpZWxkKSB7XG5cdFx0XHQvL1xuICAgICAgdmFyIGZvdW5kcyA9IFtdO1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRsZW4gPSBpbnB1dC5sZW5ndGg7XG5cblx0XHRcdGZvciAoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdFx0aWYgKGlucHV0W2ldW2ZpZWxkXS50b0xvd2VyQ2FzZSgpLmluZGV4T2YobmFtZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XG5cdFx0XHRcdFx0IGZvdW5kcy5wdXNoKGlucHV0W2ldKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZvdW5kcztcblx0XHR9XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZmlsdGVycycpLmZpbHRlciggJ2h1bWFuUmVhZGFibGUnLCBmdW5jdGlvbigpe1xuXHRcdHJldHVybiBmdW5jdGlvbiBodW1hbml6ZShzdHIpIHtcblx0XHRcdGlmICggIXN0ciApe1xuXHRcdFx0XHRyZXR1cm4gJyc7XG5cdFx0XHR9XG5cdFx0XHR2YXIgZnJhZ3MgPSBzdHIuc3BsaXQoJ18nKTtcblx0XHRcdGZvciAodmFyIGk9MDsgaTxmcmFncy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRmcmFnc1tpXSA9IGZyYWdzW2ldLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgZnJhZ3NbaV0uc2xpY2UoMSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZnJhZ3Muam9pbignICcpO1xuXHRcdH07XG5cdH0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZmlsdGVycycpLmZpbHRlciggJ25ld2xpbmUnLCBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oIHRleHQgKXtcbiAgICAgICAgICAgIC8vXG4gICAgXG4gICAgICAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvKFxcXFxyKT9cXFxcbi9nLCAnPGJyIC8+PGJyIC8+Jyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZmlsdGVycycpLmZpbHRlcignT3JkZXJPYmplY3RCeScsIGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBhdHRyaWJ1dGUpIHtcblx0XHRcdGlmICghYW5ndWxhci5pc09iamVjdChpbnB1dCkpIHJldHVybiBpbnB1dDtcblxuXHRcdFx0dmFyIGFycmF5ID0gW107XG5cdFx0XHRmb3IgKHZhciBvYmplY3RLZXkgaW4gaW5wdXQpIHtcblx0XHRcdFx0YXJyYXkucHVzaChpbnB1dFtvYmplY3RLZXldKTtcblx0XHRcdH1cblxuXHRcdFx0YXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHRcdFx0XHRhID0gcGFyc2VJbnQoYVthdHRyaWJ1dGVdKTtcblx0XHRcdFx0YiA9IHBhcnNlSW50KGJbYXR0cmlidXRlXSk7XG5cdFx0XHRcdHJldHVybiBhIC0gYjtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGFycmF5O1xuXHRcdH1cblx0fSkuZmlsdGVyKCdvcmRlck9iamVjdEJ5RmllbGQnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW1zLCBmaWVsZCwgcmV2ZXJzZSkge1xuICAgIHZhciBmaWx0ZXJlZCA9IFtdO1xuICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgZmlsdGVyZWQucHVzaChpdGVtKTtcbiAgICB9KTtcbiAgICBmaWx0ZXJlZC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gKGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTEpO1xuICAgIH0pO1xuICAgIGlmKHJldmVyc2UpIGZpbHRlcmVkLnJldmVyc2UoKTtcbiAgICByZXR1cm4gZmlsdGVyZWQ7XG4gIH07XG59KTtcbjtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZmlsdGVycycpLmZpbHRlcigncHJvcGVydHknLCBwcm9wZXJ0eSk7XG5cdGZ1bmN0aW9uIHByb3BlcnR5KCkge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoYXJyYXksIHllYXJfZmllbGQsIHZhbHVlKSB7XG5cbiAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKXtcblxuICAgICAgICBpZihhcnJheVtpXS5kYXRhW3llYXJfZmllbGRdID09IHZhbHVlKXtcbiAgICAgICAgICBpdGVtcy5wdXNoKGFycmF5W2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG5cdFx0XHRyZXR1cm4gaXRlbXM7XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJykuZmlsdGVyKCd0cnVuY2F0ZUNoYXJhY3RlcnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQsIGNoYXJzLCBicmVha09uV29yZCkge1xuICAgICAgICAgICAgaWYgKGlzTmFOKGNoYXJzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGFycyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlucHV0ICYmIGlucHV0Lmxlbmd0aCA+IGNoYXJzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQgPSBpbnB1dC5zdWJzdHJpbmcoMCwgY2hhcnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFicmVha09uV29yZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdHNwYWNlID0gaW5wdXQubGFzdEluZGV4T2YoJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGxhc3Qgc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RzcGFjZSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ID0gaW5wdXQuc3Vic3RyKDAsIGxhc3RzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaW5wdXQuY2hhckF0KGlucHV0Lmxlbmd0aC0xKSA9PT0gJyAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IGlucHV0LnN1YnN0cigwLCBpbnB1dC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXQgKyAnLi4uJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJykuZmlsdGVyKCd0cnVuY2F0ZVdvcmRzJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCB3b3Jkcykge1xuICAgICAgICAgICAgaWYgKGlzTmFOKHdvcmRzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3b3JkcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlucHV0V29yZHMgPSBpbnB1dC5zcGxpdCgvXFxzKy8pO1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dFdvcmRzLmxlbmd0aCA+IHdvcmRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0ID0gaW5wdXRXb3Jkcy5zbGljZSgwLCB3b3Jkcykuam9pbignICcpICsgJy4uLic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9O1xuICAgIH0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJykuZmlsdGVyKCAndHJ1c3RIdG1sJywgZnVuY3Rpb24oICRzY2UgKXtcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGh0bWwgKXtcblx0XHRcdHJldHVybiAkc2NlLnRydXN0QXNIdG1sKGh0bWwpO1xuXHRcdH07XG5cdH0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5maWx0ZXJzJykuZmlsdGVyKCd1Y2ZpcnN0JywgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBpbnB1dCApIHtcblx0XHRcdGlmICggIWlucHV0ICl7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGlucHV0LnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsgaW5wdXQuc3Vic3RyaW5nKDEpO1xuXHRcdH07XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2VzJykuZmFjdG9yeSgnQmFzZW1hcHNTZXJ2aWNlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsIHRvYXN0cil7XG4gICAgICAgIC8vXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYmFzZW1hcHM6W10sXG4gICAgICAgICAgYmFzZW1hcDp7fSxcbiAgICAgICAgICBnZXRCYXNlbWFwczogZnVuY3Rpb24oc3VjY2VzcywgZXJyb3Ipe1xuICAgICAgICAgICAgdmFyIF90aGF0ID0gdGhpcztcbiAgICAgICAgICAgIERhdGFTZXJ2aWNlLmdldEFsbCgnYmFzZW1hcHMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgX3RoYXQuYmFzZW1hcHMgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgaWYodHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgIHN1Y2Nlc3MoX3RoYXQuYmFzZW1hcHMpO1xuICAgICAgICAgICAgfSwgZXJyb3IpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZ2V0QmFzZW1hcDogZnVuY3Rpb24oaWQsIHN1Y2Nlc3MsIGVycm9yKXtcbiAgICAgICAgICAgIHZhciBfdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICBEYXRhU2VydmljZS5nZXRPbmUoJ2Jhc2VtYXBzJyxpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgIF90aGF0LmJhc2VtYXAgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgaWYodHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgIHN1Y2Nlc3MoX3RoYXQuYmFzZW1hcCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldEJhc2VtYXA6IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmFzZW1hcCA9IGRhdGE7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYXZlOiBmdW5jdGlvbihiYXNlbWFwLCBzdWNjZXNzLCBlcnJvcil7XG4gICAgICAgICAgICBpZihiYXNlbWFwLmlkID09IDAgfHwgIWJhc2VtYXAuaWQpe1xuICAgICAgICAgICAgICBEYXRhU2VydmljZS5wb3N0KCdiYXNlbWFwcycsIGJhc2VtYXApLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdOZXcgQmFzZW1hcCBzdWNjZXNzZnVsbHkgY3JlYXRlZCcpO1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBzdWNjZXNzID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MocmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9LGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1NhdmluZyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlcnJvciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICBlcnJvcihyZXNwb25zZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgYmFzZW1hcC5zYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1NhdmUgc3VjY2Vzc2Z1bCcpO1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBzdWNjZXNzID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHN1Y2Nlc3MocmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9LGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ1NhdmluZyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBlcnJvciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICBlcnJvcihyZXNwb25zZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVtb3ZlSXRlbTogZnVuY3Rpb24oaWQsIHN1Y2Nlc3MsIGVycm9yKXtcbiAgICAgICAgICAgIERhdGFTZXJ2aWNlLnJlbW92ZSgnYmFzZW1hcHMnLCBpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdEZWxldGlvbiBzdWNjZXNzZnVsJyk7XG4gICAgICAgICAgICAgIGlmKHR5cGVvZiBzdWNjZXNzID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICBzdWNjZXNzKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgaWYodHlwZW9mIGVycm9yID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICBlcnJvcihyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcdFwidXNlIHN0cmljdFwiO1xuXG5cdFx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmZhY3RvcnkoJ0NvbG9ySGFuZGxlU2VydmljZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvL1xuXHRcdFx0XHR2YXIgQ29sb3JIYW5kbGU7XG5cdFx0XHRcdHJldHVybiBDb2xvckhhbmRsZSA9IChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvKlxuXHRcdFx0XHRcdCAgICAgIEBwYXJhbSB7U3RyaW5nfSBjb2xvciBDb2xvciBzdHJpbmcgaW4gQ1NTIHJnYmEoMC0yNTUsIDAtMjU1LCAwLTI1NSwgMC0xKSBmb3JtYXQuXG5cdFx0XHRcdFx0ICAgICAgQHBhcmFtIHtOdW1iZXJ9IHN0b3AgIFZhbHVlIDAtMSwgdGhlIGdyYWRpZW50IGNvbG9yIHN0b3AuIDAgbWVhbnMgdGhlIGNvbG9yIGFwcGVhcnMgYXQgMCUsIDAuNSBtZWFucyA1MCUsIGV0Yy5cblx0XHRcdFx0XHQqL1xuXG5cdFx0XHRcdFx0ZnVuY3Rpb24gQ29sb3JIYW5kbGUoY29sb3IsIHN0b3ApIHtcblx0XHRcdFx0XHRcdHRoaXMuY29sb3IgPSBjb2xvcjtcblx0XHRcdFx0XHRcdHRoaXMuc3RvcCA9IHN0b3A7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIENvbG9ySGFuZGxlO1xuXG5cdFx0XHRcdH0pKCk7XG5cdFx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKS5mYWN0b3J5KCdDb250ZW50U2VydmljZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCAkZmlsdGVyKSB7XG5cdFx0Ly9cblx0XHRmdW5jdGlvbiBzZWFyY2hGb3JJdGVtKGxpc3QsIGlkKSB7XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0XHRcdGlmIChpdGVtLmlkID09IGlkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGl0ZW0uY2hpbGRyZW4pIHtcblx0XHRcdFx0XHR2YXIgc3VicmVzdWx0ID0gc2VhcmNoRm9ySXRlbShpdGVtLmNoaWxkcmVuLCBpZCk7XG5cdFx0XHRcdFx0aWYgKHN1YnJlc3VsdCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHN1YnJlc3VsdDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiB7XG5cdFx0XHRjb250ZW50OiB7XG5cdFx0XHRcdGluZGljYXRvcnM6IFtdLFxuXHRcdFx0XHRpbmRpY2F0b3I6IHt9LFxuXHRcdFx0XHRkYXRhOiBbXSxcblx0XHRcdFx0Y2F0ZWdvcmllczogW10sXG5cdFx0XHRcdGNhdGVnb3J5OiB7fSxcblx0XHRcdFx0c3R5bGVzOiBbXSxcblx0XHRcdFx0aW5mb2dyYXBoaWNzOiBbXSxcblx0XHRcdFx0aW5kaWNlczogW11cblx0XHRcdH0sXG5cdFx0XHRiYWNrdXA6IHt9LFxuXHRcdFx0ZmV0Y2hJbmRpY2VzOiBmdW5jdGlvbihmaWx0ZXIpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGVudC5pbmRpY2VzID0gRGF0YVNlcnZpY2UuZ2V0QWxsKCdpbmRleCcpLiRvYmplY3Q7XG5cdFx0XHR9LFxuXHRcdFx0ZmV0Y2hJbmRpY2F0b3JzOiBmdW5jdGlvbihmaWx0ZXIpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGVudC5pbmRpY2F0b3JzID0gRGF0YVNlcnZpY2UuZ2V0QWxsKCdpbmRpY2F0b3JzJywgZmlsdGVyKS4kb2JqZWN0XG5cdFx0XHR9LFxuXHRcdFx0ZmV0Y2hDYXRlZ29yaWVzOiBmdW5jdGlvbihmaWx0ZXIsIHdpdGhvdXRTYXZlKSB7XG5cdFx0XHRcdGlmICh3aXRob3V0U2F2ZSkge1xuXHRcdFx0XHRcdHJldHVybiBEYXRhU2VydmljZS5nZXRBbGwoJ2NhdGVnb3JpZXMnLCBmaWx0ZXIpLiRvYmplY3Q7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGVudC5jYXRlZ29yaWVzID0gRGF0YVNlcnZpY2UuZ2V0QWxsKCdjYXRlZ29yaWVzJywgZmlsdGVyKS4kb2JqZWN0O1xuXHRcdFx0fSxcblx0XHRcdGZldGNoU3R5bGVzOiBmdW5jdGlvbihmaWx0ZXIpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGVudC5zdHlsZXMgPSBEYXRhU2VydmljZS5nZXRBbGwoJ3N0eWxlcycsIGZpbHRlcikuJG9iamVjdDtcblx0XHRcdH0sXG5cdFx0XHRnZXRJbmRpY2VzOiBmdW5jdGlvbihmaWx0ZXIpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZmV0Y2hJbmRpY2VzKGZpbHRlcik7XG5cblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGVudC5pbmRpY2VzO1xuXHRcdFx0fSxcblx0XHRcdGdldENhdGVnb3JpZXM6IGZ1bmN0aW9uKGZpbHRlciwgd2l0aG91dFNhdmUpIHtcblx0XHRcdFx0aWYgKHdpdGhvdXRTYXZlKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuZmV0Y2hDYXRlZ29yaWVzKGZpbHRlciwgd2l0aG91dFNhdmUpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLmNvbnRlbnQuY2F0ZWdvcmllcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmZldGNoQ2F0ZWdvcmllcyhmaWx0ZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnRlbnQuY2F0ZWdvcmllcztcblx0XHRcdH0sXG5cdFx0XHRnZXRJbmRpY2F0b3JzOiBmdW5jdGlvbihmaWx0ZXIpIHtcblx0XHRcdFx0aWYgKHRoaXMuY29udGVudC5pbmRpY2F0b3JzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb250ZW50LmluZGljYXRvcnM7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuZmV0Y2hJbmRpY2F0b3JzKGZpbHRlcik7XG5cblx0XHRcdH0sXG5cdFx0XHRnZXRTdHlsZXM6IGZ1bmN0aW9uKGZpbHRlcikge1xuXHRcdFx0XHRpZiAodGhpcy5jb250ZW50LnN0eWxlcy5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmZldGNoU3R5bGVzKGZpbHRlcik7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuY29udGVudC5zdHlsZXM7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0SW5kaWNhdG9yOiBmdW5jdGlvbihpZCkge1xuXHRcdFx0XHRpZiAodGhpcy5jb250ZW50LmluZGljYXRvcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb250ZW50LmluZGljYXRvcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0aGlzLmNvbnRlbnQuaW5kaWNhdG9yc1tpXS5pZCA9PSBpZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb250ZW50LmluZGljYXRvcnNbaV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzLmZldGNoSW5kaWNhdG9yKGlkKTtcblx0XHRcdH0sXG5cdFx0XHRmZXRjaEluZGljYXRvcjogZnVuY3Rpb24oaWQsIHN1Y2Nlc3MpIHtcblx0XHRcdFx0dmFyIHRoYXQgPSB0aGlzO1xuXHRcdFx0XHRyZXR1cm4gRGF0YVNlcnZpY2UuZ2V0T25lKCdpbmRpY2F0b3JzLycgKyBpZCkudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBzdWNjZXNzID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0c3VjY2VzcyhkYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoYXQuY29udGVudC5pbmRpY2F0b3IgPSBkYXRhO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRmZXRjaEluZGljYXRvcldpdGhEYXRhOiBmdW5jdGlvbihpZCwgc3VjY2VzcywgcXVlcnkpIHtcblx0XHRcdFx0RGF0YVNlcnZpY2UuZ2V0T25lKCdpbmRpY2F0b3JzLycsIGlkLCBxdWVyeSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBzdWNjZXNzID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0c3VjY2VzcyhkYXRhKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGZldGNoSW5kaWNhdG9yUHJvbWlzZTogZnVuY3Rpb24oaWQpIHtcblx0XHRcdFx0cmV0dXJuIERhdGFTZXJ2aWNlLmdldE9uZSgnaW5kaWNhdG9ycycsIGlkKTtcblx0XHRcdH0sXG5cdFx0XHRnZXRJbmRpY2F0b3JEYXRhOiBmdW5jdGlvbihpZCwgeWVhciwgZ2VuZGVyKSB7XG5cdFx0XHRcdGlmICh5ZWFyICYmIGdlbmRlciAmJiBnZW5kZXIgIT0gJ2FsbCcpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb250ZW50LmRhdGEgPSBEYXRhU2VydmljZS5nZXRBbGwoJ2luZGljYXRvcnMvJyArIGlkICsgJy9kYXRhLycgKyB5ZWFyICsgJy9nZW5kZXIvJyArIGdlbmRlcik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoeWVhcikge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvbnRlbnQuZGF0YSA9IERhdGFTZXJ2aWNlLmdldEFsbCgnaW5kaWNhdG9ycy8nICsgaWQgKyAnL2RhdGEvJyArIHllYXIpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnRlbnQuZGF0YSA9IERhdGFTZXJ2aWNlLmdldEFsbCgnaW5kaWNhdG9ycy8nICsgaWQgKyAnL2RhdGEnKTtcblx0XHRcdH0sXG5cdFx0XHRnZXRJbmRpY2F0b3JIaXN0b3J5OiBmdW5jdGlvbihpZCwgaXNvLCBnZW5kZXIpIHtcblx0XHRcdFx0cmV0dXJuIERhdGFTZXJ2aWNlLmdldEFsbCgnaW5kaWNhdG9ycy8nICsgaWQgKyAnL2hpc3RvcnkvJyArIGlzbywge1xuXHRcdFx0XHRcdGdlbmRlcjogZ2VuZGVyXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSxcblx0XHRcdGdldEl0ZW06IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdC8qXHRpZih0aGlzLmNvbnRlbnQuaW5kaWNlcy5sZW5ndGggPiAwKXtcblx0XHRcdFx0XHRcdCB0aGlzLmNvbnRlbnQuZGF0YSA9IHNlYXJjaEZvckl0ZW0odGhpcy5jb250ZW50LmluZGljZXMsIGlkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZXsqL1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jb250ZW50LmRhdGEgPSBEYXRhU2VydmljZS5nZXRPbmUoJ2luZGV4LycsIGlkKVxuXHRcdFx0XHRcdC8vfVxuXHRcdFx0fSxcblx0XHRcdHJlbW92ZUNvbnRlbnQ6IGZ1bmN0aW9uKGlkLCBsaXN0KSB7XG5cdFx0XHRcdHZhciB0aGF0ID0gdGhpcztcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKGxpc3QsIGZ1bmN0aW9uKGVudHJ5LCBrZXkpIHtcblx0XHRcdFx0XHRpZiAoZW50cnkuaWQgPT0gaWQpIHtcblx0XHRcdFx0XHRcdGxpc3Quc3BsaWNlKGtleSwgMSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGVudHJ5LmNoaWxkcmVuKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3VicmVzdWx0ID0gdGhhdC5yZW1vdmVDb250ZW50KGlkLCBlbnRyeS5jaGlsZHJlbik7XG5cdFx0XHRcdFx0XHRpZiAoc3VicmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBzdWJyZXN1bHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSxcblx0XHRcdGZpbmRDb250ZW50OiBmdW5jdGlvbihpZCwgbGlzdCkge1xuXHRcdFx0XHR2YXIgZm91bmQgPSBudWxsO1xuXHRcdFx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbihlbnRyeSwga2V5KSB7XG5cdFx0XHRcdFx0aWYgKGVudHJ5LmlkID09IGlkKSB7XG5cdFx0XHRcdFx0XHRmb3VuZCA9IGVudHJ5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZW50cnkuY2hpbGRyZW4gJiYgZW50cnkuY2hpbGRyZW4ubGVuZ3RoICYmICFmb3VuZCkge1xuXHRcdFx0XHRcdFx0dmFyIHN1YnJlc3VsdCA9IHRoYXQuZmluZENvbnRlbnQoaWQsIGVudHJ5LmNoaWxkcmVuKTtcblx0XHRcdFx0XHRcdGlmIChzdWJyZXN1bHQpIHtcblx0XHRcdFx0XHRcdFx0Zm91bmQgPSBzdWJyZXN1bHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmV0dXJuIGZvdW5kO1xuXHRcdFx0fSxcblx0XHRcdGFkZEl0ZW06IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0dGhpcy5jb250ZW50LmluZGljZXMucHVzaChpdGVtKVxuXHRcdFx0fSxcblx0XHRcdHJlbW92ZUl0ZW06IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdHRoaXMucmVtb3ZlQ29udGVudChpZCwgdGhpcy5jb250ZW50LmluZGljZXMpO1xuXHRcdFx0XHRyZXR1cm4gRGF0YVNlcnZpY2UucmVtb3ZlKCdpbmRleC8nLCBpZCk7XG5cdFx0XHR9LFxuXHRcdFx0dXBkYXRlSXRlbTogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHR2YXIgZW50cnkgPSB0aGlzLmZpbmRDb250ZW50KGl0ZW0uaWQsIHRoaXMuY29udGVudC5pbmRpY2VzKTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhlbnRyeSwgaXRlbSk7XG5cdFx0XHRcdHJldHVybiBlbnRyeSA9IGl0ZW07XG5cdFx0XHR9LFxuXHRcdFx0Z2V0Q2F0ZWdvcnk6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdGlmICh0aGlzLmNvbnRlbnQuY2F0ZWdvcmllcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5maW5kQ29udGVudChpZCwgdGhpcy5jb250ZW50LmNhdGVnb3JpZXMpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvbnRlbnQuY2F0ZWdvcnkgPSBEYXRhU2VydmljZS5nZXRPbmUoJ2NhdGVnb3JpZXMvJyArIGlkKS4kb2JqZWN0O1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0cmVtb3ZlQ2F0ZWdvcnk6IGZ1bmN0aW9uKGlkKSB7XG5cdFx0XHRcdHRoaXMucmVtb3ZlQ29udGVudChpZCwgdGhpcy5jb250ZW50LmNhdGVnb3JpZXMpO1xuXHRcdFx0XHRyZXR1cm4gRGF0YVNlcnZpY2UucmVtb3ZlKCdjYXRlZ29yaWVzLycsIGlkKTtcblx0XHRcdH0sXG5cdFx0XHRmaWx0ZXJMaXN0OiBmdW5jdGlvbih0eXBlLCBmaWx0ZXIsIGxpc3QpIHtcblx0XHRcdFx0aWYgKGxpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGlmICghdGhpcy5iYWNrdXBbdHlwZV0pIHtcblx0XHRcdFx0XHRcdHRoaXMuYmFja3VwW3R5cGVdID0gYW5ndWxhci5jb3B5KHRoaXMuY29udGVudFt0eXBlXSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuY29udGVudFt0eXBlXSA9IGFuZ3VsYXIuY29weSh0aGlzLmJhY2t1cFt0eXBlXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzLmNvbnRlbnRbdHlwZV0gPSAkZmlsdGVyKCdmaWx0ZXInKSh0aGlzLmNvbnRlbnRbdHlwZV0sIGZpbHRlcilcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGlzLmNvbnRlbnRbdHlwZV0gPSBhbmd1bGFyLmNvcHkodGhpcy5iYWNrdXBbdHlwZV0pO1xuXHRcdFx0XHRkZWxldGUgdGhpcy5iYWNrdXBbdHlwZV07XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnRlbnRbdHlwZV07XG5cdFx0XHR9LFxuXHRcdFx0cmVzZXRGaWx0ZXI6IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRcdFx0aWYgKCF0aGlzLmJhY2t1cFt0eXBlXSkgcmV0dXJuIHRoaXMuY29udGVudFt0eXBlXTtcblx0XHRcdFx0dGhpcy5jb250ZW50W3R5cGVdID0gYW5ndWxhci5jb3B5KHRoaXMuYmFja3VwW3R5cGVdKTtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuYmFja3VwW3R5cGVdO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5jb250ZW50W3R5cGVdO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmZhY3RvcnkoJ0NvdW50cmllc1NlcnZpY2UnLCBmdW5jdGlvbihEYXRhU2VydmljZSkge1xuXHRcdC8vXG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvdW50cmllczogW10sXG5cdFx0XHRjb250aW5lbnRzOiBbXSxcblx0XHRcdGluZGljYXRvcjogbnVsbCxcblx0XHRcdGZldGNoRGF0YTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvdW50cmllcyA9IERhdGFTZXJ2aWNlLmdldE9uZSgnY291bnRyaWVzL2lzb3MnKS4kb2JqZWN0O1xuXHRcdFx0fSxcblx0XHRcdGdldERhdGE6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIXRoaXMuY291bnRyaWVzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHRoaXMuZmV0Y2hEYXRhKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuY291bnRyaWVzO1xuXHRcdFx0fSxcblx0XHRcdGdldENvbnRpbmVudHM6IGZ1bmN0aW9uKHN1Y2Nlc3MsIGluZGljYXRvcikge1xuXHRcdFx0XHR2YXIgX3RoYXQgPSB0aGlzO1xuXHRcdFx0XHRpZiAodGhpcy5jb250aW5lbnRzLmxlbmd0aCAmJiBpbmRpY2F0b3IgPT0gdGhpcy5pbmRpY2F0b3IpIHtcblx0XHRcdFx0XHRzdWNjZXNzKHRoaXMuY29udGluZW50cyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5pbmRpY2F0b3IgPSBpbmRpY2F0b3I7XG5cdFx0XHRcdFx0cmV0dXJuIERhdGFTZXJ2aWNlLmdldEFsbCgnY29udGluZW50cycsIHtcblx0XHRcdFx0XHRcdGluZGljYXRvcjogaW5kaWNhdG9yXG5cdFx0XHRcdFx0fSkudGhlbihmdW5jdGlvbihjb250aW5lbnRzKSB7XG5cdFx0XHRcdFx0XHRfdGhhdC5jb250aW5lbnRzID0gY29udGluZW50cztcblx0XHRcdFx0XHRcdHN1Y2Nlc3MoY29udGluZW50cyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKS5mYWN0b3J5KCdEYXRhU2VydmljZScsIERhdGFTZXJ2aWNlKTtcblx0RGF0YVNlcnZpY2UuJGluamVjdCA9IFsnUmVzdGFuZ3VsYXInLCAndG9hc3RyJ107XG5cblx0ZnVuY3Rpb24gRGF0YVNlcnZpY2UoUmVzdGFuZ3VsYXIsIHRvYXN0cikge1xuXHRcdHJldHVybiB7XG5cdFx0XHRnZXRBbGw6IGdldEFsbCxcblx0XHRcdGdldE9uZTogZ2V0T25lLFxuXHRcdFx0cG9zdDogcG9zdCxcblx0XHRcdHB1dDogcHV0LFxuXHRcdFx0dXBkYXRlOiB1cGRhdGUsXG5cdFx0XHRyZW1vdmU6IHJlbW92ZVxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBnZXRBbGwocm91dGUsIGZpbHRlcikge1xuXHRcdFx0dmFyIGRhdGEgPSBSZXN0YW5ndWxhci5hbGwocm91dGUpLmdldExpc3QoZmlsdGVyKTtcblx0XHRcdGRhdGEudGhlbihmdW5jdGlvbigpIHt9LCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcihkYXRhLnN0YXR1c1RleHQsICdDb25uZWN0aW9uIEVycm9yJyk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldE9uZShyb3V0ZSwgaWQsIHF1ZXJ5KSB7XG5cdFx0XHRyZXR1cm4gUmVzdGFuZ3VsYXIub25lKHJvdXRlLCBpZCkuZ2V0KHF1ZXJ5KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBwb3N0KHJvdXRlLCBkYXRhKSB7XG5cdFx0XHR2YXIgZGF0YSA9IFJlc3Rhbmd1bGFyLmFsbChyb3V0ZSkucG9zdChkYXRhKTtcblx0XHRcdGRhdGEudGhlbihmdW5jdGlvbigpIHt9LCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcihkYXRhLmRhdGEuZXJyb3IsICdTYXZpbmcgZmFpbGVkJyk7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHB1dChyb3V0ZSwgZGF0YSkge1xuXHRcdFx0cmV0dXJuIFJlc3Rhbmd1bGFyLmFsbChyb3V0ZSkucHV0KGRhdGEpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShyb3V0ZSwgaWQsIGRhdGEpIHtcblx0XHRcdHJldHVybiBSZXN0YW5ndWxhci5vbmUocm91dGUsIGlkKS5wdXQoZGF0YSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlKHJvdXRlLCBpZCkge1xuXHRcdFx0cmV0dXJuIFJlc3Rhbmd1bGFyLm9uZShyb3V0ZSwgaWQpLnJlbW92ZSgpO1xuXHRcdH1cblx0fVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwLnNlcnZpY2VzXCIpLmZhY3RvcnkoJ0RpYWxvZ1NlcnZpY2UnLCBmdW5jdGlvbigkbWREaWFsb2cpe1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGZyb21UZW1wbGF0ZTogZnVuY3Rpb24odGVtcGxhdGUsICRzY29wZSl7XG5cblx0XHRcdFx0dmFyIG9wdGlvbnMgPSB7XG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2RpYWxvZ3MvJyArIHRlbXBsYXRlICsgJy8nICsgdGVtcGxhdGUgKyAnLmh0bWwnXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0aWYgKCRzY29wZSl7XG5cdFx0XHRcdFx0b3B0aW9ucy5zY29wZSA9ICRzY29wZS4kbmV3KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gJG1kRGlhbG9nLnNob3cob3B0aW9ucyk7XG5cdFx0XHR9LFxuXG5cdFx0XHRoaWRlOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRyZXR1cm4gJG1kRGlhbG9nLmhpZGUoKTtcblx0XHRcdH0sXG5cblx0XHRcdGFsZXJ0OiBmdW5jdGlvbih0aXRsZSwgY29udGVudCl7XG5cdFx0XHRcdCRtZERpYWxvZy5zaG93KFxuXHRcdFx0XHRcdCRtZERpYWxvZy5hbGVydCgpXG5cdFx0XHRcdFx0XHQudGl0bGUodGl0bGUpXG5cdFx0XHRcdFx0XHQuY29udGVudChjb250ZW50KVxuXHRcdFx0XHRcdFx0Lm9rKCdPaycpXG5cdFx0XHRcdCk7XG5cdFx0XHR9LFxuXG5cdFx0XHRjb25maXJtOiBmdW5jdGlvbih0aXRsZSwgY29udGVudCkge1xuXHRcdFx0XHRyZXR1cm4gJG1kRGlhbG9nLnNob3coXG5cdFx0XHRcdFx0JG1kRGlhbG9nLmNvbmZpcm0oKVxuXHRcdFx0XHRcdFx0LnRpdGxlKHRpdGxlKVxuXHRcdFx0XHRcdFx0LmNvbnRlbnQoY29udGVudClcblx0XHRcdFx0XHRcdC5vaygnT2snKVxuXHRcdFx0XHRcdFx0LmNhbmNlbCgnQ2FuY2VsJylcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2VzJykuZmFjdG9yeSgnRXJyb3JDaGVja2VyU2VydmljZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCBEaWFsb2dTZXJ2aWNlLCBJbmRleFNlcnZpY2Upe1xuICAgICAgICAvL1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrTXlEYXRhKGRhdGEpIHtcbiAgICBcdFx0XHR2bS5leHRlbmRpbmdDaG9pY2VzID0gW107XG4gICAgXHRcdFx0aWYgKHZtLmRhdGEubGVuZ3RoKSB7XG4gICAgXHRcdFx0XHR2bS5teURhdGEudGhlbihmdW5jdGlvbihpbXBvcnRzKSB7XG4gICAgXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChpbXBvcnRzLCBmdW5jdGlvbihlbnRyeSkge1xuICAgIFx0XHRcdFx0XHRcdHZhciBmb3VuZCA9IDA7XG4gICAgXHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGFbMF0ubWV0YS5maWVsZHMsIGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgXHRcdFx0XHRcdFx0XHR2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UoZW50cnkubWV0YV9kYXRhKTtcbiAgICBcdFx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbHVtbi5jb2x1bW4gPT0gZmllbGQpIHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRmb3VuZCsrO1xuICAgIFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHRcdFx0XHR9KVxuICAgIFx0XHRcdFx0XHRcdH0pO1xuICAgIFx0XHRcdFx0XHRcdGlmIChmb3VuZCA+PSB2bS5kYXRhWzBdLm1ldGEuZmllbGRzLmxlbmd0aCAtIDMpIHtcbiAgICBcdFx0XHRcdFx0XHRcdHZtLmV4dGVuZGluZ0Nob2ljZXMucHVzaChlbnRyeSk7XG4gICAgXHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHR9KVxuICAgIFx0XHRcdFx0XHRpZiAodm0uZXh0ZW5kaW5nQ2hvaWNlcy5sZW5ndGgpIHtcbiAgICBcdFx0XHRcdFx0XHRpZih2bS5tZXRhLnllYXJfZmllbGQpe1xuICAgIFx0XHRcdFx0XHRcdFx0dm0ubWV0YS55ZWFyID0gdm0uZGF0YVswXS5kYXRhWzBdW3ZtLm1ldGEueWVhcl9maWVsZF07XG4gICAgXHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdleHRlbmREYXRhJywgJHNjb3BlKTtcbiAgICBcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0fSk7XG4gICAgXHRcdFx0fVxuICAgICAgICAgIHJldHVybiBleHRlbmRlZENob2ljZXM7XG4gICAgXHRcdH1cblxuICAgIFx0XHRmdW5jdGlvbiBjbGVhckVycm9ycygpIHtcbiAgICBcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24ocm93LCBrZXkpIHtcbiAgICBcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChyb3cuZGF0YVswXSwgZnVuY3Rpb24oaXRlbSwgaykge1xuICAgIFx0XHRcdFx0XHRpZiAoaXNOYU4oaXRlbSkgfHwgaXRlbSA8IDApIHtcbiAgICBcdFx0XHRcdFx0XHRpZiAoIGl0ZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09IFwiI05BXCIgfHwgaXRlbSA8IDAgfHwgaXRlbS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkuaW5kZXhPZignTi9BJykgPiAtMSkge1xuICAgIFx0XHRcdFx0XHRcdFx0dm0uZGF0YVtrZXldLmRhdGFbMF1ba10gPSBudWxsO1xuICAgIFx0XHRcdFx0XHRcdFx0cm93LmVycm9ycy5zcGxpY2UoMCwgMSk7XG4gICAgXHRcdFx0XHRcdFx0XHR2bS5lcnJvcnMuc3BsaWNlKDAsIDEpO1xuICAgIFx0XHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0fSk7XG4gICAgXHRcdFx0XHRpZiAoIXJvdy5kYXRhWzBdW3ZtLm1ldGEuaXNvX2ZpZWxkXSkge1xuICAgIFx0XHRcdFx0XHR2YXIgZXJyb3IgPSB7XG4gICAgXHRcdFx0XHRcdFx0dHlwZTogXCIyXCIsXG4gICAgXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJJc28gZmllbGQgaXMgbm90IHZhbGlkIVwiLFxuICAgIFx0XHRcdFx0XHRcdHZhbHVlOiByb3cuZGF0YVswXVt2bS5tZXRhLmlzb19maWVsZF0sXG4gICAgXHRcdFx0XHRcdFx0Y29sdW1uOiB2bS5tZXRhLmlzb19maWVsZCxcbiAgICBcdFx0XHRcdFx0XHRyb3c6IGtleVxuICAgIFx0XHRcdFx0XHR9O1xuICAgIFx0XHRcdFx0XHR2YXIgZXJyb3JGb3VuZCA9IGZhbHNlO1xuICAgIFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2gocm93LmVycm9ycywgZnVuY3Rpb24oZXJyb3IsIGtleSkge1xuICAgIFx0XHRcdFx0XHRcdGlmIChlcnJvci50eXBlID09IDIpIHtcbiAgICBcdFx0XHRcdFx0XHRcdGVycm9yRm91bmQgPSB0cnVlO1xuICAgIFx0XHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdFx0fSlcbiAgICBcdFx0XHRcdFx0aWYgKCFlcnJvckZvdW5kKSB7XG4gICAgXHRcdFx0XHRcdFx0cm93LmVycm9ycy5wdXNoKGVycm9yKTtcbiAgICBcdFx0XHRcdFx0XHR2bS5pc29fZXJyb3JzLnB1c2goZXJyb3IpO1xuICAgIFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHR9XG4gICAgXHRcdFx0fSk7XG4gICAgXHRcdH1cblxuICAgIFx0XHRmdW5jdGlvbiBmZXRjaElzbygpIHtcbiAgICBcdFx0XHRpZiAoIXZtLm1ldGEuaXNvX2ZpZWxkKSB7XG4gICAgXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ0NoZWNrIHlvdXIgc2VsZWN0aW9uIGZvciB0aGUgSVNPIGZpZWxkJywgJ0NvbHVtbiBub3Qgc3BlY2lmaWVkIScpO1xuICAgIFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgIFx0XHRcdH1cbiAgICBcdFx0XHRpZiAoIXZtLm1ldGEuY291bnRyeV9maWVsZCkge1xuICAgIFx0XHRcdFx0dG9hc3RyLmVycm9yKCdDaGVjayB5b3VyIHNlbGVjdGlvbiBmb3IgdGhlIENPVU5UUlkgZmllbGQnLCAnQ29sdW1uIG5vdCBzcGVjaWZpZWQhJyk7XG4gICAgXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgXHRcdFx0fVxuICAgIFx0XHRcdGlmICh2bS5tZXRhLmNvdW50cnlfZmllbGQgPT0gdm0ubWV0YS5pc29fZmllbGQpIHtcbiAgICBcdFx0XHRcdHRvYXN0ci5lcnJvcignSVNPIGZpZWxkIGFuZCBDT1VOVFJZIGZpZWxkIGNhbiBub3QgYmUgdGhlIHNhbWUnLCAnU2VsZWN0aW9uIGVycm9yIScpO1xuICAgIFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuICAgIFx0XHRcdH1cblxuICAgIFx0XHRcdHZtLm5vdEZvdW5kID0gW107XG4gICAgXHRcdFx0dmFyIGVudHJpZXMgPSBbXTtcbiAgICBcdFx0XHR2YXIgaXNvQ2hlY2sgPSAwO1xuICAgIFx0XHRcdHZhciBpc29UeXBlID0gJ2lzby0zMTY2LTInO1xuICAgIFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcbiAgICBcdFx0XHRcdGlmIChpdGVtLmRhdGFbMF1bdm0ubWV0YS5pc29fZmllbGRdKSB7XG4gICAgXHRcdFx0XHRcdGlzb0NoZWNrICs9IGl0ZW0uZGF0YVswXVt2bS5tZXRhLmlzb19maWVsZF0ubGVuZ3RoID09IDMgPyAxIDogMDtcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHRcdHN3aXRjaCAoaXRlbS5kYXRhWzBdW3ZtLm1ldGEuY291bnRyeV9maWVsZF0pIHtcbiAgICBcdFx0XHRcdFx0Y2FzZSAnQ2FibyBWZXJkZSc6XG4gICAgXHRcdFx0XHRcdFx0aXRlbS5kYXRhWzBdW3ZtLm1ldGEuY291bnRyeV9maWVsZF0gPSAnQ2FwZSBWZXJkZSc7XG4gICAgXHRcdFx0XHRcdFx0YnJlYWs7XG4gICAgXHRcdFx0XHRcdGNhc2UgXCJEZW1vY3JhdGljIFBlb3BsZXMgUmVwdWJsaWMgb2YgS29yZWFcIjpcbiAgICBcdFx0XHRcdFx0XHRpdGVtLmRhdGFbMF1bdm0ubWV0YS5jb3VudHJ5X2ZpZWxkXSA9IFwiRGVtb2NyYXRpYyBQZW9wbGUncyBSZXB1YmxpYyBvZiBLb3JlYVwiO1xuICAgIFx0XHRcdFx0XHRcdGJyZWFrO1xuICAgIFx0XHRcdFx0XHRjYXNlIFwiQ290ZSBkJ0l2b2lyZVwiOlxuICAgIFx0XHRcdFx0XHRcdGl0ZW0uZGF0YVswXVt2bS5tZXRhLmNvdW50cnlfZmllbGRdID0gXCJJdm9yeSBDb2FzdFwiO1xuICAgIFx0XHRcdFx0XHRcdGJyZWFrO1xuICAgIFx0XHRcdFx0XHRjYXNlIFwiTGFvIFBlb3BsZXMgRGVtb2NyYXRpYyBSZXB1YmxpY1wiOlxuICAgIFx0XHRcdFx0XHRcdGl0ZW0uZGF0YVswXVt2bS5tZXRhLmNvdW50cnlfZmllbGRdID0gXCJMYW8gUGVvcGxlJ3MgRGVtb2NyYXRpYyBSZXB1YmxpY1wiO1xuICAgIFx0XHRcdFx0XHRcdGJyZWFrO1xuICAgIFx0XHRcdFx0XHRkZWZhdWx0OlxuICAgIFx0XHRcdFx0XHRcdGJyZWFrO1xuICAgIFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0ZW50cmllcy5wdXNoKHtcbiAgICBcdFx0XHRcdFx0aXNvOiBpdGVtLmRhdGFbMF1bdm0ubWV0YS5pc29fZmllbGRdLFxuICAgIFx0XHRcdFx0XHRuYW1lOiBpdGVtLmRhdGFbMF1bdm0ubWV0YS5jb3VudHJ5X2ZpZWxkXVxuICAgIFx0XHRcdFx0fSk7XG4gICAgXHRcdFx0fSk7XG4gICAgXHRcdFx0dmFyIGlzb1R5cGUgPSBpc29DaGVjayA+PSAoZW50cmllcy5sZW5ndGggLyAyKSA/ICdpc28tMzE2Ni0xJyA6ICdpc28tMzE2Ni0yJztcbiAgICBcdFx0XHRJbmRleFNlcnZpY2UucmVzZXRUb1NlbGVjdCgpO1xuICAgIFx0XHRcdERhdGFTZXJ2aWNlLnBvc3QoJ2NvdW50cmllcy9ieUlzb05hbWVzJywge1xuICAgIFx0XHRcdFx0ZGF0YTogZW50cmllcyxcbiAgICBcdFx0XHRcdGlzbzogaXNvVHlwZVxuICAgIFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICBcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChyZXNwb25zZSwgZnVuY3Rpb24oY291bnRyeSwga2V5KSB7XG4gICAgXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtLCBrKSB7XG4gICAgXHRcdFx0XHRcdFx0aWYgKGNvdW50cnkubmFtZSA9PSBpdGVtLmRhdGFbMF1bdm0ubWV0YS5jb3VudHJ5X2ZpZWxkXSkge1xuICAgIFx0XHRcdFx0XHRcdFx0aWYgKGNvdW50cnkuZGF0YS5sZW5ndGggPiAxKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdHZhciB0b1NlbGVjdCA9IHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRlbnRyeTogaXRlbSxcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRvcHRpb25zOiBjb3VudHJ5LmRhdGFcbiAgICBcdFx0XHRcdFx0XHRcdFx0fTtcbiAgICBcdFx0XHRcdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLmFkZFRvU2VsZWN0KHRvU2VsZWN0KTtcbiAgICBcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY291bnRyeS5kYXRhWzBdICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHR2bS5kYXRhW2tdLmRhdGFbMF1bdm0ubWV0YS5pc29fZmllbGRdID0gY291bnRyeS5kYXRhWzBdLmlzbztcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHR2bS5kYXRhW2tdLmRhdGFbMF1bdm0ubWV0YS5jb3VudHJ5X2ZpZWxkXSA9IGNvdW50cnkuZGF0YVswXS5hZG1pbjtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaXRlbS5lcnJvcnMubGVuZ3RoKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goaXRlbS5lcnJvcnMsIGZ1bmN0aW9uKGVycm9yLCBlKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnJvci50eXBlID09IDIgfHwgZXJyb3IudHlwZSA9PSAzKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm0uaXNvX2Vycm9ycy5zcGxpY2UoMCwgMSk7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5lcnJvcnMuc3BsaWNlKGUsIDEpO1xuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGVycm9yLnR5cGUgPT0gMSkge1xuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnJvci5jb2x1bW4gPT0gdm0ubWV0YS5pc29fZmllbGQpIHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZtLmVycm9ycy5zcGxpY2UoMCwgMSk7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmVycm9ycy5zcGxpY2UoZSwgMSk7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKHZtLmRhdGFba10pO1xuICAgIFx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiM1wiLFxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0bWVzc2FnZTogXCJDb3VsZCBub3QgbG9jYXRlIGEgdmFsaWQgaXNvIG5hbWUhXCIsXG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRjb2x1bW46IHZtLm1ldGEuY291bnRyeV9maWVsZFxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdH07XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGVycm9yRm91bmQgPSBmYWxzZTtcbiAgICBcdFx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YVtrXS5lcnJvcnMsIGZ1bmN0aW9uKGVycm9yLCBpKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyb3IudHlwZSA9PSAzKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yRm91bmQgPSB0cnVlO1xuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHRcdFx0XHRcdH0pXG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFlcnJvckZvdW5kKSB7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2UuYWRkSXNvRXJyb3IoZXJyb3IpO1xuICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5lcnJvcnMucHVzaChlcnJvcik7XG4gICAgXHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHRcdFx0XHR9XG4gICAgXHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHR9KTtcbiAgICBcdFx0XHRcdH0pO1xuICAgIFx0XHRcdFx0dm0uaXNvX2NoZWNrZWQgPSB0cnVlO1xuICAgIFx0XHRcdFx0aWYgKEluZGV4U2VydmljZS5nZXRUb1NlbGVjdCgpLmxlbmd0aCkge1xuICAgIFx0XHRcdFx0XHREaWFsb2dTZXJ2aWNlLmZyb21UZW1wbGF0ZSgnc2VsZWN0aXNvZmV0Y2hlcnMnKTtcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIFx0XHRcdFx0dG9hc3RyLmVycm9yKCdQbGVhc2UgY2hlY2sgeW91ciBmaWVsZCBzZWxlY3Rpb25zJywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTtcbiAgICBcdFx0XHR9KTtcblxuICAgIFx0XHR9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hlY2tNeURhdGE6IGNoZWNrTXlEYXRhXG4gICAgICAgIH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLnNlcnZpY2UoJ0V4cG9ydFNlcnZpY2UnLCBmdW5jdGlvbihEYXRhU2VydmljZSwgdG9hc3RyKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5fcHJvbWlzZSwgdm0uX3Byb21pc2VPbmU7XG5cdFx0dm0uX2NhbGxiYWNrcyA9IG5ldyBBcnJheSgpO1xuXHRcdHZtLl9jYWxsYmFja3NPbmUgPSBuZXcgQXJyYXkoKTtcblx0XHR2bS5leHBvcnRzO1xuXHRcdHZtLmNoYXB0ZXI7XG5cdFx0dm0uaW5kaWNhdG9yO1xuXHRcdHZtLmV4cG9ydGVyID0ge307XG5cblx0XHR2bS5nZXRFeHBvcnRzID0gZnVuY3Rpb24oc3VjY2VzcywgZXJyb3IsIGZvcmNlKSB7XG5cdFx0XHRpZiAoYW5ndWxhci5pc0RlZmluZWQodm0uZXhwb3J0cykgJiYgIWZvcmNlKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc3VjY2VzcyA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHRzdWNjZXNzKHZtLmV4cG9ydHMpO1xuXHRcdFx0fSBlbHNlIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh2bS5fcHJvbWlzZSkgJiYgIWZvcmNlKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc3VjY2VzcyA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHR2bS5fY2FsbGJhY2tzLnB1c2goc3VjY2Vzcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5fY2FsbGJhY2tzLnB1c2goc3VjY2Vzcyk7XG5cdFx0XHRcdHZtLl9wcm9taXNlID0gRGF0YVNlcnZpY2UuZ2V0QWxsKCdleHBvcnRzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdHZtLmV4cG9ydHMgPSByZXNwb25zZTtcblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uX2NhbGxiYWNrcywgZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gXCJ1bmRlZmluZWRcIilcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sodm0uZXhwb3J0cyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dm0uX3Byb21pc2UgPSBudWxsO1xuXHRcdFx0XHR9LCBlcnJvcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dm0uZ2V0RXhwb3J0ID0gZnVuY3Rpb24oaWQsIHN1Y2Nlc3MsIGVycm9yLCBmb3JjZSkge1xuXHRcdFx0aWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmV4cG9ydGVyKSAmJiB2bS5leHBvcnRlci5pZCA9PSBpZCAmJiAhZm9yY2UpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBzdWNjZXNzID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0XHRcdHN1Y2Nlc3Modm0uZXhwb3J0ZXIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uX2NhbGxiYWNrc09uZS5wdXNoKHN1Y2Nlc3MpO1xuXHRcdFx0XHR2bS5fcHJvbWlzZU9uZSA9IERhdGFTZXJ2aWNlLmdldE9uZSgnZXhwb3J0cycsIGlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0dm0uZXhwb3J0ZXIgPSByZXNwb25zZTtcblx0XHRcdFx0XHRpZiAoIXZtLmV4cG9ydGVyLml0ZW1zKSB7XG5cdFx0XHRcdFx0XHR2bS5leHBvcnRlci5pdGVtcyA9IG5ldyBBcnJheSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uX2NhbGxiYWNrc09uZSwgZnVuY3Rpb24oY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2sgIT0gXCJ1bmRlZmluZWRcIilcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sodm0uZXhwb3J0ZXIpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHZtLl9wcm9taXNlT25lID0gbnVsbDtcblx0XHRcdFx0fSwgZXJyb3IpO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHZtLnNldEV4cG9ydCA9IGZ1bmN0aW9uKGRhdGEpIHtcblxuXHRcdFx0cmV0dXJuIHZtLmV4cG9ydGVyID0gZGF0YTtcblx0XHR9XG5cdFx0dm0uZ2V0Q2hhcHRlciA9IGZ1bmN0aW9uKGlkLCBjaGFwdGVyLCBzdWNjZXNzLCBpZ25vcmVGaXJzdCkge1xuXHRcdFx0aWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHZtLmV4cG9ydGVyKSAmJiB2bS5leHBvcnRlci5pZCA9PSBpZCkge1xuXHRcdFx0XHR2bS5jaGFwdGVyID0gdm0uZXhwb3J0ZXIuaXRlbXNbY2hhcHRlciAtIDFdO1xuXG5cdFx0XHRcdGlmICghaWdub3JlRmlyc3QpIHtcblx0XHRcdFx0XHRpZiAodm0uY2hhcHRlci50eXBlID09IFwiaW5kaWNhdG9yXCIpIHtcblx0XHRcdFx0XHRcdHZtLmluZGljYXRvciA9IHZtLmNoYXB0ZXI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZtLmluZGljYXRvciA9IHZtLmdldEZpcnN0SW5kaWNhdG9yKHZtLmNoYXB0ZXIuY2hpbGRyZW4pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh0eXBlb2Ygc3VjY2VzcyA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHRzdWNjZXNzKHZtLmNoYXB0ZXIsIHZtLmluZGljYXRvcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5nZXRFeHBvcnQoaWQsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHR2bS5jaGFwdGVyID0gdm0uZXhwb3J0ZXIuaXRlbXNbY2hhcHRlciAtIDFdO1xuXHRcdFx0XHRcdGlmICghaWdub3JlRmlyc3QpXG5cdFx0XHRcdFx0XHR2bS5pbmRpY2F0b3IgPSB2bS5nZXRGaXJzdEluZGljYXRvcih2bS5jaGFwdGVyLmNoaWxkcmVuKTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicpXG5cdFx0XHRcdFx0XHRzdWNjZXNzKHZtLmNoYXB0ZXIsIHZtLmluZGljYXRvcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR2bS5nZXRJbmRpY2F0b3IgPSBmdW5jdGlvbihpZCwgY2hhcHRlciwgaW5kaWNhdG9yLCBzdWNjZXNzKSB7XG5cdFx0XHR2YXIgZmV0Y2ggPSB0eXBlb2YgaW5kaWNhdG9yID09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IGZhbHNlO1xuXG5cdFx0XHR2bS5nZXRFeHBvcnQoaWQsIGZ1bmN0aW9uKGV4cG9ydGVyKSB7XG5cdFx0XHRcdHZtLmdldENoYXB0ZXIoaWQsIGNoYXB0ZXIsIGZ1bmN0aW9uKGNoLCBpbmQpIHtcblx0XHRcdFx0XHRpZiAoIWZldGNoKSB2bS5pbmRpY2F0b3IgPSB2bS5maW5kSW5kaWNhdG9yKGluZGljYXRvcik7XG5cdFx0XHRcdFx0c3VjY2Vzcyh2bS5pbmRpY2F0b3IsIHZtLmNoYXB0ZXIsIHZtLmV4cG9ydGVyKTtcblx0XHRcdFx0fSwgIWZldGNoKVxuXHRcdFx0fSk7XG5cdFx0XHQvLyB2bS5nZXRDaGFwdGVyKGlkLCBjaGFwdGVyLCBmdW5jdGlvbihjLCBpKSB7XG5cdFx0XHQvLyBcdGFuZ3VsYXIuZm9yRWFjaChjLmNoaWxkcmVuLCBmdW5jdGlvbihpbmRpKSB7XG5cdFx0XHQvLyBcdFx0aWYgKGluZGkuaW5kaWNhdG9yX2lkID09IGluZGljYXRvcikge1xuXHRcdFx0Ly8gXHRcdFx0dm0uaW5kaWNhdG9yID0gaW5kaTtcblx0XHRcdC8vIFx0XHR9XG5cdFx0XHQvLyBcdH0pXG5cdFx0XHQvLyBcdHN1Y2Nlc3Modm0uY2hhcHRlciwgdm0uaW5kaWNhdG9yKTtcblx0XHRcdC8vIH0sIHRydWUpO1xuXHRcdH1cblx0XHR2bS5nZXRGaXJzdEluZGljYXRvciA9IGZ1bmN0aW9uKGxpc3QpIHtcblx0XHRcdHZhciBmb3VuZCA9IG51bGw7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRpZiAoaXRlbS50eXBlID09ICdpbmRpY2F0b3InICYmICFmb3VuZCkge1xuXHRcdFx0XHRcdGZvdW5kID0gaXRlbTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0XHRmb3VuZCA9IHZtLmdldEZpcnN0SW5kaWNhdG9yKGl0ZW0uY2hpbGRyZW4pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZm91bmQ7XG5cdFx0fVxuXHRcdHZtLmZpbmRJbmRpY2F0b3IgPSBmdW5jdGlvbihpbmRpY2F0b3JfaWQpIHtcblx0XHRcdHZhciBpdGVtID0gbnVsbDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5leHBvcnRlci5pdGVtcywgZnVuY3Rpb24oY2hhcHRlciwga2V5KSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgY2hhcHRlci5pbmRpY2F0b3JfaWQgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdGlmIChjaGFwdGVyLmluZGljYXRvcl9pZCA9PSBpbmRpY2F0b3JfaWQpIHtcblx0XHRcdFx0XHRcdGl0ZW0gPSBjaGFwdGVyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2goY2hhcHRlci5jaGlsZHJlbiwgZnVuY3Rpb24oaW5kaWNhdG9yKSB7XG5cdFx0XHRcdFx0aWYgKGluZGljYXRvci5pbmRpY2F0b3JfaWQgPT0gaW5kaWNhdG9yX2lkKSB7XG5cdFx0XHRcdFx0XHRpdGVtID0gaW5kaWNhdG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0fVxuXHRcdHZtLnNhdmUgPSBmdW5jdGlvbihzdWNjZXNzLCBlcnJvcikge1xuXHRcdFx0aWYgKHZtLmV4cG9ydGVyLmlkID09IDAgfHwgIXZtLmV4cG9ydGVyLmlkKSB7XG5cdFx0XHRcdERhdGFTZXJ2aWNlLnBvc3QoJ2V4cG9ydHMnLCB2bS5leHBvcnRlcikudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdHZtLmV4cG9ydGVyID0gcmVzcG9uc2U7XG5cdFx0XHRcdFx0dm0uZXhwb3J0cy5wdXNoKHZtLmV4cG9ydGVyKTtcblx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQnKTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicpXG5cdFx0XHRcdFx0XHRzdWNjZXNzKHJlc3BvbnNlKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHR0b2FzdHIuZXJyb3IoJ1NvbWV0aGluZyB3ZW50IHdyb25nIScpO1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgZXJyb3IgPT09ICdmdW5jdGlvbicpXG5cdFx0XHRcdFx0XHRlcnJvcihyZXNwb25zZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uZXhwb3J0ZXIuc2F2ZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIHN1Y2Nlc3MgPT09ICdmdW5jdGlvbicpXG5cdFx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnU2F2ZSBzdWNjZXNzZnVsbHknKTtcblx0XHRcdFx0XHRzdWNjZXNzKHJlc3BvbnNlKTtcblx0XHRcdFx0XHR2bS5nZXRFeHBvcnRzKGZ1bmN0aW9uKCkge30sIGZ1bmN0aW9uKCkge30sIHRydWUpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdHRvYXN0ci5lcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmchJyk7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBlcnJvciA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHRcdGVycm9yKHJlc3BvbnNlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZtLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbihpZCwgc3VjY2VzcywgZXJyb3IpIHtcblx0XHRcdERhdGFTZXJ2aWNlLnJlbW92ZSgnZXhwb3J0cycsIGlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc3VjY2VzcyA9PT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQnKTtcblx0XHRcdFx0c3VjY2VzcyhyZXNwb25zZSk7XG5cdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRpZiAodHlwZW9mIGVycm9yID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0XHRcdGVycm9yKHJlc3BvbnNlKTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2VzJykuZmFjdG9yeSgnSWNvbnNTZXJ2aWNlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHVuaWNvZGVzID0ge1xuICAgICAgICAgICdlbXB0eSc6IFwiXFx1ZTYwMFwiLFxuICAgICAgICAgICdhZ3Jhcic6IFwiXFx1ZTYwMFwiLFxuICAgICAgICAgICdhbmNob3InOiBcIlxcdWU2MDFcIixcbiAgICAgICAgICAnYnV0dGVyZmx5JzogXCJcXHVlNjAyXCIsXG4gICAgICAgICAgJ2VuZXJneSc6XCJcXHVlNjAzXCIsXG4gICAgICAgICAgJ3NpbmsnOiBcIlxcdWU2MDRcIixcbiAgICAgICAgICAnbWFuJzogXCJcXHVlNjA1XCIsXG4gICAgICAgICAgJ2ZhYnJpYyc6IFwiXFx1ZTYwNlwiLFxuICAgICAgICAgICd0cmVlJzpcIlxcdWU2MDdcIixcbiAgICAgICAgICAnd2F0ZXInOlwiXFx1ZTYwOFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBnZXRVbmljb2RlOiBmdW5jdGlvbihpY29uKXtcbiAgICAgICAgICAgIHJldHVybiB1bmljb2Rlc1tpY29uXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldExpc3Q6ZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiB1bmljb2RlcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmZhY3RvcnkoJ0luZGV4U2VydmljZScsIGZ1bmN0aW9uKENhY2hlRmFjdG9yeSwgRGF0YVNlcnZpY2UsICRzdGF0ZSkge1xuXHRcdC8vXG5cdFx0dmFyIHNlcnZpY2VEYXRhID0ge1xuXHRcdFx0XHRkYXRhOiBbXSxcblx0XHRcdFx0ZXJyb3JzOiBbXSxcblx0XHRcdFx0aXNvX2Vycm9yczogW10sXG5cdFx0XHRcdG1ldGE6IHtcblx0XHRcdFx0XHRpc29fZmllbGQ6ICcnLFxuXHRcdFx0XHRcdGNvdW50cnlfZmllbGQ6ICcnLFxuXHRcdFx0XHRcdHllYXJfZmllbGQ6ICcnLFxuXHRcdFx0XHRcdGdlbmRlcl9maWVsZDogJycsXG5cdFx0XHRcdFx0dGFibGU6IFtdXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGluZGljYXRvcnM6IHt9LFxuXHRcdFx0XHR0b1NlbGVjdDogW11cblx0XHRcdH0sXG5cdFx0XHRzdG9yYWdlLCBpbXBvcnRDYWNoZSwgaW5kaWNhdG9yO1xuXG5cdFx0aWYgKCFDYWNoZUZhY3RvcnkuZ2V0KCdpbXBvcnREYXRhJykpIHtcblx0XHRcdGltcG9ydENhY2hlID0gQ2FjaGVGYWN0b3J5KCdpbXBvcnREYXRhJywge1xuXHRcdFx0XHRjYWNoZUZsdXNoSW50ZXJ2YWw6IDYwICogNjAgKiAxMDAwLCAvLyBUaGlzIGNhY2hlIHdpbGwgY2xlYXIgaXRzZWxmIGV2ZXJ5IGhvdXIuXG5cdFx0XHRcdGRlbGV0ZU9uRXhwaXJlOiAnYWdncmVzc2l2ZScsIC8vIEl0ZW1zIHdpbGwgYmUgZGVsZXRlZCBmcm9tIHRoaXMgY2FjaGUgcmlnaHQgd2hlbiB0aGV5IGV4cGlyZS5cblx0XHRcdFx0c3RvcmFnZU1vZGU6ICdsb2NhbFN0b3JhZ2UnIC8vIFRoaXMgY2FjaGUgd2lsbCB1c2UgYGxvY2FsU3RvcmFnZWAuXG5cdFx0XHR9KTtcblx0XHRcdHNlcnZpY2VEYXRhID0gaW1wb3J0Q2FjaGUuZ2V0KCdkYXRhVG9JbXBvcnQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW1wb3J0Q2FjaGUgPSBDYWNoZUZhY3RvcnkuZ2V0KCdpbXBvcnREYXRhJyk7XG5cdFx0XHRzdG9yYWdlID0gaW1wb3J0Q2FjaGUuZ2V0KCdkYXRhVG9JbXBvcnQnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNsZWFyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguY3JlYXRlJyk7XG5cdFx0XHRcdGlmIChDYWNoZUZhY3RvcnkuZ2V0KCdpbXBvcnREYXRhJykpIHtcblx0XHRcdFx0XHRpbXBvcnRDYWNoZS5yZW1vdmUoJ2RhdGFUb0ltcG9ydCcpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YSA9IHtcblx0XHRcdFx0XHRkYXRhOiBbXSxcblx0XHRcdFx0XHRlcnJvcnM6IFtdLFxuXHRcdFx0XHRcdGlzb19lcnJvcnM6IFtdLFxuXHRcdFx0XHRcdG1ldGE6IHtcblx0XHRcdFx0XHRcdGlzb19maWVsZDogJycsXG5cdFx0XHRcdFx0XHRjb3VudHJ5X2ZpZWxkOiAnJyxcblx0XHRcdFx0XHRcdHllYXJfZmllbGQ6ICcnLFxuXHRcdFx0XHRcdFx0Z2VuZGVyX2ZpZWxkOiAnJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dG9TZWxlY3Q6IFtdLFxuXHRcdFx0XHRcdGluZGljYXRvcnM6IHt9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0YWRkRGF0YTogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuZGF0YS5wdXNoKGl0ZW0pO1xuXHRcdFx0fSxcblx0XHRcdGFkZEluZGljYXRvcjogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuaW5kaWNhdG9ycy5wdXNoKGl0ZW0pO1xuXHRcdFx0fSxcblx0XHRcdGFkZFRvU2VsZWN0OiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YS50b1NlbGVjdC5wdXNoKGl0ZW0pO1xuXHRcdFx0fSxcblx0XHRcdGFkZElzb0Vycm9yOiBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuaXNvX2Vycm9ycy5wdXNoKGVycm9yKTtcblx0XHRcdH0sXG5cdFx0XHRyZW1vdmVUb1NlbGVjdDogZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSBzZXJ2aWNlRGF0YS50b1NlbGVjdC5pbmRleE9mKGl0ZW0pO1xuXHRcdFx0XHRyZXR1cm4gaW5kZXggPiAtMSA/IHNlcnZpY2VEYXRhLnRvU2VsZWN0LnNwbGljZShpbmRleCwgMSkgOiBmYWxzZTtcblx0XHRcdH0sXG5cdFx0XHRzZXREYXRhOiBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YS5kYXRhID0gZGF0YTtcblx0XHRcdH0sXG5cdFx0XHRzZXRJc29GaWVsZDogZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YS5tZXRhLmlzb19maWVsZCA9IGtleTtcblx0XHRcdH0sXG5cdFx0XHRzZXRDb3VudHJ5RmllbGQ6IGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEubWV0YS5jb3VudHJ5X2ZpZWxkID0ga2V5O1xuXHRcdFx0fSxcblx0XHRcdHNldEdlbmRlckZpZWxkOiBmdW5jdGlvbihrZXkpIHtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLm1ldGEuZ2VuZGVyX2ZpZWxkID0ga2V5O1xuXHRcdFx0fSxcblx0XHRcdHNldFllYXJGaWVsZDogZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YS5tZXRhLnllYXJfZmllbGQgPSBrZXk7XG5cdFx0XHR9LFxuXHRcdFx0c2V0RXJyb3JzOiBmdW5jdGlvbihlcnJvcnMpIHtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLmVycm9ycyA9IGVycm9ycztcblx0XHRcdH0sXG5cdFx0XHRzZXRUb0xvY2FsU3RvcmFnZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vY29uc29sZS5sb2coc2VydmljZURhdGEpO1xuXHRcdFx0XHRpbXBvcnRDYWNoZS5wdXQoJ2RhdGFUb0ltcG9ydCcsIHNlcnZpY2VEYXRhKTtcblx0XHRcdH0sXG5cdFx0XHRzZXRJbmRpY2F0b3I6IGZ1bmN0aW9uKGtleSwgaXRlbSkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuaW5kaWNhdG9yc1trZXldID0gaXRlbTtcblx0XHRcdH0sXG5cdFx0XHRzZXRBY3RpdmVJbmRpY2F0b3JEYXRhOiBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdHJldHVybiBpbmRpY2F0b3IgPSBzZXJ2aWNlRGF0YS5pbmRpY2F0b3JzW2l0ZW0uY29sdW1uX25hbWVdID0gaXRlbTtcblx0XHRcdH0sXG5cdFx0XHRnZXRGcm9tTG9jYWxTdG9yYWdlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhID0gaW1wb3J0Q2FjaGUuZ2V0KCdkYXRhVG9JbXBvcnQnKTtcblx0XHRcdH0sXG5cdFx0XHRnZXRGdWxsRGF0YTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YTtcblx0XHRcdH0sXG5cdFx0XHRnZXREYXRhOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBzZXJ2aWNlRGF0YSA9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YS5kYXRhO1xuXHRcdFx0fSxcblx0XHRcdGdldE1ldGE6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHNlcnZpY2VEYXRhID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLm1ldGE7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0VG9TZWxlY3Q6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEudG9TZWxlY3Q7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0SXNvRmllbGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEubWV0YS5pc29fZmllbGQ7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0Q291bnRyeUZpZWxkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLm1ldGEuY291bnRyeV9maWVsZDtcblx0XHRcdH0sXG5cdFx0XHRnZXRFcnJvcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHNlcnZpY2VEYXRhID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLmVycm9ycztcblx0XHRcdH0sXG5cdFx0XHRnZXRJc29FcnJvcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHNlcnZpY2VEYXRhID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLmlzb19lcnJvcnM7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0Rmlyc3RFbnRyeTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBzZXJ2aWNlRGF0YS5kYXRhWzBdO1xuXHRcdFx0fSxcblx0XHRcdGdldERhdGFTaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLmRhdGEubGVuZ3RoO1xuXHRcdFx0fSxcblx0XHRcdGdldEluZGljYXRvcjogZnVuY3Rpb24oa2V5KSB7XG5cdFx0XHRcdHJldHVybiBpbmRpY2F0b3IgPSBzZXJ2aWNlRGF0YS5pbmRpY2F0b3JzW2tleV07XG5cdFx0XHR9LFxuXHRcdFx0Z2V0SW5kaWNhdG9yczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygc2VydmljZURhdGEgPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuaW5kaWNhdG9ycztcblx0XHRcdH0sXG5cdFx0XHRhY3RpdmVJbmRpY2F0b3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gaW5kaWNhdG9yO1xuXHRcdFx0fSxcblx0XHRcdHJlc2V0SW5kaWNhdG9yOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIGluZGljYXRvciA9IG51bGw7XG5cdFx0XHR9LFxuXHRcdFx0cmVkdWNlSXNvRXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuaXNvX2Vycm9ycy5zcGxpY2UoMCwgMSk7XG5cdFx0XHR9LFxuXHRcdFx0cmVkdWNlRXJyb3I6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEuZXJyb3JzLnNwbGljZSgwLCAxKTtcblx0XHRcdH0sXG5cdFx0XHRyZXNldFRvU2VsZWN0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHNlcnZpY2VEYXRhLnRvU2VsZWN0ID0gW107XG5cdFx0XHR9LFxuXHRcdFx0cmVzZXRMb2NhbFN0b3JhZ2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoQ2FjaGVGYWN0b3J5LmdldCgnaW1wb3J0RGF0YScpKSB7XG5cdFx0XHRcdFx0aW1wb3J0Q2FjaGUucmVtb3ZlKCdkYXRhVG9JbXBvcnQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2VydmljZURhdGEgPSB7XG5cdFx0XHRcdFx0ZGF0YTogW10sXG5cdFx0XHRcdFx0ZXJyb3JzOiBbXSxcblx0XHRcdFx0XHRpc29fZXJyb3JzOiBbXSxcblx0XHRcdFx0XHRtZXRhOiB7XG5cdFx0XHRcdFx0XHRpc29fZmllbGQ6ICcnLFxuXHRcdFx0XHRcdFx0Y291bnRyeV9maWVsZDogJycsXG5cdFx0XHRcdFx0XHR5ZWFyX2ZpZWxkOiAnJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dG9TZWxlY3Q6IFtdLFxuXHRcdFx0XHRcdGluZGljYXRvcnM6IHt9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdFx0ZmV0Y2hOYXRpb25EYXRhOiBmdW5jdGlvbihpbmRpY2F0b3IsIGlzbywgc3VjY2Vzcykge1xuXHRcdFx0XHRyZXR1cm4gRGF0YVNlcnZpY2UuZ2V0T25lKCdpbmRpY2F0b3JzLycgKyBpbmRpY2F0b3IgKyBcIi9oaXN0b3J5XCIsIGlzbykudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0c3VjY2VzcyhkYXRhKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmZhY3RvcnkoJ0luZGl6ZXNTZXJ2aWNlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UpIHtcblx0XHQvL1xuXHRcdHJldHVybiB7XG5cdFx0XHRpbmRleDoge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRzdHJ1Y3R1cmU6IG51bGxcblx0XHRcdFx0fSxcblx0XHRcdFx0cHJvbWlzZXM6IHtcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdHN0cnVjdHVyOiBudWxsXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRmZXRjaERhdGE6IGZ1bmN0aW9uKGluZGV4KSB7XG5cdFx0XHRcdHRoaXMuaW5kZXgucHJvbWlzZXMuZGF0YSA9IERhdGFTZXJ2aWNlLmdldEFsbCgnaW5kZXgvJyArIGluZGV4ICsgJy95ZWFyL2xhdGVzdCcpO1xuXHRcdFx0XHR0aGlzLmluZGV4LnByb21pc2VzLnN0cnVjdHVyZSA9IERhdGFTZXJ2aWNlLmdldE9uZSgnaW5kZXgvJyArIGluZGV4ICsgJy9zdHJ1Y3R1cmUnKTtcblx0XHRcdFx0dGhpcy5pbmRleC5kYXRhLmRhdGEgPSB0aGlzLmluZGV4LnByb21pc2VzLmRhdGEuJG9iamVjdDtcblx0XHRcdFx0dGhpcy5pbmRleC5kYXRhLnN0cnVjdHVyZSA9IHRoaXMuaW5kZXgucHJvbWlzZXMuc3RydWN0dXJlLiRvYmplY3Q7XG5cdFx0XHRcdHJldHVybiB0aGlzLmluZGV4O1xuXHRcdFx0fSxcblx0XHRcdGdldERhdGE6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5pbmRleC5kYXRhLmRhdGE7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0U3RydWN0dXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuaW5kZXguZGF0YS5zdHJ1Y3R1cmU7XG5cdFx0XHR9LFxuXHRcdFx0Z2V0RGF0YVByb21pc2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5pbmRleC5wcm9taXNlcy5kYXRhO1xuXHRcdFx0fSxcblx0XHRcdGdldFN0cnVjdHVyZVByb21pc2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5pbmRleC5wcm9taXNlcy5zdHJ1Y3R1cmU7XG5cdFx0XHR9LFxuXHRcdFx0ZmV0Y2hOYXRpb25EYXRhOiBmdW5jdGlvbihpbmRleCwgaXNvLCBzdWNjZXNzKSB7XG5cdFx0XHRcdERhdGFTZXJ2aWNlLmdldE9uZSgnaW5kZXgvJyArIGluZGV4LCBpc28pLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdHN1Y2Nlc3MoZGF0YSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcdFwidXNlIHN0cmljdFwiO1xuXG5cdFx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLmZhY3RvcnkoJ1JlY3Vyc2lvbkhlbHBlcicsIGZ1bmN0aW9uICgkY29tcGlsZSkge1xuXHRcdFx0XHQvL1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIE1hbnVhbGx5IGNvbXBpbGVzIHRoZSBlbGVtZW50LCBmaXhpbmcgdGhlIHJlY3Vyc2lvbiBsb29wLlxuXHRcdFx0XHRcdCAqIEBwYXJhbSBlbGVtZW50XG5cdFx0XHRcdFx0ICogQHBhcmFtIFtsaW5rXSBBIHBvc3QtbGluayBmdW5jdGlvbiwgb3IgYW4gb2JqZWN0IHdpdGggZnVuY3Rpb24ocykgcmVnaXN0ZXJlZCB2aWEgcHJlIGFuZCBwb3N0IHByb3BlcnRpZXMuXG5cdFx0XHRcdFx0ICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGxpbmtpbmcgZnVuY3Rpb25zLlxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdGNvbXBpbGU6IGZ1bmN0aW9uIChlbGVtZW50LCBsaW5rKSB7XG5cdFx0XHRcdFx0XHQvLyBOb3JtYWxpemUgdGhlIGxpbmsgcGFyYW1ldGVyXG5cdFx0XHRcdFx0XHRpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKGxpbmspKSB7XG5cdFx0XHRcdFx0XHRcdGxpbmsgPSB7XG5cdFx0XHRcdFx0XHRcdFx0cG9zdDogbGlua1xuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBCcmVhayB0aGUgcmVjdXJzaW9uIGxvb3AgYnkgcmVtb3ZpbmcgdGhlIGNvbnRlbnRzXG5cdFx0XHRcdFx0XHR2YXIgY29udGVudHMgPSBlbGVtZW50LmNvbnRlbnRzKCkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHR2YXIgY29tcGlsZWRDb250ZW50cztcblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHByZTogKGxpbmsgJiYgbGluay5wcmUpID8gbGluay5wcmUgOiBudWxsLFxuXHRcdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdFx0ICogQ29tcGlsZXMgYW5kIHJlLWFkZHMgdGhlIGNvbnRlbnRzXG5cdFx0XHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdFx0XHRwb3N0OiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDb21waWxlIHRoZSBjb250ZW50c1xuXHRcdFx0XHRcdFx0XHRcdGlmICghY29tcGlsZWRDb250ZW50cykge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGlsZWRDb250ZW50cyA9ICRjb21waWxlKGNvbnRlbnRzKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmUtYWRkIHRoZSBjb21waWxlZCBjb250ZW50cyB0byB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdGNvbXBpbGVkQ29udGVudHMoc2NvcGUsIGZ1bmN0aW9uIChjbG9uZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZWxlbWVudC5hcHBlbmQoY2xvbmUpO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2FsbCB0aGUgcG9zdC1saW5raW5nIGZ1bmN0aW9uLCBpZiBhbnlcblx0XHRcdFx0XHRcdFx0XHRpZiAobGluayAmJiBsaW5rLnBvc3QpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpbmsucG9zdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHR9KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiYXBwLnNlcnZpY2VzXCIpLmZhY3RvcnkoJ1RvYXN0U2VydmljZScsIGZ1bmN0aW9uKCRtZFRvYXN0KXtcblxuXHRcdHZhciBkZWxheSA9IDYwMDAsXG5cdFx0XHRwb3NpdGlvbiA9ICd0b3AgcmlnaHQnLFxuXHRcdFx0YWN0aW9uID0gJ09LJztcblxuXHRcdHJldHVybiB7XG5cdFx0XHRzaG93OiBmdW5jdGlvbihjb250ZW50KXtcblx0XHRcdFx0aWYgKCFjb250ZW50KXtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gJG1kVG9hc3Quc2hvdyhcblx0XHRcdFx0XHQkbWRUb2FzdC5zaW1wbGUoKVxuXHRcdFx0XHRcdFx0LmNvbnRlbnQoY29udGVudClcblx0XHRcdFx0XHRcdC5wb3NpdGlvbihwb3NpdGlvbilcblx0XHRcdFx0XHRcdC5hY3Rpb24oYWN0aW9uKVxuXHRcdFx0XHRcdFx0LmhpZGVEZWxheShkZWxheSlcblx0XHRcdFx0KTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24oY29udGVudCl7XG5cdFx0XHRcdGlmICghY29udGVudCl7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuICRtZFRvYXN0LnNob3coXG5cdFx0XHRcdFx0JG1kVG9hc3Quc2ltcGxlKClcblx0XHRcdFx0XHRcdC5jb250ZW50KGNvbnRlbnQpXG5cdFx0XHRcdFx0XHQucG9zaXRpb24ocG9zaXRpb24pXG5cdFx0XHRcdFx0XHQudGhlbWUoJ3dhcm4nKVxuXHRcdFx0XHRcdFx0LmFjdGlvbihhY3Rpb24pXG5cdFx0XHRcdFx0XHQuaGlkZURlbGF5KGRlbGF5KVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH07XG5cdH0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuc2VydmljZXMnKS5mYWN0b3J5KCdVc2VyU2VydmljZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlKXtcbiAgICAgICAgLy9cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVzZXI6e1xuICAgICAgICAgICAgZGF0YTogW11cbiAgICAgICAgICB9LFxuICAgICAgICAgIG15RGF0YTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXIuZGF0YSA9IERhdGFTZXJ2aWNlLmdldEFsbCgnbWUvZGF0YScpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbXlQcm9maWxlOiBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgfSxcbiAgICAgICAgICBteUZyaWVuZHM6IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5zZXJ2aWNlcycpLnNlcnZpY2UoJ1ZlY3RvcmxheWVyU2VydmljZScsIGZ1bmN0aW9uKCR0aW1lb3V0LCBEYXRhU2VydmljZSkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdF9zZWxmID0gdGhpcztcblx0XHR0aGlzLmZhbGxiYWNrQmFzZW1hcCA9IHtcblx0XHRcdG5hbWU6ICdPdXRkb29yJyxcblx0XHRcdHVybDogJ2h0dHBzOi8ve3N9LnRpbGVzLm1hcGJveC5jb20vdjQvdmFsZGVycmFtYS5kODYxMTRiNi97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPXBrLmV5SjFJam9pYldGbmJtOXNieUlzSW1FaU9pSnVTRmRVWWtnNEluMC41SE95a0trMHBOUDFOM2lzZlBRR1RRJyxcblx0XHRcdHR5cGU6ICd4eXonLFxuXHRcdFx0bGF5ZXJPcHRpb25zOiB7XG5cdFx0XHRcdG5vV3JhcDogdHJ1ZSxcblx0XHRcdFx0Y29udGludW91c1dvcmxkOiBmYWxzZSxcblx0XHRcdFx0ZGV0ZWN0UmV0aW5hOiB0cnVlXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuYmFzZW1hcCA9IHRoaXMuZmFsbGJhY2tCYXNlbWFwO1xuXHRcdHRoaXMuaXNvX2ZpZWxkID0gJ2lzb19hMic7XG5cdFx0dGhpcy5jYW52YXMgPSBmYWxzZTtcblx0XHR0aGlzLnBhbGV0dGUgPSBbXTtcblx0XHR0aGlzLmN0eCA9IG51bGw7XG5cdFx0dGhpcy5rZXlzID0ge1xuXHRcdFx0bWF6cGVuOiAndmVjdG9yLXRpbGVzLVEzX09zNXcnLFxuXHRcdFx0bWFwYm94OiAncGsuZXlKMUlqb2liV0ZuYm05c2J5SXNJbUVpT2lKdVNGZFVZa2c0SW4wLjVIT3lrS2swcE5QMU4zaXNmUFFHVFEnXG5cdFx0fTtcblx0XHR0aGlzLmRhdGEgPSB7XG5cdFx0XHRsYXllcjogJycsXG5cdFx0XHRuYW1lOiAnY291bnRyaWVzX2JpZycsXG5cdFx0XHRiYXNlQ29sb3I6ICcjMDZhOTljJyxcblx0XHRcdGlzbzM6ICdhZG0wX2EzJyxcblx0XHRcdGlzbzI6ICdpc29fYTInLFxuXHRcdFx0aXNvOiAnaXNvX2EyJyxcblx0XHRcdGZpZWxkczogXCJpZCxhZG1pbixhZG0wX2EzLHdiX2EzLHN1X2EzLGlzb19hMyxpc29fYTIsbmFtZSxuYW1lX2xvbmdcIixcblx0XHRcdGZpZWxkOiAnc2NvcmUnXG5cdFx0fTtcblx0XHR0aGlzLm1hcCA9IHtcblx0XHRcdGRhdGE6IFtdLFxuXHRcdFx0Y3VycmVudDogW10sXG5cdFx0XHRzdHJ1Y3R1cmU6IFtdLFxuXHRcdFx0c3R5bGU6IFtdXG5cdFx0fTtcblx0XHR0aGlzLm1hcExheWVyID0gbnVsbDtcblx0XHR0aGlzLmxheWVycyA9IHtcblx0XHRcdGJhc2VsYXllcnM6IHtcblx0XHRcdFx0eHl6OiB0aGlzLmJhc2VtYXBcblx0XHRcdH1cblx0XHR9O1xuXHRcdHRoaXMuY2VudGVyID0ge1xuXHRcdFx0bGF0OiA0OC4yMDkyMDYsXG5cdFx0XHRsbmc6IDE2LjM3Mjc3OCxcblx0XHRcdHpvb206IDNcblx0XHR9O1xuXHRcdHRoaXMubWF4Ym91bmRzID0ge1xuXHRcdFx0c291dGhXZXN0OiB7XG5cdFx0XHRcdGxhdDogOTAsXG5cdFx0XHRcdGxuZzogMTgwXG5cdFx0XHR9LFxuXHRcdFx0bm9ydGhFYXN0OiB7XG5cdFx0XHRcdGxhdDogLTkwLFxuXHRcdFx0XHRsbmc6IC0xODBcblx0XHRcdH1cblx0XHR9O1xuXHRcdHRoaXMuZGVmYXVsdHMgPSB7XG5cdFx0XHRtaW5ab29tOiAyLFxuXHRcdFx0bWF4Wm9vbTogNixcblx0XHRcdHpvb21Db250cm9sUG9zaXRpb246J2JvdHRvbXJpZ2h0J1xuXHRcdH07XG5cdFx0dGhpcy5sZWdlbmQgPSB7fTtcblx0XHR0aGlzLnNldE1hcCA9IGZ1bmN0aW9uKG1hcCkge1xuXHRcdFx0cmV0dXJuIHRoaXMubWFwTGF5ZXIgPSBtYXA7XG5cdFx0fVxuXHRcdHRoaXMuZ2V0TWFwID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tYXBMYXllcjtcblx0XHR9XG5cdFx0dGhpcy5zZXRCYXNlTGF5ZXIgPSBmdW5jdGlvbihiYXNlbWFwKSB7XG5cdFx0XHRpZiAoIWJhc2VtYXApXG5cdFx0XHRcdHRoaXMuYmFzZW1hcCA9IGJhc2VtYXAgPSB0aGlzLmZhbGxiYWNrQmFzZW1hcDtcblxuXHRcdFx0dGhpcy5sYXllcnMuYmFzZWxheWVyc1sneHl6J10gPSB7XG5cdFx0XHRcdG5hbWU6IGJhc2VtYXAubmFtZSxcblx0XHRcdFx0dXJsOiBiYXNlbWFwLnVybCxcblx0XHRcdFx0dHlwZTogJ3h5eicsXG5cdFx0XHRcdGxheWVyT3B0aW9uczoge1xuXHRcdFx0XHRcdG5vV3JhcDogdHJ1ZSxcblx0XHRcdFx0XHRjb250aW51b3VzV29ybGQ6IGZhbHNlLFxuXHRcdFx0XHRcdGRldGVjdFJldGluYTogdHJ1ZSxcblx0XHRcdFx0XHQvLyBhdHRyaWJ1dGlvbjpiYXNlbWFwLmF0dHJpYnV0aW9uIHx8IGJhc2VtYXAucHJvdmlkZXIsXG5cdFx0XHRcdFx0YXR0cmlidXRpb246IFwiQ29weXJpZ2h0OsKpIDIwMTQgRXNyaSwgRGVMb3JtZSwgSEVSRSwgVG9tVG9tXCJcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHRoaXMuc2V0TWFwRGVmYXVsdHMgPSBmdW5jdGlvbihzdHlsZSkge1xuXHRcdFx0dGhpcy5kZWZhdWx0cyA9IHtcblx0XHRcdFx0em9vbUNvbnRyb2w6IHN0eWxlLnpvb21fY29udHJvbHMsXG5cdFx0XHRcdHNjcm9sbFdoZWVsWm9vbTogc3R5bGUuc2Nyb2xsX3doZWVsX3pvb21cblx0XHRcdH1cblx0XHRcdGlmIChzdHlsZS5zY3JvbGxfd2hlZWxfem9vbSkge1xuXHRcdFx0XHR0aGlzLm1hcExheWVyLnNjcm9sbFdoZWVsWm9vbS5lbmFibGUoKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5tYXBMYXllci5zY3JvbGxXaGVlbFpvb20uZGlzYWJsZSgpXG5cdFx0XHR9XG5cdFx0XHRpZiAoc3R5bGUubGVnZW5kcykge1xuXHRcdFx0XHR0aGlzLmxlZ2VuZCA9IHtcblx0XHRcdFx0XHRjb2xvcnM6IFsnI2ZmZicsIHN0eWxlLmJhc2VfY29sb3IsICdyZ2JhKDEwMiwxMDIsMTAyLDEpJ10sXG5cdFx0XHRcdFx0bGFiZWxzOiBbJ2hpZ2gnLCAnw5gnLCAnbG93J11cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5sZWdlbmQgPSB7fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHRoaXMucmVzZXRCYXNlTGF5ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMubGF5ZXJzLmJhc2VsYXllcnNbJ3h5eiddID0gdGhpcy5iYXNlbGF5ZXI7XG5cdFx0fVxuXHRcdHRoaXMuc2V0TGF5ZXIgPSBmdW5jdGlvbihsKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5kYXRhLmxheWVyID0gbDtcblx0XHR9XG5cdFx0dGhpcy5nZXRMYXllciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZGF0YS5sYXllcjtcblx0XHR9XG5cdFx0dGhpcy5nZXROYW1lID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5kYXRhLm5hbWU7XG5cdFx0fVxuXHRcdHRoaXMuZmllbGRzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5kYXRhLmZpZWxkcztcblx0XHR9XG5cdFx0dGhpcy5pc28gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmRhdGEuaXNvO1xuXHRcdH1cblx0XHR0aGlzLmlzbzMgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB0aGlzLmRhdGEuaXNvMztcblx0XHR9XG5cdFx0dGhpcy5pc28yID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5kYXRhLmlzbzI7XG5cdFx0fVxuXHRcdHRoaXMuY3JlYXRlQ2FudmFzID0gZnVuY3Rpb24oY29sb3IpIHtcblx0XHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5cdFx0XHR0aGlzLmNhbnZhcy53aWR0aCA9IDI4MDtcblx0XHRcdHRoaXMuY2FudmFzLmhlaWdodCA9IDEwO1xuXHRcdFx0dGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdFx0dmFyIGdyYWRpZW50ID0gdGhpcy5jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMjgwLCAxMCk7XG5cdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMjU1LDI1NSwyNTUsMCknKTtcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLjUzLCBjb2xvciB8fCAncmdiYSgxMjgsIDI0MywgMTk4LDEpJyk7XG5cdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoMTAyLDEwMiwxMDIsMSknKTtcblx0XHRcdHRoaXMuY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuXHRcdFx0dGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgMjgwLCAxMCk7XG5cdFx0XHR0aGlzLnBhbGV0dGUgPSB0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMjU3LCAxKS5kYXRhO1xuXHRcdFx0Ly9kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcblx0XHR9XG5cdFx0dGhpcy51cGRhdGVDYW52YXMgPSBmdW5jdGlvbihjb2xvcikge1xuXG5cdFx0XHR0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cdFx0XHR2YXIgZ3JhZGllbnQgPSB0aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAyNTcsIDEwKTtcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgyNTUsMjU1LDI1NSwxKScpO1xuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNTMsIGNvbG9yIHx8ICdyZ2JhKDEyOCwgMjQzLCAxOTgsMSknKTtcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAncmdiYSgxMDIsMTAyLDEwMiwxKScpO1xuXHRcdFx0dGhpcy5jdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG5cdFx0XHR0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCAyNTcsIDEwKTtcblx0XHRcdHRoaXMucGFsZXR0ZSA9IHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCAyNTcsIDEpLmRhdGE7XG5cdFx0XHQvL2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xuXHRcdH1cblx0XHR0aGlzLmNyZWF0ZUZpeGVkQ2FudmFzID0gZnVuY3Rpb24oY29sb3JSYW5nZSkge1xuXG5cdFx0XHR0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXHRcdFx0dGhpcy5jYW52YXMud2lkdGggPSAyODA7XG5cdFx0XHR0aGlzLmNhbnZhcy5oZWlnaHQgPSAxMDtcblx0XHRcdHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblx0XHRcdHZhciBncmFkaWVudCA9IHRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDI1NywgMTApO1xuXG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9yUmFuZ2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEgLyAoY29sb3JSYW5nZS5sZW5ndGggLSAxKSAqIGksIGNvbG9yUmFuZ2VbaV0pO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5jdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG5cdFx0XHR0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCAyNTcsIDEwKTtcblx0XHRcdHRoaXMucGFsZXR0ZSA9IHRoaXMuY3R4LmdldEltYWdlRGF0YSgwLCAwLCAyNTcsIDEpLmRhdGE7XG5cblx0XHR9XG5cdFx0dGhpcy51cGRhdGVGaXhlZENhbnZhcyA9IGZ1bmN0aW9uKGNvbG9yUmFuZ2UpIHtcblx0XHRcdHZhciBncmFkaWVudCA9IHRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDI1NywgMTApO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBjb2xvclJhbmdlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxIC8gKGNvbG9yUmFuZ2UubGVuZ3RoIC0gMSkgKiBpLCBjb2xvclJhbmdlW2ldKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuXHRcdFx0dGhpcy5jdHguZmlsbFJlY3QoMCwgMCwgMjU3LCAxMCk7XG5cdFx0XHR0aGlzLnBhbGV0dGUgPSB0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMjU3LCAxKS5kYXRhO1xuXHRcdFx0Ly9kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmFwcGVuZENoaWxkKHRoaXMuY2FudmFzKTtcblx0XHR9XG5cdFx0dGhpcy5zZXRCYXNlQ29sb3IgPSBmdW5jdGlvbihjb2xvcikge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5kYXRhLmJhc2VDb2xvciA9IGNvbG9yO1xuXHRcdFx0fVxuXHRcdFx0LypcdHNldFN0eWxlOiBmdW5jdGlvbihzdHlsZSkge1xuXHRcdFx0XHRcdHRoaXMuZGF0YS5sYXllci5zZXRTdHlsZShzdHlsZSlcblx0XHRcdFx0fSwqL1xuXHRcdHRoaXMuY291bnRyeUNsaWNrID0gZnVuY3Rpb24oY2xpY2tGdW5jdGlvbikge1xuXHRcdFx0dmFyIHRoYXQgPSB0aGlzO1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHRoYXQuZGF0YS5sYXllci5vcHRpb25zLm9uQ2xpY2sgPSBjbGlja0Z1bmN0aW9uO1xuXHRcdFx0fSk7XG5cblx0XHR9XG5cdFx0dGhpcy5nZXRDb2xvciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wYWxldHRlW3ZhbHVlXTtcblx0XHR9XG5cdFx0dGhpcy5zZXRTdHlsZSA9IGZ1bmN0aW9uKHN0eWxlKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tYXAuc3R5bGUgPSBzdHlsZTtcblx0XHR9XG5cdFx0dGhpcy5pbnZlcnRTdHlsZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5kYXRhLmxheWVyLnNldFN0eWxlKHRoYXQuaW52ZXJ0ZWRTdHlsZSk7XG5cdFx0XHR0aGF0LmRhdGEubGF5ZXIub3B0aW9ucy5tdXRleFRvZ2dsZSA9IGZhbHNlO1xuXHRcdFx0dGhhdC5kYXRhLmxheWVyLnJlZHJhdygpO1xuXHRcdH1cblx0XHR0aGlzLmxvY2FsU3R5bGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuZGF0YS5sYXllci5zZXRTdHlsZSh0aGF0LmNvdW50cmllc1N0eWxlKTtcblx0XHRcdHRoYXQuZGF0YS5sYXllci5vcHRpb25zLm11dGV4VG9nZ2xlID0gdHJ1ZTtcblx0XHRcdHRoYXQuZGF0YS5sYXllci5yZWRyYXcoKTtcblx0XHR9XG5cdFx0dGhpcy5zZXREYXRhID0gZnVuY3Rpb24oZGF0YSwgc3RydWN0dXJlLCBjb2xvciwgZHJhd0l0KSB7XG5cdFx0XHR0aGlzLm1hcC5kYXRhID0gZGF0YTtcblx0XHRcdHRoaXMubWFwLnN0cnVjdHVyZSA9IHN0cnVjdHVyZTtcblx0XHRcdGlmICh0eXBlb2YgY29sb3IgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHR0aGlzLmRhdGEuYmFzZUNvbG9yID0gY29sb3I7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXRoaXMuY2FudmFzKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdGhpcy5kYXRhLmJhc2VDb2xvciA9PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlQ2FudmFzKHRoaXMuZGF0YS5iYXNlQ29sb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuY3JlYXRlRml4ZWRDYW52YXModGhpcy5kYXRhLmJhc2VDb2xvcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdGhpcy5kYXRhLmJhc2VDb2xvciA9PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdHRoaXMudXBkYXRlQ2FudmFzKHRoaXMuZGF0YS5iYXNlQ29sb3IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMudXBkYXRlRml4ZWRDYW52YXModGhpcy5kYXRhLmJhc2VDb2xvcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChkcmF3SXQpIHtcblx0XHRcdFx0dGhpcy5wYWludENvdW50cmllcygpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aGlzLmdldE5hdGlvbkJ5SXNvID0gZnVuY3Rpb24oaXNvLCBsaXN0KSB7XG5cdFx0XHRpZiAodHlwZW9mIGxpc3QgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0aWYgKGxpc3QubGVuZ3RoID09IDApIHJldHVybiBmYWxzZTtcblx0XHRcdFx0dmFyIG5hdGlvbiA9IHt9O1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24obmF0KSB7XG5cdFx0XHRcdFx0aWYgKG5hdC5pc28gPT0gaXNvKSB7XG5cdFx0XHRcdFx0XHRuYXRpb24gPSBuYXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICh0aGlzLm1hcC5kYXRhLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdHZhciBuYXRpb24gPSB7fTtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHRoaXMubWFwLmRhdGEsIGZ1bmN0aW9uKG5hdCkge1xuXHRcdFx0XHRcdGlmIChuYXQuaXNvID09IGlzbykge1xuXHRcdFx0XHRcdFx0bmF0aW9uID0gbmF0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmF0aW9uO1xuXHRcdH1cblx0XHR0aGlzLmdldE5hdGlvbkJ5TmFtZSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0XHRcdGlmICh0aGlzLm1hcC5kYXRhLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHRoaXMucGFpbnRDb3VudHJpZXMgPSBmdW5jdGlvbihzdHlsZSwgY2xpY2ssIG11dGV4KSB7XG5cdFx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHN0eWxlICE9IFwidW5kZWZpbmVkXCIgJiYgc3R5bGUgIT0gbnVsbCkge1xuXHRcdFx0XHRcdHRoYXQuZGF0YS5sYXllci5zZXRTdHlsZShzdHlsZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly90aGF0LmRhdGEubGF5ZXIuc2V0U3R5bGUodGhhdC5tYXAuc3R5bGUpO1xuXHRcdFx0XHRcdHRoYXQuZGF0YS5sYXllci5zZXRTdHlsZSh0aGF0LmNvdW50cmllc1N0eWxlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZW9mIGNsaWNrICE9IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHR0aGF0LmRhdGEubGF5ZXIub3B0aW9ucy5vbkNsaWNrID0gY2xpY2tcblx0XHRcdFx0fVxuXHRcdFx0XHR0aGF0LmRhdGEubGF5ZXIucmVkcmF3KCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0dGhpcy5yZXNldFNlbGVjdGVkID0gZnVuY3Rpb24oaXNvKSB7XG5cdFx0XHRpZiAodHlwZW9mIHRoaXMuZGF0YS5sYXllci5sYXllcnMgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godGhpcy5kYXRhLmxheWVyLmxheWVyc1t0aGlzLmRhdGEubmFtZSArICdfZ2VvbSddLmZlYXR1cmVzLCBmdW5jdGlvbihmZWF0dXJlLCBrZXkpIHtcblx0XHRcdFx0XHRpZiAoaXNvKSB7XG5cdFx0XHRcdFx0XHRpZiAoa2V5ICE9IGlzbylcblx0XHRcdFx0XHRcdFx0ZmVhdHVyZS5zZWxlY3RlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRmZWF0dXJlLnNlbGVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHRoaXMuc2V0U2VsZWN0ZWRGZWF0dXJlID0gZnVuY3Rpb24oaXNvLCBzZWxlY3RlZCwgZGVzZWxlY3RlZEFsbCkge1xuXG5cdFx0XHRpZiAodHlwZW9mIHRoaXMuZGF0YS5sYXllci5sYXllcnNbdGhpcy5kYXRhLm5hbWUgKyAnX2dlb20nXS5mZWF0dXJlc1tpc29dID09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGlzbyk7XG5cdFx0XHRcdC8vZGVidWdnZXI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihkZXNlbGVjdGVkQWxsKXtcblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godGhpcy5kYXRhLmxheWVyLmxheWVyc1t0aGlzLmRhdGEubmFtZSArICdfZ2VvbSddLmZlYXR1cmVzLCBmdW5jdGlvbihmZWF0dXJlLCBrZXkpIHtcblx0XHRcdFx0XHRcdFx0ZmVhdHVyZS5zZWxlY3RlZCA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLmRhdGEubGF5ZXIubGF5ZXJzW3RoaXMuZGF0YS5uYW1lICsgJ19nZW9tJ10uZmVhdHVyZXNbaXNvXS5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuXHRcdFx0XHR0aGlzLnJlZHJhdygpO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHRcdHRoaXMucmVkcmF3ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLmRhdGEubGF5ZXIucmVkcmF3KCk7XG5cdFx0fVxuXHRcdHRoaXMucGFpbnQgPSBmdW5jdGlvbihjb2xvcikge1xuXHRcdFx0dGhpcy5zZXRCYXNlQ29sb3IoY29sb3IpO1xuXHRcdFx0aWYgKHRoaXMuY3R4KSB7XG5cdFx0XHRcdHRoaXMudXBkYXRlQ2FudmFzKGNvbG9yKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuY3JlYXRlQ2FudmFzKGNvbG9yKVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5wYWludENvdW50cmllcygpO1xuXHRcdH1cblx0XHR0aGlzLmdvdG9Db3VudHJ5ID0gZnVuY3Rpb24oaXNvKSB7XG5cdFx0XHREYXRhU2VydmljZS5nZXRPbmUoJ2NvdW50cmllcy9iYm94JywgW2lzb10pLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHR2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoZGF0YS5jb29yZGluYXRlc1swXVswXVsxXSwgZGF0YS5jb29yZGluYXRlc1swXVswXVswXSksXG5cdFx0XHRcdFx0bm9ydGhFYXN0ID0gTC5sYXRMbmcoZGF0YS5jb29yZGluYXRlc1swXVsyXVsxXSwgZGF0YS5jb29yZGluYXRlc1swXVsyXVswXSksXG5cdFx0XHRcdFx0Ym91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpO1xuXG5cdFx0XHRcdHZhciBwYWQgPSBbXG5cdFx0XHRcdFx0WzAsIDBdLFxuXHRcdFx0XHRcdFsxMDAsIDEwMF1cblx0XHRcdFx0XTtcblx0XHRcdFx0Ly8gaWYgKHZtLmNvbXBhcmUuYWN0aXZlKSB7XG5cdFx0XHRcdC8vIFx0cGFkID0gW1xuXHRcdFx0XHQvLyBcdFx0WzAsIDBdLFxuXHRcdFx0XHQvLyBcdFx0WzAsIDBdXG5cdFx0XHRcdC8vIFx0XTtcblx0XHRcdFx0Ly8gfVxuXHRcdFx0XHR0aGF0Lm1hcExheWVyLmZpdEJvdW5kcyhib3VuZHMsIHtcblx0XHRcdFx0XHRwYWRkaW5nOiBwYWRbMV0sXG5cdFx0XHRcdFx0bWF4Wm9vbTogNFxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHR0aGlzLmdvdG9Db3VudHJpZXMgPSBmdW5jdGlvbihtYWluLCBpc29zKSB7XG5cdFx0XHRcdC8vXHRpc29zLnB1c2gobWFpbik7XG5cdFx0XHRcdERhdGFTZXJ2aWNlLmdldE9uZSgnY291bnRyaWVzL2Jib3gnLCBpc29zKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHR2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoZGF0YS5jb29yZGluYXRlc1swXVswXVsxXSwgZGF0YS5jb29yZGluYXRlc1swXVswXVswXSksXG5cdFx0XHRcdFx0XHRub3J0aEVhc3QgPSBMLmxhdExuZyhkYXRhLmNvb3JkaW5hdGVzWzBdWzJdWzFdLCBkYXRhLmNvb3JkaW5hdGVzWzBdWzJdWzBdKSxcblx0XHRcdFx0XHRcdGJvdW5kcyA9IEwubGF0TG5nQm91bmRzKHNvdXRoV2VzdCwgbm9ydGhFYXN0KTtcblxuXHRcdFx0XHRcdHZhciBwYWQgPSBbXG5cdFx0XHRcdFx0XHRbMTAwLCAxMDBdLFxuXHRcdFx0XHRcdFx0WzEwMCwgMTAwXVxuXHRcdFx0XHRcdF07XG5cdFx0XHRcdFx0Ly8gaWYgKHZtLmNvbXBhcmUuYWN0aXZlKSB7XG5cdFx0XHRcdFx0Ly8gXHRwYWQgPSBbXG5cdFx0XHRcdFx0Ly8gXHRcdFswLCAwXSxcblx0XHRcdFx0XHQvLyBcdFx0WzAsIDBdXG5cdFx0XHRcdFx0Ly8gXHRdO1xuXHRcdFx0XHRcdC8vIH1cblx0XHRcdFx0XHR0aGF0Lm1hcExheWVyLmZpdEJvdW5kcyhib3VuZHMsIHtcblx0XHRcdFx0XHRcdHBhZGRpbmc6IHBhZFsxXSxcblx0XHRcdFx0XHRcdG1heFpvb206IDRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHQvL0ZVTEwgVE8gRE9cblx0XHR0aGlzLmNvdW50cmllc1N0eWxlID0gZnVuY3Rpb24oZmVhdHVyZSkge1xuXG5cdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdHZhciBpc28gPSBmZWF0dXJlLnByb3BlcnRpZXNbdGhhdC5pc29fZmllbGRdO1xuXHRcdFx0dmFyIG5hdGlvbiA9IHRoYXQuZ2V0TmF0aW9uQnlJc28oaXNvKTtcblx0XHRcdHZhciBmaWVsZCA9ICdzY29yZSc7XG5cdFx0XHR2YXIgdHlwZSA9IGZlYXR1cmUudHlwZTtcblx0XHRcdGZlYXR1cmUuc2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRjYXNlIDM6IC8vJ1BvbHlnb24nXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBuYXRpb25bZmllbGRdICE9IFwidW5kZWZpbmVkXCIgJiYgbmF0aW9uW2ZpZWxkXSAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHR2YXIgbGluZWFyU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oW3RoYXQubWFwLnN0cnVjdHVyZS5taW4sIHRoYXQubWFwLnN0cnVjdHVyZS5tYXhdKS5yYW5nZShbMCwgMjU2XSk7XG5cblx0XHRcdFx0XHRcdHZhciBjb2xvclBvcyA9IHBhcnNlSW50KGxpbmVhclNjYWxlKHBhcnNlRmxvYXQobmF0aW9uW2ZpZWxkXSkpKSAqIDQ7IC8vO1xuXHRcdFx0XHRcdFx0Ly92YXIgY29sb3JQb3MgPSBwYXJzZUludCgyNTYgLyAxMDAgKiBwYXJzZUludChuYXRpb25bZmllbGRdKSkgKiA0O1xuXHRcdFx0XHRcdFx0dmFyIGNvbG9yID0gJ3JnYmEoJyArIHRoYXQucGFsZXR0ZVtjb2xvclBvc10gKyAnLCAnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLCcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3MgKyAzXSArICcpJztcblxuXHRcdFx0XHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3MgKyAyXSArICcsMC42KSc7IC8vY29sb3I7XG5cdFx0XHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogY29sb3IsXG5cdFx0XHRcdFx0XHRcdHNpemU6IDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRzdHlsZS5zZWxlY3RlZCA9IHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKCcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIHRoYXQucGFsZXR0ZVtjb2xvclBvcyArIDFdICsgJywgJyArIHRoYXQucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywwLjMpJyxcblx0XHRcdFx0XHRcdFx0b3V0bGluZToge1xuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiAncmdiYSgnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3MgKyAyXSArICcsMSknLFxuXHRcdFx0XHRcdFx0XHRcdC8vIGNvbG9yOiAncmdiYSg2Niw2Niw2NiwwLjkpJyxcblx0XHRcdFx0XHRcdFx0XHRzaXplOiAyXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgyNTUsMjU1LDI1NSwwKSc7XG5cdFx0XHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMCknLFxuXHRcdFx0XHRcdFx0XHRzaXplOiAxXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHN0eWxlO1xuXHRcdH1cblx0XHR0aGlzLmludmVydGVkU3R5bGUgPSBmdW5jdGlvbihmZWF0dXJlKSB7XG5cdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdHZhciBpc28gPSBmZWF0dXJlLnByb3BlcnRpZXNbdGhhdC5pc29fZmllbGRdO1xuXHRcdFx0dmFyIG5hdGlvbiA9IHRoYXQuZ2V0TmF0aW9uQnlJc28oaXNvKTtcblx0XHRcdC8vIHZhciBmaWVsZCA9IHRoYXQubWFwLnN0cnVjdHVyZS5uYW1lIHx8ICdzY29yZSc7XG5cdFx0XHR2YXIgZmllbGQgPSAnc2NvcmUnO1xuXG5cdFx0XHR2YXIgbGluZWFyU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oW3RoYXQubWFwLnN0cnVjdHVyZS5taW4sIHRoYXQubWFwLnN0cnVjdHVyZS5tYXhdKS5yYW5nZShbMCwgMjU2XSk7XG5cdFx0XHR2YXIgY29sb3JQb3MgPSBwYXJzZUludChsaW5lYXJTY2FsZShwYXJzZUZsb2F0KG5hdGlvbltmaWVsZF0pKSkgKiA0OyAvLztcblx0XHRcdHZhciBjb2xvciA9ICdyZ2JhKCcgKyB0aGF0LnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIHRoYXQucGFsZXR0ZVtjb2xvclBvcyArIDFdICsgJywgJyArIHRoYXQucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zICsgM10gKyAnKSc7XG5cblx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoMCwwLDAsMCknO1xuXHRcdFx0aWYgKHR5cGVvZiBuYXRpb25bZmllbGRdICE9IFwidW5kZWZpbmVkXCIgJiYgbmF0aW9uW2ZpZWxkXSAhPSBudWxsKSB7XG5cdFx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoJyArIHRoYXQucGFsZXR0ZVtjb2xvclBvc10gKyAnLCAnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgdGhhdC5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLDAuMSknO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRjb2xvcjogJ3JnYmEoMCwwLDAsMCknLFxuXHRcdFx0XHRzaXplOiAwXG5cdFx0XHR9O1xuXHRcdFx0c3R5bGUuc2VsZWN0ZWQgPSB7XG5cdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0b3V0bGluZToge1xuXHRcdFx0XHRcdGNvbG9yOiAncmdiYSgwLDAsMCwwLjMpJyxcblx0XHRcdFx0XHRzaXplOiAyXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gc3R5bGU7XG5cdFx0fVxuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQmFzZW1hcERldGFpbHNDdHJsJywgZnVuY3Rpb24oJHN0YXRlLCBCYXNlbWFwc1NlcnZpY2UsIFZlY3RvcmxheWVyU2VydmljZSl7XG4gICAgICAgIC8vXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmJhc2VtYXAgPSB7fVxuICAgICAgICB2bS5zZWxlY3RlZCA9IFtdO1xuICAgICAgICB2bS5vcHRpb25zID0ge1xuICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBCYXNlbWFwc1NlcnZpY2Uuc2F2ZSh2bS5iYXNlbWFwLCBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgIFZlY3RvcmxheWVyU2VydmljZS5zZXRCYXNlTGF5ZXIodm0uYmFzZW1hcCk7XG4gICAgICAgICAgICAgICRzdGF0ZS5nbygnYXBwLmluZGV4LmJhc2VtYXBzLmRldGFpbHMnLHtpZDogcmVzcG9uc2UuaWQsIG5hbWU6IHJlc3BvbnNlLm5hbWV9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgd2l0aFNhdmU6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpe1xuICAgICAgICAgIGlmKCRzdGF0ZS5wYXJhbXMuaWQgIT0gMCl7XG4gICAgICAgICAgICBCYXNlbWFwc1NlcnZpY2UuZ2V0QmFzZW1hcCgkc3RhdGUucGFyYW1zLmlkLCBmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgIHZtLmJhc2VtYXAgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgVmVjdG9ybGF5ZXJTZXJ2aWNlLnNldEJhc2VMYXllcih2bS5iYXNlbWFwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZtLmJhc2VtYXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiByZW1vdmVJdGVtKGl0ZW0sIGxpc3Qpe1xuICAgIFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbihlbnRyeSwga2V5KXtcbiAgICBcdFx0XHRcdGlmKGVudHJ5LmlkID09IGl0ZW0uaWQpe1xuICAgIFx0XHRcdFx0XHRsaXN0LnNwbGljZShrZXksIDEpO1xuICAgIFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHRcdGlmKGVudHJ5LmNoaWxkcmVuKXtcbiAgICBcdFx0XHRcdFx0dmFyIHN1YnJlc3VsdCA9IHJlbW92ZUl0ZW0oaXRlbSwgZW50cnkuY2hpbGRyZW4pO1xuICAgIFx0XHRcdFx0XHRpZihzdWJyZXN1bHQpe1xuICAgIFx0XHRcdFx0XHRcdHJldHVybiBzdWJyZXN1bHQ7XG4gICAgXHRcdFx0XHRcdH1cbiAgICBcdFx0XHRcdH1cbiAgICBcdFx0XHR9KTtcbiAgICBcdFx0XHRyZXR1cm4gZmFsc2U7XG4gICAgXHRcdH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0Jhc2VtYXBzQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwgQmFzZW1hcHNTZXJ2aWNlKXtcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uYmFzZW1hcHMgPSBbXTtcbiAgICAgICAgdm0uc2VsZWN0aW9uID0gW107XG4gICAgXHRcdHZtLm9wdGlvbnMgPSB7XG4gICAgXHRcdFx0ZHJhZzogZmFsc2UsXG4gICAgXHRcdFx0dHlwZTogJ2Jhc2VtYXBzJyxcbiAgICBcdFx0XHRhbGxvd01vdmU6IGZhbHNlLFxuICAgIFx0XHRcdGFsbG93RHJvcDogZmFsc2UsXG4gICAgXHRcdFx0YWxsb3dBZGQ6IHRydWUsXG4gICAgXHRcdFx0YWxsb3dEZWxldGU6IHRydWUsXG4gICAgXHRcdFx0aXRlbUNsaWNrOiBmdW5jdGlvbihpZCwgbmFtZSkge1xuICAgIFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguYmFzZW1hcHMuZGV0YWlscycsIHtcbiAgICBcdFx0XHRcdFx0aWQ6IGlkLFxuICAgIFx0XHRcdFx0XHRuYW1lOiBuYW1lXG4gICAgXHRcdFx0XHR9KVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0YWRkQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgIFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguYmFzZW1hcHMuZGV0YWlscycsIHtcbiAgICBcdFx0XHRcdFx0aWQ6IDAsXG4gICAgXHRcdFx0XHRcdG5hbWU6ICduZXcnXG4gICAgXHRcdFx0XHR9KVxuICAgIFx0XHRcdH0sXG4gICAgXHRcdFx0ZGVsZXRlQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICAgIFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNlbGVjdGlvbiwgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG4gICAgXHRcdFx0XHRcdEJhc2VtYXBzU2VydmljZS5yZW1vdmVJdGVtKGl0ZW0uaWQsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICBcdFx0XHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5pZCA9PSBpdGVtLmlkKSB7XG4gICAgXHRcdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5iYXNlbWFwcycpO1xuICAgIFx0XHRcdFx0XHRcdH1cbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gdm0uYmFzZW1hcHMuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgICAgICAgICB2bS5iYXNlbWFwcy5zcGxpY2UoaWR4LDEpO1xuICAgICAgICAgICAgICAgIHZtLnNlbGVjdGlvbiA9IFtdO1xuICAgIFx0XHRcdFx0XHR9KTtcbiAgICBcdFx0XHRcdH0pO1xuXG4gICAgXHRcdFx0fVxuICAgIFx0XHR9O1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKXtcbiAgICAgICAgICBCYXNlbWFwc1NlcnZpY2UuZ2V0QmFzZW1hcHMoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgdm0uYmFzZW1hcHMgPSByZXNwb25zZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQ2hhcHRlckN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgRGlhbG9nU2VydmljZSwgRXhwb3J0U2VydmljZSkge1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uZ290b0NoYXB0ZXIgPSBnb3RvQ2hhcHRlcjtcblx0XHR2bS5FeHBvcnRTZXJ2aWNlID0gRXhwb3J0U2VydmljZTtcblx0XHR2bS5zaG93RGF0YSA9IHNob3dEYXRhO1xuXHRcdHZtLkV4cG9ydFNlcnZpY2UuZ2V0Q2hhcHRlcigkc3RhdGUucGFyYW1zLmlkLCAkc3RhdGUucGFyYW1zLmNoYXB0ZXIgfHwgMSk7XG5cblx0XHRmdW5jdGlvbiBnb3RvQ2hhcHRlcihjaGFwdGVyKSB7XG5cdFx0XHR2bS5FeHBvcnRTZXJ2aWNlLmdldENoYXB0ZXIoJHN0YXRlLnBhcmFtcy5pZCwgY2hhcHRlciwgZnVuY3Rpb24oYywgaSkge1xuXG5cdFx0XHRcdGlmICgkc3RhdGUucGFyYW1zLmlzbykge1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeScsIHtcblx0XHRcdFx0XHRcdGNoYXB0ZXI6IGNoYXB0ZXIsXG5cdFx0XHRcdFx0XHRpbmRpY2F0b3I6IGkuaW5kaWNhdG9yX2lkLFxuXHRcdFx0XHRcdFx0aW5kaW5hbWU6IGkubmFtZSxcblx0XHRcdFx0XHRcdGlzbzogJHN0YXRlLnBhcmFtcy5pc29cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5leHBvcnQuZGV0YWlsLmNoYXB0ZXIuaW5kaWNhdG9yJywge1xuXHRcdFx0XHRcdFx0Y2hhcHRlcjogY2hhcHRlcixcblx0XHRcdFx0XHRcdGluZGljYXRvcjogaS5pbmRpY2F0b3JfaWQsXG5cdFx0XHRcdFx0XHRpbmRpbmFtZTogaS5uYW1lXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fVxuXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzaG93RGF0YSgpIHtcblx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdleHBvcnRkYXRhJywgJHNjb3BlKTtcblx0XHR9XG5cblx0XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQ2hhcHRlckNvbnRlbnRDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkdGltZW91dCwgJHN0YXRlLCBEYXRhU2VydmljZSwgQ29udGVudFNlcnZpY2UsIGNvdW50cmllcywgRXhwb3J0U2VydmljZSwgSW5kaXplc1NlcnZpY2UsIEluZGV4U2VydmljZSwgRGlhbG9nU2VydmljZSwgVmVjdG9ybGF5ZXJTZXJ2aWNlKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0dm0uY29tcGFyZSA9IGZhbHNlO1xuXHRcdHZtLmFjdGl2ZVRhYiA9IDAsIHZtLnNlbGVjdGVkSW5kaWNhdG9yO1xuXHRcdHZtLnNlbGVjdGVkQ291bnRyeSA9IHt9LCB2bS5jdXJyZW50ID0ge30sIHZtLmNpcmNsZU9wdGlvbnMgPSB7fTtcblx0XHR2bS5jb3VudHJpZXNMaXN0ID0gW10sIHZtLmNvbXBhcmVMaXN0ID0gW107XG5cdFx0dm0uY2hhcHRlcklkID0gJHN0YXRlLnBhcmFtcy5jaGFwdGVyO1xuXHRcdHZtLkV4cG9ydFNlcnZpY2UgPSBFeHBvcnRTZXJ2aWNlO1xuXHRcdHZtLnNldENvbXBhcmUgPSBzZXRDb21wYXJlO1xuXHRcdHZtLnNlbGVjdENvdW50cnkgPSBzZWxlY3RDb3VudHJ5O1xuXHRcdHZtLnNob3dJbmZvID0gc2hvd0luZm87XG5cdFx0dm0uZ290b0luZGljYXRvciA9IGdvdG9JbmRpY2F0b3I7XG5cdFx0Ly92bS5jb3VudHJpZXMgPSBjb3VudHJpZXMucGxhaW4oKTtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRWZWN0b3JsYXllclNlcnZpY2UuY291bnRyeUNsaWNrKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdGlmICghY291bnRyeUV4aXN0c0luRGF0YShkYXRhLmZlYXR1cmUuaWQpKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZiAodm0uY29tcGFyZSkge1xuXHRcdFx0XHRhZGRDb21wYXJlQ291bnRyeShkYXRhLmZlYXR1cmUuaWQsIHRydWUpXG5cdFx0XHRcdHNob3dDb21wYXJpc29uKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5leHBvcnQuZGV0YWlsLmNoYXB0ZXIuaW5kaWNhdG9yLmNvdW50cnknLCB7XG5cdFx0XHRcdFx0aW5kaWNhdG9yOiB2bS5FeHBvcnRTZXJ2aWNlLmluZGljYXRvci5pbmRpY2F0b3JfaWQsXG5cdFx0XHRcdFx0aW5kaW5hbWU6IHZtLkV4cG9ydFNlcnZpY2UuaW5kaWNhdG9yLm5hbWUsXG5cdFx0XHRcdFx0aXNvOiBkYXRhLmZlYXR1cmUuaWRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vJHJvb3RTY29wZS5zaWRlYmFyT3BlbiA9IGZhbHNlO1xuXHRcdFx0XHRnZXRDb3VudHJ5QnlJc28oZGF0YS5mZWF0dXJlLmlkKTtcblx0XHRcdFx0ZmV0Y2hOYXRpb25EYXRhKGRhdGEuZmVhdHVyZS5pZCk7XG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGFkZENvbXBhcmVDb3VudHJ5KGlzbywgd2l0aFJlbW92ZSkge1xuXHRcdFx0aWYgKGlzbyA9PSB2bS5zZWxlY3RlZENvdW50cnkuaXNvKVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR2YXIgY2wgPSBudWxsO1xuXHRcdFx0dmFyIGlkeCA9IHZtLmNvbXBhcmVMaXN0LmluZGV4T2YoaXNvKTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihuYXQpIHtcblx0XHRcdFx0aWYgKG5hdC5pc28gPT0gaXNvKSB7XG5cdFx0XHRcdFx0Y2wgPSBuYXQ7XG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRpZiAoaWR4ID09IC0xKSB7XG5cdFx0XHRcdGlmIChjbCkge1xuXHRcdFx0XHRcdHZtLmNvdW50cmllc0xpc3QucHVzaChjbCk7XG5cdFx0XHRcdFx0dm0uY29tcGFyZUxpc3QucHVzaChjbC5pc28pO1xuXHRcdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXRTZWxlY3RlZEZlYXR1cmUoY2wuaXNvLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh3aXRoUmVtb3ZlKSB7XG5cdFx0XHRcdHZtLmNvbXBhcmVMaXN0LnNwbGljZShpZHgsIDEpO1xuXHRcdFx0XHR2bS5jb3VudHJpZXNMaXN0LnNwbGljZSh2bS5jb3VudHJpZXNMaXN0LmluZGV4T2YoY2wpLCAxKTtcblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldFNlbGVjdGVkRmVhdHVyZShpc28sIGZhbHNlKTtcblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNob3dDb21wYXJpc29uKCkge1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuZXhwb3J0LmRldGFpbC5jaGFwdGVyLmluZGljYXRvci5jb3VudHJ5LmNvbXBhcmUnLCB7XG5cdFx0XHRcdGNvdW50cmllczogdm0uY29tcGFyZUxpc3Quam9pbignLXZzLScpXG5cdFx0XHR9KTtcblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5nb3RvQ291bnRyaWVzKCRzdGF0ZS5wYXJhbXMuaXNvLCB2bS5jb21wYXJlTGlzdCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0Q29tcGFyZShhY3RpdmF0ZSkge1xuXHRcdFx0aWYgKGFjdGl2YXRlKSB7XG5cdFx0XHRcdHZtLmNvbXBhcmUgPSB0cnVlO1xuXHRcdFx0XHR2bS5jb3VudHJpZXNMaXN0WzBdID0gdm0uc2VsZWN0ZWRDb3VudHJ5O1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2UuaW52ZXJ0U3R5bGUoKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuZXhwb3J0LmRldGFpbC5jaGFwdGVyLmluZGljYXRvci5jb3VudHJ5LmNvbXBhcmUnLCB7XG5cdFx0XHRcdFx0Y291bnRyaWVzOiB2bS5jb21wYXJlTGlzdC5qb2luKCctdnMtJylcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5jb21wYXJlID0gZmFsc2U7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5sb2NhbFN0eWxlKCk7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeScpO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0U2VsZWN0ZWRGZWF0dXJlKCRzdGF0ZS5wYXJhbXMuaXNvLCB0cnVlKTtcblxuXHRcdFx0XHQvL211c3MgbmljaHQgc2VpblxuXHRcdFx0XHR2bS5jb21wYXJlTGlzdCA9IFtdO1xuXHRcdFx0XHR2bS5jb3VudHJpZXNMaXN0ID0gW107XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRJbmRpY2F0b3IoZmluaXNoZWQpIHtcblx0XHRcdHZtLkV4cG9ydFNlcnZpY2UuZ2V0SW5kaWNhdG9yKCRzdGF0ZS5wYXJhbXMuaWQsICRzdGF0ZS5wYXJhbXMuY2hhcHRlciwgJHN0YXRlLnBhcmFtcy5pbmRpY2F0b3IsIGZ1bmN0aW9uKGluZGljYXRvciwgY2hhcHRlciwgZXhwb3J0ZXIpIHtcblx0XHRcdFx0dm0uc2VsZWN0ZWRJbmRpY2F0b3IgPSBpbmRpY2F0b3I7XG5cdFx0XHRcdHJlbmRlckluZGljYXRvcihpbmRpY2F0b3IsIGZpbmlzaGVkKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIERSWSBpbiB5b3UgZmFjZS4gUkVEVUNFIFRISVMgTVVMVElQTEUgS09UXG5cdFx0ZnVuY3Rpb24gZ290b0luZGljYXRvcigpIHtcblx0XHRcdGlmICh2bS5FeHBvcnRTZXJ2aWNlLmNoYXB0ZXIudHlwZSA9PSBcImluZGljYXRvclwiKSB7XG5cdFx0XHRcdHZhciBpZHggPSAwO1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uRXhwb3J0U2VydmljZS5leHBvcnRlci5pdGVtcywgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG5cdFx0XHRcdFx0aWYgKGl0ZW0uaWQgPT0gdm0uc2VsZWN0ZWRJbmRpY2F0b3IuaWQpIHtcblx0XHRcdFx0XHRcdGlkeCA9IGtleTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdGlmKHR5cGVvZiB2bS5zZWxlY3RlZENvdW50cnkuaXNvICE9IFwidW5kZWZpbmVkXCIpe1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeScsIHtcblx0XHRcdFx0XHRcdGNoYXB0ZXI6IGlkeCArIDEsXG5cdFx0XHRcdFx0XHRpbmRpY2F0b3I6IHZtLnNlbGVjdGVkSW5kaWNhdG9yLmluZGljYXRvcl9pZCxcblx0XHRcdFx0XHRcdGluZGluYW1lOiB2bS5zZWxlY3RlZEluZGljYXRvci5uYW1lLFxuXHRcdFx0XHRcdFx0aXNvOnZtLnNlbGVjdGVkQ291bnRyeS5pc29cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3InLCB7XG5cdFx0XHRcdFx0XHRjaGFwdGVyOiBpZHggKyAxLFxuXHRcdFx0XHRcdFx0aW5kaWNhdG9yOiB2bS5zZWxlY3RlZEluZGljYXRvci5pbmRpY2F0b3JfaWQsXG5cdFx0XHRcdFx0XHRpbmRpbmFtZTogdm0uc2VsZWN0ZWRJbmRpY2F0b3IubmFtZVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodm0uRXhwb3J0U2VydmljZS5jaGFwdGVyLmlkICE9IHZtLnNlbGVjdGVkSW5kaWNhdG9yLnBhcmVudC5pZCkge1xuXHRcdFx0XHRcdHZhciBpZHggPSAwO1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5FeHBvcnRTZXJ2aWNlLmV4cG9ydGVyLml0ZW1zLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcblx0XHRcdFx0XHRcdGlmIChpdGVtLmlkID09IHZtLnNlbGVjdGVkSW5kaWNhdG9yLnBhcmVudC5pZCkge1xuXHRcdFx0XHRcdFx0XHRpZHggPSBrZXk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRpZih0eXBlb2Ygdm0uc2VsZWN0ZWRDb3VudHJ5LmlzbyAhPSBcInVuZGVmaW5lZFwiKXtcblx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeScsIHtcblx0XHRcdFx0XHRcdFx0Y2hhcHRlcjogaWR4ICsgMSxcblx0XHRcdFx0XHRcdFx0aW5kaWNhdG9yOiB2bS5zZWxlY3RlZEluZGljYXRvci5pbmRpY2F0b3JfaWQsXG5cdFx0XHRcdFx0XHRcdGluZGluYW1lOiB2bS5zZWxlY3RlZEluZGljYXRvci5uYW1lLFxuXHRcdFx0XHRcdFx0XHRpc286dm0uc2VsZWN0ZWRDb3VudHJ5Lmlzb1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5leHBvcnQuZGV0YWlsLmNoYXB0ZXIuaW5kaWNhdG9yJywge1xuXHRcdFx0XHRcdFx0XHRjaGFwdGVyOiBpZHggKyAxLFxuXHRcdFx0XHRcdFx0XHRpbmRpY2F0b3I6IHZtLnNlbGVjdGVkSW5kaWNhdG9yLmluZGljYXRvcl9pZCxcblx0XHRcdFx0XHRcdFx0aW5kaW5hbWU6IHZtLnNlbGVjdGVkSW5kaWNhdG9yLm5hbWVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZih0eXBlb2Ygdm0uc2VsZWN0ZWRDb3VudHJ5LmlzbyAhPSBcInVuZGVmaW5lZFwiKXtcblx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmV4cG9ydC5kZXRhaWwuY2hhcHRlci5pbmRpY2F0b3IuY291bnRyeScsIHtcblx0XHRcdFx0XHRcdFx0aW5kaWNhdG9yOiB2bS5zZWxlY3RlZEluZGljYXRvci5pbmRpY2F0b3JfaWQsXG5cdFx0XHRcdFx0XHRcdGluZGluYW1lOiB2bS5zZWxlY3RlZEluZGljYXRvci5uYW1lLFxuXHRcdFx0XHRcdFx0XHRpc286dm0uc2VsZWN0ZWRDb3VudHJ5Lmlzb1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5leHBvcnQuZGV0YWlsLmNoYXB0ZXIuaW5kaWNhdG9yJywge1xuXHRcdFx0XHRcdFx0XHRpbmRpY2F0b3I6IHZtLnNlbGVjdGVkSW5kaWNhdG9yLmluZGljYXRvcl9pZCxcblx0XHRcdFx0XHRcdFx0aW5kaW5hbWU6IHZtLnNlbGVjdGVkSW5kaWNhdG9yLm5hbWVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsb2FkU3RhdGVEYXRhKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZWxlY3RDb3VudHJ5KG5hdGlvbikge1xuXHRcdFx0JHN0YXRlLmdvKCdhcHAuZXhwb3J0LmRldGFpbC5jaGFwdGVyLmluZGljYXRvci5jb3VudHJ5Jywge1xuXHRcdFx0XHRpc286IG5hdGlvbi5pc29cblx0XHRcdH0pO1xuXHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldFNlbGVjdGVkRmVhdHVyZShuYXRpb24uaXNvLCB0cnVlLCB0cnVlKTtcblx0XHRcdGdldENvdW50cnlCeUlzbyhuYXRpb24uaXNvKTtcblx0XHRcdGZldGNoTmF0aW9uRGF0YShuYXRpb24uaXNvKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRDb3VudHJ5QnlOYW1lKG5hbWUpIHtcblx0XHRcdHZhciBpc28gPSBudWxsO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmNvdW50cmllcywgZnVuY3Rpb24obmF0LCBrZXkpIHtcblx0XHRcdFx0aWYgKG5hdCA9PSBuYW1lKSB7XG5cdFx0XHRcdFx0aXNvID0ga2V5O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGdldENvdW50cnlCeUlzbyhpc28pO1xuXHRcdFx0cmV0dXJuIGlzbztcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjb3VudHJ5RXhpc3RzSW5EYXRhKGlzbykge1xuXHRcdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRpZiAoaXRlbS5pc28gPT0gaXNvKSB7XG5cdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBmb3VuZDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXRDb3VudHJ5QnlJc28oaXNvKSB7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRpZiAoaXRlbS5pc28gPT0gaXNvKSB7XG5cdFx0XHRcdFx0dm0uc2VsZWN0ZWRDb3VudHJ5ID0gaXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdHJldHVybiBpc287XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hOYXRpb25EYXRhKGlzbykge1xuXHRcdFx0aWYgKCEkc3RhdGUucGFyYW1zLmNvdW50cmllcykge1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2UuZ290b0NvdW50cnkoaXNvKTtcblx0XHRcdH1cblxuXG5cdFx0XHRJbmRleFNlcnZpY2UuZmV0Y2hOYXRpb25EYXRhKHZtLkV4cG9ydFNlcnZpY2UuaW5kaWNhdG9yLmluZGljYXRvcl9pZCwgaXNvLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHZtLmN1cnJlbnQgPSBkYXRhO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0U2VsZWN0ZWRGZWF0dXJlKGlzbywgdHJ1ZSwgdHJ1ZSk7XG5cdFx0XHRcdCRyb290U2NvcGUuc2lkZWJhck9wZW4gPSB0cnVlO1xuXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZW5kZXJJbmRpY2F0b3IoaXRlbSwgZG9uZSkge1xuXHRcdFx0Q29udGVudFNlcnZpY2UuZmV0Y2hJbmRpY2F0b3JXaXRoRGF0YShpdGVtLmluZGljYXRvcl9pZCwgZnVuY3Rpb24oaW5kaWNhdG9yKSB7XG5cdFx0XHRcdHZtLmRhdGEgPSBpbmRpY2F0b3IuZGF0YTtcblx0XHRcdFx0dm0uc3RydWN0dXJlID0gaW5kaWNhdG9yO1xuXHRcdFx0XHR2bS5FeHBvcnRTZXJ2aWNlLmRhdGEgPSBpbmRpY2F0b3I7XG5cdFx0XHRcdHZtLmNpcmNsZU9wdGlvbnMgPSB7XG5cdFx0XHRcdFx0Y29sb3I6IHZtLkV4cG9ydFNlcnZpY2UuaW5kaWNhdG9yLnN0eWxlLmJhc2VfY29sb3IgfHwgJyMwMGNjYWEnLFxuXHRcdFx0XHRcdGZpZWxkOiAncmFuaycsXG5cdFx0XHRcdFx0c2l6ZTogdm0uc3RydWN0dXJlLmNvdW50LFxuXHRcdFx0XHRcdGhpZGVOdW1iZXJpbmc6IHRydWUsXG5cdFx0XHRcdFx0d2lkdGg6IDYwLFxuXHRcdFx0XHRcdGhlaWdodDogNjAsXG5cdFx0XHRcdFx0Zm9udFNpemU6MTJcblx0XHRcdFx0fTtcblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldEJhc2VMYXllcihpdGVtLnN0eWxlLmJhc2VtYXApO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0TWFwRGVmYXVsdHMoaXRlbS5zdHlsZSk7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXREYXRhKGluZGljYXRvci5kYXRhLCBpbmRpY2F0b3IsIGl0ZW0uc3R5bGUuYmFzZV9jb2xvciwgdHJ1ZSk7XG5cblx0XHRcdFx0aWYgKHR5cGVvZiBkb25lID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdGRvbmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwge1xuXHRcdFx0XHRkYXRhOiB0cnVlXG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNob3dJbmZvKCkge1xuXHRcdFx0RGlhbG9nU2VydmljZS5mcm9tVGVtcGxhdGUoJ2V4cG9ydCcsICRzY29wZSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbG9hZFN0YXRlRGF0YSgpe1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vUkVTRVQgQ09VTlRSWSBGT1IgQ09SUkVDVCBWSUVXLCBJRiBOT1Q6IFZpZXcgd291bGQgc3RheSBhY3RpdmVcblx0XHRcdFx0dm0uc2VsZWN0ZWRDb3VudHJ5ID0ge307XG5cdFx0XHRcdGdldEluZGljYXRvcihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5pc28pIHtcblx0XHRcdFx0XHRcdGdldENvdW50cnlCeUlzbygkc3RhdGUucGFyYW1zLmlzbyk7XG5cdFx0XHRcdFx0XHRmZXRjaE5hdGlvbkRhdGEoJHN0YXRlLnBhcmFtcy5pc28pO1xuXG5cdFx0XHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5jb3VudHJpZXMpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGNvdW50cmllcyA9ICRzdGF0ZS5wYXJhbXMuY291bnRyaWVzLnNwbGl0KCctdnMtJyk7XG5cdFx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb3VudHJpZXMsIGZ1bmN0aW9uKGNvdW50cnkpIHtcblx0XHRcdFx0XHRcdFx0XHRhZGRDb21wYXJlQ291bnRyeShjb3VudHJ5KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdHZtLmFjdGl2ZVRhYiA9IDI7XG5cdFx0XHRcdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5nb3RvQ291bnRyaWVzKCRzdGF0ZS5wYXJhbXMuaXNvLCB2bS5jb21wYXJlTGlzdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHR2bS5zZWxlY3RlZENvdW50cnkgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiB2bS5FeHBvcnRTZXJ2aWNlLmNoYXB0ZXIgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0aWYodm0uRXhwb3J0U2VydmljZS5jaGFwdGVyLmRlc2NyaXB0aW9uKXtcblx0XHRcdFx0XHRcdFx0XHRzaG93SW5mbygpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdGxvYWRTdGF0ZURhdGEoKTtcblx0XHR9XG5cblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5zZWxlY3RlZEluZGljYXRvcicsIGZ1bmN0aW9uKG4sIG8pe1xuXHRcdFx0aWYobiA9PT0gbyB8fCB0eXBlb2Ygbi5pZCA9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZih0eXBlb2YgbyAhPSBcInVuZGVmaW5lZFwiKXtcblx0XHRcdFx0aWYobi5pZCA9PSBvLmlkKSByZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2bS5nb3RvSW5kaWNhdG9yKCk7XG5cdFx0fSlcblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdDb25mbGljdEltcG9ydEN0cmwnLCBmdW5jdGlvbihSZXN0YW5ndWxhciwgdG9hc3RyLCAkc3RhdGUpIHtcblx0XHQvL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0ubmF0aW9ucyA9IFtdO1xuXHRcdHZtLmV2ZW50cyA9IFtdO1xuXHRcdHZtLnN1bSA9IDA7XG5cblx0XHR2bS5zYXZlVG9EYiA9IHNhdmVUb0RiO1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZVRvRGIoKSB7XG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0bmF0aW9uczogdm0ubmF0aW9ucyxcblx0XHRcdFx0ZXZlbnRzOiB2bS5ldmVudHNcblx0XHRcdH07XG5cdFx0XHRSZXN0YW5ndWxhci5hbGwoJy9jb25mbGljdHMvaW1wb3J0JykucG9zdChkYXRhKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuY29uZmxpY3QuaW5kZXgnKVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQ29uZmxpY3RkZXRhaWxzQ3RybCcsIGZ1bmN0aW9uKCR0aW1lb3V0LCAkc3RhdGUsICRzY29wZSwgJHJvb3RTY29wZSwgVmVjdG9ybGF5ZXJTZXJ2aWNlLCBjb25mbGljdCwgY29uZmxpY3RzLCBuYXRpb25zLCBEaWFsb2dTZXJ2aWNlKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLmNvbmZsaWN0ID0gY29uZmxpY3Q7XG5cdFx0dm0uY29uZmxpY3RzID0gbmF0aW9ucztcblx0XHR2bS5jb25mbGljdEl0ZW1zID0gW1xuXHRcdFx0J3RlcnJpdG9yeScsXG5cdFx0XHQnc2VjZXNzaW9uJyxcblx0XHRcdCdhdXRvbm9teScsXG5cdFx0XHQnc3lzdGVtJyxcblx0XHRcdCduYXRpb25hbF9wb3dlcicsXG5cdFx0XHQnaW50ZXJuYXRpb25hbF9wb3dlcicsXG5cdFx0XHQnc3VibmF0aW9uYWxfcHJlZG9taW5hbmNlJyxcblx0XHRcdCdyZXNvdXJjZXMnLFxuXHRcdFx0J290aGVyJ1xuXHRcdF07XG5cdFx0dm0uc2hvd01ldGhvZCA9IHNob3dNZXRob2Q7XG5cdFx0dm0uc2hvd0NvdW50cmllcyA9IGZhbHNlO1xuXHRcdHZtLmdldFRlbmRlbmN5ID0gZ2V0VGVuZGVuY3k7XG5cdFx0dm0ubGluZWFyU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIDVdKS5yYW5nZShbMCwgMjU2XSk7XG5cdFx0dm0uY29sb3JzID0gWycjZDRlYmY3JywgJyM4N2NjZWInLCAnIzM2YThjNicsICcjMjY4Mzk5JywgJyMwZTYzNzcnXTtcblx0XHR2bS5yZWxhdGlvbnMgPSBbXTtcblx0XHR2bS5jb3VudHJpZXMgPSBbXTtcblx0XHR2bS5zaG93VGV4dCA9IHNob3dUZXh0O1xuXHRcdHZtLnNob3dDb3VudHJpZXNCdXR0b24gPSBzaG93Q291bnRyaWVzQnV0dG9uO1xuXHRcdHZtLmNpcmNsZU9wdGlvbnMgPSB7XG5cdFx0XHRjb2xvcjogJyM0ZmIwZTUnLFxuXHRcdFx0ZmllbGQ6ICdpbnQyMDE1Jyxcblx0XHRcdHNpemU6IDUsXG5cdFx0XHRoaWRlTnVtYmVyaW5nOiB0cnVlLFxuXHRcdFx0d2lkdGg6NjUsXG5cdFx0XHRoZWlnaHQ6NjVcblx0XHR9O1xuXG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0Ly87XG5cdFx0XHQkcm9vdFNjb3BlLmdyZXllZCA9IHRydWU7XG5cdFx0XHRuYXRpb25zLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0dm0uY29uZmxpY3RzID0gcmVzcG9uc2U7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5yZXNldFNlbGVjdGVkKCk7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXREYXRhKHZtLmNvbmZsaWN0cywgdm0uY29sb3JzLCB0cnVlKTtcblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldFN0eWxlKGludmVydGVkU3R5bGUpO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2UuY291bnRyeUNsaWNrKGNvdW50cnlDbGljayk7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5yZXNldFNlbGVjdGVkKCk7XG5cblx0XHRcdFx0Ly9WZWN0b3JsYXllclNlcnZpY2Uuc2V0U2VsZWN0ZWRGZWF0dXJlKHZtLm5hdGlvbi5pc28sIHRydWUpO1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uY29uZmxpY3QubmF0aW9ucywgZnVuY3Rpb24obmF0aW9uKSB7XG5cdFx0XHRcdFx0dmFyIGkgPSB2bS5yZWxhdGlvbnMuaW5kZXhPZihuYXRpb24uaXNvKTtcblx0XHRcdFx0XHRpZiAoaSA9PSAtMSkge1xuXHRcdFx0XHRcdFx0dm0ucmVsYXRpb25zLnB1c2gobmF0aW9uLmlzbylcblx0XHRcdFx0XHRcdHZtLmNvdW50cmllcy5wdXNoKG5hdGlvbik7XG5cdFx0XHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0U2VsZWN0ZWRGZWF0dXJlKG5hdGlvbi5pc28sIHRydWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblxuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2UucGFpbnRDb3VudHJpZXMoaW52ZXJ0ZWRTdHlsZSk7XG5cdFx0XHRcdC8qRGF0YVNlcnZpY2UuZ2V0T25lKCdjb3VudHJpZXMvYmJveCcsIHZtLnJlbGF0aW9ucykudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdHZhciBzb3V0aFdlc3QgPSBMLmxhdExuZyhkYXRhLmNvb3JkaW5hdGVzWzBdWzBdWzFdLCBkYXRhLmNvb3JkaW5hdGVzWzBdWzBdWzBdKSxcblx0XHRcdFx0XHRcdG5vcnRoRWFzdCA9IEwubGF0TG5nKGRhdGEuY29vcmRpbmF0ZXNbMF1bMl1bMV0sIGRhdGEuY29vcmRpbmF0ZXNbMF1bMl1bMF0pLFxuXHRcdFx0XHRcdFx0Ym91bmRzID0gTC5sYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpO1xuXG5cdFx0XHRcdFx0dmFyIHBhZCA9IFtcblx0XHRcdFx0XHRcdFswLCAwXSxcblx0XHRcdFx0XHRcdFs1MCwgNTBdXG5cdFx0XHRcdFx0XTtcblxuXHRcdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5tYXBMYXllci5maXRCb3VuZHMoYm91bmRzLCB7XG5cdFx0XHRcdFx0XHRwYWRkaW5nOiBwYWRbMV0sXG5cdFx0XHRcdFx0XHRtYXhab29tOiA0XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pOyovXG5cdFx0XHR9KTtcblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50cnlDbGljayhldnQsIHQpIHtcblxuXHRcdFx0dmFyIGNvdW50cnkgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TmF0aW9uQnlJc28oZXZ0LmZlYXR1cmUucHJvcGVydGllc1snaXNvX2EyJ10pO1xuXHRcdFx0aWYgKHR5cGVvZiBjb3VudHJ5WydpbnRlbnNpdHknXSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmNvbmZsaWN0LmluZGV4Lm5hdGlvbicsIHtcblx0XHRcdFx0XHRpc286IGNvdW50cnkuaXNvXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNob3dUZXh0KCkge1xuXHRcdFx0RGlhbG9nU2VydmljZS5mcm9tVGVtcGxhdGUoJ2NvbmZsaWN0dGV4dCcsICRzY29wZSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2hvd01ldGhvZCgpIHtcblx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdjb25mbGljdG1ldGhvZGUnKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpbnZlcnRlZFN0eWxlKGZlYXR1cmUpIHtcblx0XHRcdHZhciBzdHlsZSA9IHt9O1xuXHRcdFx0dmFyIGlzbyA9IGZlYXR1cmUucHJvcGVydGllc1tWZWN0b3JsYXllclNlcnZpY2UuZGF0YS5pc28yXTtcblx0XHRcdHZhciBuYXRpb24gPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TmF0aW9uQnlJc28oaXNvKTtcblx0XHRcdHZhciBmaWVsZCA9ICdpbnRlbnNpdHknO1xuXHRcdFx0dmFyIGNvbG9yUG9zID0gcGFyc2VJbnQodm0ubGluZWFyU2NhbGUocGFyc2VGbG9hdChuYXRpb25bZmllbGRdKSkpICogNDsgLy8gcGFyc2VJbnQoMjU2IC8gdm0ucmFuZ2UubWF4ICogcGFyc2VJbnQobmF0aW9uW2ZpZWxkXSkpICogNDtcblxuXHRcdFx0dmFyIGNvbG9yID0gJ3JnYmEoJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDFdICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLDAuNiknO1xuXHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgwLDAsMCwwKSc7XG5cdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRjb2xvcjogJ3JnYmEoMCwwLDAsMCknLFxuXHRcdFx0XHRzaXplOiAwXG5cdFx0XHR9O1xuXHRcdFx0c3R5bGUuc2VsZWN0ZWQgPSB7XG5cdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0b3V0bGluZToge1xuXHRcdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0XHRzaXplOiAxXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gc3R5bGU7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0VGVuZGVuY3koKSB7XG5cdFx0XHRpZiAodm0uY29uZmxpY3QgPT0gbnVsbCkgcmV0dXJuIFwicmVtb3ZlXCI7XG5cdFx0XHRpZiAodm0uY29uZmxpY3QuaW50MjAxNSA9PSB2bS5jb25mbGljdC5pbnQyMDE0KVxuXHRcdFx0XHRyZXR1cm4gXCJyZW1vdmVcIjtcblx0XHRcdGlmICh2bS5jb25mbGljdC5pbnQyMDE1IDwgdm0uY29uZmxpY3QuaW50MjAxNClcblx0XHRcdFx0cmV0dXJuIFwidHJlbmRpbmdfZG93blwiO1xuXG5cdFx0XHRyZXR1cm4gXCJ0cmVuZGluZ191cFwiO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNob3dDb3VudHJpZXNCdXR0b24oKSB7XG5cdFx0XHRpZiAodm0uc2hvd0NvdW50cmllcykgcmV0dXJuIFwiYXJyb3dfZHJvcF91cFwiO1xuXHRcdFx0cmV0dXJuIFwiYXJyb3dfZHJvcF9kb3duXCI7XG5cdFx0fVxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0NvbmZsaWN0aXRlbXNDdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5zaG93TGlzdCA9IGZhbHNlO1xuXHRcdCRyb290U2NvcGUuY29uZmxpY3RJdGVtcyA9IFtcblx0XHRcdCd0ZXJyaXRvcnknLFxuXHRcdFx0J3NlY2Vzc2lvbicsXG5cdFx0XHQnYXV0b25vbXknLFxuXHRcdFx0J3N5c3RlbScsXG5cdFx0XHQnbmF0aW9uYWxfcG93ZXInLFxuXHRcdFx0J2ludGVybmF0aW9uYWxfcG93ZXInLFxuXHRcdFx0J3N1Ym5hdGlvbmFsX3ByZWRvbWluYWNlJyxcblx0XHRcdCdyZXNvdXJjZXMnLFxuXHRcdFx0J290aGVyJ1xuXHRcdF07XG5cdFx0dm0udG9nZ2xlSXRlbSA9IHRvZ2dsZUl0ZW07XG5cblx0XHRmdW5jdGlvbiB0b2dnbGVJdGVtKGl0ZW0pIHtcblx0XHRcdGNvbnNvbGUubG9nKGl0ZW0sICRyb290U2NvcGUuY29uZmxpY3RJdGVtcyk7XG5cdFx0XHR2YXIgaSA9ICRyb290U2NvcGUuY29uZmxpY3RJdGVtcy5pbmRleE9mKGl0ZW0pO1xuXHRcdFx0aWYgKGkgPiAtMSkge1xuXHRcdFx0XHQkcm9vdFNjb3BlLmNvbmZsaWN0SXRlbXMuc3BsaWNlKGksIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JHJvb3RTY29wZS5jb25mbGljdEl0ZW1zLnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICgkcm9vdFNjb3BlLmNvbmZsaWN0SXRlbXMubGVuZ3RoID09IDApIHtcblx0XHRcdFx0JHJvb3RTY29wZS5jb25mbGljdEl0ZW1zID0gW1xuXHRcdFx0XHRcdCd0ZXJyaXRvcnknLFxuXHRcdFx0XHRcdCdzZWNlc3Npb24nLFxuXHRcdFx0XHRcdCdhdXRvbm9teScsXG5cdFx0XHRcdFx0J3N5c3RlbScsXG5cdFx0XHRcdFx0J25hdGlvbmFsX3Bvd2VyJyxcblx0XHRcdFx0XHQnaW50ZXJuYXRpb25hbF9wb3dlcicsXG5cdFx0XHRcdFx0J3N1Ym5hdGlvbmFsX3ByZWRvbWluYWNlJyxcblx0XHRcdFx0XHQncmVzb3VyY2VzJyxcblx0XHRcdFx0XHQnb3RoZXInXG5cdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQ29uZmxpY3RuYXRpb25DdHJsJywgZnVuY3Rpb24oJHRpbWVvdXQsICRzdGF0ZSwgJHJvb3RTY29wZSwgbmF0aW9ucywgbmF0aW9uLCBWZWN0b3JsYXllclNlcnZpY2UsIERhdGFTZXJ2aWNlLCBEaWFsb2dTZXJ2aWNlKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLm5hdGlvbiA9IG5hdGlvbjtcblx0XHR2bS5zaG93TWV0aG9kID0gc2hvd01ldGhvZDtcblx0XHR2bS5saW5lYXJTY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbMCwgNV0pLnJhbmdlKFswLCAyNTZdKTtcblx0XHR2bS5jb2xvcnMgPSBbJyNkNGViZjcnLCAnIzg3Y2NlYicsICcjMzZhOGM2JywgJyMyNjgzOTknLCAnIzBlNjM3NyddO1xuXHRcdHZtLnJlbGF0aW9ucyA9IFtdO1xuXHRcdHZtLmZlYXR1cmVkID0gW107XG5cdFx0dm0uY29uZmxpY3QgPSBudWxsO1xuXHRcdHZtLmdldFRlbmRlbmN5ID0gZ2V0VGVuZGVuY3k7XG5cdFx0dm0uY2lyY2xlT3B0aW9ucyA9IHtcblx0XHRcdGNvbG9yOiAnIzRmYjBlNScsXG5cdFx0XHRmaWVsZDogJ2ludGVuc2l0eScsXG5cdFx0XHRzaXplOiA1LFxuXHRcdFx0aGlkZU51bWJlcmluZzogdHJ1ZSxcblx0XHRcdHdpZHRoOjY1LFxuXHRcdFx0aGVpZ2h0OjY1XG5cdFx0fTtcblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cblx0XHRcdCRyb290U2NvcGUuZ3JleWVkID0gdHJ1ZTtcblx0XHRcdCRyb290U2NvcGUuZmVhdHVyZUl0ZW1zID0gW107XG5cblx0XHRcdG5hdGlvbnMuZ2V0TGlzdCgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0dm0uY29uZmxpY3RzID0gcmVzcG9uc2U7XG5cdFx0XHRcdHZtLnJlbGF0aW9ucy5wdXNoKHZtLm5hdGlvbi5pc28pO1xuXHRcdFx0XHR2bS5mZWF0dXJlZCA9IFtdO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2UucmVzZXRTZWxlY3RlZCh2bS5uYXRpb24uaXNvKTtcblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldERhdGEodm0uY29uZmxpY3RzLCB2bS5jb2xvcnMsIHRydWUpO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0U3R5bGUoaW52ZXJ0ZWRTdHlsZSk7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5jb3VudHJ5Q2xpY2soY291bnRyeUNsaWNrKTtcblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldFNlbGVjdGVkRmVhdHVyZSh2bS5uYXRpb24uaXNvLCB0cnVlKTtcblx0XHRcdFx0JHJvb3RTY29wZS5mZWF0dXJlSXRlbXMgPSBbXTtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLm5hdGlvbi5jb25mbGljdHMsIGZ1bmN0aW9uKGNvbmZsaWN0KSB7XG5cdFx0XHRcdFx0aWYgKCF2bS5jb25mbGljdCkgdm0uY29uZmxpY3QgPSBjb25mbGljdDtcblx0XHRcdFx0XHRpZiAoY29uZmxpY3QuaW50MjAxNSA+IHZtLmNvbmZsaWN0LmludDIwMTUpIHtcblx0XHRcdFx0XHRcdHZtLmNvbmZsaWN0ID0gY29uZmxpY3Q7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb25mbGljdCwgZnVuY3Rpb24oaXRlbSwga2V5KXtcblx0XHRcdFx0XHRcdGlmKGl0ZW0gPT0gMSApe1xuXHRcdFx0XHRcdFx0XHRpZih2bS5mZWF0dXJlZC5pbmRleE9mKGtleSkgPT0gLTEpe1xuXHRcdFx0XHRcdFx0XHRcdHZtLmZlYXR1cmVkLnB1c2goa2V5KTtcblx0XHRcdFx0XHRcdFx0XHQkcm9vdFNjb3BlLmZlYXR1cmVJdGVtcyA9IHZtLmZlYXR1cmVkO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb25mbGljdC5uYXRpb25zLCBmdW5jdGlvbihuYXRpb24pIHtcblx0XHRcdFx0XHRcdHZhciBpID0gdm0ucmVsYXRpb25zLmluZGV4T2YobmF0aW9uLmlzbyk7XG5cdFx0XHRcdFx0XHRpZiAoaSA9PSAtMSAmJiBuYXRpb24uaXNvICE9IHZtLm5hdGlvbi5pc28pIHtcblx0XHRcdFx0XHRcdFx0dm0ucmVsYXRpb25zLnB1c2gobmF0aW9uLmlzbylcblx0XHRcdFx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnNldFNlbGVjdGVkRmVhdHVyZShuYXRpb24uaXNvLCB0cnVlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0VmVjdG9ybGF5ZXJTZXJ2aWNlLnBhaW50Q291bnRyaWVzKGludmVydGVkU3R5bGUpO1xuXHRcdFx0XHQvKkRhdGFTZXJ2aWNlLmdldE9uZSgnY291bnRyaWVzL2Jib3gnLCB2bS5yZWxhdGlvbnMpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHR2YXIgc291dGhXZXN0ID0gTC5sYXRMbmcoZGF0YS5jb29yZGluYXRlc1swXVswXVsxXSwgZGF0YS5jb29yZGluYXRlc1swXVswXVswXSksXG5cdFx0XHRcdFx0XHRub3J0aEVhc3QgPSBMLmxhdExuZyhkYXRhLmNvb3JkaW5hdGVzWzBdWzJdWzFdLCBkYXRhLmNvb3JkaW5hdGVzWzBdWzJdWzBdKSxcblx0XHRcdFx0XHRcdGJvdW5kcyA9IEwubGF0TG5nQm91bmRzKHNvdXRoV2VzdCwgbm9ydGhFYXN0KTtcblxuXHRcdFx0XHRcdHZhciBwYWQgPSBbXG5cdFx0XHRcdFx0XHRbMCwgMF0sXG5cdFx0XHRcdFx0XHRbNTAsIDUwXVxuXHRcdFx0XHRcdF07XG5cblx0XHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2UubWFwTGF5ZXIuZml0Qm91bmRzKGJvdW5kcywge1xuXHRcdFx0XHRcdFx0cGFkZGluZzogcGFkWzFdLFxuXHRcdFx0XHRcdFx0bWF4Wm9vbTogNFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTsqL1xuXHRcdFx0fSlcblxuXG5cblx0XHR9XG5cblxuXHRcdGZ1bmN0aW9uIHNob3dNZXRob2QoKSB7XG5cdFx0XHREaWFsb2dTZXJ2aWNlLmZyb21UZW1wbGF0ZSgnY29uZmxpY3RtZXRob2RlJyk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0VGVuZGVuY3koKSB7XG5cdFx0XHRpZiAodm0uY29uZmxpY3QgPT0gbnVsbCkgcmV0dXJuIFwicmVtb3ZlXCI7XG5cdFx0XHRpZiAodm0uY29uZmxpY3QuaW50MjAxNSA9PSB2bS5jb25mbGljdC5pbnQyMDE0KVxuXHRcdFx0XHRyZXR1cm4gXCJyZW1vdmVcIjtcblx0XHRcdGlmICh2bS5jb25mbGljdC5pbnQyMDE1IDwgdm0uY29uZmxpY3QuaW50MjAxNClcblx0XHRcdFx0cmV0dXJuIFwidHJlbmRpbmdfZG93blwiO1xuXG5cdFx0XHRyZXR1cm4gXCJ0cmVuZGluZ191cFwiO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNvdW50cnlDbGljayhldnQsIHQpIHtcblxuXHRcdFx0dmFyIGNvdW50cnkgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TmF0aW9uQnlJc28oZXZ0LmZlYXR1cmUucHJvcGVydGllc1snaXNvX2EyJ10pO1xuXHRcdFx0aWYgKHR5cGVvZiBjb3VudHJ5WydpbnRlbnNpdHknXSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuY29uZmxpY3QuaW5kZXgubmF0aW9uJywge1xuXHRcdFx0XHRcdGlzbzogY291bnRyeS5pc29cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaW52ZXJ0ZWRTdHlsZShmZWF0dXJlKSB7XG5cdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdHZhciBpc28gPSBmZWF0dXJlLnByb3BlcnRpZXNbVmVjdG9ybGF5ZXJTZXJ2aWNlLmRhdGEuaXNvMl07XG5cdFx0XHR2YXIgbmF0aW9uID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE5hdGlvbkJ5SXNvKGlzbyk7XG5cdFx0XHR2YXIgZmllbGQgPSAnaW50ZW5zaXR5Jztcblx0XHRcdHZhciBjb2xvclBvcyA9IHBhcnNlSW50KHZtLmxpbmVhclNjYWxlKHBhcnNlRmxvYXQobmF0aW9uW2ZpZWxkXSkpKSAqIDQ7IC8vIHBhcnNlSW50KDI1NiAvIHZtLnJhbmdlLm1heCAqIHBhcnNlSW50KG5hdGlvbltmaWVsZF0pKSAqIDQ7XG5cblx0XHRcdHZhciBjb2xvciA9ICdyZ2JhKCcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvc10gKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywwLjYpJztcblx0XHRcdHZhciBjb2xvckZ1bGwgPSAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAyXSArICcsJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgM10gKyAnKSc7XG5cdFx0XHRzdHlsZS5jb2xvciA9ICdyZ2JhKDAsMCwwLDApJztcblx0XHRcdHN0eWxlLm91dGxpbmUgPSB7XG5cdFx0XHRcdGNvbG9yOiAncmdiYSgwLDAsMCwwKScsXG5cdFx0XHRcdHNpemU6IDBcblx0XHRcdH07XG5cdFx0XHR2YXIgb3V0bGluZSA9IHtcblx0XHRcdFx0Y29sb3I6IGNvbG9yLFxuXHRcdFx0XHRzaXplOiAxXG5cdFx0XHR9O1xuXHRcdFx0aWYgKGlzbyA9PSB2bS5uYXRpb24uaXNvKSB7XG5cdFx0XHRcdG91dGxpbmUgPSB7XG5cdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDU0LDU2LDU5LDAuOCknLFxuXHRcdFx0XHRcdHNpemU6IDJcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29sb3IgPSBjb2xvcjtcblx0XHRcdH1cblx0XHRcdHN0eWxlLnNlbGVjdGVkID0ge1xuXHRcdFx0XHRjb2xvcjogY29sb3IsXG5cdFx0XHRcdG91dGxpbmU6IG91dGxpbmVcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gc3R5bGU7XG5cdFx0fVxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdDb25mbGljdHNDdHJsJywgZnVuY3Rpb24gKCR0aW1lb3V0LCAkc3RhdGUsICRyb290U2NvcGUsICRzY29wZSwgY29uZmxpY3RzLCBuYXRpb25zLCBWZWN0b3JsYXllclNlcnZpY2UsIFJlc3Rhbmd1bGFyLCBEaWFsb2dTZXJ2aWNlLCBGdWxsc2NyZWVuKSB7XG5cdFx0Ly9cblxuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0ucmVhZHkgPSBmYWxzZTtcblx0XHR2bS5yZWxhdGlvbnMgPSBbXTtcblx0XHR2bS5zaG93TWV0aG9kID0gc2hvd01ldGhvZDtcblx0XHR2bS5nb0Z1bGxzY3JlZW4gPSBnb0Z1bGxzY3JlZW47XG5cdFx0dm0ubGluZWFyU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsIDVdKS5yYW5nZShbMCwgMjU2XSk7XG5cdFx0dm0uY29sb3JzID0gWycjYWRkOWYwJywgJyM4N2NjZWInLCAnIzM2YThjNicsICcjMjY4Mzk5JywgJyMwMDU1NzMnXTtcblx0XHR2bS50eXBlc0NvbG9ycyA9IHtcblx0XHRcdGludGVyc3RhdGU6ICcjNjlkNGMzJyxcblx0XHRcdGludHJhc3RhdGU6ICcjYjdiN2I3Jyxcblx0XHRcdHN1YnN0YXRlOiAnI2ZmOWQyNydcblx0XHR9O1xuXHRcdHZtLmFjdGl2ZSA9IHtcblx0XHRcdGNvbmZsaWN0OiBbXSxcblx0XHRcdHR5cGU6IFsxLCAyLCAzXVxuXHRcdH07XG5cdFx0dm0udG9nZ2xlQ29uZmxpY3RGaWx0ZXIgPSB0b2dnbGVDb25mbGljdEZpbHRlcjtcblx0XHR2bS5jb25mbGljdEZpbHRlciA9IG51bGw7XG5cblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdCRyb290U2NvcGUuZ3JleWVkID0gdHJ1ZTtcblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXRTdHlsZShjb3VudHJpZXNTdHlsZSk7XG5cdFx0XHRWZWN0b3JsYXllclNlcnZpY2UuY291bnRyeUNsaWNrKGNvdW50cnlDbGljayk7XG5cdFx0XHRuYXRpb25zLmdldExpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdFx0XHR2bS5uYXRpb25zID0gcmVzcG9uc2U7XG5cdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXREYXRhKHZtLm5hdGlvbnMsIHZtLmNvbG9ycywgdHJ1ZSk7XG5cdFx0XHR9KTtcblx0XHRcdGNvbmZsaWN0cy5nZXRMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdFx0dm0uY29uZmxpY3RzID0gcmVzcG9uc2U7XG5cdFx0XHRcdGNhbGNJbnRlbnNpdGllcygpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vXHQkdGltZW91dChmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly99KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnb0Z1bGxzY3JlZW4oKSB7XG5cblx0XHQgaWYgKEZ1bGxzY3JlZW4uaXNFbmFibGVkKCkpXG5cdFx0XHRcdEZ1bGxzY3JlZW4uY2FuY2VsKCk7XG5cdFx0IGVsc2Vcblx0XHRcdFx0RnVsbHNjcmVlbi5hbGwoKTtcblxuXHRcdCAvLyBTZXQgRnVsbHNjcmVlbiB0byBhIHNwZWNpZmljIGVsZW1lbnQgKGJhZCBwcmFjdGljZSlcblx0XHQgLy8gRnVsbHNjcmVlbi5lbmFibGUoIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWcnKSApXG5cblx0fVxuXHRcdGZ1bmN0aW9uIHNldFZhbHVlcygpIHtcblx0XHRcdHZtLnJlbGF0aW9ucyA9IFtdO1xuXHRcdFx0dm0uY29uZmxpY3RGaWx0ZXJDb3VudCA9IDA7XG5cdFx0XHR2bS5jb25mbGljdEludGVuc2l0aWVzID0ge1xuXHRcdFx0XHR2ZXJ5TG93OiAwLFxuXHRcdFx0XHRsb3c6IDAsXG5cdFx0XHRcdG1pZDogMCxcblx0XHRcdFx0aGlnaDogMCxcblx0XHRcdFx0dmVyeUhpZ2g6IDBcblx0XHRcdH07XG5cdFx0XHR2bS5jaGFydERhdGEgPSBbe1xuXHRcdFx0XHRsYWJlbDogMSxcblx0XHRcdFx0dmFsdWU6IDAsXG5cdFx0XHRcdGNvbG9yOiB2bS5jb2xvcnNbMF1cblx0XHRcdH0sIHtcblx0XHRcdFx0bGFiZWw6IDIsXG5cdFx0XHRcdHZhbHVlOiAwLFxuXHRcdFx0XHRjb2xvcjogdm0uY29sb3JzWzFdXG5cdFx0XHR9LCB7XG5cdFx0XHRcdGxhYmVsOiAzLFxuXHRcdFx0XHR2YWx1ZTogMCxcblx0XHRcdFx0Y29sb3I6IHZtLmNvbG9yc1syXVxuXHRcdFx0fSwge1xuXHRcdFx0XHRsYWJlbDogNCxcblx0XHRcdFx0dmFsdWU6IDAsXG5cdFx0XHRcdGNvbG9yOiB2bS5jb2xvcnNbM11cblx0XHRcdH0sIHtcblx0XHRcdFx0bGFiZWw6IDUsXG5cdFx0XHRcdHZhbHVlOiAwLFxuXHRcdFx0XHRjb2xvcjogdm0uY29sb3JzWzRdXG5cdFx0XHR9XTtcblxuXHRcdFx0dm0uY29uZmxpY3RUeXBlcyA9IFt7XG5cdFx0XHRcdHR5cGU6ICdpbnRlcnN0YXRlJyxcblx0XHRcdFx0dHlwZV9pZDogMSxcblx0XHRcdFx0Y29sb3I6ICcjNjlkNGMzJyxcblx0XHRcdFx0Y291bnQ6IDBcblx0XHRcdH0sIHtcblx0XHRcdFx0dHlwZTogJ2ludHJhc3RhdGUnLFxuXHRcdFx0XHRjb3VudDogMCxcblx0XHRcdFx0dHlwZV9pZDogMixcblx0XHRcdFx0Y29sb3I6ICcjYjdiN2I3J1xuXHRcdFx0fSwge1xuXHRcdFx0XHR0eXBlOiAnc3Vic3RhdGUnLFxuXHRcdFx0XHRjb3VudDogMCxcblx0XHRcdFx0dHlwZV9pZDogMyxcblx0XHRcdFx0Y29sb3I6ICcjZmY5ZDI3J1xuXHRcdFx0fV07XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzaG93TWV0aG9kKCkge1xuXHRcdFx0RGlhbG9nU2VydmljZS5mcm9tVGVtcGxhdGUoJ2NvbmZsaWN0bWV0aG9kZScpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUNvbmZsaWN0RmlsdGVyKHR5cGUpIHtcblxuXHRcdFx0dmFyIGkgPSB2bS5hY3RpdmUudHlwZS5pbmRleE9mKHR5cGUpO1xuXHRcdFx0aWYgKGkgPiAtMSkge1xuXHRcdFx0XHR2bS5hY3RpdmUudHlwZS5zcGxpY2UoaSwgMSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5hY3RpdmUudHlwZS5wdXNoKHR5cGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHZtLmFjdGl2ZS50eXBlLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRcdHZtLmFjdGl2ZS50eXBlID0gWzEsIDIsIDNdO1xuXHRcdFx0fVxuXHRcdFx0Y2FsY0ludGVuc2l0aWVzKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2FsY0NvbmZsaWN0KGNvbmZsaWN0KSB7XG5cdFx0XHR2bS5jb25mbGljdEZpbHRlckNvdW50Kys7XG5cdFx0XHRzd2l0Y2ggKGNvbmZsaWN0LnR5cGVfaWQpIHtcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0dm0uY29uZmxpY3RUeXBlc1swXS5jb3VudCsrO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0dm0uY29uZmxpY3RUeXBlc1sxXS5jb3VudCsrO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMzpcblx0XHRcdFx0dm0uY29uZmxpY3RUeXBlc1syXS5jb3VudCsrO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdH1cblx0XHRcdHN3aXRjaCAoY29uZmxpY3QuaW50MjAxNSkge1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHR2bS5jb25mbGljdEludGVuc2l0aWVzLnZlcnlMb3crKztcblx0XHRcdFx0dm0uY2hhcnREYXRhWzBdLnZhbHVlKys7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHR2bS5jb25mbGljdEludGVuc2l0aWVzLmxvdysrO1xuXHRcdFx0XHR2bS5jaGFydERhdGFbMV0udmFsdWUrKztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDM6XG5cdFx0XHRcdHZtLmNvbmZsaWN0SW50ZW5zaXRpZXMubWlkKys7XG5cdFx0XHRcdHZtLmNoYXJ0RGF0YVsyXS52YWx1ZSsrO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNDpcblx0XHRcdFx0dm0uY29uZmxpY3RJbnRlbnNpdGllcy5oaWdoKys7XG5cdFx0XHRcdHZtLmNoYXJ0RGF0YVszXS52YWx1ZSsrO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgNTpcblx0XHRcdFx0dm0uY29uZmxpY3RJbnRlbnNpdGllcy52ZXJ5SGlnaCsrO1xuXHRcdFx0XHR2bS5jaGFydERhdGFbNF0udmFsdWUrKztcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0fVxuXHRcdFx0YWRkQ291bnRyaWVzKGNvbmZsaWN0Lm5hdGlvbnMpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBhZGRDb3VudHJpZXMobmF0aW9ucyl7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2gobmF0aW9ucywgZnVuY3Rpb24obmF0KXtcblx0XHRcdFx0aWYodm0ucmVsYXRpb25zLmluZGV4T2YobmF0LmlzbykgPT0gLTEpe1xuXHRcdFx0XHRcdHZtLnJlbGF0aW9ucy5wdXNoKG5hdC5pc28pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY2FsY0ludGVuc2l0aWVzKCkge1xuXHRcdFx0c2V0VmFsdWVzKCk7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uY29uZmxpY3RzLCBmdW5jdGlvbiAoY29uZmxpY3QpIHtcblx0XHRcdFx0aWYgKHZtLmFjdGl2ZS50eXBlLmxlbmd0aCkge1xuXHRcdFx0XHRcdGlmICh2bS5hY3RpdmUudHlwZS5pbmRleE9mKGNvbmZsaWN0LnR5cGVfaWQpID4gLTEpIHtcblx0XHRcdFx0XHRcdGNhbGNDb25mbGljdChjb25mbGljdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNhbGNDb25mbGljdChjb25mbGljdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0dm0ucmVhZHkgPSB0cnVlO1xuXHRcdFx0Ly9WZWN0b3JsYXllclNlcnZpY2UucmVkcmF3KCk7XG5cdFx0XHRWZWN0b3JsYXllclNlcnZpY2UucGFpbnRDb3VudHJpZXMoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjb3VudHJ5Q2xpY2soZXZ0LCB0KSB7XG5cdFx0XHR2YXIgY291bnRyeSA9IFZlY3RvcmxheWVyU2VydmljZS5nZXROYXRpb25CeUlzbyhldnQuZmVhdHVyZS5wcm9wZXJ0aWVzWydpc29fYTInXSk7XG5cdFx0XHRpZiAodHlwZW9mIGNvdW50cnlbJ2ludGVuc2l0eSddICE9IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuY29uZmxpY3QuaW5kZXgubmF0aW9uJywge1xuXHRcdFx0XHRcdGlzbzogY291bnRyeS5pc29cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY291bnRyaWVzU3R5bGUoZmVhdHVyZSkge1xuXHRcdFx0dmFyIHN0eWxlID0ge307XG5cdFx0XHR2YXIgaXNvID0gZmVhdHVyZS5wcm9wZXJ0aWVzW1ZlY3RvcmxheWVyU2VydmljZS5kYXRhLmlzbzJdO1xuXHRcdFx0dmFyIG5hdGlvbiA9IFZlY3RvcmxheWVyU2VydmljZS5nZXROYXRpb25CeUlzbyhpc28pO1xuXG5cdFx0XHR2YXIgZmllbGQgPSAnaW50ZW5zaXR5Jztcblx0XHRcdHZhciB0eXBlID0gZmVhdHVyZS50eXBlO1xuXHRcdFx0ZmVhdHVyZS5zZWxlY3RlZCA9IGZhbHNlO1xuXHRcdFx0aWYodm0ucmVsYXRpb25zLmluZGV4T2YoaXNvKSA9PSAtMSl7XG5cdFx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoMjU1LDI1NSwyNTUsMCknO1xuXHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwKScsXG5cdFx0XHRcdFx0c2l6ZTogMVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdGNhc2UgMzogLy8nUG9seWdvbidcblx0XHRcdFx0XHRpZiAodHlwZW9mIG5hdGlvbltmaWVsZF0gIT0gXCJ1bmRlZmluZWRcIiAmJiBuYXRpb25bZmllbGRdICE9IG51bGwgJiYgaXNvKSB7XG5cdFx0XHRcdFx0XHR2YXIgY29sb3JQb3MgPSBwYXJzZUludCh2bS5saW5lYXJTY2FsZShwYXJzZUZsb2F0KG5hdGlvbltmaWVsZF0pKSkgKiA0OyAvLyBwYXJzZUludCgyNTYgLyB2bS5yYW5nZS5tYXggKiBwYXJzZUludChuYXRpb25bZmllbGRdKSkgKiA0O1xuXHRcdFx0XHRcdFx0dmFyIGNvbG9yID0gJ3JnYmEoJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDFdICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLCcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDNdICsgJyknO1xuXHRcdFx0XHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAyXSArICcsMC42KSc7IC8vY29sb3I7XG5cdFx0XHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogY29sb3IsXG5cdFx0XHRcdFx0XHRcdHNpemU6IDFcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRzdHlsZS5zZWxlY3RlZCA9IHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKCcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvc10gKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAzXSArICcpJyxcblx0XHRcdFx0XHRcdFx0b3V0bGluZToge1xuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiAncmdiYSg2Niw2Niw2NiwwLjkpJyxcblx0XHRcdFx0XHRcdFx0XHRzaXplOiAyXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgyNTUsMjU1LDI1NSwwKSc7XG5cdFx0XHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMCknLFxuXHRcdFx0XHRcdFx0XHRzaXplOiAxXG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblxuXHRcdFx0cmV0dXJuIHN0eWxlO1xuXHRcdH07XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignRXhwb3J0Q3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwgRXhwb3J0U2VydmljZSkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5leHBvcnRzID0gW107XG5cdFx0dm0uRXhwb3J0U2VydmljZSA9IEV4cG9ydFNlcnZpY2U7XG5cdFx0dm0uc2VsZWN0aW9uID0gW107XG5cdFx0dm0ub3B0aW9ucyA9IHtcblx0XHRcdGRyYWc6IGZhbHNlLFxuXHRcdFx0dHlwZTogJ2V4cG9ydHMnLFxuXHRcdFx0YWxsb3dNb3ZlOiBmYWxzZSxcblx0XHRcdGFsbG93RHJvcDogZmFsc2UsXG5cdFx0XHRhbGxvd0FkZDogdHJ1ZSxcblx0XHRcdGFsbG93RGVsZXRlOiB0cnVlLFxuXHRcdFx0aXRlbUNsaWNrOiBmdW5jdGlvbihpZCwgbmFtZSkge1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5leHBvcnRzLmRldGFpbHMnLCB7XG5cdFx0XHRcdFx0aWQ6IGlkLFxuXHRcdFx0XHRcdG5hbWU6IG5hbWVcblx0XHRcdFx0fSlcblx0XHRcdH0sXG5cdFx0XHRhZGRDbGljazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmV4cG9ydHMuZGV0YWlscycsIHtcblx0XHRcdFx0XHRpZDogMCxcblx0XHRcdFx0XHRuYW1lOiAnbmV3J1xuXHRcdFx0XHR9KVxuXHRcdFx0fSxcblx0XHRcdGRlbGV0ZUNsaWNrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNlbGVjdGlvbiwgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG5cdFx0XHRcdFx0dm0uRXhwb3J0U2VydmljZS5yZW1vdmVJdGVtKGl0ZW0uaWQsIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRcdGlmICgkc3RhdGUucGFyYW1zLmlkID09IGl0ZW0uaWQpIHtcblx0XHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZXhwb3J0cycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dmFyIGlkeCA9IHZtLmV4cG9ydHMuaW5kZXhPZihpdGVtKTtcblx0XHRcdFx0XHRcdHZtLkV4cG9ydFNlcnZpY2UuZXhwb3J0cy5zcGxpY2UoaWR4LCAxKTtcblx0XHRcdFx0XHRcdHZtLnNlbGVjdGlvbiA9IFtdO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly8kc3RhdGUuZ28oJ2FwcC5pbmRleC5lZGl0b3IuaW5kaXplcycpO1xuXHRcdFx0fVxuXHRcdH07XG5cblxuXG5cblx0XHR2bS5FeHBvcnRTZXJ2aWNlLmdldEV4cG9ydHMoZnVuY3Rpb24oZGF0YSkge30pO1xuXG5cdH0pO1xuXG59KSgpOyIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0V4cG9ydERldGFpbHNDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIEV4cG9ydFNlcnZpY2UpIHtcblx0XHQvL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uRXhwb3J0U2VydmljZSA9IEV4cG9ydFNlcnZpY2U7XG5cdFx0dm0uc2VsZWN0ZWQgPSBbXTtcblx0XHR2bS5vcHRpb25zID0ge1xuXHRcdFx0ZXhwb3J0czoge1xuXHRcdFx0XHRvbkRyb3A6IGZ1bmN0aW9uKGV2ZW50LCBpbmRleCwgaXRlbSwgZXh0ZXJuYWwpIHtcblx0XHRcdFx0XHRpdGVtLmluZGljYXRvcl9pZCA9IGl0ZW0uaWQ7XG5cdFx0XHRcdFx0aXRlbS50eXBlID0gJ2luZGljYXRvcic7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGluc2VydGVkOiBmdW5jdGlvbihldmVudCwgaW5kZXgsIGl0ZW0sIGV4dGVybmFsKSB7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0YWRkQ2xpY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmV4cG9ydHMuZGV0YWlscy5hZGQnKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWRkQ29udGFpbmVyQ2xpY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBpdGVtID0ge1xuXHRcdFx0XHRcdFx0aWQ6IERhdGUubm93KCksXG5cdFx0XHRcdFx0XHR0aXRsZTogJ0kgYW0gYSBncm91cC4uLiBuYW1lIG1lJyxcblx0XHRcdFx0XHRcdHR5cGU6ICdncm91cCdcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHZtLkV4cG9ydFNlcnZpY2UuZXhwb3J0ZXIuaXRlbXMucHVzaChpdGVtKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkZWxldGVDbGljazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNlbGVjdGVkLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcblx0XHRcdFx0XHRcdHJlbW92ZUl0ZW0oaXRlbSwgdm0uRXhwb3J0U2VydmljZS5leHBvcnRlci5pdGVtcyk7XG5cdFx0XHRcdFx0XHQvL0V4cG9ydFNlcnZpY2UucmVtb3ZlSXRlbSh2bSxpdGVtLmlkKTtcblx0XHRcdFx0XHRcdHZtLnNlbGVjdGVkID0gW107XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGV0ZURyb3A6IGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBleHRlcm5hbCwgdHlwZSkge1xuXHRcdFx0XHRcdHJlbW92ZUl0ZW0oaXRlbSwgdm0uZXhwb3J0Lml0ZW1zKTtcblx0XHRcdFx0XHR2bS5zZWxlY3Rpb24gPSBbXTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c2F2ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dm0uRXhwb3J0U2VydmljZS5zYXZlKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cblx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmV4cG9ydHMuZGV0YWlscycsIHtcblx0XHRcdFx0XHRcdFx0aWQ6IHJlc3BvbnNlLmlkLFxuXHRcdFx0XHRcdFx0XHRuYW1lOiByZXNwb25zZS5uYW1lXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vIGlmKHZtLmV4cG9ydC5pZCA9PSAwIHx8ICEgdm0uZXhwb3J0LmlkKXtcblx0XHRcdFx0XHQvLyAgIERhdGFTZXJ2aWNlLnBvc3QoJ2V4cG9ydHMnLCB2bS5leHBvcnQpLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdC8vICAgfSk7XG5cdFx0XHRcdFx0Ly8gfVxuXHRcdFx0XHRcdC8vIGVsc2V7XG5cdFx0XHRcdFx0Ly8gICB2bS5pdGVtLnNhdmUoKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdC8vICAgfSk7XG5cdFx0XHRcdFx0Ly8gfVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5leHBvcnRzLmRldGFpbHMuc3R5bGUnLCB7XG5cdFx0XHRcdFx0XHRzdHlsZUlkOiBpdGVtLmlkLFxuXHRcdFx0XHRcdFx0c3R5bGVOYW1lOiBpdGVtLm5hbWVcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0d2l0aFNhdmU6IHRydWUsXG5cdFx0XHRzdHlsZWFibGU6IHRydWUsXG5cdFx0XHRleHBhbmRKdXN0R3JvdXBzOiB0cnVlXG5cdFx0fTtcblxuXHRcdGlmICgkc3RhdGUucGFyYW1zLmlkICE9IDApIHtcblx0XHRcdHZtLkV4cG9ydFNlcnZpY2UuZ2V0RXhwb3J0KCRzdGF0ZS5wYXJhbXMuaWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2bS5FeHBvcnRTZXJ2aWNlLnNldEV4cG9ydCh7XG5cdFx0XHRcdGl0ZW1zOiBbXVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cblx0XHRmdW5jdGlvbiByZW1vdmVJdGVtKGl0ZW0sIGxpc3QpIHtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbihlbnRyeSwga2V5KSB7XG5cdFx0XHRcdGlmIChlbnRyeS5pZCA9PSBpdGVtLmlkKSB7XG5cdFx0XHRcdFx0bGlzdC5zcGxpY2Uoa2V5LCAxKTtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZW50cnkuY2hpbGRyZW4pIHtcblx0XHRcdFx0XHR2YXIgc3VicmVzdWx0ID0gcmVtb3ZlSXRlbShpdGVtLCBlbnRyeS5jaGlsZHJlbik7XG5cdFx0XHRcdFx0aWYgKHN1YnJlc3VsdCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHN1YnJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdFeHBvcnRMYXlvdXRDdHJsJywgZnVuY3Rpb24oRXhwb3J0U2VydmljZSwkc3RhdGUsICR0aW1lb3V0KXtcbiAgICAgICAgLy9cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZXhwb3J0ZXIgPSBFeHBvcnRTZXJ2aWNlLmV4cG9ydGVyO1xuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCl7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgdm0uZXhwb3J0ZXIgPSBFeHBvcnRTZXJ2aWNlLmV4cG9ydGVyO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gRXhwb3J0U2VydmljZS5nZXRFeHBvcnQoJHN0YXRlLnBhcmFtcy5pZCwgZnVuY3Rpb24oZXhwb3J0ZXIpe1xuICAgICAgICAgICAgLy8gICB2bS5leHBvcnRlciA9IGV4cG9ydGVyO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgIH1cblxuXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdFeHBvcnRTdHlsZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJHRpbWVvdXQsIENvbnRlbnRTZXJ2aWNlLCBFeHBvcnRTZXJ2aWNlLCBJbmRpemVzU2VydmljZSwgbGVhZmxldERhdGEsIGxlYWZsZXRNYXBFdmVudHMsIFZlY3RvcmxheWVyU2VydmljZSwgQ291bnRyaWVzU2VydmljZSwgQ29sb3JIYW5kbGVTZXJ2aWNlKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5Db2xvckhhbmRsZSA9IENvbG9ySGFuZGxlU2VydmljZTtcblx0XHR2bS5leHBvcnRlciA9IHt9O1xuXHRcdHZtLml0ZW0gPSB7fTtcblx0XHR2bS5jb2xvckhhbmRsZXMgPSBbbmV3IHZtLkNvbG9ySGFuZGxlKCdyZ2JhKDAsIDAsIDAsIDEuMDApJywgMC4wMCksIG5ldyB2bS5Db2xvckhhbmRsZSgncmdiYSgwLCAwLCAwLCAwLjAwKScsIDEuMDApXVxuXHRcdHZtLmNvbnRpbmVudE9wdGlvbnMgPSB7XG5cdFx0XHRvbmx5V2l0aENoaWxkcmVuOiB0cnVlXG5cdFx0fTtcblx0XHR2bS5ncmFkaWVudCA9IFtcblx0XHRcdHtcblx0XHRcdFx0Y29sb3I6J3JnYmEoMjU1LDEyLDE3LDAuNSknLFxuXHRcdFx0XHRwb3M6IDAsXG5cdFx0XHRcdGFscGhhOjEsXG5cdFx0XHRcdGlkOiBNYXRoLnJhbmRvbSgpXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRjb2xvcjonIzAwZmYwMCcsXG5cdFx0XHRcdHBvczogNTAsXG5cdFx0XHRcdGFscGhhOjEsXG5cdFx0XHRcdGlkOiBNYXRoLnJhbmRvbSgpXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRjb2xvcjonIzAwMDBmZicsXG5cdFx0XHRcdHBvczogMTAwLFxuXHRcdFx0XHRhbHBoYToxLFxuXHRcdFx0XHRpZDogTWF0aC5yYW5kb20oKVxuXHRcdFx0fSxcblx0XHRdXG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0dm0uZXhwb3J0ZXIgPSBFeHBvcnRTZXJ2aWNlLmV4cG9ydGVyO1xuXHRcdFx0XHQvLyBpZighdm0uZXhwb3J0ZXIuaXRlbXMubGVuZ3RoKSAkc3RhdGUuZ28oJ2FwcC5pbmRleC5leHBvcnRzLmRldGFpbHMnLHtcblx0XHRcdFx0Ly8gICBpZDogJHN0YXRlLnBhcmFtcy5pZCxcblx0XHRcdFx0Ly8gICBuYW1lOiAkc3RhdGUucGFyYW1zLm5hbWVcblx0XHRcdFx0Ly8gfSlcblx0XHRcdFx0dm0uaXRlbSA9IGdldEFjdGl2ZUl0ZW0odm0uZXhwb3J0ZXIuaXRlbXMsICRzdGF0ZS5wYXJhbXMuc3R5bGVJZCk7XG5cdFx0XHRcdGlmICh0eXBlb2Ygdm0uaXRlbSA9PSBcInVuZGVmaW5lZFwiKSAkc3RhdGUuZ28oJ2FwcC5pbmRleC5leHBvcnRzLmRldGFpbHMnLCB7XG5cdFx0XHRcdFx0aWQ6ICRzdGF0ZS5wYXJhbXMuaWQsXG5cdFx0XHRcdFx0bmFtZTogJHN0YXRlLnBhcmFtcy5uYW1lXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXZtLml0ZW0uc3R5bGUpIHtcblx0XHRcdFx0XHR2bS5pdGVtLnN0eWxlID0ge1xuXHRcdFx0XHRcdFx0YmFzZW1hcF9pZDogMCxcblx0XHRcdFx0XHRcdGZpeGVkX3RpdGxlOiBmYWxzZSxcblx0XHRcdFx0XHRcdGZpeGVkX2Rlc2NyaXB0aW9uOiBmYWxzZSxcblx0XHRcdFx0XHRcdHNlYXJjaF9ib3g6IHRydWUsXG5cdFx0XHRcdFx0XHRzaGFyZV9vcHRpb25zOiB0cnVlLFxuXHRcdFx0XHRcdFx0em9vbV9jb250cm9sczogdHJ1ZSxcblx0XHRcdFx0XHRcdHNjcm9sbF93aGVlbF96b29tOiBmYWxzZSxcblx0XHRcdFx0XHRcdGxheWVyX3NlbGVjdGlvbjogZmFsc2UsXG5cdFx0XHRcdFx0XHRsZWdlbmRzOiB0cnVlLFxuXHRcdFx0XHRcdFx0ZnVsbF9zY3JlZW46IGZhbHNlLFxuXHRcdFx0XHRcdFx0Y291bnRyaWVzOiBbXVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0Q29udGVudFNlcnZpY2UuZmV0Y2hJbmRpY2F0b3JXaXRoRGF0YSh2bS5pdGVtLmluZGljYXRvcl9pZCwgZnVuY3Rpb24oaW5kaWNhdG9yKSB7XG5cdFx0XHRcdFx0dm0uZGF0YSA9IGluZGljYXRvci5kYXRhO1xuXHRcdFx0XHRcdHZtLnN0cnVjdHVyZSA9IGluZGljYXRvcjtcblxuXHRcdFx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXREYXRhKGluZGljYXRvci5kYXRhLCBpbmRpY2F0b3IsIHZtLml0ZW0uc3R5bGUuYmFzZV9jb2xvciwgdHJ1ZSk7XG5cdFx0XHRcdFx0Q291bnRyaWVzU2VydmljZS5nZXRDb250aW5lbnRzKGZ1bmN0aW9uKGNvbnRpbmVudHMpIHtcblx0XHRcdFx0XHRcdHZtLmNvbnRpbmVudHMgPSBjb250aW5lbnRzXG5cdFx0XHRcdFx0fSwgdm0uaXRlbS5pbmRpY2F0b3JfaWQpO1xuXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRkYXRhOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0QWN0aXZlSXRlbShsaXN0LCBpZCkge1xuXHRcdFx0dmFyIGZvdW5kO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0aWYgKGl0ZW0uaWQgPT0gaWQpIHtcblx0XHRcdFx0XHRmb3VuZCA9IGl0ZW07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKGl0ZW0uY2hpbGRyZW4gJiYgIWZvdW5kKVxuXHRcdFx0XHRcdFx0Zm91bmQgPSBnZXRBY3RpdmVJdGVtKGl0ZW0uY2hpbGRyZW4sIGlkKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZm91bmQ7XG5cdFx0fTtcblxuXG5cdFx0JHNjb3BlLiR3YXRjaCgndm0uaXRlbS5zdHlsZScsIGZ1bmN0aW9uKG4sIG8pIHtcblx0XHRcdGlmIChuID09PSBvIHx8ICFuLmJhc2VtYXApIHJldHVybjtcblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXRCYXNlTGF5ZXIobi5iYXNlbWFwKTtcblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5wYWludChuLmJhc2VfY29sb3IpO1xuXHRcdH0sIHRydWUpO1xuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0V4cG9ydGVkQ3RybCcsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzdGF0ZSwgRXhwb3J0U2VydmljZSwgVmVjdG9ybGF5ZXJTZXJ2aWNlLCBJbmRpemVzU2VydmljZSl7XG4gICAgICAgIC8vXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLkV4cG9ydFNlcnZpY2UgPSBFeHBvcnRTZXJ2aWNlO1xuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCl7XG4gICAgICAgICAgdm0uRXhwb3J0U2VydmljZS5nZXRFeHBvcnQoJHN0YXRlLnBhcmFtcy5pZCwgZnVuY3Rpb24oZXhwb3J0ZXIpe30pO1xuICAgICAgICB9XG4gICAgICAgICRyb290U2NvcGUuc2lkZWJhck9wZW4gPSBmYWxzZTtcbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0Z1bGxMaXN0Rml0bGVyQ3RybCcsIGZ1bmN0aW9uKGNhdGVnb3JpZXMsIENvbnRlbnRTZXJ2aWNlKSB7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICB2bS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcztcblxuICAgIHZtLmZpbHRlciA9IFtdO1xuICAgIHZtLm9wdGlvbnMgPSB7XG4gICAgICBjYXRlZ29yaWVzOntcbiAgICAgICAgc2VsZWN0aW9uQ2hhbmdlZDogZnVuY3Rpb24oKXtcbiAgICAgICAgICB2bS5maWx0ZXIgPVtdO1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5zZWxlY3Rpb24sIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgbGlzdENhdGVnb3JpZXMoaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgQ29udGVudFNlcnZpY2UuZmlsdGVyTGlzdCgnaW5kaWNhdG9ycycsY2F0RmlsdGVyLHZtLnNlbGVjdGlvbik7XG4gICAgICAgICAgQ29udGVudFNlcnZpY2UuZmlsdGVyTGlzdCgnaW5kaWNlcycsY2F0RmlsdGVyLHZtLnNlbGVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGZ1bmN0aW9uIGFkZFRvRmlsdGVyKGlkKXtcbiAgICAgIHZhciBpZHggPSB2bS5maWx0ZXIuaW5kZXhPZihpZCk7XG4gICAgICBpZihpZHggPT0gLTEpe1xuICAgICAgICB2bS5maWx0ZXIucHVzaChpZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpc3RDYXRlZ29yaWVzKGNhdCl7XG4gICAgICBhZGRUb0ZpbHRlcihjYXQuaWQpO1xuICAgICAgaWYoY2F0LmNoaWxkcmVuKXtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNhdC5jaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpe1xuICAgICAgICAgIGFkZFRvRmlsdGVyKGNoaWxkLmlkKTtcbiAgICAgICAgICBsaXN0Q2F0ZWdvcmllcyhjaGlsZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gY2F0RmlsdGVyKGl0ZW0pe1xuXHRcdFx0XHRpZihpdGVtLmNhdGVnb3JpZXMubGVuZ3RoID4gMCAmJiB2bS5maWx0ZXIubGVuZ3RoID4gMCl7XG5cdFx0XHRcdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKGl0ZW0uY2F0ZWdvcmllcywgZnVuY3Rpb24oY2F0KXtcblx0XHRcdFx0XHRcdGlmKHZtLmZpbHRlci5pbmRleE9mKGNhdC5pZCkgPiAtMSl7XG5cdFx0XHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm4gZm91bmQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdGdWxsTGlzdEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsJHN0YXRlLCBDb250ZW50U2VydmljZSwgY2F0ZWdvcmllcywgaW5kaWNhdG9ycywgaW5kaWNlcykge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcztcblx0XHR2bS5pbmRpY2F0b3JzID0gaW5kaWNhdG9ycztcblx0XHR2bS5pbmRpY2VzID0gaW5kaWNlcztcblx0XHR2bS5maWx0ZXIgPSB7XG5cdFx0XHRzb3J0OiAndGl0bGUnLFxuXHRcdFx0dG9nZ2xlOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRpZigkc3RhdGUuY3VycmVudC5uYW1lID09ICdhcHAuaW5kZXgubGlzdCcpe1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4Lmxpc3QuZmlsdGVyJyx7ZmlsdGVyOidjYXRlZ29yaWVzJ30pXG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRDb250ZW50U2VydmljZS5yZXNldEZpbHRlcignaW5kaWNhdG9ycycpO1xuXHRcdFx0XHRcdENvbnRlbnRTZXJ2aWNlLnJlc2V0RmlsdGVyKCdpbmRpY2VzJyk7XG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXgubGlzdCcpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHRcdFxuXHRcdCRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gQ29udGVudFNlcnZpY2UuY29udGVudC5pbmRpY2F0b3JzfSwgZnVuY3Rpb24obiwgbyl7XG5cdFx0XHRpZihuID09PSBvIClyZXR1cm47XG5cdFx0XHR2bS5pbmRpY2F0b3JzID0gbjtcblx0XHR9KTtcblx0XHQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIENvbnRlbnRTZXJ2aWNlLmNvbnRlbnQuaW5kaWNlc30sIGZ1bmN0aW9uKG4sIG8pe1xuXHRcdFx0aWYobiA9PT0gbyApcmV0dXJuO1xuXHRcdFx0dm0uaW5kaWNlcyA9IG47XG5cdFx0fSk7XG5cdH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSGVhZGVyQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwkbWRNZWRpYSwgbGVhZmxldERhdGEsICRzdGF0ZSwkbG9jYWxTdG9yYWdlLCAkcm9vdFNjb3BlLCAkYXV0aCwgdG9hc3RyLCAkdGltZW91dCl7XG5cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdCRyb290U2NvcGUuaXNBdXRoZW50aWNhdGVkID0gaXNBdXRoZW50aWNhdGVkO1xuXHRcdHZtLmRvTG9naW4gPSBkb0xvZ2luO1xuXHRcdHZtLmRvTG9nb3V0ID0gZG9Mb2dvdXQ7XG5cdFx0dm0ub3Blbk1lbnUgPSBvcGVuTWVudTtcblx0XHR2bS50b2dnbGVWaWV3ID0gdG9nZ2xlVmlldztcblxuXHRcdHZtLmF1dGhlbnRpY2F0ZSA9IGZ1bmN0aW9uKHByb3ZpZGVyKXtcblx0XHRcdCRhdXRoLmF1dGhlbnRpY2F0ZShwcm92aWRlcik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpe1xuXHRcdFx0IHJldHVybiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gZG9Mb2dpbigpe1xuXHRcdFx0JGF1dGgubG9naW4odm0udXNlcikudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgc2lnbmVkIGluJyk7XG5cdFx0XHRcdC8vJHN0YXRlLmdvKCRyb290U2NvcGUucHJldmlvdXNQYWdlLnN0YXRlLm5hbWUgfHwgJ2FwcC5ob21lJywgJHJvb3RTY29wZS5wcmV2aW91c1BhZ2UucGFyYW1zKTtcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0dG9hc3RyLmVycm9yKCdQbGVhc2UgY2hlY2sgeW91ciBlbWFpbCBhbmQgcGFzc3dvcmQnLCAnU29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcblx0XHRcdH0pXG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGRvTG9nb3V0KCl7XG5cdFx0XHRpZigkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSl7XG5cdFx0XHRcdCRhdXRoLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0aWYoJHN0YXRlLmN1cnJlbnQuYXV0aCl7XG5cdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5ob21lJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRvYXN0ci5zdWNjZXNzKCdZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgbG9nZ2VkIG91dCcpO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbihyZXNwb25zZSl7XG5cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG4gICAgZnVuY3Rpb24gb3Blbk1lbnUoJG1kT3Blbk1lbnUsIGV2KSB7XG4gICAgICAkbWRPcGVuTWVudShldik7XG4gICAgfTtcblx0XHRmdW5jdGlvbiB0b2dnbGVWaWV3KCl7XG5cdFx0XHQkcm9vdFNjb3BlLmxvb3NlTGF5b3V0ID0gISRyb290U2NvcGUubG9vc2VMYXlvdXQ7XG5cdFx0XHQkbG9jYWxTdG9yYWdlLmZ1bGxWaWV3ID0gJHJvb3RTY29wZS5sb29zZUxheW91dDtcblx0XHRcdHJlc2V0TWFwU2l6ZSgpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiByZXNldE1hcFNpemUoKXtcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGxlYWZsZXREYXRhLmdldE1hcCgnbWFwJykudGhlbihmdW5jdGlvbiAobWFwKSB7XG5cdFx0XHRcdFx0bWFwLmludmFsaWRhdGVTaXplKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9LCAzMDApO1xuXHRcdH1cblx0XHQkcm9vdFNjb3BlLnNpZGViYXJPcGVuID0gdHJ1ZTtcblx0XHQkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gJHJvb3RTY29wZS5jdXJyZW50X3BhZ2U7XG5cdFx0fSwgZnVuY3Rpb24obmV3UGFnZSl7XG5cdFx0XHQkc2NvcGUuY3VycmVudF9wYWdlID0gbmV3UGFnZSB8fCAnUGFnZSBOYW1lJztcblx0XHR9KTtcblx0XHQkc2NvcGUuJHdhdGNoKCckcm9vdC5zaWRlYmFyT3BlbicsIGZ1bmN0aW9uKG4sbyl7XG5cdFx0XHRpZihuID09IG8pIHJldHVybiBmYWxzZTtcblx0XHRcdHJlc2V0TWFwU2l6ZSgpO1xuXHRcdH0pO1xuXHRcdCRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7IHJldHVybiAkbWRNZWRpYSgnc20nKSB9LCBmdW5jdGlvbihzbWFsbCkge1xuXHQgICAgdm0uc21hbGxTY3JlZW4gPSBzbWFsbDtcblx0ICB9KTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgZnVuY3Rpb24oRGF0YVNlcnZpY2Upe1xuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgXG4gICAgICAgIERhdGFTZXJ2aWNlLmdldEFsbCgnaW5kZXgnLCB7aXNfb2ZmaWNpYWw6IHRydWV9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICB2bS5pbmRpemVzID0gcmVzcG9uc2U7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW1wb3J0Y3N2Q3RybCcsIGZ1bmN0aW9uICgkbWREaWFsb2cpIHtcblx0XHR0aGlzLnNldHRpbmdzID0ge1xuXHRcdFx0cHJpbnRMYXlvdXQ6IHRydWUsXG5cdFx0XHRzaG93UnVsZXI6IHRydWUsXG5cdFx0XHRzaG93U3BlbGxpbmdTdWdnZXN0aW9uczogdHJ1ZSxcblx0XHRcdHByZXNlbnRhdGlvbk1vZGU6ICdlZGl0J1xuXHRcdH07XG5cblx0XHR0aGlzLnNhbXBsZUFjdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBldikge1xuXHRcdFx0JG1kRGlhbG9nLnNob3coJG1kRGlhbG9nLmFsZXJ0KClcblx0XHRcdFx0LnRpdGxlKG5hbWUpXG5cdFx0XHRcdC5jb250ZW50KCdZb3UgdHJpZ2dlcmVkIHRoZSBcIicgKyBuYW1lICsgJ1wiIGFjdGlvbicpXG5cdFx0XHRcdC5vaygnR3JlYXQnKVxuXHRcdFx0XHQudGFyZ2V0RXZlbnQoZXYpXG5cdFx0XHQpO1xuXHRcdH07XG5cbiAgICB0aGlzLm9wZW5Dc3ZVcGxvYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCRtZERpYWxvZy5zaG93KHtcblx0XHRcdFx0XHQvL2NvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICcvdmlld3MvYXBwL2ltcG9ydGNzdi9jc3ZVcGxvYWREaWFsb2cuaHRtbCcsXG5cdCAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcblx0XHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKGFuc3dlcikge1xuXG5cdFx0XHRcdH0sIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHR9KTtcblx0XHR9O1xuXHR9KVxuXG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICR3aW5kb3csJG1kU2lkZW5hdiwgJHJvb3RTY29wZSwgJGZpbHRlciwgJHN0YXRlLCAkdGltZW91dCwgdG9hc3RyLCBWZWN0b3JsYXllclNlcnZpY2UsIGRhdGEsIGNvdW50cmllcywgbGVhZmxldERhdGEsIERhdGFTZXJ2aWNlKSB7XG5cdFx0Ly8gVmFyaWFibGUgZGVmaW5pdGlvbnNcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLm1hcCA9IG51bGw7XG5cblx0XHR2bS5kYXRhU2VydmVyID0gZGF0YS5wcm9taXNlcy5kYXRhO1xuXHRcdHZtLnN0cnVjdHVyZVNlcnZlciA9IGRhdGEucHJvbWlzZXMuc3RydWN0dXJlO1xuXHRcdHZtLmNvdW50cnlMaXN0ID0gY291bnRyaWVzO1xuXG5cdFx0dm0uc3RydWN0dXJlID0gXCJcIjtcblx0XHR2bS5tdnRTY291cmNlID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldExheWVyKCk7XG5cdFx0dm0ubXZ0Q291bnRyeUxheWVyID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE5hbWUoKTtcblx0XHR2bS5tdnRDb3VudHJ5TGF5ZXJHZW9tID0gdm0ubXZ0Q291bnRyeUxheWVyICsgXCJfZ2VvbVwiO1xuXHRcdHZtLmlzb19maWVsZCA9IFZlY3RvcmxheWVyU2VydmljZS5kYXRhLmlzbzI7XG5cdFx0dm0ubm9kZVBhcmVudCA9IHt9O1xuXHRcdHZtLnNlbGVjdGVkVGFiID0gMDtcblx0XHR2bS5jdXJyZW50ID0gXCJcIjtcblx0XHR2bS50YWJDb250ZW50ID0gXCJcIjtcblx0XHR2bS50b2dnbGVCdXR0b24gPSAnYXJyb3dfZHJvcF9kb3duJztcblx0XHR2bS5tZW51ZU9wZW4gPSB0cnVlO1xuXHRcdHZtLmluZm8gPSBmYWxzZTtcblx0XHR2bS5jbG9zZUljb24gPSAnY2xvc2UnO1xuXHRcdHZtLmNvbXBhcmUgPSB7XG5cdFx0XHRhY3RpdmU6IGZhbHNlLFxuXHRcdFx0Y291bnRyaWVzOiBbXVxuXHRcdH07XG5cdFx0dm0uZGlzcGxheSA9IHtcblx0XHRcdHNlbGVjdGVkQ2F0OiAnJ1xuXHRcdH07XG5cblx0XHQvL0Z1bmN0aW9uIGRlZmluaXRvbnNcblx0XHR2bS5zaG93VGFiQ29udGVudCA9IHNob3dUYWJDb250ZW50O1xuXHRcdHZtLnNldFRhYiA9IHNldFRhYjtcblx0XHR2bS5zZXRTdGF0ZSA9IHNldFN0YXRlO1xuXHRcdHZtLnNldEN1cnJlbnQgPSBzZXRDdXJyZW50O1xuXHRcdHZtLnNldFNlbGVjdGVkRmVhdHVyZSA9IHNldFNlbGVjdGVkRmVhdHVyZTtcblx0XHR2bS5nZXRSYW5rID0gZ2V0UmFuaztcblx0XHR2bS5nZXRPZmZzZXQgPSBnZXRPZmZzZXQ7XG5cdFx0dm0uZ2V0VGVuZGVuY3kgPSBnZXRUZW5kZW5jeTtcblxuXHRcdHZtLmNoZWNrQ29tcGFyaXNvbiA9IGNoZWNrQ29tcGFyaXNvbjtcblx0XHR2bS50b2dnbGVPcGVuID0gdG9nZ2xlT3Blbjtcblx0XHR2bS50b2dnbGVJbmZvID0gdG9nZ2xlSW5mbztcblx0XHR2bS50b2dnbGVEZXRhaWxzID0gdG9nZ2xlRGV0YWlscztcblx0XHR2bS50b2dnbGVDb21wYXJpc29uID0gdG9nZ2xlQ29tcGFyaXNvbjtcblx0XHR2bS50b2dnbGVDb3VudHJpZUxpc3QgPSB0b2dnbGVDb3VudHJpZUxpc3Q7XG5cdFx0dm0ubWFwR290b0NvdW50cnkgPSBtYXBHb3RvQ291bnRyeTtcblx0XHR2bS5nb0JhY2sgPSBnb0JhY2s7XG5cdFx0dm0uZ29Ub0luZGV4ID0gZ29Ub0luZGV4O1xuXG5cdFx0dm0uY2FsY1RyZWUgPSBjYWxjVHJlZTtcblxuXHRcdHZtLmlzUHJlbGFzdCA9IGlzUHJlbGFzdDtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblxuXHRcdFx0dm0uc3RydWN0dXJlU2VydmVyLnRoZW4oZnVuY3Rpb24oc3RydWN0dXJlKSB7XG5cdFx0XHRcdHZtLmRhdGFTZXJ2ZXIudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0dm0uZGF0YSA9IGRhdGE7XG5cdFx0XHRcdFx0dm0uc3RydWN0dXJlID0gc3RydWN0dXJlO1xuXHRcdFx0XHRcdGlmICghdm0uc3RydWN0dXJlLnN0eWxlKSB7XG5cdFx0XHRcdFx0XHR2bS5zdHJ1Y3R1cmUuc3R5bGUgPSB7XG5cdFx0XHRcdFx0XHRcdCduYW1lJzogJ2RlZmF1bHQnLFxuXHRcdFx0XHRcdFx0XHQndGl0bGUnOiAnRGVmYXVsdCcsXG5cdFx0XHRcdFx0XHRcdCdiYXNlX2NvbG9yJzogJ3JnYmEoMTI4LCAyNDMsIDE5OCwxKSdcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNyZWF0ZUNhbnZhcyh2bS5zdHJ1Y3R1cmUuc3R5bGUuYmFzZV9jb2xvcik7XG5cdFx0XHRcdFx0ZHJhd0NvdW50cmllcygpO1xuXHRcdFx0XHRcdGlmICgkc3RhdGUucGFyYW1zLml0ZW0pIHtcblx0XHRcdFx0XHRcdHZtLnNldFN0YXRlKCRzdGF0ZS5wYXJhbXMuaXRlbSk7XG5cdFx0XHRcdFx0XHRjYWxjUmFuaygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5jb3VudHJpZXMpIHtcblx0XHRcdFx0XHRcdHZtLnNldFRhYigyKTtcblx0XHRcdFx0XHRcdHZtLmNvbXBhcmUuY291bnRyaWVzLnB1c2godm0uY3VycmVudCk7XG5cdFx0XHRcdFx0XHR2bS5jb21wYXJlLmFjdGl2ZSA9IHRydWU7XG5cdFx0XHRcdFx0XHQkcm9vdFNjb3BlLmdyZXllZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR2YXIgY291bnRyaWVzID0gJHN0YXRlLnBhcmFtcy5jb3VudHJpZXMuc3BsaXQoJy12cy0nKTtcblx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChjb3VudHJpZXMsIGZ1bmN0aW9uKGlzbykge1xuXHRcdFx0XHRcdFx0XHR2bS5jb21wYXJlLmNvdW50cmllcy5wdXNoKGdldE5hdGlvbkJ5SXNvKGlzbykpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHQvL29uc29sZS5sb2codm0uY29tcGFyZS5jb3VudHJpZXMpO1xuXHRcdFx0XHRcdFx0Y291bnRyaWVzLnB1c2godm0uY3VycmVudC5pc28pO1xuXHRcdFx0XHRcdFx0RGF0YVNlcnZpY2UuZ2V0T25lKCdjb3VudHJpZXMvYmJveCcsIGNvdW50cmllcykudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0XHRcdHZtLmJib3ggPSBkYXRhO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0fSk7XG5cblx0XHR9XG5cdFx0Ly8gVE9ETzogTU9WRSBUTyBHTE9CQUxcblx0XHRmdW5jdGlvbiBnb0JhY2soKSB7XG5cdFx0XHQkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBnb1RvSW5kZXgoaXRlbSl7XG5cblx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LnNob3cuc2VsZWN0ZWQnLHtcblx0XHRcdFx0aWQ6aXRlbS5pZCxcblx0XHRcdFx0bmFtZTppdGVtLm5hbWUsXG5cdFx0XHRcdGl0ZW06JHN0YXRlLnBhcmFtc1snaXRlbSddXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gaXNQcmVsYXN0KCl7XG5cdFx0XHR2YXIgbGV2ZWxzRm91bmQgPSBmYWxzZTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5zdHJ1Y3R1cmUuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKXtcblx0XHRcdFx0aWYoY2hpbGQuY2hpbGRyZW4ubGVuZ3RoID4gMCl7XG5cdFx0XHRcdFx0bGV2ZWxzRm91bmQgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBsZXZlbHNGb3VuZDtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gc2hvd1RhYkNvbnRlbnQoY29udGVudCkge1xuXHRcdFx0aWYgKGNvbnRlbnQgPT0gJycgJiYgdm0udGFiQ29udGVudCA9PSAnJykge1xuXHRcdFx0XHR2bS50YWJDb250ZW50ID0gJ3JhbmsnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0udGFiQ29udGVudCA9IGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0XHR2bS50b2dnbGVCdXR0b24gPSB2bS50YWJDb250ZW50ID8gJ2Fycm93X2Ryb3BfdXAnIDogJ2Fycm93X2Ryb3BfZG93bic7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNldFN0YXRlKGl0ZW0pIHtcblx0XHRcdHZtLnNldEN1cnJlbnQoZ2V0TmF0aW9uQnlJc28oaXRlbSkpO1xuXHRcdFx0ZmV0Y2hOYXRpb25EYXRhKGl0ZW0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB0b2dnbGVPcGVuKCkge1xuXHRcdFx0dm0ubWVudWVPcGVuID0gIXZtLm1lbnVlT3Blbjtcblx0XHRcdHZtLmNsb3NlSWNvbiA9IHZtLm1lbnVlT3BlbiA9PSB0cnVlID8gJ2NoZXZyb25fbGVmdCcgOiAnY2hldnJvbl9yaWdodCc7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudChuYXQpIHtcblx0XHRcdHZtLmN1cnJlbnQgPSBuYXQ7XG5cblx0XHRcdHZtLnNldFNlbGVjdGVkRmVhdHVyZSgpO1xuXG5cdFx0XHQkbWRTaWRlbmF2KCdsZWZ0Jykub3BlbigpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzZXRTZWxlY3RlZEZlYXR1cmUoaXNvKSB7XG5cdFx0XHRpZiAodm0ubXZ0U291cmNlKSB7XG5cdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZtLm12dFNvdXJjZS5sYXllcnNbdm0ubXZ0Q291bnRyeUxheWVyR2VvbV0uZmVhdHVyZXNbdm0uY3VycmVudC5pc29dLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly9UT0RPOiBNT1ZFIFRPIFNFUlZJQ0Vcblx0XHRmdW5jdGlvbiBjYWxjUmFuaygpIHtcblx0XHRcdGlmICghdm0uY3VycmVudCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR2YXIgcmFuayA9IDA7XG5cdFx0XHR2YXIga2FjayA9IFtdO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0aXRlbVt2bS5zdHJ1Y3R1cmUubmFtZV0gPSBwYXJzZUZsb2F0KGl0ZW1bdm0uc3RydWN0dXJlLm5hbWVdKTtcblx0XHRcdFx0aXRlbVsnc2NvcmUnXSA9IHBhcnNlRmxvYXQoaXRlbVt2bS5zdHJ1Y3R1cmUubmFtZV0pO1xuXHRcdFx0fSk7XG5cdFx0XHQvL3ZtLmRhdGEgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uZGF0YSwgJ3Njb3JlJywgJ2lzbycsIHRydWUpO1xuXHRcdFx0cmFuayA9IHZtLmRhdGEuaW5kZXhPZih2bS5jdXJyZW50KSArIDE7XG5cdFx0XHR2bS5jdXJyZW50W3ZtLnN0cnVjdHVyZS5uYW1lICsgJ19yYW5rJ10gPSByYW5rO1xuXHRcdFx0dm0uY2lyY2xlT3B0aW9ucyA9IHtcblx0XHRcdFx0Y29sb3I6IHZtLnN0cnVjdHVyZS5zdHlsZS5iYXNlX2NvbG9yIHx8ICcjMDBjY2FhJyxcblx0XHRcdFx0ZmllbGQ6IHZtLnN0cnVjdHVyZS5uYW1lICsgJ19yYW5rJyxcblx0XHRcdFx0c2l6ZTogdm0uZGF0YS5sZW5ndGhcblx0XHRcdH07XG5cblx0XHRcdHJldHVybiByYW5rO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFJhbmsoY291bnRyeSkge1xuXG5cdFx0XHR2YXIgcmFuayA9IHZtLmRhdGEuaW5kZXhPZihjb3VudHJ5KSArIDE7XG5cdFx0XHRyZXR1cm4gcmFuaztcblx0XHR9XG5cblx0XHQvL1RPRE86IFJFTU9WRSwgTk9XIEdPVCBPV04gVVJMXG5cdFx0ZnVuY3Rpb24gdG9nZ2xlSW5mbygpIHtcblx0XHRcdHZtLmluZm8gPSAhdm0uaW5mbztcblx0XHR9O1xuXG5cdFx0Ly9UT0RPOiBQVVQgSU4gVklFV1xuXHRcdGZ1bmN0aW9uIHRvZ2dsZURldGFpbHMoKSB7XG5cdFx0XHRyZXR1cm4gdm0uZGV0YWlscyA9ICF2bS5kZXRhaWxzO1xuXHRcdH07XG5cblx0XHQvL1RPRE86IE1PVkUgVE8gU0VSVklDRVxuXHRcdGZ1bmN0aW9uIGZldGNoTmF0aW9uRGF0YShpc28pIHtcblx0XHRcdERhdGFTZXJ2aWNlLmdldE9uZSgnaW5kZXgvJyArICRzdGF0ZS5wYXJhbXMuaWQsIGlzbykudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHZtLmN1cnJlbnQuZGF0YSA9IGRhdGE7XG5cdFx0XHRcdG1hcEdvdG9Db3VudHJ5KGlzbyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL1RPRE86IE1PVkUgVE8gTUFQIFNFUlZJQ0Vcblx0XHRmdW5jdGlvbiBtYXBHb3RvQ291bnRyeShpc28pIHtcblx0XHRcdGlmICghJHN0YXRlLnBhcmFtcy5jb3VudHJpZXMpIHtcblx0XHRcdFx0RGF0YVNlcnZpY2UuZ2V0T25lKCdjb3VudHJpZXMvYmJveCcsIFtpc29dKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHR2bS5iYm94ID0gZGF0YTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja0NvbXBhcmlzb24od2FudCkge1xuXHRcdFx0aWYgKHdhbnQgJiYgIXZtLmNvbXBhcmUuYWN0aXZlIHx8ICF3YW50ICYmIHZtLmNvbXBhcmUuYWN0aXZlKSB7XG5cdFx0XHRcdHZtLnRvZ2dsZUNvbXBhcmlzb24oKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0b2dnbGVDb21wYXJpc29uKCkge1xuXHRcdFx0dm0uY29tcGFyZS5jb3VudHJpZXMgPSBbdm0uY3VycmVudF07XG5cdFx0XHR2bS5jb21wYXJlLmFjdGl2ZSA9ICF2bS5jb21wYXJlLmFjdGl2ZTtcblx0XHRcdGlmICh2bS5jb21wYXJlLmFjdGl2ZSkge1xuXHRcdFx0XHR2bS5zZXRUYWIoMik7XG5cdFx0XHRcdCRyb290U2NvcGUuZ3JleWVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubXZ0U291cmNlLm9wdGlvbnMubXV0ZXhUb2dnbGUgPSBmYWxzZTtcblx0XHRcdFx0dm0ubXZ0U291cmNlLnNldFN0eWxlKGludmVydGVkU3R5bGUpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkcm9vdFNjb3BlLmdyZXllZCA9IGZhbHNlO1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0ubXZ0U291cmNlLmxheWVyc1t2bS5tdnRDb3VudHJ5TGF5ZXJHZW9tXS5mZWF0dXJlcywgZnVuY3Rpb24oZmVhdHVyZSkge1xuXHRcdFx0XHRcdGZlYXR1cmUuc2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHZtLm12dFNvdXJjZS5sYXllcnNbdm0ubXZ0Q291bnRyeUxheWVyR2VvbV0uZmVhdHVyZXNbdm0uY3VycmVudC5pc29dLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0dm0ubXZ0U291cmNlLm9wdGlvbnMubXV0ZXhUb2dnbGUgPSB0cnVlO1xuXHRcdFx0XHR2bS5tdnRTb3VyY2Uuc2V0U3R5bGUoY291bnRyaWVzU3R5bGUpO1xuXHRcdFx0XHREYXRhU2VydmljZS5nZXRPbmUoJ2NvdW50cmllcy9iYm94JywgW3ZtLmN1cnJlbnQuaXNvXSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0dm0uYmJveCA9IGRhdGE7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5zaG93LnNlbGVjdGVkJywge1xuXHRcdFx0XHRcdGlkOiAkc3RhdGUucGFyYW1zLmlkLFxuXHRcdFx0XHRcdG5hbWU6ICRzdGF0ZS5wYXJhbXMubmFtZSxcblx0XHRcdFx0XHRpdGVtOiAkc3RhdGUucGFyYW1zLml0ZW1cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdC8vdm0ubXZ0U291cmNlLnJlZHJhdygpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB0b2dnbGVDb3VudHJpZUxpc3QoY291bnRyeSkge1xuXHRcdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uY29tcGFyZS5jb3VudHJpZXMsIGZ1bmN0aW9uKG5hdCwga2V5KSB7XG5cdFx0XHRcdGlmIChjb3VudHJ5ID09IG5hdCAmJiBuYXQgIT0gdm0uY3VycmVudCkge1xuXHRcdFx0XHRcdHZtLmNvbXBhcmUuY291bnRyaWVzLnNwbGljZShrZXksIDEpO1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdHZtLmNvbXBhcmUuY291bnRyaWVzLnB1c2goY291bnRyeSk7XG5cdFx0XHR9O1xuXHRcdFx0dmFyIGlzb3MgPSBbXTtcblx0XHRcdHZhciBjb21wYXJlID0gW107XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uY29tcGFyZS5jb3VudHJpZXMsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuXHRcdFx0XHRpc29zLnB1c2goaXRlbS5pc28pO1xuXHRcdFx0XHRpZiAoaXRlbVt2bS5zdHJ1Y3R1cmUuaXNvXSAhPSB2bS5jdXJyZW50Lmlzbykge1xuXHRcdFx0XHRcdGNvbXBhcmUucHVzaChpdGVtLmlzbyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKGlzb3MubGVuZ3RoID4gMSkge1xuXHRcdFx0XHREYXRhU2VydmljZS5nZXRPbmUoJ2NvdW50cmllcy9iYm94JywgaXNvcykudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0dm0uYmJveCA9IGRhdGE7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5zaG93LnNlbGVjdGVkLmNvbXBhcmUnLCB7XG5cdFx0XHRcdFx0aW5kZXg6ICRzdGF0ZS5wYXJhbXMuaW5kZXgsXG5cdFx0XHRcdFx0aXRlbTogJHN0YXRlLnBhcmFtcy5pdGVtLFxuXHRcdFx0XHRcdGNvdW50cmllczogY29tcGFyZS5qb2luKCctdnMtJylcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAhZm91bmQ7XG5cdFx0fTtcblxuXHRcdC8vVE9ETzogTU9WRSBUTyBPV04gRElSRUNUSVZFXG5cdFx0ZnVuY3Rpb24gZ2V0T2Zmc2V0KCkge1xuXHRcdFx0aWYgKCF2bS5jdXJyZW50KSB7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fVxuXHRcdFx0Ly9jb25zb2xlLmxvZyh2bS5nZXRSYW5rKHZtLmN1cnJlbnQpKTtcblx0XHRcdHJldHVybiAodm0uZ2V0UmFuayh2bS5jdXJyZW50KSAtIDIpICogMTc7XG5cdFx0fTtcblxuXHRcdC8vVE9ETzogTU9WRSBUTyBPV04gRElSRUNUSVZFXG5cdFx0ZnVuY3Rpb24gZ2V0VGVuZGVuY3koKSB7XG5cdFx0XHRpZiAoIXZtLmN1cnJlbnQpIHtcblx0XHRcdFx0cmV0dXJuICdhcnJvd19kcm9wX2Rvd24nXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdm0uY3VycmVudC5wZXJjZW50X2NoYW5nZSA+IDAgPyAnYXJyb3dfZHJvcF91cCcgOiAnYXJyb3dfZHJvcF9kb3duJztcblx0XHR9O1xuXG5cdFx0Ly9UT0RPOiBNT1ZFIFRPIFZJRVdcblx0XHRmdW5jdGlvbiBzZXRUYWIoaSkge1xuXHRcdFx0Ly92bS5hY3RpdmVUYWIgPSBpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFBhcmVudChkYXRhKSB7XG5cdFx0XHR2YXIgaXRlbXMgPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChkYXRhLmNoaWxkcmVuLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdGlmIChpdGVtLmNvbHVtbl9uYW1lID09IHZtLmRpc3BsYXkuc2VsZWN0ZWRDYXQudHlwZSkge1xuXHRcdFx0XHRcdHZtLm5vZGVQYXJlbnQgPSBkYXRhO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGdldFBhcmVudChpdGVtKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGl0ZW1zO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNhbGNUcmVlKCkge1xuXHRcdFx0Z2V0UGFyZW50KHZtLnN0cnVjdHVyZSk7XG5cdFx0fTtcblxuXHRcdC8vVE9ETzogTU9WRSBUTyBTRVJWSUNFIENPVU5UUllcblx0XHRmdW5jdGlvbiBnZXROYXRpb25CeU5hbWUobmFtZSkge1xuXHRcdFx0dmFyIG5hdGlvbiA9IHt9O1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKG5hdCkge1xuXHRcdFx0XHRpZiAobmF0LmNvdW50cnkgPT0gbmFtZSkge1xuXHRcdFx0XHRcdG5hdGlvbiA9IG5hdDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gbmF0aW9uO1xuXHRcdH07XG5cblx0XHQvL1RPRE86IE1PVkUgVE8gU0VSVklDRSBDT1VOVFJZXG5cdFx0ZnVuY3Rpb24gZ2V0TmF0aW9uQnlJc28oaXNvKSB7XG5cdFx0XHR2YXIgbmF0aW9uID0ge307XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24obmF0KSB7XG5cdFx0XHRcdGlmIChuYXQuaXNvID09IGlzbykge1xuXHRcdFx0XHRcdG5hdGlvbiA9IG5hdDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBuYXRpb247XG5cdFx0fTtcblxuXHRcdC8vVE9ETzogTU9WRSBUTyBTRVJWSUNFIE1BUFxuXHRcdGZ1bmN0aW9uIGNyZWF0ZUNhbnZhcyhjb2xvcikge1xuXG5cdFx0XHR2bS5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblx0XHRcdHZtLmNhbnZhcy53aWR0aCA9IDI4MDtcblx0XHRcdHZtLmNhbnZhcy5oZWlnaHQgPSAxMDtcblx0XHRcdHZtLmN0eCA9IHZtLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdFx0dmFyIGdyYWRpZW50ID0gdm0uY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDI4MCwgMTApO1xuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDEsICdyZ2JhKDI1NSwyNTUsMjU1LDApJyk7XG5cdFx0XHRncmFkaWVudC5hZGRDb2xvclN0b3AoMC41MywgY29sb3IgfHwgJ3JnYmEoMTI4LCAyNDMsIDE5OCwxKScpO1xuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsICdyZ2JhKDEwMiwxMDIsMTAyLDEpJyk7XG5cdFx0XHR2bS5jdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG5cdFx0XHR2bS5jdHguZmlsbFJlY3QoMCwgMCwgMjgwLCAxMCk7XG5cdFx0XHR2bS5wYWxldHRlID0gdm0uY3R4LmdldEltYWdlRGF0YSgwLCAwLCAyNTcsIDEpLmRhdGE7XG5cdFx0XHQvL2RvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF0uYXBwZW5kQ2hpbGQodm0uY2FudmFzKTtcblx0XHR9XG5cblx0XHQvL1RPRE86IE1PVkUgVE8gU0VSVklDRSBNQVBcblx0XHRmdW5jdGlvbiB1cGRhdGVDYW52YXMoY29sb3IpIHtcblx0XHRcdHZhciBncmFkaWVudCA9IHZtLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAyODAsIDEwKTtcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgyNTUsMjU1LDI1NSwwKScpO1xuXHRcdFx0Z3JhZGllbnQuYWRkQ29sb3JTdG9wKDAuNTMsIGNvbG9yIHx8ICdyZ2JhKDEyOCwgMjQzLCAxOTgsMSknKTtcblx0XHRcdGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAncmdiYSgxMDIsMTAyLDEwMiwxKScpO1xuXHRcdFx0dm0uY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50O1xuXHRcdFx0dm0uY3R4LmZpbGxSZWN0KDAsIDAsIDI4MCwgMTApO1xuXHRcdFx0dm0ucGFsZXR0ZSA9IHZtLmN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMjU3LCAxKS5kYXRhO1xuXHRcdFx0Ly9kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmFwcGVuZENoaWxkKHZtLmNhbnZhcyk7XG5cdFx0fTtcblxuXHRcdC8vVE9ETzogTU9WRSBUTyBTRVJWSUNFIE1BUFxuXHRcdGZ1bmN0aW9uIGludmVydGVkU3R5bGUoZmVhdHVyZSkge1xuXHRcdFx0dmFyIHN0eWxlID0ge307XG5cdFx0XHR2YXIgaXNvID0gZmVhdHVyZS5wcm9wZXJ0aWVzW3ZtLmlzb19maWVsZF07XG5cdFx0XHR2YXIgbmF0aW9uID0gZ2V0TmF0aW9uQnlJc28oaXNvKTtcblx0XHRcdHZhciBmaWVsZCA9IHZtLnN0cnVjdHVyZS5uYW1lIHx8ICdzY29yZSc7XG5cblx0XHRcdC8vVE9ETzogTUFYIFZBTFVFIElOU1RFQUQgT0YgMTAwXG5cdFx0XHR2YXIgY29sb3JQb3MgPSBwYXJzZUludCgyNTYgLyAxMDAgKiBuYXRpb25bZmllbGRdKSAqIDQ7XG5cblx0XHRcdHZhciBjb2xvciA9ICdyZ2JhKCcgKyB2bS5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyB2bS5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgdm0ucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywnICsgdm0ucGFsZXR0ZVtjb2xvclBvcyArIDNdICsgJyknO1xuXHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgwLDAsMCwwKSc7XG5cdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRjb2xvcjogJ3JnYmEoMCwwLDAsMCknLFxuXHRcdFx0XHRzaXplOiAwXG5cdFx0XHR9O1xuXHRcdFx0c3R5bGUuc2VsZWN0ZWQgPSB7XG5cdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0b3V0bGluZToge1xuXHRcdFx0XHRcdGNvbG9yOiAncmdiYSgwLDAsMCwwLjMpJyxcblx0XHRcdFx0XHRzaXplOiAyXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gc3R5bGU7XG5cdFx0fTtcblxuXHRcdC8vVE9ETzogTU9WRSBUTyBTRVJWSUNFXG5cdFx0ZnVuY3Rpb24gY291bnRyaWVzU3R5bGUoZmVhdHVyZSkge1xuXG5cdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdHZhciBpc28gPSBmZWF0dXJlLnByb3BlcnRpZXNbdm0uaXNvX2ZpZWxkXTtcblxuXHRcdFx0dmFyIG5hdGlvbiA9IGdldE5hdGlvbkJ5SXNvKGlzbyk7XG5cdFx0XHR2YXIgZmllbGQgPSB2bS5zdHJ1Y3R1cmUubmFtZSB8fCAnc2NvcmUnO1xuXHRcdFx0dmFyIHR5cGUgPSBmZWF0dXJlLnR5cGU7XG5cdFx0XHRpZiAoaXNvICE9IHZtLmN1cnJlbnQuaXNvKSB7XG5cdFx0XHRcdGZlYXR1cmUuc2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdGNhc2UgMzogLy8nUG9seWdvbidcblx0XHRcdFx0XHRpZiAodHlwZW9mIG5hdGlvbltmaWVsZF0gIT0gXCJ1bmRlZmluZWRcIikge1xuXG5cdFx0XHRcdFx0XHQvL1RPRE86IE1BWCBWQUxVRSBJTlNURUFEIE9GIDEwMFxuXHRcdFx0XHRcdFx0dmFyIGNvbG9yUG9zID0gcGFyc2VJbnQoMjU2IC8gMTAwICogcGFyc2VJbnQobmF0aW9uW2ZpZWxkXSkpICogNDtcblxuXHRcdFx0XHRcdFx0dmFyIGNvbG9yID0gJ3JnYmEoJyArIHZtLnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIHZtLnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyB2bS5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLCcgKyB2bS5wYWxldHRlW2NvbG9yUG9zICsgM10gKyAnKSc7XG5cdFx0XHRcdFx0XHRzdHlsZS5jb2xvciA9ICdyZ2JhKCcgKyB2bS5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyB2bS5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgdm0ucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywwLjYpJzsgLy9jb2xvcjtcblx0XHRcdFx0XHRcdHN0eWxlLm91dGxpbmUgPSB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0XHRcdFx0c2l6ZTogMVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHN0eWxlLnNlbGVjdGVkID0ge1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoJyArIHZtLnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIHZtLnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyB2bS5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLDAuMyknLFxuXHRcdFx0XHRcdFx0XHRvdXRsaW5lOiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDY2LDY2LDY2LDAuOSknLFxuXHRcdFx0XHRcdFx0XHRcdHNpemU6IDJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoMjU1LDI1NSwyNTUsMCknO1xuXHRcdFx0XHRcdFx0c3R5bGUub3V0bGluZSA9IHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDApJyxcblx0XHRcdFx0XHRcdFx0c2l6ZTogMVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQvL2NvbnNvbGUubG9nKGZlYXR1cmUucHJvcGVydGllcy5uYW1lKVxuXHRcdFx0aWYgKGZlYXR1cmUubGF5ZXIubmFtZSA9PT0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE5hbWUoKSArICdfZ2VvbScpIHtcblx0XHRcdFx0c3R5bGUuc3RhdGljTGFiZWwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHR2YXIgc3R5bGUgPSB7XG5cdFx0XHRcdFx0XHRodG1sOiBmZWF0dXJlLnByb3BlcnRpZXMubmFtZSxcblx0XHRcdFx0XHRcdGljb25TaXplOiBbMTI1LCAzMF0sXG5cdFx0XHRcdFx0XHRjc3NDbGFzczogJ2xhYmVsLWljb24tdGV4dCdcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHJldHVybiBzdHlsZTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBzdHlsZTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLiR3YXRjaCgndm0uY3VycmVudCcsIGZ1bmN0aW9uKG4sIG8pIHtcblx0XHRcdGlmIChuID09PSBvKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKG4uaXNvKSB7XG5cdFx0XHRcdGlmIChvLmlzbykge1xuXHRcdFx0XHRcdHZtLm12dFNvdXJjZS5sYXllcnNbdm0ubXZ0Q291bnRyeUxheWVyR2VvbV0uZmVhdHVyZXNbby5pc29dLnNlbGVjdGVkID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2FsY1JhbmsoKTtcblx0XHRcdFx0ZmV0Y2hOYXRpb25EYXRhKG4uaXNvKTtcblx0XHRcdFx0dm0ubXZ0U291cmNlLmxheWVyc1t2bS5tdnRDb3VudHJ5TGF5ZXJHZW9tXS5mZWF0dXJlc1tuLmlzb10uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRpZiAoJHN0YXRlLmN1cnJlbnQubmFtZSA9PSAnYXBwLmluZGV4LnNob3cuc2VsZWN0ZWQnIHx8ICRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2FwcC5pbmRleC5zaG93Jykge1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LnNob3cuc2VsZWN0ZWQnLCB7XG5cdFx0XHRcdFx0XHRpZDogJHN0YXRlLnBhcmFtcy5pZCxcblx0XHRcdFx0XHRcdG5hbWU6ICRzdGF0ZS5wYXJhbXMubmFtZSxcblx0XHRcdFx0XHRcdGl0ZW06IG4uaXNvXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LnNob3cnLCB7XG5cdFx0XHRcdFx0aWQ6ICRzdGF0ZS5wYXJhbXMuaWQsXG5cdFx0XHRcdFx0bmFtZTogJHN0YXRlLnBhcmFtcy5pZFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5kaXNwbGF5LnNlbGVjdGVkQ2F0JywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0aWYgKG4gPT09IG8pIHtcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0XHRjb25zb2xlLmxvZyhuKTtcblx0XHRcdGlmIChuLmNvbG9yKVxuXHRcdFx0XHR1cGRhdGVDYW52YXMobi5jb2xvcik7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0dXBkYXRlQ2FudmFzKCdyZ2JhKDEyOCwgMjQzLCAxOTgsMSknKTtcblx0XHRcdH07XG5cdFx0XHR2bS5jYWxjVHJlZSgpO1xuXHRcdFx0LyppZiAodm0uY29tcGFyZS5hY3RpdmUpIHtcblx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdC8vdm0ubXZ0U291cmNlLnNldFN0eWxlKGludmVydGVkU3R5bGUpO1xuXHRcdFx0XHRcdC8vdm0ubXZ0U291cmNlLnJlZHJhdygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHQvL3ZtLm12dFNvdXJjZS5zZXRTdHlsZShjb3VudHJpZXNTdHlsZSk7XG5cdFx0XHRcdFx0Ly92bS5tdnRTb3VyY2UucmVkcmF3KCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSovXG5cblx0XHRcdGlmICh2bS5jdXJyZW50Lmlzbykge1xuXHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5jb3VudHJpZXMpIHtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5zaG93LnNlbGVjdGVkLmNvbXBhcmUnLCB7XG5cdFx0XHRcdFx0XHRpZDogbi5pZCxcblx0XHRcdFx0XHRcdG5hbWU6IG4ubmFtZSxcblx0XHRcdFx0XHRcdGl0ZW06IHZtLmN1cnJlbnQuaXNvLFxuXHRcdFx0XHRcdFx0Y291bnRyaWVzOiAkc3RhdGUucGFyYW1zLmNvdW50cmllc1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguc2hvdy5zZWxlY3RlZCcsIHtcblx0XHRcdFx0XHRcdGlkOiBuLmlkLFxuXHRcdFx0XHRcdFx0bmFtZTogbi5uYW1lLFxuXHRcdFx0XHRcdFx0aXRlbTogdm0uY3VycmVudC5pc29cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5zaG93Jywge1xuXHRcdFx0XHRcdGlkOiBuLmlkLFxuXHRcdFx0XHRcdG5hbWU6IG4ubmFtZVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0XHQvL1RPRE86IE1PVkUgVE8gU0VSVklDRSBNQVBcblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5iYm94JywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0aWYgKG4gPT09IG8pIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Lyp2YXIgbGF0ID0gW24uY29vcmRpbmF0ZXNbMF1bMF1bMV0sXG5cdFx0XHRcdFx0W24uY29vcmRpbmF0ZXNbMF1bMF1bMF1dXG5cdFx0XHRcdF0sXG5cdFx0XHRcdGxuZyA9IFtuLmNvb3JkaW5hdGVzWzBdWzJdWzFdLFxuXHRcdFx0XHRcdFtuLmNvb3JkaW5hdGVzWzBdWzJdWzBdXVxuXHRcdFx0XHRdKi9cblx0XHRcdHZhciBzb3V0aFdlc3QgPSBMLmxhdExuZyhuLmNvb3JkaW5hdGVzWzBdWzBdWzFdLCBuLmNvb3JkaW5hdGVzWzBdWzBdWzBdKSxcblx0XHRcdFx0bm9ydGhFYXN0ID0gTC5sYXRMbmcobi5jb29yZGluYXRlc1swXVsyXVsxXSwgbi5jb29yZGluYXRlc1swXVsyXVswXSksXG5cdFx0XHRcdGJvdW5kcyA9IEwubGF0TG5nQm91bmRzKHNvdXRoV2VzdCwgbm9ydGhFYXN0KTtcblxuXHRcdFx0dmFyIHBhZCA9IFtcblx0XHRcdFx0WzAsIDBdLFxuXHRcdFx0XHRbMTAwLCAxMDBdXG5cdFx0XHRdO1xuXHRcdFx0aWYgKHZtLmNvbXBhcmUuYWN0aXZlKSB7XG5cdFx0XHRcdHBhZCA9IFtcblx0XHRcdFx0XHRbMCwgMF0sXG5cdFx0XHRcdFx0WzAsIDBdXG5cdFx0XHRcdF07XG5cdFx0XHR9XG5cdFx0XHR2bS5tYXAuZml0Qm91bmRzKGJvdW5kcywge1xuXHRcdFx0XHRwYWRkaW5nOiBwYWRbMV0sXG5cdFx0XHRcdG1heFpvb206IDZcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0JHNjb3BlLiRvbihcIiRzdGF0ZUNoYW5nZVN1Y2Nlc3NcIiwgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcblxuXHRcdFx0Lypjb25zb2xlLmxvZygkKVxuXHRcdFx0aWYgKHRvU3RhdGUubmFtZSA9PSBcImFwcC5pbmRleC5zaG93XCIpIHtcblx0XHRcdFx0XHR2bS5jdXJyZW50ID0gXCJcIjtcblx0XHRcdH0gZWxzZSBpZiAodG9TdGF0ZS5uYW1lID09IFwiYXBwLmluZGV4LnNob3cuc2VsZWN0ZWRcIikge1xuXG5cdFx0XHRcdGlmKHRvUGFyYW1zLmluZGV4ICE9IGZyb21QYXJhbXMuaW5kZXgpe1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdhbmRlcnMnKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnNvbGUubG9nKHRvUGFyYW1zLml0ZW0pO1xuXHRcdFx0XHR2bS5zZXRTdGF0ZSh0b1BhcmFtcy5pdGVtKTtcblx0XHRcdFx0Y2FsY1JhbmsoKTtcblx0XHRcdFx0Ly92bS5tdnRTb3VyY2Uub3B0aW9ucy5tdXRleFRvZ2dsZSA9IHRydWU7XG5cdFx0XHRcdERhdGFTZXJ2aWNlLmdldE9uZSgnbmF0aW9ucycsIHZtLmN1cnJlbnQuaXNvKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0dm0uY3VycmVudC5kYXRhID0gZGF0YTtcblx0XHRcdFx0XHREYXRhU2VydmljZS5nZXRPbmUoJ25hdGlvbnMvYmJveCcsIFt2bS5jdXJyZW50Lmlzb10pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdHZtLmJib3ggPSBkYXRhO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSBpZiAodG9TdGF0ZS5uYW1lID09IFwiYXBwLmluZGV4LnNob3cuc2VsZWN0ZWQuY29tcGFyZVwiKSB7XG5cdFx0XHRcdHZtLnNldFN0YXRlKHRvUGFyYW1zLml0ZW0pO1xuXHRcdFx0XHQvLyRzY29wZS5hY3RpdmVUYWIgPSAyO1xuXHRcdFx0XHQvKkRhdGFTZXJ2aWNlLmdldE9uZSgnbmF0aW9ucycsIHRvUGFyYW1zLml0ZW0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHR2bS5jb3VudHJ5ID0gZGF0YTtcblx0XHRcdFx0XHREYXRhU2VydmljZS5nZXRPbmUoJ25hdGlvbnMvYmJveCcsIFt2bS5jb3VudHJ5Lmlzb10pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0XHRcdHZtLmJib3ggPSBkYXRhO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLmN1cnJlbnQgPSBcIlwiO1xuXHRcdFx0fSovXG5cdFx0fSk7XG5cblx0XHQvL1RPRE86IE1PVkUgVE8gU0VSVklDRSBNQVBcblx0XHRmdW5jdGlvbiBkcmF3Q291bnRyaWVzKCkge1xuXHRcdFx0dmFyIG1hcCA9IFZlY3RvcmxheWVyU2VydmljZS5nZXRNYXAoKTtcblx0XHRcdFx0dm0ubWFwID0gbWFwO1xuXHRcdFx0XHR2bS5tdnRTb3VyY2UgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TGF5ZXIoKTtcblx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCRzdGF0ZS5wYXJhbXMuY291bnRyaWVzKSB7XG5cdFx0XHRcdFx0XHR2bS5tdnRTb3VyY2Uub3B0aW9ucy5tdXRleFRvZ2dsZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dm0ubXZ0U291cmNlLnNldFN0eWxlKGludmVydGVkU3R5bGUpO1xuXHRcdFx0XHRcdFx0dm0ubXZ0U291cmNlLmxheWVyc1t2bS5tdnRDb3VudHJ5TGF5ZXJHZW9tXS5mZWF0dXJlc1t2bS5jdXJyZW50Lmlzb10uc2VsZWN0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0dmFyIGNvdW50cmllcyA9ICRzdGF0ZS5wYXJhbXMuY291bnRyaWVzLnNwbGl0KCctdnMtJyk7XG5cdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goY291bnRyaWVzLCBmdW5jdGlvbihpc28pIHtcblx0XHRcdFx0XHRcdFx0dm0ubXZ0U291cmNlLmxheWVyc1t2bS5tdnRDb3VudHJ5TGF5ZXJHZW9tXS5mZWF0dXJlc1tpc29dLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZtLm12dFNvdXJjZS5zZXRTdHlsZShjb3VudHJpZXNTdHlsZSk7XG5cdFx0XHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy5pdGVtKSB7XG5cdFx0XHRcdFx0XHRcdHZtLm12dFNvdXJjZS5sYXllcnNbdm0ubXZ0Q291bnRyeUxheWVyR2VvbV0uZmVhdHVyZXNbJHN0YXRlLnBhcmFtcy5pdGVtXS5zZWxlY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vdm0ubXZ0U291cmNlLnJlZHJhdygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dm0ubXZ0U291cmNlLm9wdGlvbnMub25DbGljayA9IGZ1bmN0aW9uKGV2dCwgdCkge1xuXG5cdFx0XHRcdFx0aWYgKCF2bS5jb21wYXJlLmFjdGl2ZSkge1xuXHRcdFx0XHRcdFx0dmFyIGMgPSBnZXROYXRpb25CeUlzbyhldnQuZmVhdHVyZS5wcm9wZXJ0aWVzW3ZtLmlzb19maWVsZF0pO1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBjW3ZtLnN0cnVjdHVyZS5uYW1lXSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdCRtZFNpZGVuYXYoJ2xlZnQnKS5vcGVuKCk7XG5cdFx0XHRcdFx0XHRcdHZtLmN1cnJlbnQgPSBnZXROYXRpb25CeUlzbyhldnQuZmVhdHVyZS5wcm9wZXJ0aWVzW3ZtLmlzb19maWVsZF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dG9hc3RyLmVycm9yKCdObyBpbmZvIGFib3V0IHRoaXMgbG9jYXRpb24hJywgZXZ0LmZlYXR1cmUucHJvcGVydGllcy5hZG1pbik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBjID0gZ2V0TmF0aW9uQnlJc28oZXZ0LmZlYXR1cmUucHJvcGVydGllc1t2bS5pc29fZmllbGRdKTtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY1t2bS5zdHJ1Y3R1cmUubmFtZV0gIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0XHR2bS50b2dnbGVDb3VudHJpZUxpc3QoYyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0b2FzdHIuZXJyb3IoJ05vIGluZm8gYWJvdXQgdGhpcyBsb2NhdGlvbiEnLCBldnQuZmVhdHVyZS5wcm9wZXJ0aWVzLmFkbWluKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdH1cblx0fSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGV4YmFzZUN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCRzdGF0ZSkge1xuXHRcdC8vXG4gICAgJHNjb3BlLiRzdGF0ZSA9ICRzdGF0ZTtcblx0fSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGV4Q2hlY2tDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCAkZmlsdGVyLCAkdGltZW91dCwgdG9hc3RyLCBEaWFsb2dTZXJ2aWNlLCBJbmRleFNlcnZpY2UpIHtcblxuXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5kYXRhID0gSW5kZXhTZXJ2aWNlLmdldERhdGEoKTtcblx0XHR2bS5tZXRhID0gSW5kZXhTZXJ2aWNlLmdldE1ldGEoKTtcblx0XHR2bS5lcnJvcnMgPSBJbmRleFNlcnZpY2UuZ2V0RXJyb3JzKCk7XG5cdFx0dm0uaXNvX2Vycm9ycyA9IEluZGV4U2VydmljZS5nZXRJc29FcnJvcnMoKTtcblx0XHR2bS5zZWxlY3RlZCA9IFtdO1xuICAgIHZtLnllYXJmaWx0ZXIgPSAnJztcblx0XHR2bS5kZWxldGVEYXRhID0gZGVsZXRlRGF0YTtcblx0XHR2bS5kZWxldGVTZWxlY3RlZCA9IGRlbGV0ZVNlbGVjdGVkO1xuXHRcdHZtLmRlbGV0ZUNvbHVtbiA9IGRlbGV0ZUNvbHVtbjtcblx0XHR2bS5vbk9yZGVyQ2hhbmdlID0gb25PcmRlckNoYW5nZTtcblx0XHR2bS5vblBhZ2luYXRpb25DaGFuZ2UgPSBvblBhZ2luYXRpb25DaGFuZ2U7XG5cdFx0dm0uY2hlY2tGb3JFcnJvcnMgPSBjaGVja0ZvckVycm9ycztcblx0XHR2bS5zZWxlY3RFcnJvcnMgPSBzZWxlY3RFcnJvcnM7XG4gICAgdm0uc2VhcmNoRm9yRXJyb3JzID0gc2VhcmNoRm9yRXJyb3JzO1xuXHRcdHZtLnNob3dVcGxvYWRDb250YWluZXIgPSBmYWxzZTtcblx0XHQvL3ZtLmVkaXRDb2x1bW5EYXRhID0gZWRpdENvbHVtbkRhdGE7XG5cdFx0dm0uZWRpdFJvdyA9IGVkaXRSb3c7XG4gICAgdm0ueWVhcnMgPSBbXTtcblx0XHR2bS5xdWVyeSA9IHtcblx0XHRcdGZpbHRlcjogJycsXG5cdFx0XHRvcmRlcjogJy1lcnJvcnMnLFxuXHRcdFx0bGltaXQ6IDE1LFxuXHRcdFx0cGFnZTogMVxuXHRcdH07XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHRjaGVja0RhdGEoKTtcbiAgICBcdGdldFllYXJzKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY2hlY2tEYXRhKCkge1xuXHRcdFx0aWYgKCF2bS5kYXRhKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmNyZWF0ZScpO1xuXHRcdFx0fVxuXHRcdH1cbiAgICBmdW5jdGlvbiBnZXRZZWFycygpe1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIGRhdCA9ICgkZmlsdGVyKCdncm91cEJ5Jykodm0uZGF0YSwgJ2RhdGEuJyt2bS5tZXRhLmNvdW50cnlfZmllbGQgKSk7XG5cdCAgICAgIHZtLnllYXJzID0gW107XG5cdFx0XHRcdHZhciBsZW5ndGggPSAwO1xuXHRcdFx0XHR2YXIgaW5kZXggPSBudWxsO1xuXHRcdFx0ICBhbmd1bGFyLmZvckVhY2goZGF0LGZ1bmN0aW9uKGVudHJ5LCBpKXtcblx0XHRcdFx0XHRpZihlbnRyeS5sZW5ndGggPiBsZW5ndGgpe1xuXHRcdFx0XHRcdFx0aW5kZXggPSBpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0ICAgICAgYW5ndWxhci5mb3JFYWNoKGRhdFtpbmRleF0sZnVuY3Rpb24oZW50cnkpe1xuXHQgICAgICAgIHZtLnllYXJzLnB1c2goZW50cnkuZGF0YVt2bS5tZXRhLnllYXJfZmllbGRdKVxuXHQgICAgICB9KTtcblx0XHRcdFx0dm0ueWVhcmZpbHRlciA9IHZtLnllYXJzWzBdO1xuXHRcdFx0fSk7XG5cblxuICAgIH1cblx0XHRmdW5jdGlvbiBzZWFyY2gocHJlZGljYXRlKSB7XG5cdFx0XHR2bS5maWx0ZXIgPSBwcmVkaWNhdGU7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIG9uT3JkZXJDaGFuZ2Uob3JkZXIpIHtcblx0XHRcdHJldHVybiB2bS5kYXRhID0gJGZpbHRlcignb3JkZXJCeScpKHZtLmRhdGEsIFtvcmRlcl0sIHRydWUpXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIG9uUGFnaW5hdGlvbkNoYW5nZShwYWdlLCBsaW1pdCkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhwYWdlLCBsaW1pdCk7XG5cdFx0XHQvL3JldHVybiAkbnV0cml0aW9uLmRlc3NlcnRzLmdldCgkc2NvcGUucXVlcnksIHN1Y2Nlc3MpLiRwcm9taXNlO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjaGVja0ZvckVycm9ycyhpdGVtKSB7XG5cdFx0XHRyZXR1cm4gaXRlbS5lcnJvcnMubGVuZ3RoID4gMCA/ICdtZC13YXJuJyA6ICcnO1xuXHRcdH1cblxuXHRcdC8qZnVuY3Rpb24gZWRpdENvbHVtbkRhdGEoZSwga2V5KXtcblx0XHQgIHZtLnRvRWRpdCA9IGtleTtcblx0XHQgIERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdlZGl0Y29sdW1uJywgJHNjb3BlKTtcblx0XHR9Ki9cblx0XHRmdW5jdGlvbiBkZWxldGVDb2x1bW4oZSwga2V5KSB7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24gKGl0ZW0sIGspIHtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKGl0ZW0uZGF0YSwgZnVuY3Rpb24gKGZpZWxkLCBsKSB7XG5cdFx0XHRcdFx0aWYgKGwgPT0ga2V5KSB7XG5cdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YVtrXS5lcnJvcnMsIGZ1bmN0aW9uKGVycm9yLCBpKXtcblx0XHRcdFx0XHRcdFx0aWYoZXJyb3IuY29sdW1uID09IGtleSl7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGVycm9yLnR5cGUgPT0gMiB8fCBlcnJvci50eXBlID09IDMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5yZWR1Y2VJc29FcnJvcigpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2UucmVkdWNlRXJyb3IoKTtcblx0XHRcdFx0XHRcdFx0XHR2bS5kYXRhW2tdLmVycm9ycy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRkZWxldGUgdm0uZGF0YVtrXS5kYXRhW2tleV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0fSk7XG5cdFx0XHRJbmRleFNlcnZpY2Uuc2V0VG9Mb2NhbFN0b3JhZ2UoKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkZWxldGVTZWxlY3RlZCgpIHtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5zZWxlY3RlZCwgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2goaXRlbS5lcnJvcnMsIGZ1bmN0aW9uIChlcnJvciwgaykge1xuXHRcdFx0XHRcdGlmIChlcnJvci50eXBlID09IDIgfHwgZXJyb3IudHlwZSA9PSAzKSB7XG5cdFx0XHRcdFx0XHR2bS5pc29fZXJyb3JzLS07XG5cdFx0XHRcdFx0XHRJbmRleFNlcnZpY2UucmVkdWNlSXNvRXJyb3IoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dm0uZXJyb3JzLS07XG5cdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLnJlZHVjZUVycm9yKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdHZtLmRhdGEuc3BsaWNlKHZtLmRhdGEuaW5kZXhPZihpdGVtKSwgMSk7XG5cdFx0XHR9KTtcblx0XHRcdHZtLnNlbGVjdGVkID0gW107XG5cdFx0XHRJbmRleFNlcnZpY2Uuc2V0VG9Mb2NhbFN0b3JhZ2UoKTtcblx0XHRcdGlmICh2bS5kYXRhLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRcdHZtLmRlbGV0ZURhdGEoKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguY3JlYXRlJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2VsZWN0RXJyb3JzKCkge1xuXHRcdFx0dm0uc2VsZWN0ZWQgPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbiAoaXRlbSwga2V5KSB7XG5cdFx0XHRcdGlmIChpdGVtLmVycm9ycy5sZW5ndGgpIHtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZC5wdXNoKGl0ZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGVkaXRSb3coKSB7XG5cdFx0XHR2bS5yb3cgPSB2bS5zZWxlY3RlZFswXTtcblx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdlZGl0cm93JywgJHNjb3BlKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBkZWxldGVEYXRhKCkge1xuXHRcdFx0dm0uZGF0YSA9IFtdO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNlYXJjaEZvckVycm9ycygpIHtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbiAocm93LCBrKSB7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChyb3cuZGF0YSwgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuXHRcdFx0XHRcdGlmIChpc05hTihpdGVtKSB8fCBpdGVtIDwgMCkge1xuXHRcdFx0XHRcdFx0aWYgKGl0ZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09IFwiI05BXCIgfHwgaXRlbSA8IDAgfHwgaXRlbS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkuaW5kZXhPZignTi9BJykgPiAtMSkge1xuXHRcdFx0XHRcdFx0XHR2YXIgZXJyb3IgPSB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCIxXCIsXG5cdFx0XHRcdFx0XHRcdFx0bWVzc2FnZTogXCJGaWVsZCBpbiByb3cgaXMgbm90IHZhbGlkIGZvciBkYXRhYmFzZSB1c2UhXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y29sdW1uOiBrZXksXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGl0ZW1cblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0cm93LmVycm9ycy5wdXNoKGVycm9yKVxuXHRcdFx0XHRcdFx0XHR2bS5lcnJvcnMucHVzaChlcnJvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9KTtcblxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW5kZXhDaGVja1NpZGViYXJDdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIEluZGV4U2VydmljZSwgRGF0YVNlcnZpY2UsIERpYWxvZ1NlcnZpY2UsIHRvYXN0cikge1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uZGF0YSA9IEluZGV4U2VydmljZS5nZXREYXRhKCk7XG5cdFx0dm0ubWV0YSA9IEluZGV4U2VydmljZS5nZXRNZXRhKCk7XG5cdFx0dm0uZXJyb3JzID0gSW5kZXhTZXJ2aWNlLmdldEVycm9ycygpO1xuXHRcdHZtLmlzb19lcnJvcnMgPSBJbmRleFNlcnZpY2UuZ2V0SXNvRXJyb3JzKCk7XG5cdFx0dm0uY2xlYXJFcnJvcnMgPSBjbGVhckVycm9ycztcblx0XHR2bS5mZXRjaElzbyA9IGZldGNoSXNvO1xuXG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXG5cdFx0XHQvL3ZtLm15RGF0YSA9IERhdGFTZXJ2aWNlLmdldEFsbCgnbWUvZGF0YScpO1xuXHRcdFx0Ly9jaGVja015RGF0YSgpO1xuXHRcdH1cblxuXHRcdC8qZnVuY3Rpb24gY2hlY2tNeURhdGEoKSB7XG5cdFx0XHR2bS5leHRlbmRpbmdDaG9pY2VzID0gW107XG5cdFx0XHRpZiAodm0uZGF0YS5sZW5ndGgpIHtcblx0XHRcdFx0dm0ubXlEYXRhLnRoZW4oZnVuY3Rpb24oaW1wb3J0cykge1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChpbXBvcnRzLCBmdW5jdGlvbihlbnRyeSkge1xuXHRcdFx0XHRcdFx0dmFyIGZvdW5kID0gMDtcblx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhWzBdLm1ldGEuZmllbGRzLCBmdW5jdGlvbihmaWVsZCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UoZW50cnkubWV0YV9kYXRhKTtcblx0XHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChjb2x1bW4uY29sdW1uID09IGZpZWxkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3VuZCsrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aWYgKGZvdW5kID49IHZtLmRhdGFbMF0ubWV0YS5maWVsZHMubGVuZ3RoIC0gMykge1xuXHRcdFx0XHRcdFx0XHR2bS5leHRlbmRpbmdDaG9pY2VzLnB1c2goZW50cnkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0aWYgKHZtLmV4dGVuZGluZ0Nob2ljZXMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRpZih2bS5tZXRhLnllYXJfZmllbGQpe1xuXHRcdFx0XHRcdFx0XHR2bS5tZXRhLnllYXIgPSB2bS5kYXRhWzBdLmRhdGFbMF1bdm0ubWV0YS55ZWFyX2ZpZWxkXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdleHRlbmREYXRhJywgJHNjb3BlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0qL1xuXG5cdFx0ZnVuY3Rpb24gY2xlYXJFcnJvcnMoKSB7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24ocm93LCBrZXkpIHtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHJvdy5kYXRhLCBmdW5jdGlvbihpdGVtLCBrKSB7XG5cdFx0XHRcdFx0aWYgKGlzTmFOKGl0ZW0pIHx8IGl0ZW0gPCAwKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGl0ZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09IFwiI05BXCIvKiB8fCBpdGVtIDwgMCovIHx8IGl0ZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ04vQScpID4gLTEpIHtcblx0XHRcdFx0XHRcdFx0dm0uZGF0YVtrZXldLmRhdGFba10gPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRyb3cuZXJyb3JzLnNwbGljZSgwLCAxKTtcblx0XHRcdFx0XHRcdFx0dm0uZXJyb3JzLnNwbGljZSgwLCAxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoIXJvdy5kYXRhW3ZtLm1ldGEuaXNvX2ZpZWxkXSkge1xuXHRcdFx0XHRcdHZhciBlcnJvciA9IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiMlwiLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJJc28gZmllbGQgaXMgbm90IHZhbGlkIVwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHJvdy5kYXRhW3ZtLm1ldGEuaXNvX2ZpZWxkXSxcblx0XHRcdFx0XHRcdGNvbHVtbjogdm0ubWV0YS5pc29fZmllbGQsXG5cdFx0XHRcdFx0XHRyb3c6IGtleVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0dmFyIGVycm9yRm91bmQgPSBmYWxzZTtcblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2gocm93LmVycm9ycywgZnVuY3Rpb24oZXJyb3IsIGtleSkge1xuXHRcdFx0XHRcdFx0aWYgKGVycm9yLnR5cGUgPT0gMikge1xuXHRcdFx0XHRcdFx0XHRlcnJvckZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdGlmICghZXJyb3JGb3VuZCkge1xuXHRcdFx0XHRcdFx0cm93LmVycm9ycy5wdXNoKGVycm9yKTtcblx0XHRcdFx0XHRcdHZtLmlzb19lcnJvcnMucHVzaChlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdEluZGV4U2VydmljZS5zZXRUb0xvY2FsU3RvcmFnZSgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGZldGNoSXNvKCkge1xuXG5cdFx0XHRpZiAoIXZtLm1ldGEuaXNvX2ZpZWxkKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignQ2hlY2sgeW91ciBzZWxlY3Rpb24gZm9yIHRoZSBJU08gZmllbGQnLCAnQ29sdW1uIG5vdCBzcGVjaWZpZWQhJyk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICghdm0ubWV0YS5jb3VudHJ5X2ZpZWxkKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignQ2hlY2sgeW91ciBzZWxlY3Rpb24gZm9yIHRoZSBDT1VOVFJZIGZpZWxkJywgJ0NvbHVtbiBub3Qgc3BlY2lmaWVkIScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZiAodm0ubWV0YS5jb3VudHJ5X2ZpZWxkID09IHZtLm1ldGEuaXNvX2ZpZWxkKSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignSVNPIGZpZWxkIGFuZCBDT1VOVFJZIGZpZWxkIGNhbiBub3QgYmUgdGhlIHNhbWUnLCAnU2VsZWN0aW9uIGVycm9yIScpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHQkcm9vdFNjb3BlLnN0YXRlSXNMb2FkaW5nID0gdHJ1ZTtcblx0XHRcdHZtLm5vdEZvdW5kID0gW107XG5cdFx0XHR2YXIgZW50cmllcyA9IFtdO1xuXHRcdFx0dmFyIGlzb0NoZWNrID0gMDtcblx0XHRcdHZhciBpc29UeXBlID0gJ2lzby0zMTY2LTInO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKGl0ZW0sIGtleSkge1xuXHRcdFx0XHRpZiAoaXRlbS5kYXRhW3ZtLm1ldGEuaXNvX2ZpZWxkXSkge1xuXHRcdFx0XHRcdGlzb0NoZWNrICs9IGl0ZW0uZGF0YVt2bS5tZXRhLmlzb19maWVsZF0ubGVuZ3RoID09IDMgPyAxIDogMDtcblx0XHRcdFx0fVxuXHRcdFx0XHRzd2l0Y2ggKGl0ZW0uZGF0YVt2bS5tZXRhLmNvdW50cnlfZmllbGRdKSB7XG5cdFx0XHRcdFx0Y2FzZSAnQ2FibyBWZXJkZSc6XG5cdFx0XHRcdFx0XHRpdGVtLmRhdGFbdm0ubWV0YS5jb3VudHJ5X2ZpZWxkXSA9ICdDYXBlIFZlcmRlJztcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJEZW1vY3JhdGljIFBlb3BsZXMgUmVwdWJsaWMgb2YgS29yZWFcIjpcblx0XHRcdFx0XHRcdGl0ZW0uZGF0YVt2bS5tZXRhLmNvdW50cnlfZmllbGRdID0gXCJEZW1vY3JhdGljIFBlb3BsZSdzIFJlcHVibGljIG9mIEtvcmVhXCI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiQ290ZSBkJ0l2b2lyZVwiOlxuXHRcdFx0XHRcdFx0aXRlbS5kYXRhW3ZtLm1ldGEuY291bnRyeV9maWVsZF0gPSBcIkl2b3J5IENvYXN0XCI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiTGFvIFBlb3BsZXMgRGVtb2NyYXRpYyBSZXB1YmxpY1wiOlxuXHRcdFx0XHRcdFx0aXRlbS5kYXRhW3ZtLm1ldGEuY291bnRyeV9maWVsZF0gPSBcIkxhbyBQZW9wbGUncyBEZW1vY3JhdGljIFJlcHVibGljXCI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZW50cmllcy5wdXNoKHtcblx0XHRcdFx0XHRpc286IGl0ZW0uZGF0YVt2bS5tZXRhLmlzb19maWVsZF0sXG5cdFx0XHRcdFx0bmFtZTogaXRlbS5kYXRhW3ZtLm1ldGEuY291bnRyeV9maWVsZF1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdHZhciBpc29UeXBlID0gaXNvQ2hlY2sgPj0gKGVudHJpZXMubGVuZ3RoIC8gMikgPyAnaXNvLTMxNjYtMScgOiAnaXNvLTMxNjYtMic7XG5cdFx0XHRJbmRleFNlcnZpY2UucmVzZXRUb1NlbGVjdCgpO1xuXHRcdFx0RGF0YVNlcnZpY2UucG9zdCgnY291bnRyaWVzL2J5SXNvTmFtZXMnLCB7XG5cdFx0XHRcdGRhdGE6IGVudHJpZXMsXG5cdFx0XHRcdGlzbzogaXNvVHlwZVxuXHRcdFx0fSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHQkcm9vdFNjb3BlLnN0YXRlSXNMb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChyZXNwb25zZSwgZnVuY3Rpb24oY291bnRyeSwga2V5KSB7XG5cdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKGl0ZW0sIGspIHtcblx0XHRcdFx0XHRcdGlmIChjb3VudHJ5Lm5hbWUgPT0gaXRlbS5kYXRhW3ZtLm1ldGEuY291bnRyeV9maWVsZF0pIHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvdW50cnkuZGF0YS5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHRvU2VsZWN0ID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZW50cnk6IGl0ZW0sXG5cdFx0XHRcdFx0XHRcdFx0XHRvcHRpb25zOiBjb3VudHJ5LmRhdGFcblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5hZGRUb1NlbGVjdCh0b1NlbGVjdCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZihjb3VudHJ5LmRhdGEubGVuZ3RoID09IDEpe1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY291bnRyeS5kYXRhICE9IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZtLmRhdGFba10uZGF0YVt2bS5tZXRhLmlzb19maWVsZF0gPSBjb3VudHJ5LmRhdGFbMF0uaXNvO1xuXHRcdFx0XHRcdFx0XHRcdFx0dm0uZGF0YVtrXS5kYXRhW3ZtLm1ldGEuY291bnRyeV9maWVsZF0gPSBjb3VudHJ5LmRhdGFbMF0uYWRtaW47XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaXRlbS5lcnJvcnMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChpdGVtLmVycm9ycywgZnVuY3Rpb24oZXJyb3IsIGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyb3IudHlwZSA9PSAyIHx8IGVycm9yLnR5cGUgPT0gMykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm0uaXNvX2Vycm9ycy5zcGxpY2UoMCwgMSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmVycm9ycy5zcGxpY2UoZSwgMSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlcnJvci50eXBlID09IDEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnJvci5jb2x1bW4gPT0gdm0ubWV0YS5pc29fZmllbGQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dm0uZXJyb3JzLnNwbGljZSgwLCAxKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aXRlbS5lcnJvcnMuc3BsaWNlKGUsIDEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyh2bS5kYXRhW2tdKTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCIzXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwiQ291bGQgbm90IGxvY2F0ZSBhIHZhbGlkIGlzbyBuYW1lIVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb2x1bW46IHZtLm1ldGEuY291bnRyeV9maWVsZFxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvckZvdW5kID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YVtrXS5lcnJvcnMsIGZ1bmN0aW9uKGVycm9yLCBpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVycm9yLnR5cGUgPT0gMykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yRm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFlcnJvckZvdW5kKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5hZGRJc29FcnJvcihlcnJvcik7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGl0ZW0uZXJyb3JzLnB1c2goZXJyb3IpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dm0uaXNvX2NoZWNrZWQgPSB0cnVlO1xuXHRcdFx0XHRJbmRleFNlcnZpY2Uuc2V0VG9Mb2NhbFN0b3JhZ2UoKTtcblx0XHRcdFx0aWYgKEluZGV4U2VydmljZS5nZXRUb1NlbGVjdCgpLmxlbmd0aCkge1xuXHRcdFx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdzZWxlY3Rpc29mZXRjaGVycycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHQkcm9vdFNjb3BlLnN0YXRlSXNMb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignUGxlYXNlIGNoZWNrIHlvdXIgZmllbGQgc2VsZWN0aW9ucycsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7XG5cdFx0XHR9KTtcblxuXHRcdH1cblx0XHR2bS5leHRlbmREYXRhID0gZXh0ZW5kRGF0YTtcblxuXHRcdGZ1bmN0aW9uIGV4dGVuZERhdGEoKSB7XG5cdFx0XHR2YXIgaW5zZXJ0RGF0YSA9IHtcblx0XHRcdFx0ZGF0YTogW11cblx0XHRcdH07XG5cdFx0XHR2YXIgbWV0YSA9IFtdLFxuXHRcdFx0XHRmaWVsZHMgPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtLCBrZXkpIHtcblx0XHRcdFx0aWYgKGl0ZW0uZXJyb3JzLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRcdFx0aXRlbS5kYXRhWzBdLnllYXIgPSB2bS5tZXRhLnllYXI7XG5cdFx0XHRcdFx0aWYodm0ubWV0YS55ZWFyX2ZpZWxkICYmIHZtLm1ldGEueWVhcl9maWVsZCAhPSBcInllYXJcIikge1xuXHRcdFx0XHRcdFx0ZGVsZXRlIGl0ZW0uZGF0YVt2bS5tZXRhLnllYXJfZmllbGRdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpbnNlcnREYXRhLmRhdGEucHVzaChpdGVtLmRhdGEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRvYXN0ci5lcnJvcignVGhlcmUgYXJlIHNvbWUgZXJyb3JzIGxlZnQhJywgJ0h1Y2ghJyk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGNvbnNvbGUubG9nKGluc2VydERhdGEpO1xuXHRcdFx0RGF0YVNlcnZpY2UucG9zdCgnZGF0YS90YWJsZXMvJyArIHZtLmFkZERhdGFUby50YWJsZV9uYW1lICsgJy9pbnNlcnQnLCBpbnNlcnREYXRhKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuXHRcdFx0XHRpZiAocmVzID09IHRydWUpIHtcblx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcyhpbnNlcnREYXRhLmRhdGEubGVuZ3RoICsgJyBpdGVtcyBpbXBvcnRldCB0byAnICsgdm0ubWV0YS5uYW1lLCAnU3VjY2VzcycpO1xuXHRcdFx0XHRcdHZtLmRhdGEgPSBJbmRleFNlcnZpY2UuY2xlYXIoKTtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5teWRhdGEnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleEZpbmFsQ3RybCcsIGZ1bmN0aW9uICgkc3RhdGUsIEluZGV4U2VydmljZSwgRGF0YVNlcnZpY2UsIHRvYXN0cikge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5kYXRhID0gSW5kZXhTZXJ2aWNlLmdldERhdGEoKTtcblx0XHR2bS5tZXRhID0gSW5kZXhTZXJ2aWNlLmdldE1ldGEoKTtcblx0XHR2bS5lcnJvcnMgPSBJbmRleFNlcnZpY2UuZ2V0RXJyb3JzKCk7XG5cdFx0dm0uaW5kaWNhdG9ycyA9IEluZGV4U2VydmljZS5nZXRJbmRpY2F0b3JzKCk7XG5cdFx0dm0uc2F2ZURhdGEgPSBzYXZlRGF0YTtcblxuXG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0LyppZiAodm0ubWV0YS55ZWFyX2ZpZWxkKSB7XG5cdFx0XHRcdHZtLm1ldGEueWVhciA9IHZtLmRhdGFbMF0uZGF0YVt2bS5tZXRhLnllYXJfZmllbGRdO1xuXHRcdFx0fSovXG5cdFx0XHRjaGVja0RhdGEoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja0RhdGEoKSB7XG5cdFx0XHRpZiAoIXZtLmRhdGEpIHtcblx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguY3JlYXRlJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2F2ZURhdGEodmFsaWQpIHtcblx0XHRcdGlmICh2YWxpZCkge1xuXHRcdFx0XHR2YXIgaW5zZXJ0RGF0YSA9IHtcblx0XHRcdFx0XHRkYXRhOiBbXVxuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgbm9ZZWFycyA9IFtdO1xuXHRcdFx0XHR2YXIgaW5zZXJ0TWV0YSA9IFtdLFxuXHRcdFx0XHRcdGZpZWxkcyA9IFtdO1xuXHRcdFx0XHR2bS5sb2FkaW5nID0gdHJ1ZTtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHtcblx0XHRcdFx0XHRpZiAoaXRlbS5lcnJvcnMubGVuZ3RoID09IDApIHtcblx0XHRcdFx0XHRcdGlmKGl0ZW0uZGF0YVt2bS5tZXRhLnllYXJfZmllbGRdKXtcblx0XHRcdFx0XHRcdFx0aXRlbS5kYXRhLnllYXIgPSBpdGVtLmRhdGFbdm0ubWV0YS55ZWFyX2ZpZWxkXTtcblxuXHRcdFx0XHRcdFx0XHRpZih2bS5tZXRhLnllYXJfZmllbGQgJiYgdm0ubWV0YS55ZWFyX2ZpZWxkICE9IFwieWVhclwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZGVsZXRlIGl0ZW0uZGF0YVt2bS5tZXRhLnllYXJfZmllbGRdO1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0dm0ubWV0YS5pc29fdHlwZSA9IGl0ZW0uZGF0YVt2bS5tZXRhLmlzb19maWVsZF0ubGVuZ3RoID09IDMgPyAnaXNvLTMxNjYtMScgOiAnaXNvLTMxNjYtMic7XG5cdFx0XHRcdFx0XHRcdGluc2VydERhdGEuZGF0YS5wdXNoKGl0ZW0uZGF0YSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRub1llYXJzLnB1c2goaXRlbSk7XG5cdFx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0b2FzdHIuZXJyb3IoJ1RoZXJlIGFyZSBzb21lIGVycm9ycyBsZWZ0IScsICdIdWNoIScpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5pbmRpY2F0b3JzLCBmdW5jdGlvbiAoaXRlbSwga2V5KSB7XG5cdFx0XHRcdFx0aWYgKGtleSAhPSB2bS5tZXRhLmlzb19maWVsZCAmJiBrZXkgIT0gdm0ubWV0YS5jb3VudHJ5X2ZpZWxkKSB7XG5cdFx0XHRcdFx0XHR2YXIgc3R5bGVfaWQgPSAwO1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiB2bS5pbmRpY2F0b3JzW2tleV0uc3R5bGUgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0XHRzdHlsZV9pZCA9IHZtLmluZGljYXRvcnNba2V5XS5zdHlsZS5pZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHZhciBmaWVsZCA9IHtcblx0XHRcdFx0XHRcdFx0J2NvbHVtbic6IGtleSxcblx0XHRcdFx0XHRcdFx0J3RpdGxlJzogdm0uaW5kaWNhdG9yc1trZXldLnRpdGxlLFxuXHRcdFx0XHRcdFx0XHQnZGVzY3JpcHRpb24nOiB2bS5pbmRpY2F0b3JzW2tleV0uZGVzY3JpcHRpb24sXG5cdFx0XHRcdFx0XHRcdCdtZWFzdXJlX3R5cGVfaWQnOiB2bS5pbmRpY2F0b3JzW2tleV0udHlwZS5pZCB8fCAwLFxuXHRcdFx0XHRcdFx0XHQnaXNfcHVibGljJzogdm0uaW5kaWNhdG9yc1trZXldLmlzX3B1YmxpYyB8fCAwLFxuXHRcdFx0XHRcdFx0XHQnc3R5bGVfaWQnOiBzdHlsZV9pZCxcblx0XHRcdFx0XHRcdFx0J2RhdGFwcm92aWRlcl9pZCc6IHZtLmluZGljYXRvcnNba2V5XS5kYXRhcHJvdmlkZXIuaWQgfHwgMFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHZhciBjYXRlZ29yaWVzID0gW107XG5cdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uaW5kaWNhdG9yc1trZXldLmNhdGVnb3JpZXMsIGZ1bmN0aW9uIChjYXQpIHtcblx0XHRcdFx0XHRcdFx0Y2F0ZWdvcmllcy5wdXNoKGNhdC5pZCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGZpZWxkLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzO1xuXHRcdFx0XHRcdFx0ZmllbGRzLnB1c2goZmllbGQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHZtLm1ldGEuZmllbGRzID0gZmllbGRzO1xuXHRcdFx0XHRpZihub1llYXJzLmxlbmd0aCA+IDApe1xuXHRcdFx0XHRcdHRvYXN0ci5lcnJvcihcImZvciBcIitub1llYXJzLmxlbmd0aCArIFwiIGVudHJpZXNcIiwgJ05vIHllYXIgdmFsdWUgZm91bmQhJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHREYXRhU2VydmljZS5wb3N0KCdkYXRhL3RhYmxlcycsIHZtLm1ldGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0RGF0YVNlcnZpY2UucG9zdCgnZGF0YS90YWJsZXMvJyArIHJlc3BvbnNlLnRhYmxlX25hbWUgKyAnL2luc2VydCcsIGluc2VydERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0XHRcdFx0aWYgKHJlcyA9PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRcdHRvYXN0ci5zdWNjZXNzKGluc2VydERhdGEuZGF0YS5sZW5ndGggKyAnIGl0ZW1zIGltcG9ydGV0IHRvICcgKyB2bS5tZXRhLm5hbWUsICdTdWNjZXNzJyk7XG5cdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5jbGVhcigpO1xuXHRcdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5teWRhdGEnKTtcblx0XHRcdFx0XHRcdFx0dm0uZGF0YSA9IFtdO1xuXHRcdFx0XHRcdFx0XHR2bS5zdGVwID0gMDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlLm1lc3NhZ2UpIHtcblx0XHRcdFx0XHRcdHRvYXN0ci5lcnJvcihyZXNwb25zZS5tZXNzYWdlLCAnT3VjaCEnKTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGV4RmluYWxNZW51Q3RybCcsIGZ1bmN0aW9uKEluZGV4U2VydmljZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0uZGF0YSA9IEluZGV4U2VydmljZS5nZXREYXRhKCk7XG4gICAgICB2bS5tZXRhID0gSW5kZXhTZXJ2aWNlLmdldE1ldGEoKTtcbiAgICAgIHZtLmluZGljYXRvcnMgPSBJbmRleFNlcnZpY2UuZ2V0SW5kaWNhdG9ycygpO1xuICAgICAgdm0uaW5kaWNhdG9yc0xlbmd0aCA9IE9iamVjdC5rZXlzKHZtLmluZGljYXRvcnMpLmxlbmd0aDtcblxuICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGV4TWV0YUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgVmVjdG9ybGF5ZXJTZXJ2aWNlLCR0aW1lb3V0LEluZGV4U2VydmljZSxsZWFmbGV0RGF0YSwgdG9hc3RyKXtcbiAgICAgICAgLy9cblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2bS5taW4gPSAxMDAwMDAwMDtcbiAgICAgICAgdm0ubWF4ID0gMDtcbiAgICAgICAgdm0uaW5kaWNhdG9ycyA9IFtdO1xuICAgICAgICB2bS5zY2FsZSA9IFwiXCI7XG4gICAgICAgIHZtLmRhdGEgPSBJbmRleFNlcnZpY2UuZ2V0RGF0YSgpO1xuICAgICAgICB2bS5tZXRhID0gSW5kZXhTZXJ2aWNlLmdldE1ldGEoKTtcbiAgICAgICAgdm0uZXJyb3JzID0gSW5kZXhTZXJ2aWNlLmdldEVycm9ycygpO1xuICAgICAgICB2bS5pbmRpY2F0b3IgPSBJbmRleFNlcnZpY2UuYWN0aXZlSW5kaWNhdG9yKCk7XG4gICAgICAgIHZtLmNvdW50cmllc1N0eWxlID0gY291bnRyaWVzU3R5bGU7XG4gICAgICAgIFZlY3RvcmxheWVyU2VydmljZS5jcmVhdGVDYW52YXMoJyNmZjAwMDAnKTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCl7XG4gICAgICAgICAgY2hlY2tEYXRhKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjaGVja0RhdGEoKXtcbiAgICAgICAgICBpZighdm0uZGF0YSl7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5pbmRleC5jcmVhdGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCl7IHJldHVybiBJbmRleFNlcnZpY2UuYWN0aXZlSW5kaWNhdG9yKCl9LCBmdW5jdGlvbihuLG8pe1xuICAgICAgICAgIGlmKG4gPT09IG8pcmV0dXJuO1xuICAgICAgICAgIHZtLmluZGljYXRvciA9IG47XG4gICAgICAgICAgdm0ubWluID0gMTAwMDAwMDA7XG4gICAgICAgICAgdm0ubWF4ID0gMDtcbiAgICAgICAgICBpZih2bS5pbmRpY2F0b3Iuc3R5bGUpe1xuICAgICAgICAgICAgVmVjdG9ybGF5ZXJTZXJ2aWNlLnVwZGF0ZUNhbnZhcyh2bS5pbmRpY2F0b3Iuc3R5bGUuYmFzZV9jb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRyYXdDb3VudHJpZXMoKTtcbiAgICAgICAgICAgIEluZGV4U2VydmljZS5zZXRUb0xvY2FsU3RvcmFnZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkc2NvcGUuJHdhdGNoKCd2bS5pbmRpY2F0b3InLCBmdW5jdGlvbihuLG8pe1xuICAgICAgICAgIGlmKG4gPT09IG8pIHJldHVybjtcbiAgICAgICAgICBpZih0eXBlb2Ygbi5zdHlsZV9pZCAhPSBcInVuZGVmaW5lZFwiICl7XG4gICAgICAgICAgICBpZihuLnN0eWxlX2lkICE9IG8uc3R5bGVfaWQpe1xuICAgICAgICAgICAgICBpZihuLnN0eWxlKXtcbiAgICAgICAgICAgICAgICBWZWN0b3JsYXllclNlcnZpY2UudXBkYXRlQ2FudmFzKG4uc3R5bGUuYmFzZV9jb2xvcik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgIFZlY3RvcmxheWVyU2VydmljZS51cGRhdGVDYW52YXMoJyNmZjAwMDAnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkcmF3Q291bnRyaWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICBpZih0eXBlb2Ygbi5jYXRlZ29yaWVzICE9IFwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICAgICBpZihuLmNhdGVnb3JpZXMubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICBWZWN0b3JsYXllclNlcnZpY2UudXBkYXRlQ2FudmFzKG4uY2F0ZWdvcmllc1swXS5zdHlsZS5iYXNlX2NvbG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIFZlY3RvcmxheWVyU2VydmljZS51cGRhdGVDYW52YXMoJyNmZjAwMDAnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZHJhd0NvdW50cmllcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBJbmRleFNlcnZpY2Uuc2V0QWN0aXZlSW5kaWNhdG9yRGF0YShuKTtcbiAgICAgICAgICBJbmRleFNlcnZpY2Uuc2V0VG9Mb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgfSx0cnVlKTtcblxuXG4gICAgICAgIGZ1bmN0aW9uIG1pbk1heCgpe1xuICAgICAgICAgIHZtLm1pbiA9IDEwMDAwMDAwO1xuICAgICAgICAgIHZtLm1heCA9IDA7XG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKGl0ZW0sIGtleSl7XG4gICAgICAgICAgICAgIHZtLm1pbiA9IE1hdGgubWluKGl0ZW0uZGF0YVt2bS5pbmRpY2F0b3IuY29sdW1uX25hbWVdLCB2bS5taW4pO1xuICAgICAgICAgICAgICB2bS5tYXggPSBNYXRoLm1heChpdGVtLmRhdGFbdm0uaW5kaWNhdG9yLmNvbHVtbl9uYW1lXSwgdm0ubWF4KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2bS5zY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpLmRvbWFpbihbdm0ubWluLHZtLm1heF0pLnJhbmdlKFswLDEwMF0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldFZhbHVlQnlJc28oaXNvKXtcbiAgICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtLCBrZXkpe1xuICAgICAgICAgICAgIGlmKGl0ZW0uZGF0YVt2bS5tZXRhLmlzb19maWVsZF0gPT0gaXNvKXtcbiAgICAgICAgICAgICAgIHZhbHVlID0gaXRlbS5kYXRhW3ZtLmluZGljYXRvci5jb2x1bW5fbmFtZV07XG4gICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjb3VudHJpZXNTdHlsZShmZWF0dXJlKSB7XG4gICAgXHRcdFx0dmFyIHN0eWxlID0ge307XG4gICAgXHRcdFx0dmFyIGlzbyA9IGZlYXR1cmUucHJvcGVydGllcy5pc29fYTI7XG4gICAgXHRcdFx0dmFyIHZhbHVlID0gZ2V0VmFsdWVCeUlzbyhpc28pIHx8IHZtLm1pbjtcbiAgICBcdFx0XHR2YXIgZmllbGQgPSB2bS5pbmRpY2F0b3IuY29sdW1uX25hbWU7XG4gICAgXHRcdFx0dmFyIHR5cGUgPSBmZWF0dXJlLnR5cGU7XG5cbiAgICBcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcbiAgICBcdFx0XHRjYXNlIDM6IC8vJ1BvbHlnb24nXG5cbiAgICBcdFx0XHRcdFx0dmFyIGNvbG9yUG9zID0gcGFyc2VJbnQoMjU2IC8gMTAwICogcGFyc2VJbnQodm0uc2NhbGUodmFsdWUpKSkgKiA0O1xuICAgIFx0XHRcdFx0XHR2YXIgY29sb3IgPSAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAxKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAyKSArICcsJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDMpICsgJyknO1xuICAgICAgICAgICAgICBzdHlsZS5jb2xvciA9ICdyZ2JhKCcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MpICArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAxKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAyKSArICcsMC42KSc7IC8vY29sb3I7XG4gICAgXHRcdFx0XHRcdHN0eWxlLm91dGxpbmUgPSB7XG4gICAgXHRcdFx0XHRcdFx0Y29sb3I6IGNvbG9yLFxuICAgIFx0XHRcdFx0XHRcdHNpemU6IDFcbiAgICBcdFx0XHRcdFx0fTtcbiAgICBcdFx0XHRcdFx0c3R5bGUuc2VsZWN0ZWQgPSB7XG4gICAgXHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKCcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MpICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDEpICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDIpICsgJywwLjMpJyxcbiAgICBcdFx0XHRcdFx0XHRvdXRsaW5lOiB7XG4gICAgXHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoNjYsNjYsNjYsMC45KScsXG4gICAgXHRcdFx0XHRcdFx0XHRzaXplOiAyXG4gICAgXHRcdFx0XHRcdFx0fVxuICAgIFx0XHRcdFx0XHR9O1xuICAgIFx0XHRcdFx0XHRicmVhaztcblxuICAgIFx0XHRcdH1cblxuICAgIFx0XHRcdGlmIChmZWF0dXJlLmxheWVyLm5hbWUgPT09IFZlY3RvcmxheWVyU2VydmljZS5nZXROYW1lKCkrJ19nZW9tJykge1xuICAgIFx0XHRcdFx0c3R5bGUuc3RhdGljTGFiZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgXHRcdFx0XHRcdHZhciBzdHlsZSA9IHtcbiAgICBcdFx0XHRcdFx0XHRodG1sOiBmZWF0dXJlLnByb3BlcnRpZXMubmFtZSxcbiAgICBcdFx0XHRcdFx0XHRpY29uU2l6ZTogWzEyNSwgMzBdLFxuICAgIFx0XHRcdFx0XHRcdGNzc0NsYXNzOiAnbGFiZWwtaWNvbi10ZXh0J1xuICAgIFx0XHRcdFx0XHR9O1xuICAgIFx0XHRcdFx0XHRyZXR1cm4gc3R5bGU7XG4gICAgXHRcdFx0XHR9O1xuICAgIFx0XHRcdH1cbiAgICBcdFx0XHRyZXR1cm4gc3R5bGU7XG4gICAgXHRcdH1cbiAgICAgICAgZnVuY3Rpb24gc2V0Q291bnRyaWVzKCl7XG4gICAgICAgICAgdm0ubXZ0U291cmNlLnNldFN0eWxlKGNvdW50cmllc1N0eWxlKTtcbiAgICAgICAgICB2bS5tdnRTb3VyY2UucmVkcmF3KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZHJhd0NvdW50cmllcygpIHtcbiAgICAgICAgICBtaW5NYXgoKTtcbiAgICBcdFx0XHRsZWFmbGV0RGF0YS5nZXRNYXAoJ21hcCcpLnRoZW4oZnVuY3Rpb24gKG1hcCkge1xuICAgIFx0XHRcdFx0dm0ubWFwID0gbWFwO1xuICAgIFx0XHRcdFx0dm0ubXZ0U291cmNlID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldExheWVyKCk7XG4gICAgXHRcdFx0XHQkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgXHRcdFx0XHRcdFx0c2V0Q291bnRyaWVzKCk7XG4gICAgXHRcdFx0XHR9KTtcbiAgICBcdFx0XHR9KTtcbiAgICBcdFx0fVxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW5kZXhNZXRhTWVudUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsJHN0YXRlLCB0b2FzdHIsIERhdGFTZXJ2aWNlLERpYWxvZ1NlcnZpY2UsIEluZGV4U2VydmljZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0uZGF0YSA9IEluZGV4U2VydmljZS5nZXREYXRhKCk7XG4gICAgICB2bS5tZXRhID0gSW5kZXhTZXJ2aWNlLmdldE1ldGEoKTtcbiAgICAgIEluZGV4U2VydmljZS5yZXNldEluZGljYXRvcigpO1xuICAgICAgdm0uaW5kaWNhdG9ycyA9IEluZGV4U2VydmljZS5nZXRJbmRpY2F0b3JzKCk7XG4gICAgICB2bS5zZWxlY3RGb3JFZGl0aW5nID0gc2VsZWN0Rm9yRWRpdGluZztcbiAgICAgIHZtLmNoZWNrRnVsbCA9IGNoZWNrRnVsbDtcbiAgICAgIHZtLmNoZWNrQmFzZSA9IGNoZWNrQmFzZTtcbiAgICAgIHZtLmNoZWNrQWxsID0gY2hlY2tBbGw7XG4gICAgICB2bS5zYXZlRGF0YSA9IHNhdmVEYXRhO1xuXG5cbiAgICAgIGZ1bmN0aW9uIHNlbGVjdEZvckVkaXRpbmcoa2V5KXtcbiAgICAgICAgaWYodHlwZW9mIEluZGV4U2VydmljZS5nZXRJbmRpY2F0b3Ioa2V5KSA9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgICAgICBJbmRleFNlcnZpY2Uuc2V0SW5kaWNhdG9yKGtleSx7XG4gICAgICAgICAgICBjb2x1bW5fbmFtZTprZXksXG4gICAgICAgICAgICB0aXRsZTprZXlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2bS5lZGl0aW5nSXRlbSA9IGtleTtcbiAgICAgICAgdm0uaW5kaWNhdG9yID0gSW5kZXhTZXJ2aWNlLmdldEluZGljYXRvcihrZXkpO1xuICAgICAgICBJbmRleFNlcnZpY2Uuc2V0VG9Mb2NhbFN0b3JhZ2UoKTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNoZWNrQmFzZShpdGVtKXtcbiAgICAgICAgaWYodHlwZW9mIGl0ZW0gPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGZhbHNlO1xuICBcdFx0XHRpZiAoaXRlbS50aXRsZSAmJiBpdGVtLnR5cGUgJiYgaXRlbS5kYXRhcHJvdmlkZXIgJiYgaXRlbS50aXRsZS5sZW5ndGggPj0gMykge1xuICBcdFx0XHRcdHJldHVybiB0cnVlO1xuICBcdFx0XHR9XG4gIFx0XHRcdHJldHVybiBmYWxzZTtcbiAgXHRcdH1cbiAgXHRcdGZ1bmN0aW9uIGNoZWNrRnVsbChpdGVtKXtcbiAgICAgICAgaWYodHlwZW9mIGl0ZW0gPT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgaXRlbS5jYXRlZ29yaWVzID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcbiAgXHRcdFx0cmV0dXJuIGNoZWNrQmFzZShpdGVtKSAmJiBpdGVtLmNhdGVnb3JpZXMubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuICBcdFx0fVxuICAgICAgZnVuY3Rpb24gY2hlY2tBbGwoKXtcbiAgICAgICAgdmFyIGRvbmUgPSAwO1xuICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uaW5kaWNhdG9ycywgZnVuY3Rpb24oaW5kaWNhdG9yKXtcbiAgICAgICAgICBpZihjaGVja0Jhc2UoaW5kaWNhdG9yKSl7XG4gICAgICAgICAgICBkb25lICsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coZG9uZSwgT2JqZWN0LmtleXModm0uaW5kaWNhdG9ycykubGVuZ3RoKTtcbiAgICAgICAgaWYoZG9uZSA9PSBPYmplY3Qua2V5cyh2bS5pbmRpY2F0b3JzKS5sZW5ndGgpe1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIHNhdmVEYXRhKCkge1xuXG4gICAgICAgICAgaWYoIXZtLm1ldGEueWVhcl9maWVsZCAmJiAhdm0ubWV0YS55ZWFyKXtcbiAgICAgICAgICAgIERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdhZGRZZWFyJywgJHNjb3BlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gIFx0XHRcdFx0dmFyIGluc2VydERhdGEgPSB7XG4gIFx0XHRcdFx0XHRkYXRhOiBbXVxuICBcdFx0XHRcdH07XG4gIFx0XHRcdFx0dmFyIG5vWWVhcnMgPSBbXTtcbiAgXHRcdFx0XHR2YXIgaW5zZXJ0TWV0YSA9IFtdLFxuICBcdFx0XHRcdFx0ZmllbGRzID0gW107XG4gIFx0XHRcdFx0dm0ubG9hZGluZyA9IHRydWU7XG4gIFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHtcbiAgXHRcdFx0XHRcdGlmIChpdGVtLmVycm9ycy5sZW5ndGggPT0gMCkge1xuICBcdFx0XHRcdFx0XHRpZihpdGVtLmRhdGFbdm0ubWV0YS55ZWFyX2ZpZWxkXSl7XG4gIFx0XHRcdFx0XHRcdFx0aXRlbS5kYXRhLnllYXIgPSBpdGVtLmRhdGFbdm0ubWV0YS55ZWFyX2ZpZWxkXTtcblxuICBcdFx0XHRcdFx0XHRcdGlmKHZtLm1ldGEueWVhcl9maWVsZCAmJiB2bS5tZXRhLnllYXJfZmllbGQgIT0gXCJ5ZWFyXCIpIHtcbiAgXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSBpdGVtLmRhdGFbdm0ubWV0YS55ZWFyX2ZpZWxkXTtcbiAgXHRcdFx0XHRcdFx0XHR9XG5cbiAgXHRcdFx0XHRcdFx0XHR2bS5tZXRhLmlzb190eXBlID0gaXRlbS5kYXRhW3ZtLm1ldGEuaXNvX2ZpZWxkXS5sZW5ndGggPT0gMyA/ICdpc28tMzE2Ni0xJyA6ICdpc28tMzE2Ni0yJztcbiAgXHRcdFx0XHRcdFx0XHRpbnNlcnREYXRhLmRhdGEucHVzaChpdGVtLmRhdGEpO1xuICBcdFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0XHRcdGVsc2V7XG4gICAgICAgICAgICAgICAgaWYodm0ubWV0YS55ZWFyKXtcbiAgICAgICAgICAgICAgICAgIGl0ZW0uZGF0YS55ZWFyID0gdm0ubWV0YS55ZWFyO1xuICAgICAgICAgICAgICAgICAgdm0ubWV0YS5pc29fdHlwZSA9IGl0ZW0uZGF0YVt2bS5tZXRhLmlzb19maWVsZF0ubGVuZ3RoID09IDMgPyAnaXNvLTMxNjYtMScgOiAnaXNvLTMxNjYtMic7XG4gICAgXHRcdFx0XHRcdFx0XHRpbnNlcnREYXRhLmRhdGEucHVzaChpdGVtLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgXHRub1llYXJzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgXHRcdFx0XHRcdFx0fVxuXG5cbiAgXHRcdFx0XHRcdH0gZWxzZSB7XG4gIFx0XHRcdFx0XHRcdHRvYXN0ci5lcnJvcignVGhlcmUgYXJlIHNvbWUgZXJyb3JzIGxlZnQhJywgJ0h1Y2ghJyk7XG4gIFx0XHRcdFx0XHRcdHJldHVybjtcbiAgXHRcdFx0XHRcdH1cbiAgXHRcdFx0XHR9KTtcbiAgXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uaW5kaWNhdG9ycywgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuICBcdFx0XHRcdFx0aWYgKGtleSAhPSB2bS5tZXRhLmlzb19maWVsZCAmJiBrZXkgIT0gdm0ubWV0YS5jb3VudHJ5X2ZpZWxkKSB7XG4gIFx0XHRcdFx0XHRcdHZhciBzdHlsZV9pZCA9IDA7XG4gIFx0XHRcdFx0XHRcdGlmICh0eXBlb2Ygdm0uaW5kaWNhdG9yc1trZXldLnN0eWxlICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgXHRcdFx0XHRcdFx0XHRzdHlsZV9pZCA9IHZtLmluZGljYXRvcnNba2V5XS5zdHlsZS5pZDtcbiAgXHRcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0XHR2YXIgZmllbGQgPSB7XG4gIFx0XHRcdFx0XHRcdFx0J2NvbHVtbic6IGtleSxcbiAgXHRcdFx0XHRcdFx0XHQndGl0bGUnOiB2bS5pbmRpY2F0b3JzW2tleV0udGl0bGUsXG4gIFx0XHRcdFx0XHRcdFx0J2Rlc2NyaXB0aW9uJzogdm0uaW5kaWNhdG9yc1trZXldLmRlc2NyaXB0aW9uLFxuICBcdFx0XHRcdFx0XHRcdCdtZWFzdXJlX3R5cGVfaWQnOiB2bS5pbmRpY2F0b3JzW2tleV0udHlwZS5pZCB8fCAwLFxuICBcdFx0XHRcdFx0XHRcdCdpc19wdWJsaWMnOiB2bS5pbmRpY2F0b3JzW2tleV0uaXNfcHVibGljIHx8IDAsXG4gIFx0XHRcdFx0XHRcdFx0J3N0eWxlX2lkJzogc3R5bGVfaWQsXG4gIFx0XHRcdFx0XHRcdFx0J2RhdGFwcm92aWRlcl9pZCc6IHZtLmluZGljYXRvcnNba2V5XS5kYXRhcHJvdmlkZXIuaWQgfHwgMFxuICBcdFx0XHRcdFx0XHR9O1xuICBcdFx0XHRcdFx0XHR2YXIgY2F0ZWdvcmllcyA9IFtdO1xuICBcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uaW5kaWNhdG9yc1trZXldLmNhdGVnb3JpZXMsIGZ1bmN0aW9uIChjYXQpIHtcbiAgXHRcdFx0XHRcdFx0XHRjYXRlZ29yaWVzLnB1c2goY2F0LmlkKTtcbiAgXHRcdFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0XHRcdGZpZWxkLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzO1xuICBcdFx0XHRcdFx0XHRmaWVsZHMucHVzaChmaWVsZCk7XG4gIFx0XHRcdFx0XHR9XG4gIFx0XHRcdFx0fSk7XG4gIFx0XHRcdFx0dm0ubWV0YS5maWVsZHMgPSBmaWVsZHM7XG4gIFx0XHRcdFx0aWYobm9ZZWFycy5sZW5ndGggPiAwKXtcbiAgXHRcdFx0XHRcdHRvYXN0ci5lcnJvcihcImZvciBcIitub1llYXJzLmxlbmd0aCArIFwiIGVudHJpZXNcIiwgJ05vIHllYXIgdmFsdWUgZm91bmQhJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gIFx0XHRcdFx0fVxuXG4gIFx0XHRcdFx0RGF0YVNlcnZpY2UucG9zdCgnZGF0YS90YWJsZXMnLCB2bS5tZXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICBcdFx0XHRcdFx0RGF0YVNlcnZpY2UucG9zdCgnZGF0YS90YWJsZXMvJyArIHJlc3BvbnNlLnRhYmxlX25hbWUgKyAnL2luc2VydCcsIGluc2VydERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICBcdFx0XHRcdFx0XHRpZiAocmVzID09IHRydWUpIHtcbiAgXHRcdFx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcyhpbnNlcnREYXRhLmRhdGEubGVuZ3RoICsgJyBpdGVtcyBpbXBvcnRldCB0byAnICsgdm0ubWV0YS5uYW1lLCAnU3VjY2VzcycpO1xuICBcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5jbGVhcigpO1xuICBcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4Lm15ZGF0YScpO1xuICBcdFx0XHRcdFx0XHRcdHZtLmRhdGEgPSBbXTtcbiAgXHRcdFx0XHRcdFx0XHR2bS5zdGVwID0gMDtcbiAgXHRcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XG4gIFx0XHRcdFx0XHR9KTtcbiAgXHRcdFx0XHR9LCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgXHRcdFx0XHRcdGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XG4gIFx0XHRcdFx0XHRcdHRvYXN0ci5lcnJvcihyZXNwb25zZS5tZXNzYWdlLCAnT3VjaCEnKTtcblxuICBcdFx0XHRcdFx0fVxuICBcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xuICBcdFx0XHRcdH0pXG5cbiAgXHRcdH1cbiAgICAgIGZ1bmN0aW9uIGNvcHlUb090aGVycygpe1xuICAgICAgLyogIHZtLnByZVByb3ZpZGVyID0gdm0uaW5kaWNhdG9yc1tvLmNvbHVtbl9uYW1lXS5kYXRhcHJvdmlkZXI7XG4gICAgICAgIHZtLnByZU1lYXN1cmUgPSB2bS5pbmRpY2F0b3JzW28uY29sdW1uX25hbWVdLm1lYXN1cmVfdHlwZV9pZDtcbiAgICAgICAgdm0ucHJlVHlwZSA9IHZtLmluZGljYXRvcnNbby5jb2x1bW5fbmFtZV0udHlwZTtcbiAgICAgICAgdm0ucHJlQ2F0ZWdvcmllcyA9IHZtLmluZGljYXRvcnNbby5jb2x1bW5fbmFtZV0uY2F0ZWdvcmllcztcbiAgICAgICAgdm0ucHJlUHVibGljID0gdm0uaW5kaWNhdG9yc1tvLmNvbHVtbl9uYW1lXS5pc19wdWJsaWM7XG4gICAgICAgIHZtLnByZVN0eWxlID0gdm0uaW5kaWNhdG9yc1tvLmNvbHVtbl9uYW1lXS5zdHlsZTtcblxuICAgICAgICBEaWFsb2dTZXJ2aWNlLmZyb21UZW1wbGF0ZSgnY29weXByb3ZpZGVyJywgJHNjb3BlKTsqL1xuICAgICAgfVxuICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uKCl7IHJldHVybiBJbmRleFNlcnZpY2UuYWN0aXZlSW5kaWNhdG9yKCl9LCBmdW5jdGlvbihuLG8pe1xuICAgICAgICBpZihuID09PSBvKXJldHVybjtcbiAgICAgICAgdm0uaW5kaWNhdG9yc1tuLmNvbHVtbl9uYW1lXSA9IG47XG4gICAgICB9LHRydWUpO1xuICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbigpeyByZXR1cm4gSW5kZXhTZXJ2aWNlLmFjdGl2ZUluZGljYXRvcigpfSwgZnVuY3Rpb24obixvKXtcbiAgICAgICAgaWYgKG4gPT09IG8gfHwgdHlwZW9mIG8gPT0gXCJ1bmRlZmluZWRcIiB8fCBvID09IG51bGwpIHJldHVybjtcbiAgICAgICAgaWYoIXZtLmFza2VkVG9SZXBsaWNhdGUpIHtcbiAgICAgICAgICB2bS5wcmVQcm92aWRlciA9IHZtLmluZGljYXRvcnNbby5jb2x1bW5fbmFtZV0uZGF0YXByb3ZpZGVyO1xuICAgICAgICAgIHZtLnByZU1lYXN1cmUgPSB2bS5pbmRpY2F0b3JzW28uY29sdW1uX25hbWVdLm1lYXN1cmVfdHlwZV9pZDtcbiAgICAgICAgICB2bS5wcmVUeXBlID0gdm0uaW5kaWNhdG9yc1tvLmNvbHVtbl9uYW1lXS50eXBlO1xuICAgICAgICAgIHZtLnByZUNhdGVnb3JpZXMgPSB2bS5pbmRpY2F0b3JzW28uY29sdW1uX25hbWVdLmNhdGVnb3JpZXM7XG4gICAgICAgICAgdm0ucHJlUHVibGljID0gdm0uaW5kaWNhdG9yc1tvLmNvbHVtbl9uYW1lXS5pc19wdWJsaWM7XG4gICAgICAgICAgdm0ucHJlU3R5bGUgPSB2bS5pbmRpY2F0b3JzW28uY29sdW1uX25hbWVdLnN0eWxlO1xuXG4gICAgICAgICAgRGlhbG9nU2VydmljZS5mcm9tVGVtcGxhdGUoJ2NvcHlwcm92aWRlcicsICRzY29wZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9uLmRhdGFwcm92aWRlciA9IHZtLmRvUHJvdmlkZXJzID8gdm0ucHJlUHJvdmlkZXIgOiBbXTtcbiAgICAgICAgICAvL24ubWVhc3VyZV90eXBlX2lkID0gdm0uZG9NZWFzdXJlcyA/IHZtLnByZU1lYXN1cmUgOiAwO1xuICAgICAgICAgIC8vbi5jYXRlZ29yaWVzID0gdm0uZG9DYXRlZ29yaWVzID8gdm0ucHJlQ2F0ZWdvcmllczogW107XG4gICAgICAgICAgLy9uLmlzX3B1YmxpYyA9IHZtLmRvUHVibGljID8gdm0ucHJlUHVibGljOiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICB9KTtcbiAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleE15RGF0YUN0cmwnLCBmdW5jdGlvbigpe1xuICAgICAgICAvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW5kZXhNeURhdGFFbnRyeUN0cmwnLCBmdW5jdGlvbihVc2VyU2VydmljZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgdm0uZGF0YSA9IFVzZXJTZXJ2aWNlLm15RGF0YSgpO1xuICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGV4TXlEYXRhTWVudUN0cmwnLCBmdW5jdGlvbihVc2VyU2VydmljZSl7XG4gICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICB2bS5kYXRhID0gW107XG5cbiAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCl7XG4gICAgICAgIFVzZXJTZXJ2aWNlLm15RGF0YSgpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgdm0uZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICBjb252ZXJ0SW5mbygpO1xuICAgICAgICB9KVxuXG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBjb252ZXJ0SW5mbygpe1xuICAgICAgICBjb25zb2xlLmxvZyh2bS5kYXRhKTtcbiAgICAgICAgYW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgICAgaXRlbS5tZXRhID0gSlNPTi5wYXJzZShpdGVtLm1ldGFfZGF0YSk7XG4gICAgICAgIH0pXG5cbiAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleGNyZWF0b3JDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBEaWFsb2dTZXJ2aWNlLERhdGFTZXJ2aWNlLCAkdGltZW91dCwkc3RhdGUsICRmaWx0ZXIsIGxlYWZsZXREYXRhLCB0b2FzdHIsIEljb25zU2VydmljZSxJbmRleFNlcnZpY2UsIFZlY3RvcmxheWVyU2VydmljZSl7XG5cbiAgICAgICAgLy9UT0RPOiBDaGVjayBpZiB0aGVyZSBpcyBkYXRhIGluIHN0b3JhZ2UgdG8gZmluaXNoXG4gICAgICAvKiAgY29uc29sZS5sb2coJHN0YXRlKTtcbiAgICAgICAgaWYoJHN0YXRlLmN1cnJlbnQubmFtZSA9PSAnYXBwLmluZGV4LmNyZWF0ZScpe1xuICAgICAgICAgIGlmKEluZGV4U2VydmljZS5nZXREYXRhKCkubGVuZ3RoKXtcbiAgICAgICAgICAgIGlmKGNvbmZpcm0oJ0V4aXN0aW5nIERhdGEuIEdvIE9uPycpKXtcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdhcHAuaW5kZXguY2hlY2snKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgIEluZGV4U2VydmljZS5jbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSovXG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ubWFwID0gbnVsbDtcbiAgICAgICAgdm0uZGF0YSA9IFtdO1xuICAgICAgICB2bS50b1NlbGVjdCA9IFtdO1xuICAgICAgICB2bS5zZWxlY3RlZCA9IFtdO1xuICAgICAgICB2bS5zZWxlY3RlZFJvd3MgPSBbXTtcbiAgICAgICAgdm0uc2VsZWN0ZWRSZXNvdXJjZXMgPVtdO1xuICAgICAgICB2bS5zb3J0ZWRSZXNvdXJjZXMgPSBbXTtcblxuICAgICAgICB2bS5ncm91cHMgPSBbXTtcbiAgICAgICAgdm0ubXlEYXRhID0gW107XG4gICAgICAgIHZtLmFkZERhdGFUbyA9IHt9O1xuICAgICAgICB2bS5zZWxlY3RlZEZvckdyb3VwID0gW107XG4gICAgICAgIHZtLmlzb19lcnJvcnMgPSAwO1xuICAgICAgICB2bS5pc29fY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICB2bS5zYXZlRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdm0uc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAgIHZtLnN0ZXAgPSAwO1xuICAgICAgICB2bS5vcGVuQ2xvc2UgPSBvcGVuQ2xvc2U7XG4gICAgICAgIC8vdm0uc2VhcmNoID0gc2VhcmNoO1xuXG4gICAgICAgIHZtLmxpc3RSZXNvdXJjZXMgPSBsaXN0UmVzb3VyY2VzO1xuICAgICAgICB2bS50b2dnbGVMaXN0UmVzb3VyY2VzID0gdG9nZ2xlTGlzdFJlc291cmNlcztcbiAgICAgICAgdm0uc2VsZWN0ZWRSZXNvdXJjZSA9IHNlbGVjdGVkUmVzb3VyY2U7XG4gICAgICAgIHZtLnRvZ2dsZVJlc291cmNlID0gdG9nZ2xlUmVzb3VyY2U7XG4gICAgICAgIHZtLmluY3JlYXNlUGVyY2VudGFnZSA9IGluY3JlYXNlUGVyY2VudGFnZTtcbiAgICAgICAgdm0uZGVjcmVhc2VQZXJjZW50YWdlID0gZGVjcmVhc2VQZXJjZW50YWdlO1xuICAgICAgICB2bS50b2dnbGVHcm91cFNlbGVjdGlvbiA9IHRvZ2dsZUdyb3VwU2VsZWN0aW9uO1xuICAgICAgICB2bS5leGlzdHNJbkdyb3VwU2VsZWN0aW9uID0gZXhpc3RzSW5Hcm91cFNlbGVjdGlvbjtcbiAgICAgICAgdm0uYWRkR3JvdXAgPSBhZGRHcm91cDtcbiAgICAgICAgdm0uY2xvbmVTZWxlY3Rpb24gPSBjbG9uZVNlbGVjdGlvbjtcbiAgICAgICAgdm0uZWRpdEVudHJ5ID0gZWRpdEVudHJ5O1xuICAgICAgICB2bS5yZW1vdmVFbnRyeSA9IHJlbW92ZUVudHJ5O1xuICAgICAgICB2bS5zYXZlSW5kZXggPSBzYXZlSW5kZXg7XG5cbiAgICAgICAgdm0uaWNvbnMgPSBJY29uc1NlcnZpY2UuZ2V0TGlzdCgpO1xuXG4gICAgICAgIHZtLm1ldGEgPSB7XG4gICAgICAgICAgaXNvX2ZpZWxkOiAnJyxcbiAgICAgICAgICBjb3VudHJ5X2ZpZWxkOicnLFxuICAgICAgICAgIHRhYmxlOltdXG4gICAgICAgIH07XG4gICAgICAgIHZtLnF1ZXJ5ID0ge1xuICAgICAgICAgIGZpbHRlcjogJycsXG4gICAgICAgICAgb3JkZXI6ICctZXJyb3JzJyxcbiAgICAgICAgICBsaW1pdDogMTUsXG4gICAgICAgICAgcGFnZTogMVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qdm0udHJlZU9wdGlvbnMgPSB7XG4gICAgICAgICAgYmVmb3JlRHJvcDpmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICBpZihldmVudC5kZXN0Lm5vZGVzU2NvcGUgIT0gZXZlbnQuc291cmNlLm5vZGVzU2NvcGUpe1xuICAgICAgICAgICAgICB2YXIgaWR4ID0gZXZlbnQuZGVzdC5ub2Rlc1Njb3BlLiRtb2RlbFZhbHVlLmluZGV4T2YoZXZlbnQuc291cmNlLm5vZGVTY29wZS4kbW9kZWxWYWx1ZSk7XG4gICAgICAgICAgICAgIGlmKGlkeCA+IC0xKXtcbiAgICAgICAgICAgICAgICAgZXZlbnQuc291cmNlLm5vZGVTY29wZS4kJGFwcGx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcignT25seSBvbmUgZWxlbWVudCBvZiBhIGtpbmQgcGVyIGdyb3VwIHBvc3NpYmxlIScsICdOb3QgYWxsb3dlZCEnKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkcm9wcGVkOmZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgIGNhbGNQZXJjZW50YWdlKHZtLmdyb3Vwcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9OyovXG5cbiAgICAgICAgLy9SdW4gU3RhcnR1cC1GdW5jaXRvbnNcbiAgICAgICAgYWN0aXZhdGUoKTtcblxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpe1xuICAgICAgICAgIC8vY2xlYXJNYXAoKTtcbiAgICAgICAgICBJbmRleFNlcnZpY2UucmVzZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBvcGVuQ2xvc2UoYWN0aXZlKXtcbiAgICAgICAgICByZXR1cm4gYWN0aXZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBjbGVhckxheWVyU3R5bGUoZmVhdHVyZSl7XG4gICAgICBcdFx0XHR2YXIgc3R5bGUgPSB7XG4gICAgICAgICAgICAgIGNvbG9yOidyZ2JhKDI1NSwyNTUsMjU1LDApJyxcbiAgICAgICAgICAgICAgb3V0bGluZToge1xuICAgIFx0XHRcdFx0XHRcdGNvbG9yOiAncmdiYSgyNTUsMjU1LDI1NSwwKScsXG4gICAgXHRcdFx0XHRcdFx0c2l6ZTogMVxuICAgIFx0XHRcdFx0XHR9XG4gICAgICAgICAgICB9O1xuICAgICAgXHRcdFx0cmV0dXJuIHN0eWxlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyTWFwKCl7XG4gICAgICAgICAgXHRsZWFmbGV0RGF0YS5nZXRNYXAoJ21hcCcpLnRoZW4oZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICAgICAgICB2bS5tdnRTb3VyY2UgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TGF5ZXIoKTtcbiAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICB2bS5tdnRTb3VyY2Uuc2V0U3R5bGUoY2xlYXJMYXllclN0eWxlKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVMaXN0UmVzb3VyY2VzKCl7XG4gICAgICAgICAgdm0uc2hvd1Jlc291cmNlcyA9ICF2bS5zaG93UmVzb3VyY2VzO1xuICAgICAgICAgIGlmKHZtLnNob3dSZXNvdXJjZXMpe1xuICAgICAgICAgICAgdm0ubGlzdFJlc291cmNlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBsaXN0UmVzb3VyY2VzKCl7XG4gICAgICAgICAgaWYoIXZtLnJlc291cmNlcyl7XG4gICAgICAgICAgICBEYXRhU2VydmljZS5nZXRBbGwoJ2RhdGEvdGFibGVzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgIHZtLnJlc291cmNlcyA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICB2bS5zZWxlY3RlZFJlc291cmNlcyA9IFtdLCB2bS5zb3J0ZWRSZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0ZWRSZXNvdXJjZShyZXNvdXJjZSl7XG4gICAgICAgICAgcmV0dXJuIHZtLnNlbGVjdGVkUmVzb3VyY2VzLmluZGV4T2YocmVzb3VyY2UpID4gLTEgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlRnJvbUdyb3VwKHJlc291cmNlLCBsaXN0KXtcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24oaXRlbSwga2V5KXtcbiAgICAgICAgICAgICAgLy9pZih0eXBlb2YgaXRlbS5pc0dyb3VwID09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICAgICAgIGlmKGl0ZW0gPT0gcmVzb3VyY2Upe1xuICAgICAgICAgICAgICAgICAgbGlzdC5zcGxpY2Uoa2V5LCAxKTtcbiAgICAgICAgICAgICAgICAgIHZtLnNlbGVjdGVkRm9yR3JvdXAuc3BsaWNlKHZtLnNlbGVjdGVkRm9yR3JvdXAuaW5kZXhPZihpdGVtKSwgMSk7XG4gICAgICAgICAgICAgICAgICB2bS5zZWxlY3RlZFJlc291cmNlcy5zcGxpY2Uodm0uc2VsZWN0ZWRSZXNvdXJjZXMuaW5kZXhPZihpdGVtKSwxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICBkZWxldGVGcm9tR3JvdXAocmVzb3VyY2UsIGl0ZW0ubm9kZXMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZVJlc291cmNlKHJlc291cmNlKXtcbiAgICAgICAgICB2YXIgaWR4ID0gdm0uc2VsZWN0ZWRSZXNvdXJjZXMuaW5kZXhPZihyZXNvdXJjZSk7XG4gICAgICAgICAgaWYoIGlkeCA+IC0xKXtcbiAgICAgICAgICAgIHZtLnNlbGVjdGVkUmVzb3VyY2VzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgZGVsZXRlRnJvbUdyb3VwKHJlc291cmNlLCB2bS5ncm91cHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgdm0uc2VsZWN0ZWRSZXNvdXJjZXMucHVzaChyZXNvdXJjZSk7XG4gICAgICAgICAgICBpZih2bS5zZWxlY3RlZEZvckdyb3VwLmxlbmd0aCA9PSAxICYmIHR5cGVvZiB2bS5zZWxlY3RlZEZvckdyb3VwWzBdLmlzR3JvdXAgIT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICAgIHZtLnNlbGVjdGVkRm9yR3JvdXBbMF0ubm9kZXMucHVzaChyZXNvdXJjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHZtLmdyb3Vwcy5wdXNoKHJlc291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL2NhbGNQZXJjZW50YWdlKHZtLnNvcnRlZFJlc291cmNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2FsY1BlcmNlbnRhZ2Uobm9kZXMpe1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChub2RlcywgZnVuY3Rpb24obm9kZSwga2V5KXtcbiAgICAgICAgICAgIG5vZGVzW2tleV0ud2VpZ2h0ID0gcGFyc2VJbnQoMTAwIC8gbm9kZXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGNhbGNQZXJjZW50YWdlKG5vZGVzLm5vZGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGluY3JlYXNlUGVyY2VudGFnZShpdGVtKXtcbiAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkZWNyZWFzZVBlcmNlbnRhZ2UoaXRlbSl7XG4gICAgICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVHcm91cFNlbGVjdGlvbihpdGVtKXtcbiAgICAgICAgICB2YXIgaWR4ID0gdm0uc2VsZWN0ZWRGb3JHcm91cC5pbmRleE9mKGl0ZW0pO1xuICAgICAgICAgIGlmKCBpZHggPiAtMSl7XG4gICAgICAgICAgICB2bS5zZWxlY3RlZEZvckdyb3VwLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgdm0uc2VsZWN0ZWRGb3JHcm91cC5wdXNoKGl0ZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBleGlzdHNJbkdyb3VwU2VsZWN0aW9uKGl0ZW0pe1xuICAgICAgICAgIHJldHVybiB2bS5zZWxlY3RlZEZvckdyb3VwLmluZGV4T2YoaXRlbSkgPiAtMTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZGRHcm91cCgpe1xuICAgICAgICAgIHZhciBuZXdHcm91cCA9IHtcbiAgICAgICAgICAgIHRpdGxlOidHcm91cCcsXG4gICAgICAgICAgICBpc0dyb3VwOnRydWUsXG4gICAgICAgICAgICBub2RlczpbXVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBpZih2bS5zZWxlY3RlZEZvckdyb3VwLmxlbmd0aCA9PSAxICYmIHR5cGVvZiB2bS5zZWxlY3RlZEZvckdyb3VwWzBdLmlzR3JvdXAgIT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICB2bS5zZWxlY3RlZEZvckdyb3VwWzBdLm5vZGVzLnB1c2gobmV3R3JvdXApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKHZtLnNlbGVjdGVkRm9yR3JvdXAubGVuZ3RoID4gMCApe1xuICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0ZWRGb3JHcm91cCwgZnVuY3Rpb24oaXRlbSwga2V5KXtcbiAgICAgICAgICAgICAgICAgIG5ld0dyb3VwLm5vZGVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgICBkZWxldGVGcm9tR3JvdXAoaXRlbSwgdm0uc2VsZWN0ZWRGb3JHcm91cCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB2bS5ncm91cHMucHVzaChuZXdHcm91cCk7XG4gICAgICAgICAgICAgIHZtLnNlbGVjdGVkRm9yR3JvdXAgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHZtLmdyb3Vwcy5wdXNoKG5ld0dyb3VwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2xvbmVTZWxlY3Rpb24oKXtcbiAgICAgICAgICB2YXIgbmV3R3JvdXAgPSB7XG4gICAgICAgICAgICB0aXRsZTonQ2xvbmVkIEVsZW1lbnRzJyxcbiAgICAgICAgICAgIGlzR3JvdXA6dHJ1ZSxcbiAgICAgICAgICAgIG5vZGVzOltdXG4gICAgICAgICAgfTtcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0ZWRGb3JHcm91cCwgZnVuY3Rpb24oaXRlbSwga2V5KXtcbiAgICAgICAgICAgIG5ld0dyb3VwLm5vZGVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdm0uZ3JvdXBzLnB1c2gobmV3R3JvdXApO1xuICAgICAgICAgIHZtLnNlbGVjdGVkRm9yR3JvdXAgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBlZGl0RW50cnkoaXRlbSl7XG4gICAgICAgICAgdm0uZWRpdEl0ZW0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUVudHJ5KGl0ZW0sIGxpc3Qpe1xuICAgICAgICAgICAgZGVsZXRlRnJvbUdyb3VwKGl0ZW0sIGxpc3QpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNhdmVJbmRleCgpe1xuICAgICAgICAgIGlmKHZtLnNhdmVEaXNhYmxlZCl7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHZtLnNhdmVEaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgaWYodHlwZW9mIHZtLm5ld0luZGV4ID09ICd1bmRlZmluZWQnKXtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcignWW91IG5lZWQgdG8gZW50ZXIgYSB0aXRsZSEnLCdJbmZvIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHZtLnNhdmVEaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZighdm0ubmV3SW5kZXgudGl0bGUpe1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdZb3UgbmVlZCB0byBlbnRlciBhIHRpdGxlIScsJ0luZm8gbWlzc2luZycpO1xuICAgICAgICAgICAgdm0uc2F2ZURpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHZtLm5ld0luZGV4LmRhdGEgPSB2bS5ncm91cHM7XG4gICAgICAgICAgRGF0YVNlcnZpY2UucG9zdCgnaW5kZXgnLCB2bS5uZXdJbmRleCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICB2bS5zYXZlRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdZb3VyIEluZGV4IGhhcyBiZWVuIGNyZWF0ZWQnLCAnU3VjY2VzcycpLFxuICAgICAgICAgICAgJHN0YXRlLmdvKCdhcHAuaW5kZXguc2hvdycsIHtpbmRleDpyZXNwb25zZS5uYW1lfSk7XG4gICAgICAgICAgfSxmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICB2bS5zYXZlRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihyZXNwb25zZS5tZXNzYWdlLCdVcHBzISEnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKiRzY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdWNjZXNzXCIsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xuICAgICAgICAgIGlmKCF2bS5kYXRhLmxlbmd0aCl7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5pbmRleC5jcmVhdGUnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgIHN3aXRjaCAodG9TdGF0ZS5uYW1lKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2FwcC5pbmRleC5jcmVhdGUnOlxuICAgICAgICAgICAgICAgICAgdm0uc3RlcCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FwcC5pbmRleC5jcmVhdGUuYmFzaWMnOlxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codm0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHZtLnN0ZXAgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjaGVja015RGF0YSgpO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FwcC5pbmRleC5jcmVhdGUuY2hlY2snOlxuICAgICAgICAgICAgICAgICAgdm0uc3RlcCA9IDI7XG4gICAgICAgICAgICAgICAgICB2bS5zaG93VXBsb2FkQ29udGFpbmVyID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FwcC5pbmRleC5jcmVhdGUubWV0YSc6XG4gICAgICAgICAgICAgICAgICB2bS5zdGVwID0gMztcbiAgICAgICAgICAgICAgICAgICAgdm0uc2hvd1VwbG9hZENvbnRhaW5lciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgJ2FwcC5pbmRleC5jcmVhdGUuZmluYWwnOlxuICAgICAgICAgICAgICAgICAgdm0uc3RlcCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIHZtLnNob3dVcGxvYWRDb250YWluZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7Ki9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleGVkaXRvcmNhdGVnb3J5Q3RybCcsIGZ1bmN0aW9uICgkc3RhdGUsIGNhdGVnb3J5LCBjYXRlZ29yaWVzLCBEYXRhU2VydmljZSxDb250ZW50U2VydmljZSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uY2F0ZWdvcnkgPSBjYXRlZ29yeTtcblx0XHR2bS5jYXRlZ29yaWVzID0gY2F0ZWdvcmllcztcblx0XHR2bS5vcHRpb25zID0ge1xuXHRcdFx0Z2xvYmFsU2F2ZTp0cnVlLFxuXHRcdFx0cG9zdERvbmU6ZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5jYXRlZ29yaWVzLmNhdGVnb3J5Jywge2lkOmRhdGEuaWR9KVxuXHRcdFx0fSxcblx0XHR9XG4gIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleGVkaXRvckN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkZmlsdGVyLCAkdGltZW91dCwkc3RhdGUsIGluZGljYXRvcnMsIGluZGljZXMsIHN0eWxlcywgY2F0ZWdvcmllcywgRGF0YVNlcnZpY2UsQ29udGVudFNlcnZpY2UsIHRvYXN0cikge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzO1xuXHRcdHZtLmNvbXBvc2l0cyA9IGluZGljZXM7XG5cdFx0dm0uc3R5bGVzID0gc3R5bGVzO1xuXHRcdHZtLmluZGljYXRvcnMgPSBpbmRpY2F0b3JzO1xuXHRcdHZtLmNoZWNrVGFiQ29udGVudCA9IGNoZWNrVGFiQ29udGVudDtcblxuXHRcdHZtLmFjdGl2ZSA9IDA7XG5cdFx0dm0uc2VsZWN0ZWRUYWIgPSAwO1xuXHRcdHZtLnNlbGVjdGlvbiA9IHtcblx0XHRcdGluZGljZXM6W10sXG5cdFx0XHRpbmRpY2F0b3JzOltdLFxuXHRcdFx0c3R5bGVzOltdLFxuXHRcdFx0Y2F0ZWdvcmllczpbXVxuXHRcdH07XG5cblxuXHRcdHZtLm9wdGlvbnMgPSB7XG5cdFx0XHRjb21wb3NpdHM6e1xuXHRcdFx0XHRkcmFnOmZhbHNlLFxuXHRcdFx0XHR0eXBlOidjb21wb3NpdHMnLFxuXHRcdFx0XHRhbGxvd01vdmU6ZmFsc2UsXG5cdFx0XHRcdGFsbG93RHJvcDpmYWxzZSxcblx0XHRcdFx0YWxsb3dBZGQ6dHJ1ZSxcblx0XHRcdFx0YWxsb3dEZWxldGU6dHJ1ZSxcblx0XHRcdFx0aXRlbUNsaWNrOiBmdW5jdGlvbihpZCwgbmFtZSl7XG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZWRpdG9yLmluZGl6ZXMuZGF0YScsIHtpZDppZCwgbmFtZTpuYW1lfSlcblx0XHRcdFx0fSxcblx0XHRcdFx0YWRkQ2xpY2s6ZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5lZGl0b3IuaW5kaXplcy5kYXRhJywge2lkOjAsIG5hbWU6ICduZXcnfSlcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVsZXRlQ2xpY2s6ZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0aW9uLmluZGljZXMsZnVuY3Rpb24oaXRlbSwga2V5KXtcblx0XHRcdFx0XHRcdENvbnRlbnRTZXJ2aWNlLnJlbW92ZUl0ZW0oaXRlbS5pZCkudGhlbihmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0XHRcdFx0aWYoJHN0YXRlLnBhcmFtcy5pZCA9PSBpdGVtLmlkKXtcblx0XHRcdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5lZGl0b3IuaW5kaXplcycpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHZtLnNlbGVjdGlvbi5pbmRpY2VzID0gW107XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvLyRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5pbmRpemVzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRjYXRlZ29yaWVzOntcblx0XHRcdFx0ZHJhZzpmYWxzZSxcblx0XHRcdFx0dHlwZTonY2F0ZWdvcmllcycsXG5cdFx0XHRcdGFsbG93QWRkOnRydWUsXG5cdFx0XHRcdGFsbG93RGVsZXRlOnRydWUsXG5cdFx0XHRcdGFkZENsaWNrOmZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZWRpdG9yLmNhdGVnb3JpZXMuY2F0ZWdvcnknLCB7aWQ6J25ldyd9KVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpdGVtQ2xpY2s6IGZ1bmN0aW9uKGlkLCBuYW1lKXtcblxuXHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5jYXRlZ29yaWVzLmNhdGVnb3J5Jywge2lkOmlkfSlcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVsZXRlQ2xpY2s6ZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0aW9uLmNhdGVnb3JpZXMsZnVuY3Rpb24oaXRlbSwga2V5KXtcblx0XHRcdFx0XHRcdENvbnRlbnRTZXJ2aWNlLnJlbW92ZUNhdGVnb3J5KGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0XHRcdGlmKCRzdGF0ZS5wYXJhbXMuaWQgPT0gaXRlbS5pZCl7XG5cdFx0XHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZWRpdG9yLmNhdGVnb3JpZXMnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR2bS5zZWxlY3Rpb24uY2F0ZWdvcmllcyA9IFtdO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly8kc3RhdGUuZ28oJ2FwcC5pbmRleC5lZGl0b3IuY2F0ZWdvcmllcycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0sXG5cdFx0XHRzdHlsZXM6e1xuXHRcdFx0XHRkcmFnOmZhbHNlLFxuXHRcdFx0XHR0eXBlOidzdHlsZXMnLFxuXHRcdFx0XHR3aXRoQ29sb3I6dHJ1ZVxuXHRcdFx0fVxuXHRcdH07XG5cblxuXHRcdGZ1bmN0aW9uIGNoZWNrVGFiQ29udGVudChpbmRleCl7XG5cdFx0XHRzd2l0Y2ggKGluZGV4KSB7XG5cdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5pbmRpY2F0b3JzJyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5jYXRlZ29yaWVzJyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMDpcblx0XHRcdFx0XHRcdGlmKHR5cGVvZiAkc3RhdGUucGFyYW1zLmlkICE9IFwidW5kZWZpbmVkXCIpe1xuXHRcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5pbmRpemVzLmRhdGEnLHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiRzdGF0ZS5wYXJhbXMuaWRcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZWRpdG9yLmluZGl6ZXMnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAzOlxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cblx0XHRcdH1cblx0XHR9XG5cblx0XHQkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpe1xuXHRcdCAgaWYodHlwZW9mIHRvUGFyYW1zLmlkID09IFwidW5kZWZpbmVkXCIpe1xuXHRcdFx0XHR2bS5hY3RpdmUgPSAwO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0dm0uYWN0aXZlID0gdG9QYXJhbXMuaWQ7XG5cdFx0XHR9XG5cdFx0XHRpZih0b1N0YXRlLm5hbWUuaW5kZXhPZignYXBwLmluZGV4LmVkaXRvci5pbmRpY2F0b3JzJykgIT0gLTEpe1xuXHRcdFx0XHR2bS5zZWxlY3RlZFRhYiA9IDE7XG5cdFx0XHRcdC8vYWN0aXZhdGUodG9QYXJhbXMpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZih0b1N0YXRlLm5hbWUuaW5kZXhPZignYXBwLmluZGV4LmVkaXRvci5jYXRlZ29yaWVzJykgIT0gLTEpe1xuXHRcdFx0XHR2bS5zZWxlY3RlZFRhYiA9IDI7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHRvU3RhdGUubmFtZS5pbmRleE9mKCdhcHAuaW5kZXguZWRpdG9yLmluZGl6ZXMnKSAhPSAtMSl7XG5cdFx0XHRcdHZtLnNlbGVjdGVkVGFiID0gMDtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW5kZXhlZGl0b3JpbmRpY2F0b3JDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCR0aW1lb3V0LCBWZWN0b3JsYXllclNlcnZpY2UsIGxlYWZsZXREYXRhLCBDb250ZW50U2VydmljZSwgaW5kaWNhdG9yKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGljYXRvciA9IGluZGljYXRvcjtcblx0XHR2bS5zY2FsZSA9IFwiXCI7XG5cdFx0dm0ubWluID0gMTAwMDAwMDA7XG5cdFx0dm0ubWF4ID0gMDtcblx0XHR2bS5zZWxlY3RlZCA9IDA7XG5cdFx0c2V0QWN0aXZlKCk7XG5cblx0XHRDb250ZW50U2VydmljZS5nZXRJbmRpY2F0b3JEYXRhKCRzdGF0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHR2YXIgYmFzZV9jb2xvciA9ICcjZmYwMDAwJztcblx0XHRcdGlmKHR5cGVvZiB2bS5pbmRpY2F0b3Iuc3R5bGUgPT0gXCJ1bmRlZmluZWRcIil7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5pbmRpY2F0b3IuY2F0ZWdvcmllcywgZnVuY3Rpb24oY2F0KXtcblx0XHRcdFx0XHRpZih0eXBlb2YgY2F0LnN0eWxlICE9IFwidW5kZWZpbmVkXCIpe1xuXHRcdFx0XHRcdFx0YmFzZV9jb2xvciA9IGNhdC5zdHlsZS5iYXNlX2NvbG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHZtLmluZGljYXRvci5zdHlsZSl7XG5cdFx0XHRcdGJhc2VfY29sb3IgPSB2bS5pbmRpY2F0b3Iuc3R5bGUuYmFzZV9jb2xvcjtcblx0XHRcdH1cblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5jcmVhdGVDYW52YXMoYmFzZV9jb2xvciApO1xuXHRcdFx0dm0uZGF0YSA9IGRhdGE7XG5cdFx0XHRtaW5NYXgoKTtcblx0XHRcdGRyYXdDb3VudHJpZXMoKTtcblx0XHR9KTtcblx0XHRmdW5jdGlvbiBzZXRBY3RpdmUoKXtcblx0XHRcdGlmKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2FwcC5pbmRleC5lZGl0b3IuaW5kaWNhdG9yLmRldGFpbHMnKXtcblx0XHRcdFx0aWYoJHN0YXRlLnBhcmFtcy5lbnRyeSA9PSBcImluZm9ncmFwaGljXCIpe1xuXHRcdFx0XHRcdHZtLnNlbGVjdGVkID0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCRzdGF0ZS5wYXJhbXMuZW50cnkgPT0gXCJpbmRpemVzXCIpe1xuXHRcdFx0XHRcdHZtLnNlbGVjdGVkID0gMjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCRzdGF0ZS5wYXJhbXMuZW50cnkgPT0gXCJzdHlsZVwiKXtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IDM7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZigkc3RhdGUucGFyYW1zLmVudHJ5ID09IFwiY2F0ZWdvcmllc1wiKXtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IDQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZnVuY3Rpb24gbWluTWF4KCl7XG5cdFx0XHR2bS5taW4gPSAxMDAwMDAwMDtcblx0XHRcdHZtLm1heCA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24oaXRlbSwga2V5KXtcblx0XHRcdFx0XHR2bS5taW4gPSBNYXRoLm1pbihpdGVtLnNjb3JlLCB2bS5taW4pO1xuXHRcdFx0XHRcdHZtLm1heCA9IE1hdGgubWF4KGl0ZW0uc2NvcmUsIHZtLm1heCk7XG5cdFx0XHR9KTtcblx0XHRcdHZtLnNjYWxlID0gZDMuc2NhbGUubGluZWFyKCkuZG9tYWluKFt2bS5taW4sdm0ubWF4XSkucmFuZ2UoWzAsMTAwXSk7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGdldFZhbHVlQnlJc28oaXNvKXtcblx0XHRcdHZhciB2YWx1ZSA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uZGF0YSwgZnVuY3Rpb24oaXRlbSwga2V5KXtcblx0XHRcdFx0IGlmKGl0ZW0uaXNvID09IGlzbyl7XG5cdFx0XHRcdFx0IHZhbHVlID0gaXRlbS5zY29yZTtcblx0XHRcdFx0IH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjb3VudHJpZXNTdHlsZShmZWF0dXJlKSB7XG5cdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdHZhciBpc28gPSBmZWF0dXJlLnByb3BlcnRpZXMuaXNvX2EyO1xuXHRcdFx0dmFyIHZhbHVlID0gZ2V0VmFsdWVCeUlzbyhpc28pIHx8IHZtLm1pbjtcblx0XHRcdHZhciB0eXBlID0gZmVhdHVyZS50eXBlO1xuXG5cdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0Y2FzZSAzOiAvLydQb2x5Z29uJ1xuXHRcdFx0XHRcdHZhciBjb2xvclBvcyA9IHBhcnNlSW50KDI1NiAvIDEwMCAqIHBhcnNlSW50KHZtLnNjYWxlKHZhbHVlKSkpICogNDtcblx0XHRcdFx0XHR2YXIgY29sb3IgPSAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAxKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAyKSArICcsJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDMpICsgJyknO1xuXHRcdFx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcykgICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDEpICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDIpICsgJywwLjYpJzsgLy9jb2xvcjtcblx0XHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdFx0Y29sb3I6IGNvbG9yLFxuXHRcdFx0XHRcdFx0c2l6ZTogMVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0c3R5bGUuc2VsZWN0ZWQgPSB7XG5cdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcykgKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zICsgMSkgKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zICsgMikgKyAnLDAuMyknLFxuXHRcdFx0XHRcdFx0b3V0bGluZToge1xuXHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoNjYsNjYsNjYsMC45KScsXG5cdFx0XHRcdFx0XHRcdHNpemU6IDJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gc3R5bGU7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGRyYXdDb3VudHJpZXMoKSB7XG5cdFx0XHRtaW5NYXgoKTtcblx0XHRcdGxlYWZsZXREYXRhLmdldE1hcCgnbWFwJykudGhlbihmdW5jdGlvbiAobWFwKSB7XG5cdFx0XHRcdHZtLm1hcCA9IG1hcDtcblx0XHRcdFx0dm0ubXZ0U291cmNlID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldExheWVyKCk7XG5cdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdHZtLm12dFNvdXJjZS5zZXRTdHlsZShjb3VudHJpZXNTdHlsZSk7XG5cdFx0XHRcdFx0Ly92bS5tdnRTb3VyY2UucmVkcmF3KCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0JHNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKCl7XG5cdFx0XHRzZXRBY3RpdmUoKTtcblx0XHR9KTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdJbmRleGluaWRjYXRvcnNDdHJsJywgZnVuY3Rpb24gKGluZGljYXRvcnMsIERhdGFTZXJ2aWNlLENvbnRlbnRTZXJ2aWNlKSB7XG5cdFx0Ly9cbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmluZGljYXRvcnMgPSBpbmRpY2F0b3JzO1xuXG5cbiAgfSlcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW5kZXhlZGl0b3JpbmRpemVzQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwkdGltZW91dCwgVmVjdG9ybGF5ZXJTZXJ2aWNlLCBsZWFmbGV0RGF0YSwgQ29udGVudFNlcnZpY2UsIGluZGV4KSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuICAgIC8vdm0uaW5kaWNhdG9yID0gaW5kaWNhdG9yO1xuICAgIHZtLmluZGV4ID0gaW5kZXg7XG5cdFx0dm0uc2NhbGUgPSBcIlwiO1xuXHRcdHZtLm1pbiA9IDEwMDAwMDAwO1xuXHRcdHZtLm1heCA9IDA7XG5cdFx0dm0uc2VsZWN0ZWQgPSBbXTtcblx0XHRzZXRBY3RpdmUoKTtcbiAgICB2bS5vcHRpb25zID0ge1xuICAgICAgaW5kaXplczp7XG4gICAgICAgIGFkZENsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICRzdGF0ZS5nbygnYXBwLmluZGV4LmVkaXRvci5pbmRpemVzLmRhdGEuYWRkJyk7XG4gICAgICAgIH0sXG5cdFx0XHRcdGFkZENvbnRhaW5lckNsaWNrOmZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyIGl0ZW0gPSB7XG5cdFx0XHRcdFx0XHR0aXRsZTogJ0kgYW0gYSBncm91cC4uLiBuYW1lIG1lJ1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0dm0uaW5kZXguY2hpbGRyZW4ucHVzaChpdGVtKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVsZXRlQ2xpY2s6ZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh2bSk7XG5cdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNlbGVjdGVkLGZ1bmN0aW9uKGl0ZW0sIGtleSl7XG5cdFx0XHRcdFx0XHRDb250ZW50U2VydmljZS5yZW1vdmVJdGVtKGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0XHRcdHJlbW92ZUl0ZW0oaXRlbSx2bS5pbmRleC5jaGlsZHJlbik7XG5cdFx0XHRcdFx0XHRcdHZtLnNlbGVjdGVkID0gW107XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVsZXRlRHJvcDogZnVuY3Rpb24oZXZlbnQsaXRlbSxleHRlcm5hbCx0eXBlKXtcblx0XHRcdFx0XHRDb250ZW50U2VydmljZS5yZW1vdmVJdGVtKGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0XHRyZW1vdmVJdGVtKGl0ZW0sdm0uaW5kZXguY2hpbGRyZW4pO1xuXHRcdFx0XHRcdFx0dm0uc2VsZWN0aW9uID0gW107XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cbiAgICAgIH0sXG4gICAgICB3aXRoU2F2ZTogdHJ1ZVxuICAgIH1cblxuXHRcdGFjdGl2ZSgpO1xuXG5cblx0XHRmdW5jdGlvbiBhY3RpdmUoKXtcblxuXHRcdH1cblx0XHRmdW5jdGlvbiByZW1vdmVJdGVtKGl0ZW0sIGxpc3Qpe1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGxpc3QsIGZ1bmN0aW9uKGVudHJ5LCBrZXkpe1xuXHRcdFx0XHRpZihlbnRyeS5pZCA9PSBpdGVtLmlkKXtcblx0XHRcdFx0XHRsaXN0LnNwbGljZShrZXksIDEpO1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGVudHJ5LmNoaWxkcmVuKXtcblx0XHRcdFx0XHR2YXIgc3VicmVzdWx0ID0gcmVtb3ZlSXRlbShpdGVtLCBlbnRyeS5jaGlsZHJlbik7XG5cdFx0XHRcdFx0aWYoc3VicmVzdWx0KXtcblx0XHRcdFx0XHRcdHJldHVybiBzdWJyZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0LypDb250ZW50U2VydmljZS5nZXRJbmRpY2F0b3JEYXRhKCRzdGF0ZS5wYXJhbXMuaWQpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHR2YXIgYmFzZV9jb2xvciA9ICcjZmYwMDAwJztcblx0XHRcdGlmKHR5cGVvZiB2bS5pbmRpY2F0b3Iuc3R5bGUgPT0gXCJ1bmRlZmluZWRcIil7XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5pbmRpY2F0b3IuY2F0ZWdvcmllcywgZnVuY3Rpb24oY2F0KXtcblx0XHRcdFx0XHRpZih0eXBlb2YgY2F0LnN0eWxlICE9IFwidW5kZWZpbmVkXCIpe1xuXHRcdFx0XHRcdFx0YmFzZV9jb2xvciA9IGNhdC5zdHlsZS5iYXNlX2NvbG9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKHZtLmluZGljYXRvci5zdHlsZSl7XG5cdFx0XHRcdGJhc2VfY29sb3IgPSB2bS5pbmRpY2F0b3Iuc3R5bGUuYmFzZV9jb2xvcjtcblx0XHRcdH1cblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5jcmVhdGVDYW52YXMoYmFzZV9jb2xvciApO1xuXHRcdFx0dm0uZGF0YSA9IGRhdGE7XG5cdFx0XHRtaW5NYXgoKTtcblx0XHRcdGRyYXdDb3VudHJpZXMoKTtcblx0XHR9KTsqL1xuXG5cdFx0ZnVuY3Rpb24gc2V0QWN0aXZlKCl7XG5cdFx0LypcdGlmKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2FwcC5pbmRleC5lZGl0b3IuaW5kaWNhdG9yLmRldGFpbHMnKXtcblx0XHRcdFx0aWYoJHN0YXRlLnBhcmFtcy5lbnRyeSA9PSBcImluZm9ncmFwaGljXCIpe1xuXHRcdFx0XHRcdHZtLnNlbGVjdGVkID0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCRzdGF0ZS5wYXJhbXMuZW50cnkgPT0gXCJpbmRpemVzXCIpe1xuXHRcdFx0XHRcdHZtLnNlbGVjdGVkID0gMjtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKCRzdGF0ZS5wYXJhbXMuZW50cnkgPT0gXCJzdHlsZVwiKXtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IDM7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZigkc3RhdGUucGFyYW1zLmVudHJ5ID09IFwiY2F0ZWdvcmllc1wiKXtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IDQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IDA7XG5cdFx0XHRcdH1cblx0XHRcdH0qL1xuXHRcdH1cblx0XHRmdW5jdGlvbiBtaW5NYXgoKXtcblx0XHRcdHZtLm1pbiA9IDEwMDAwMDAwO1xuXHRcdFx0dm0ubWF4ID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtLCBrZXkpe1xuXHRcdFx0XHRcdHZtLm1pbiA9IE1hdGgubWluKGl0ZW0uc2NvcmUsIHZtLm1pbik7XG5cdFx0XHRcdFx0dm0ubWF4ID0gTWF0aC5tYXgoaXRlbS5zY29yZSwgdm0ubWF4KTtcblx0XHRcdH0pO1xuXHRcdFx0dm0uc2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oW3ZtLm1pbix2bS5tYXhdKS5yYW5nZShbMCwxMDBdKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gZ2V0VmFsdWVCeUlzbyhpc28pe1xuXHRcdFx0dmFyIHZhbHVlID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtLCBrZXkpe1xuXHRcdFx0XHQgaWYoaXRlbS5pc28gPT0gaXNvKXtcblx0XHRcdFx0XHQgdmFsdWUgPSBpdGVtLnNjb3JlO1xuXHRcdFx0XHQgfVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGNvdW50cmllc1N0eWxlKGZlYXR1cmUpIHtcblx0XHRcdHZhciBzdHlsZSA9IHt9O1xuXHRcdFx0dmFyIGlzbyA9IGZlYXR1cmUucHJvcGVydGllcy5pc29fYTI7XG5cdFx0XHR2YXIgdmFsdWUgPSBnZXRWYWx1ZUJ5SXNvKGlzbykgfHwgdm0ubWluO1xuXHRcdFx0dmFyIHR5cGUgPSBmZWF0dXJlLnR5cGU7XG5cblx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRjYXNlIDM6IC8vJ1BvbHlnb24nXG5cdFx0XHRcdFx0dmFyIGNvbG9yUG9zID0gcGFyc2VJbnQoMjU2IC8gMTAwICogcGFyc2VJbnQodm0uc2NhbGUodmFsdWUpKSkgKiA0O1xuXHRcdFx0XHRcdHZhciBjb2xvciA9ICdyZ2JhKCcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MpICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDEpICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXRDb2xvcihjb2xvclBvcyArIDIpICsgJywnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zICsgMykgKyAnKSc7XG5cdFx0XHRcdFx0c3R5bGUuY29sb3IgPSAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zKSAgKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zICsgMSkgKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zICsgMikgKyAnLDAuNiknOyAvL2NvbG9yO1xuXHRcdFx0XHRcdHN0eWxlLm91dGxpbmUgPSB7XG5cdFx0XHRcdFx0XHRjb2xvcjogY29sb3IsXG5cdFx0XHRcdFx0XHRzaXplOiAxXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRzdHlsZS5zZWxlY3RlZCA9IHtcblx0XHRcdFx0XHRcdGNvbG9yOiAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldENvbG9yKGNvbG9yUG9zKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAxKSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0Q29sb3IoY29sb3JQb3MgKyAyKSArICcsMC4zKScsXG5cdFx0XHRcdFx0XHRvdXRsaW5lOiB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiAncmdiYSg2Niw2Niw2NiwwLjkpJyxcblx0XHRcdFx0XHRcdFx0c2l6ZTogMlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdH1cblx0XHRcdHJldHVybiBzdHlsZTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gZHJhd0NvdW50cmllcygpIHtcblx0XHRcdG1pbk1heCgpO1xuXHRcdFx0bGVhZmxldERhdGEuZ2V0TWFwKCdtYXAnKS50aGVuKGZ1bmN0aW9uIChtYXApIHtcblx0XHRcdFx0dm0ubWFwID0gbWFwO1xuXHRcdFx0XHR2bS5tdnRTb3VyY2UgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TGF5ZXIoKTtcblx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dm0ubXZ0U291cmNlLnNldFN0eWxlKGNvdW50cmllc1N0eWxlKTtcblx0XHRcdFx0XHQvL3ZtLm12dFNvdXJjZS5yZWRyYXcoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24oKXtcblx0XHRcdHNldEFjdGl2ZSgpO1xuXHRcdH0pO1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGV4aW5mb0N0cmwnLCBmdW5jdGlvbihJbmRpemVzU2VydmljZSl7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLnN0cnVjdHVyZSA9IEluZGl6ZXNTZXJ2aWNlLmdldFN0cnVjdHVyZSgpO1xuICAgIH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGljYXRvclNob3dDdHJsJywgZnVuY3Rpb24oJHN0YXRlLCAkZmlsdGVyLCAkdGltZW91dCwgaW5kaWNhdG9yLCBjb3VudHJpZXMsIENvbnRlbnRTZXJ2aWNlLCBWZWN0b3JsYXllclNlcnZpY2UsIHRvYXN0cikge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5jdXJyZW50ID0gbnVsbDtcblx0XHR2bS5hY3RpdmUgPSBudWxsLCB2bS5hY3RpdmVHZW5kZXIgPSBudWxsO1xuXHRcdHZtLmNvdW50cnlMaXN0ID0gY291bnRyaWVzO1xuXHRcdHZtLmluZGljYXRvciA9IGluZGljYXRvcjtcblx0XHR2bS5kYXRhID0gW107XG5cdFx0dm0ueWVhciA9IG51bGwsIHZtLmdlbmRlciA9ICdhbGwnO1xuXHRcdHZtLnJhbmdlID0ge1xuXHRcdFx0bWF4OiAtMTAwMDAwMDAwLFxuXHRcdFx0bWluOiAxMDAwMDAwMDBcblx0XHR9O1xuXHRcdHZtLmdldERhdGEgPSBnZXREYXRhO1xuXHRcdHZtLmdldE9mZnNldCA9IGdldE9mZnNldDtcblx0XHR2bS5nZXRSYW5rID0gZ2V0UmFuaztcblx0XHR2bS5nb0luZm9TdGF0ZSA9IGdvSW5mb1N0YXRlO1xuXHRcdHZtLmhpc3RvcnlEYXRhID0gbnVsbDtcblxuXHRcdHZtLnNldEN1cnJlbnQgPSBzZXRDdXJyZW50O1xuXHRcdHZtLnNldFllYXIgPSBzZXRZZWFyO1xuXHRcdHZtLnNldEdlbmRlciA9IHNldEdlbmRlcjtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdHJlc2V0UmFuZ2UoKTtcblx0XHRcdFZlY3RvcmxheWVyU2VydmljZS5zZXRTdHlsZShjb3VudHJpZXNTdHlsZSk7XG5cdFx0XHRWZWN0b3JsYXllclNlcnZpY2UuY291bnRyeUNsaWNrKGNvdW50cnlDbGljayk7XG5cdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly9cdHZtLnllYXIgPSAkc3RhdGUucGFyYW1zLnllYXI7XG5cdFx0XHRcdC8vXHR2bS5nZW5kZXIgPSAkc3RhdGUucGFyYW1zLmdlbmRlcjtcblx0XHRcdFx0Ly9nZXREYXRhKCRzdGF0ZS5wYXJhbXMueWVhciwgJHN0YXRlLnBhcmFtcy5nZW5kZXIpO1xuXHRcdFx0XHRpZiAoJHN0YXRlLnBhcmFtcy55ZWFyKSB7XG5cdFx0XHRcdFx0dm0ueWVhciA9ICRzdGF0ZS5wYXJhbXMueWVhcjtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZtLmluZGljYXRvci55ZWFycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKHZtLmluZGljYXRvci55ZWFyc1tpXS55ZWFyID09ICRzdGF0ZS5wYXJhbXMueWVhcikge1xuXHRcdFx0XHRcdFx0XHR2bS5hY3RpdmUgPSBpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICghdm0uYWN0aXZlKSB7XG5cdFx0XHRcdFx0dm0uYWN0aXZlID0gMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICh2bS5pbmRpY2F0b3IuZ2VuZGVyKSB7XG5cdFx0XHRcdFx0aWYgKCRzdGF0ZS5wYXJhbXMuZ2VuZGVyICE9IFwiYWxsXCIpIHtcblx0XHRcdFx0XHRcdHZtLmdlbmRlciA9ICRzdGF0ZS5wYXJhbXMuZ2VuZGVyO1xuXHRcdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2bS5pbmRpY2F0b3IuZ2VuZGVyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh2bS5pbmRpY2F0b3IuZ2VuZGVyW2ldLmdlbmRlciA9PSAkc3RhdGUucGFyYW1zLmdlbmRlcikge1xuXHRcdFx0XHRcdFx0XHRcdHZtLmFjdGl2ZUdlbmRlciA9IGk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCF2bS5hY3RpdmVHZW5kZXIpIHtcblx0XHRcdFx0XHRcdHZtLmFjdGl2ZUdlbmRlciA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKCF2bS5hY3RpdmVHZW5kZXIpIHtcblx0XHRcdFx0XHR2bS5hY3RpdmVHZW5kZXIgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGdldERhdGEodm0ueWVhciwgdm0uZ2VuZGVyKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHJlc2V0UmFuZ2UoKSB7XG5cdFx0XHR2bS5yYW5nZSA9IHtcblx0XHRcdFx0bWF4OiAtMTAwMDAwMDAwLFxuXHRcdFx0XHRtaW46IDEwMDAwMDAwMFxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnb0luZm9TdGF0ZSgpIHtcblxuXHRcdFx0aWYgKCRzdGF0ZS5jdXJyZW50Lm5hbWUgPT0gJ2FwcC5pbmRleC5pbmRpY2F0b3InKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmluZGljYXRvci5pbmZvJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5pbmRpY2F0b3InKTtcblx0XHRcdH1cblxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFJhbmsoY291bnRyeSkge1xuXHRcdFx0dmFyIHJhbmsgPSB2bS5kYXRhLmluZGV4T2YoY291bnRyeSkgKyAxO1xuXHRcdFx0cmV0dXJuIHJhbms7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0T2Zmc2V0KCkge1xuXHRcdFx0aWYgKCF2bS5jdXJyZW50KSB7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fVxuXHRcdFx0Ly9jb25zb2xlLmxvZyh2bS5nZXRSYW5rKHZtLmN1cnJlbnQpKTtcblx0XHRcdHJldHVybiAodm0uZ2V0UmFuayh2bS5jdXJyZW50KSAtIDIpICogMTc7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnQobmF0KSB7XG5cdFx0XHR2bS5jdXJyZW50ID0gbmF0O1xuXHRcdFx0c2V0U2VsZWN0ZWRGZWF0dXJlKCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNldFNlbGVjdGVkRmVhdHVyZSgpIHtcblx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmluZGljYXRvcicsIHtcblx0XHRcdFx0aXNvOiB2bS5jdXJyZW50Lmlzbyxcblx0XHRcdH0pO1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRnZXRIaXN0b3J5KCk7XG5cdFx0XHR9KTtcblxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjb3VudHJ5Q2xpY2soZXZ0LCB0KSB7XG5cdFx0XHR2YXIgYyA9IFZlY3RvcmxheWVyU2VydmljZS5nZXROYXRpb25CeUlzbyhldnQuZmVhdHVyZS5wcm9wZXJ0aWVzW1ZlY3RvcmxheWVyU2VydmljZS5kYXRhLmlzbzJdKTtcblx0XHRcdGlmICh0eXBlb2YgYy5zY29yZSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdHZtLmN1cnJlbnQgPSBjO1xuXHRcdFx0XHRzZXRTZWxlY3RlZEZlYXR1cmUoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRvYXN0ci5lcnJvcignTm8gaW5mbyBhYm91dCB0aGlzIGxvY2F0aW9uIScpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldEhpc3RvcnkoKSB7XG5cdFx0XHRDb250ZW50U2VydmljZS5nZXRJbmRpY2F0b3JIaXN0b3J5KHZtLmluZGljYXRvci5pZCwgdm0uY3VycmVudC5pc28sIHZtLmdlbmRlcikudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHZtLmhpc3RvcnlEYXRhID0gZGF0YTtcblx0XHRcdH0pXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0WWVhcih5ZWFyKSB7XG5cdFx0XHR2bS55ZWFyID0geWVhcjtcblx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5pbmRleC5pbmRpY2F0b3InLCB7XG5cdFx0XHRcdFx0eWVhcjogeWVhcixcblx0XHRcdFx0fSk7XG5cdFx0XHR9LCAyNTApO1xuXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2V0R2VuZGVyKGdlbmRlcikge1xuXHRcdFx0dm0uZ2VuZGVyID0gZ2VuZGVyIHx8ICdhbGwnO1xuXHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmluZGljYXRvcicsIHtcblx0XHRcdFx0XHRnZW5kZXI6IHZtLmdlbmRlclxuXHRcdFx0XHR9KTtcblx0XHRcdH0sIDI1MCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0RGF0YSh5ZWFyLCBnZW5kZXIpIHtcblx0XHRcdENvbnRlbnRTZXJ2aWNlLmdldEluZGljYXRvckRhdGEodm0uaW5kaWNhdG9yLmlkLCB2bS55ZWFyLCB2bS5nZW5kZXIpLnRoZW4oZnVuY3Rpb24oZGF0KSB7XG5cdFx0XHRcdHJlc2V0UmFuZ2UoKTtcblx0XHRcdFx0dm0uZGF0YSA9IGRhdDtcblx0XHRcdFx0dmFyIGlzbyA9IG51bGw7XG5cdFx0XHRcdGlmICgkc3RhdGUucGFyYW1zLmlzbykge1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdm0uZGF0YS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKHZtLmRhdGFbaV0uaXNvID09ICRzdGF0ZS5wYXJhbXMuaXNvKSB7XG5cdFx0XHRcdFx0XHRcdHZtLmN1cnJlbnQgPSB2bS5kYXRhW2ldO1xuXHRcdFx0XHRcdFx0XHRpc28gPSB2bS5jdXJyZW50Lmlzbztcblx0XHRcdFx0XHRcdFx0Ly9zZXRTZWxlY3RlZEZlYXR1cmUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHRpdGVtLnJhbmsgPSB2bS5kYXRhLmluZGV4T2YoaXRlbSkgKyAxO1xuXHRcdFx0XHRcdGlmICh2bS5jdXJyZW50KSB7XG5cdFx0XHRcdFx0XHRpZiAoaXRlbS5pc28gPT0gdm0uY3VycmVudC5pc28pIHtcblx0XHRcdFx0XHRcdFx0c2V0Q3VycmVudChpdGVtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dm0ucmFuZ2UubWF4ID0gZDMubWF4KFt2bS5yYW5nZS5tYXgsIHBhcnNlRmxvYXQoaXRlbS5zY29yZSldKTtcblx0XHRcdFx0XHR2bS5yYW5nZS5taW4gPSBkMy5taW4oW3ZtLnJhbmdlLm1pbiwgcGFyc2VGbG9hdChpdGVtLnNjb3JlKV0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHR2bS5jaXJjbGVPcHRpb25zID0ge1xuXHRcdFx0XHRcdGNvbG9yOiB2bS5pbmRpY2F0b3Iuc3R5bGVkLmJhc2VfY29sb3IgfHwgJyMwMGNjYWEnLFxuXHRcdFx0XHRcdGZpZWxkOiAncmFuaycsXG5cdFx0XHRcdFx0c2l6ZTogdm0uZGF0YS5sZW5ndGhcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRnZXRPZmZzZXQoKTtcblx0XHRcdFx0dm0ubGluZWFyU2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKS5kb21haW4oW3ZtLnJhbmdlLm1pbiwgdm0ucmFuZ2UubWF4XSkucmFuZ2UoWzAsIDI1Nl0pO1xuXHRcdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0RGF0YSh2bS5kYXRhLCB2bS5pbmRpY2F0b3Iuc3R5bGVkLmJhc2VfY29sb3IsIHRydWUpO1xuXHRcdFx0XHQvL1ZlY3RvcmxheWVyU2VydmljZS5wYWludENvdW50cmllcyhjb3VudHJpZXNTdHlsZSwgY291bnRyeUNsaWNrKTtcblx0XHRcdH0pO1xuXG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjb3VudHJpZXNTdHlsZShmZWF0dXJlKSB7XG5cdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdHZhciBpc28gPSBmZWF0dXJlLnByb3BlcnRpZXNbVmVjdG9ybGF5ZXJTZXJ2aWNlLmRhdGEuaXNvMl07XG5cdFx0XHR2YXIgbmF0aW9uID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE5hdGlvbkJ5SXNvKGlzbyk7XG5cblx0XHRcdHZhciBmaWVsZCA9ICdzY29yZSc7XG5cdFx0XHR2YXIgdHlwZSA9IGZlYXR1cmUudHlwZTtcblx0XHRcdGZlYXR1cmUuc2VsZWN0ZWQgPSBmYWxzZTtcblx0XHRcdGlmICh2bS5jdXJyZW50KSB7XG5cdFx0XHRcdGlmICh2bS5jdXJyZW50LmlzbyA9PSBpc28pIHtcblx0XHRcdFx0XHRmZWF0dXJlLnNlbGVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cblxuXHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdGNhc2UgMzogLy8nUG9seWdvbidcblx0XHRcdFx0XHRpZiAodHlwZW9mIG5hdGlvbltmaWVsZF0gIT0gXCJ1bmRlZmluZWRcIiAmJiBuYXRpb25bZmllbGRdICE9IG51bGwpIHtcblxuXHRcdFx0XHRcdFx0dmFyIGNvbG9yUG9zID0gcGFyc2VJbnQodm0ubGluZWFyU2NhbGUocGFyc2VGbG9hdChuYXRpb25bZmllbGRdKSkpICogNDsgLy8gcGFyc2VJbnQoMjU2IC8gdm0ucmFuZ2UubWF4ICogcGFyc2VJbnQobmF0aW9uW2ZpZWxkXSkpICogNDtcblx0XHRcdFx0XHRcdHZhciBjb2xvciA9ICdyZ2JhKCcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvc10gKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAxXSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDJdICsgJywnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAzXSArICcpJztcblx0XHRcdFx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zXSArICcsICcgKyBWZWN0b3JsYXllclNlcnZpY2UucGFsZXR0ZVtjb2xvclBvcyArIDFdICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgMl0gKyAnLDAuNiknOyAvL2NvbG9yO1xuXHRcdFx0XHRcdFx0c3R5bGUub3V0bGluZSA9IHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6IGNvbG9yLFxuXHRcdFx0XHRcdFx0XHRzaXplOiAxXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0c3R5bGUuc2VsZWN0ZWQgPSB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiAncmdiYSgnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3NdICsgJywgJyArIFZlY3RvcmxheWVyU2VydmljZS5wYWxldHRlW2NvbG9yUG9zICsgMV0gKyAnLCAnICsgVmVjdG9ybGF5ZXJTZXJ2aWNlLnBhbGV0dGVbY29sb3JQb3MgKyAyXSArICcsMC4zKScsXG5cdFx0XHRcdFx0XHRcdG91dGxpbmU6IHtcblx0XHRcdFx0XHRcdFx0XHRjb2xvcjogJ3JnYmEoNjYsNjYsNjYsMC45KScsXG5cdFx0XHRcdFx0XHRcdFx0c2l6ZTogMlxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHN0eWxlLmNvbG9yID0gJ3JnYmEoMjU1LDI1NSwyNTUsMCknO1xuXHRcdFx0XHRcdFx0c3R5bGUub3V0bGluZSA9IHtcblx0XHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDApJyxcblx0XHRcdFx0XHRcdFx0c2l6ZTogMVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdHJldHVybiBzdHlsZTtcblx0XHR9O1xuXG5cblx0XHR2bS51aU9uUGFyYW1zQ2hhbmdlZCA9IGZ1bmN0aW9uKGNoYW5nZWRQYXJhbXMsICR0cmFuc2l0aW9uJCkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhjaGFuZ2VkUGFyYW1zKTtcblx0XHRcdGdldERhdGEodm0ueWVhciwgdm0uZ2VuZGVyKTtcblx0XHR9XG5cblx0fSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0luZGljYXRvclllYXJUYWJsZUN0cmwnLCBmdW5jdGlvbiAoJGZpbHRlciwgZGF0YSkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcbiAgICB2bS5kYXRhID0gZGF0YTtcbiAgICB2bS5vbk9yZGVyQ2hhbmdlID0gb25PcmRlckNoYW5nZTtcblx0XHR2bS5vblBhZ2luYXRpb25DaGFuZ2UgPSBvblBhZ2luYXRpb25DaGFuZ2U7XG5cbiAgICBmdW5jdGlvbiBvbk9yZGVyQ2hhbmdlKG9yZGVyKSB7XG5cdFx0XHRyZXR1cm4gdm0uZGF0YSA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5kYXRhLCBbb3JkZXJdLCB0cnVlKVxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBvblBhZ2luYXRpb25DaGFuZ2UocGFnZSwgbGltaXQpIHtcblx0XHRcdC8vY29uc29sZS5sb2cocGFnZSwgbGltaXQpO1xuXHRcdFx0Ly9yZXR1cm4gJG51dHJpdGlvbi5kZXNzZXJ0cy5nZXQoJHNjb3BlLnF1ZXJ5LCBzdWNjZXNzKS4kcHJvbWlzZTtcblx0XHR9O1xuXG5cbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4vLyByZW1vdmUgYXBwL2xvZ2luIHZpZXdcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHN0YXRlLCAkYXV0aCwgdG9hc3RyKXtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0ucHJldlN0YXRlID0gbnVsbDtcbiAgICAgICAgdm0uZG9Mb2dpbiA9IGRvTG9naW47XG4gICAgICAgIHZtLmNoZWNrTG9nZ2VkSW4gPSBjaGVja0xvZ2dlZEluO1xuXG4gICAgICAgIHZtLnVzZXIgPSB7XG4gICAgICAgICAgZW1haWw6JycsXG4gICAgICAgICAgcGFzc3dvcmQ6JydcbiAgICAgICAgfTtcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCl7XG4gICAgICAgICAgdm0uY2hlY2tMb2dnZWRJbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tMb2dnZWRJbigpe1xuXG4gICAgICAgICAgaWYoJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpe1xuICAgICAgICAgICAgLy8kc3RhdGUuZ28oJ2FwcC5pbmRleC5zaG93Jywge2luZGV4OidlcGknfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRvTG9naW4oKXtcbiAgICAgICAgICAkYXV0aC5sb2dpbih2bS51c2VyKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgc2lnbmVkIGluJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkcm9vdFNjb3BlLnByZXZpb3VzUGFnZSk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJHJvb3RTY29wZS5wcmV2aW91c1BhZ2Uuc3RhdGUubmFtZSB8fCAnYXBwLmhvbWUnLCAkcm9vdFNjb3BlLnByZXZpb3VzUGFnZS5wYXJhbXMpO1xuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcignUGxlYXNlIGNoZWNrIHlvdXIgZW1haWwgYW5kIHBhc3N3b3JkJywgJ1NvbWV0aGluZyB3ZW50IHdyb25nJyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignTG9nb0N0cmwnLCBmdW5jdGlvbigpe1xuICAgICAgICAvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignTWFwQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHJvb3RTY29wZSwgJG1kTWVudSwgJHN0YXRlLCBsZWFmbGV0RGF0YSwgbGVhZmxldE1hcEV2ZW50cywgVmVjdG9ybGF5ZXJTZXJ2aWNlKSB7XG5cdFx0Ly9cblxuXHRcdHZhciB6b29tID0gMyxcblx0XHRcdG1pblpvb20gPSAyO1xuXHRcdGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IDYwMCkge1xuXHRcdFx0em9vbSA9IDI7XG5cdFx0fVxuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dmFyIGFwaUtleSA9IFZlY3RvcmxheWVyU2VydmljZS5rZXlzLm1hcGJveDtcblx0XHR2bS5WZWN0b3JsYXllclNlcnZpY2UgPSBWZWN0b3JsYXllclNlcnZpY2U7XG5cdFx0dm0udG9nZ2xlTGF5ZXJzID0gdG9nZ2xlTGF5ZXJzO1xuXHRcdHZtLmxhYmVsc0xheWVyID0gTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LnRpbGVzLm1hcGJveC5jb20vdjQvbWFnbm9sby4wNjAyOWE5Yy97en0ve3h9L3t5fS5wbmc/YWNjZXNzX3Rva2VuPScgKyBhcGlLZXksIHtcblx0XHRcdG5vV3JhcDogdHJ1ZSxcblx0XHRcdGNvbnRpbnVvdXNXb3JsZDogZmFsc2UsXG5cdFx0XHRuYW1lOiAnbGFiZWxzJyxcblx0XHRcdGRldGVjdFJldGluYTogdHJ1ZVxuXHRcdH0pO1xuXHRcdHZtLm1heGJvdW5kcyA9IHtcblx0XHRcdHNvdXRoV2VzdDoge1xuXHRcdFx0XHRsYXQ6IDkwLFxuXHRcdFx0XHRsbmc6IDE4MFxuXHRcdFx0fSxcblx0XHRcdG5vcnRoRWFzdDoge1xuXHRcdFx0XHRsYXQ6IC05MCxcblx0XHRcdFx0bG5nOiAtMTgwXG5cdFx0XHR9XG5cdFx0fTtcblx0XHR2bS5jb250cm9scyA9IHtcblx0XHRcdGN1c3RvbTogW11cblx0XHR9O1xuXHRcdHZtLmxheWVyY29udHJvbCA9IHtcblx0XHRcdGljb25zOiB7XG5cdFx0XHRcdHVuY2hlY2s6IFwiZmEgZmEtdG9nZ2xlLW9mZlwiLFxuXHRcdFx0XHRjaGVjazogXCJmYSBmYS10b2dnbGUtb25cIlxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHZhciBNeUNvbnRyb2wgPSBMLmNvbnRyb2woKTtcblx0XHRNeUNvbnRyb2wuc2V0UG9zaXRpb24oJ2JvdHRvbXJpZ2h0Jyk7XG5cdFx0TXlDb250cm9sLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcblx0XHRcdEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuXHRcdH1cblx0XHRNeUNvbnRyb2wub25BZGQgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIGNvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wtem9vbSBsZWFmbGV0LXRvZ2dsZS1sYWJlbCcpO1xuXHRcdFx0dmFyIHNwYW4gPSBMLkRvbVV0aWwuY3JlYXRlKCdhJywgJ2xlYWZsZXQtY29udHJvbC16b29tLWluIGN1cnNvcicsIGNvbnRhaW5lcik7XG5cdFx0XHRzcGFuLnRleHRDb250ZW50ID0gJ1QnO1xuXHRcdFx0c3Bhbi50aXRsZSA9IFwiVG9nZ2xlIExhYmVsc1wiO1xuXHRcdFx0TC5Eb21FdmVudC5kaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbihjb250YWluZXIpO1xuXHRcdFx0TC5Eb21FdmVudC5hZGRMaXN0ZW5lcihjb250YWluZXIsICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBtYXAgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TWFwKCk7XG5cdFx0XHRcdFx0aWYgKHZtLm5vTGFiZWwpIHtcblx0XHRcdFx0XHRcdG1hcC5yZW1vdmVMYXllcih2bS5sYWJlbHNMYXllcik7XG5cdFx0XHRcdFx0XHR2bS5ub0xhYmVsID0gZmFsc2U7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG1hcC5hZGRMYXllcih2bS5sYWJlbHNMYXllcik7XG5cdFx0XHRcdFx0XHR2bS5sYWJlbHNMYXllci5icmluZ1RvRnJvbnQoKTtcblx0XHRcdFx0XHRcdHZtLm5vTGFiZWwgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gY29udGFpbmVyO1xuXHRcdH1cblx0XHR2YXIgQmFja0hvbWUgPSBMLmNvbnRyb2woKTtcblx0XHRCYWNrSG9tZS5zZXRQb3NpdGlvbignYm90dG9tbGVmdCcpO1xuXHRcdEJhY2tIb21lLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcblx0XHRcdEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuXHRcdH1cblx0XHRCYWNrSG9tZS5vbkFkZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wtem9vbSBsZWFmbGV0LWNvbnRyb2wtaG9tZScpO1xuXHRcdFx0dmFyIHNwYW4gPSBMLkRvbVV0aWwuY3JlYXRlKCdhJywgJ2xlYWZsZXQtY29udHJvbC16b29tLWluIGN1cnNvcicsIGNvbnRhaW5lcik7XG5cdFx0XHR2YXIgaWNvbiA9IEwuRG9tVXRpbC5jcmVhdGUoJ21kLWljb24nLCAnbWF0ZXJpYWwtaWNvbnMgbWQtcHJpbWFyeScsIHNwYW4pO1xuXHRcdFx0c3Bhbi50aXRsZSA9IFwiQ2VudGVyIE1hcFwiO1xuXHRcdFx0aWNvbi50ZXh0Q29udGVudCA9IFwiaG9tZVwiO1xuXHRcdFx0TC5Eb21FdmVudC5kaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbihjb250YWluZXIpO1xuXHRcdFx0TC5Eb21FdmVudC5hZGRMaXN0ZW5lcihjb250YWluZXIsICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHZhciBtYXAgPSBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TWFwKCk7XG5cdFx0XHRcdFx0bWFwLnNldFZpZXcoWzQ4LjIwOTIwNiwgMTYuMzcyNzc4XSwgMik7XG5cblx0XHRcdFx0XHRpZigkc3RhdGUuJGN1cnJlbnQubmFtZS5pbmRleE9mKCdhcHAuZXhwb3J0LmRldGFpbC5jaGFwdGVyLmluZGljYXRvcicpID4gLTEpe1xuXHRcdFx0XHRcdFx0XHQkc3RhdGUuZ28oJ2FwcC5leHBvcnQuZGV0YWlsLmNoYXB0ZXIuaW5kaWNhdG9yJyx7XG5cdFx0XHRcdFx0XHRcdFx0aWQ6ICRzdGF0ZS5wYXJhbXMuaWQsXG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogJHN0YXRlLnBhcmFtcy5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdGNoYXB0ZXI6ICRzdGF0ZS5wYXJhbXMuY2hhcHRlcixcblx0XHRcdFx0XHRcdFx0XHRpbmRpY2F0b3I6ICRzdGF0ZS5wYXJhbXMuaW5kaWNhdG9yLFxuXHRcdFx0XHRcdFx0XHRcdGluZGluYW1lOiRzdGF0ZS5wYXJhbXMuaW5kaW5hbWVcblx0XHRcdFx0XHRcdFx0fSx7XG5cdFx0XHRcdFx0XHRcdFx0cmVsb2FkOnRydWVcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdCRyb290U2NvcGUuc2lkZWJhck9wZW4gPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBjb250YWluZXI7XG5cdFx0fVxuXG5cblx0XHRmdW5jdGlvbiB0b2dnbGVMYXllcnMob3ZlcmxheU5hbWUpIHtcblx0XHRcdCB2YXIgbWFwID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE1hcCgnbWFwJyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKG1hcCk7XG5cdFx0XHRcdGlmICh2bS5ub0xhYmVsKSB7XG5cdFx0XHRcdFx0bWFwLnJlbW92ZUxheWVyKHZtLmxhYmVsc0xheWVyKTtcblx0XHRcdFx0XHR2bS5ub0xhYmVsID0gZmFsc2U7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bWFwLmFkZExheWVyKHZtLmxhYmVsc0xheWVyKTtcblx0XHRcdFx0XHR2bS5sYWJlbHNMYXllci5icmluZ1RvRnJvbnQoKTtcblx0XHRcdFx0XHR2bS5ub0xhYmVsID0gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cblx0XHR9XG5cdFx0bGVhZmxldERhdGEuZ2V0TWFwKCdtYXAnKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuXG5cdFx0XHRWZWN0b3JsYXllclNlcnZpY2Uuc2V0TWFwKG1hcCk7XG5cdFx0XHQvL3ZhciB1cmwgPSAnaHR0cDovL3YyMjAxNTA1MjgzNTgyNTM1OC55b3VydnNlcnZlci5uZXQ6MzAwMS9zZXJ2aWNlcy9wb3N0Z2lzLycgKyBWZWN0b3JsYXllclNlcnZpY2UuZ2V0TmFtZSgpICsgJy9nZW9tL3ZlY3Rvci10aWxlcy97en0ve3h9L3t5fS5wYmY/ZmllbGRzPScgKyBWZWN0b3JsYXllclNlcnZpY2UuZmllbGRzKCk7IC8vXG5cdFx0XHR2YXIgdXJsID0gJ2h0dHBzOi8vd3d3LjIzZGVncmVlLm9yZzozMDAxL3NlcnZpY2VzL3Bvc3RnaXMvJyArIFZlY3RvcmxheWVyU2VydmljZS5nZXROYW1lKCkgKyAnL2dlb20vdmVjdG9yLXRpbGVzL3t6fS97eH0ve3l9LnBiZj9maWVsZHM9JyArIFZlY3RvcmxheWVyU2VydmljZS5maWVsZHMoKTsgLy9cblx0XHRcdHZhciBsYXllciA9IG5ldyBMLlRpbGVMYXllci5NVlRTb3VyY2Uoe1xuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0ZGVidWc6IGZhbHNlLFxuXHRcdFx0XHRkZXRlY3RSZXRpbmE6dHJ1ZSxcblx0XHRcdFx0Y2xpY2thYmxlTGF5ZXJzOiBbVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldE5hbWUoKSArICdfZ2VvbSddLFxuXHRcdFx0XHRtdXRleFRvZ2dsZTogdHJ1ZSxcblx0XHRcdFx0Z2V0SURGb3JMYXllckZlYXR1cmU6IGZ1bmN0aW9uKGZlYXR1cmUpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmVhdHVyZS5wcm9wZXJ0aWVzLmlzb19hMjtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZmlsdGVyOiBmdW5jdGlvbihmZWF0dXJlLCBjb250ZXh0KSB7XG5cblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0c3R5bGU6IGZ1bmN0aW9uKGZlYXR1cmUpIHtcblx0XHRcdFx0XHR2YXIgc3R5bGUgPSB7fTtcblx0XHRcdFx0XHRzdHlsZS5jb2xvciA9ICdyZ2JhKDAsMCwwLDApJztcblx0XHRcdFx0XHRzdHlsZS5vdXRsaW5lID0ge1xuXHRcdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDAsMCwwLDApJyxcblx0XHRcdFx0XHRcdHNpemU6IDBcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdHJldHVybiBzdHlsZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdG1hcC5hZGRMYXllcihWZWN0b3JsYXllclNlcnZpY2Uuc2V0TGF5ZXIobGF5ZXIpKTtcblx0XHRcdG1hcC5hZGRDb250cm9sKE15Q29udHJvbCk7XG5cdFx0XHRtYXAuYWRkQ29udHJvbChCYWNrSG9tZSk7XG5cdFx0XHQvKm1hcC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRhbGVydCgnaGVsbG8nKTtcblx0XHRcdH0pO1xuXG4gICAgICAgICAgICB2YXIgbWFwRXZlbnRzID0gbGVhZmxldE1hcEV2ZW50cy5nZXRBdmFpbGFibGVNYXBFdmVudHMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gbWFwRXZlbnRzKXtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gJ2xlYWZsZXREaXJlY3RpdmVNYXAuJyArIG1hcEV2ZW50c1trXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtYXBFdmVudHNba10pXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbihldmVudE5hbWUsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cdFx0LypcdG1hcC5hZGRMYXllcih2bS5sYWJlbHNMYXllcik7XG5cdFx0XHR2bS5sYWJlbHNMYXllci5icmluZ1RvRnJvbnQoKTtcblx0XHRcdFx0dm0ubm9MYWJlbCA9IHRydWU7Ki9cblx0XHR9KTtcblx0fSk7XG59KSgpO1xuIiwiLy8gcmVtb3ZlIGFwcC9zZWxlY3RlZCB2aWV3XG4oZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdTZWxlY3RlZEN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIGdldENvdW50cnksIFZlY3RvcmxheWVyU2VydmljZSwgJGZpbHRlcil7XG4gICAgICAgIC8vXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLnN0cnVjdHVyZSA9ICRzY29wZS4kcGFyZW50LnZtLnN0cnVjdHVyZTtcbiAgICAgICAgdm0uZGlzcGxheSA9ICRzY29wZS4kcGFyZW50LnZtLmRpc3BsYXk7XG4gICAgICAgIHZtLmRhdGEgPSAkc2NvcGUuJHBhcmVudC52bS5kYXRhO1xuICAgICAgICB2bS5jdXJyZW50ID0gZ2V0Q291bnRyeTtcbiAgICAgICAgdm0ubXZ0U291cmNlID0gVmVjdG9ybGF5ZXJTZXJ2aWNlLmdldExheWVyKCk7XG4gICAgICAgIHZtLmdldFJhbmsgPSBnZXRSYW5rO1xuICAgICAgICB2bS5nZXRPZmZzZXQgPSBnZXRPZmZzZXQ7XG4gICAgICAgIHZtLmdldFRlbmRlbmN5ID0gZ2V0VGVuZGVuY3k7XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsY1JhbmsoKSB7XG4gICAgICAgICAgdmFyIHJhbmsgPSAwO1xuICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICBpdGVtW3ZtLnN0cnVjdHVyZS5zY29yZV9maWVsZF9uYW1lXSA9IHBhcnNlRmxvYXQoaXRlbVt2bS5zdHJ1Y3R1cmUuc2NvcmVfZmllbGRfbmFtZV0pO1xuICAgICAgICAgICAgaXRlbVsnc2NvcmUnXSA9IHBhcnNlSW50KGl0ZW1bJ3Njb3JlJ10pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgdmFyIGZpbHRlciA9ICRmaWx0ZXIoJ29yZGVyQnknKSh2bS5kYXRhLCBbdm0uc3RydWN0dXJlLnNjb3JlX2ZpZWxkX25hbWUsIFwic2NvcmVcIl0sIHRydWUpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsdGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZmlsdGVyW2ldLmlzbyA9PSB2bS5jdXJyZW50Lmlzbykge1xuICAgICAgICAgICAgICByYW5rID0gaSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZtLmN1cnJlbnRbdm0uc3RydWN0dXJlLnNjb3JlX2ZpZWxkX25hbWUrJ19yYW5rJ10gPSByYW5rO1xuICAgICAgICAgIHZtLmNpcmNsZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgIGNvbG9yOnZtLnN0cnVjdHVyZS5jb2xvcixcbiAgICAgICAgICAgICAgZmllbGQ6dm0uc3RydWN0dXJlLnNjb3JlX2ZpZWxkX25hbWUrJ19yYW5rJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRSYW5rKGNvdW50cnkpe1xuICAgICAgICAgIHZhciBmaWx0ZXIgPSAkZmlsdGVyKCdvcmRlckJ5Jykodm0uZGF0YSwgW3ZtLnN0cnVjdHVyZS5zY29yZV9maWVsZF9uYW1lLCBcInNjb3JlXCJdLCB0cnVlKTtcbiAgICAgICAgICB2YXIgcmFuayA9IDA7XG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGZpbHRlciwgZnVuY3Rpb24oaXRlbSwga2V5KXtcbiAgICAgICAgICAgIGlmKGl0ZW0uY291bnRyeSA9PSBjb3VudHJ5LmNvdW50cnkpe1xuICAgICAgICAgICAgICByYW5rID0ga2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiByYW5rKzE7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0T2Zmc2V0KCkge1xuICAgIFx0XHRcdGlmICghdm0uY3VycmVudCkge1xuICAgIFx0XHRcdFx0cmV0dXJuIDA7XG4gICAgXHRcdFx0fVxuICAgIFx0XHRcdHJldHVybiAodm0uZ2V0UmFuayh2bS5jdXJyZW50KSAtIDIpICogMTY7XG4gICAgXHRcdH07XG5cbiAgICBcdFx0ZnVuY3Rpb24gZ2V0VGVuZGVuY3koKSB7XG4gICAgXHRcdFx0aWYgKCF2bS5jdXJyZW50KSB7XG4gICAgXHRcdFx0XHRyZXR1cm4gJ2Fycm93X2Ryb3BfZG93bidcbiAgICBcdFx0XHR9XG4gICAgXHRcdFx0cmV0dXJuIHZtLmN1cnJlbnQucGVyY2VudF9jaGFuZ2UgPiAwID8gJ2Fycm93X2Ryb3BfdXAnIDogJ2Fycm93X2Ryb3BfZG93bic7XG4gICAgXHRcdH07XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCgndm0uY3VycmVudCcsIGZ1bmN0aW9uIChuLCBvKSB7XG4gICAgICAgICAgaWYgKG4gPT09IG8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKG8uaXNvKXtcbiAgICAgICAgICAgICAgdm0ubXZ0U291cmNlLmxheWVycy5jb3VudHJpZXNfYmlnX2dlb20uZmVhdHVyZXNbby5pc29dLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxjUmFuaygpO1xuICAgICAgICAgICAgZmV0Y2hOYXRpb25EYXRhKG4uaXNvKTtcblxuXG4gICAgICAgIH0pO1xuICAgICAgICAvKjsqL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignU2lkZW1lbnVDdHJsJywgZnVuY3Rpb24oKXtcbiAgICAgICAgLy9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ1NpZ251cEN0cmwnLCBmdW5jdGlvbigpe1xuICAgICAgICAvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignVW5zdXBwb3J0ZWRCcm93c2VyQ3RybCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdVc2VyQ3RybCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdBZGRQcm92aWRlckN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIERpYWxvZ1NlcnZpY2UsIERhdGFTZXJ2aWNlKXtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZGF0YXByb3ZpZGVyID0ge307XG4gICAgICAgIHZtLmRhdGFwcm92aWRlci50aXRsZSA9ICRzY29wZS4kcGFyZW50LnZtLnNlYXJjaFRleHQ7XG5cbiAgICAgICAgdm0uc2F2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgRGF0YVNlcnZpY2UucG9zdCgnL2RhdGFwcm92aWRlcnMnLCB2bS5kYXRhcHJvdmlkZXIpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICRzY29wZS4kcGFyZW50LnZtLmRhdGFwcm92aWRlcnMucHVzaChkYXRhKTtcbiAgICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQudm0uaXRlbS5kYXRhcHJvdmlkZXIgPSBkYXRhO1xuICAgICAgICAgICAgICBEaWFsb2dTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdm0uaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0FkZFVuaXRDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBEYXRhU2VydmljZSxEaWFsb2dTZXJ2aWNlKXtcblxuICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgIHZtLnVuaXQgPSB7fTtcbiAgICAgIHZtLnVuaXQudGl0bGUgPSAkc2NvcGUuJHBhcmVudC52bS5zZWFyY2hVbml0O1xuXG4gICAgICB2bS5zYXZlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAvL1xuICAgICAgICAgIERhdGFTZXJ2aWNlLnBvc3QoJy9tZWFzdXJlX3R5cGVzJywgdm0udW5pdCkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICRzY29wZS4kcGFyZW50LnZtLm1lYXN1cmVUeXBlcy5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgJHNjb3BlLiRwYXJlbnQudm0uaXRlbS50eXBlID0gZGF0YTtcbiAgICAgICAgICAgIERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICB9O1xuXG4gICAgICB2bS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgRGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICB9O1xuXG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0FkZFllYXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBEaWFsb2dTZXJ2aWNlKXtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUudm0pO1xuICAgICAgICAgICAgJHNjb3BlLnZtLnNhdmVEYXRhKCk7XG4gICAgICAgICAgICBEaWFsb2dTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0FkZFVzZXJzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgRGlhbG9nU2VydmljZSl7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuXHQgICAgICAgIC8vZG8gc29tZXRoaW5nIHVzZWZ1bFxuICAgICAgICAgICAgRGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICBcdERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdDb25mbGljdG1ldGhvZGVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBEaWFsb2dTZXJ2aWNlKXtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvL1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgXHREaWFsb2dTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQ29uZmxpY3R0ZXh0Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgRGlhbG9nU2VydmljZSl7XG4gIFxuXG4gICAgICAgICRzY29wZS5zYXZlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICBcdERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQ29weXByb3ZpZGVyQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIEluZGV4U2VydmljZSwgRGlhbG9nU2VydmljZSkge1xuXHRcdCRzY29wZS4kcGFyZW50LnZtLmFza2VkVG9SZXBsaWNhdGUgPSB0cnVlO1xuXHRcdCRzY29wZS4kcGFyZW50LnZtLmRvUHJvdmlkZXJzID0gdHJ1ZTtcblx0XHQkc2NvcGUuJHBhcmVudC52bS5kb1N0eWxlID0gdHJ1ZTtcblx0XHQkc2NvcGUuJHBhcmVudC52bS5kb0NhdGVnb3JpZXMgPSB0cnVlO1xuXHRcdCRzY29wZS4kcGFyZW50LnZtLmRvTWVhc3VyZXMgPSB0cnVlO1xuXHRcdCRzY29wZS4kcGFyZW50LnZtLmRvUHVibGljID0gdHJ1ZTtcblx0XHQkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKCRzY29wZS4kcGFyZW50LnZtLmRhdGFbMF0uZGF0YSwgZnVuY3Rpb24gKGRhdGEsIGtleSkge1xuXHRcdFx0XHRpZiAoa2V5ICE9IFwieWVhclwiKSB7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBJbmRleFNlcnZpY2UuZ2V0SW5kaWNhdG9yKGtleSkgPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLnNldEluZGljYXRvcihrZXksIHtcblx0XHRcdFx0XHRcdFx0Y29sdW1uX25hbWU6IGtleSxcblx0XHRcdFx0XHRcdFx0dGl0bGU6IGtleVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHZhciBpdGVtID0gSW5kZXhTZXJ2aWNlLmdldEluZGljYXRvcihrZXkpO1xuXHRcdFx0XHRcdGlmICgkc2NvcGUuJHBhcmVudC52bS5kb1Byb3ZpZGVycykge1xuXHRcdFx0XHRcdFx0aXRlbS5kYXRhcHJvdmlkZXIgPSAkc2NvcGUuJHBhcmVudC52bS5wcmVQcm92aWRlcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCRzY29wZS4kcGFyZW50LnZtLmRvTWVhc3VyZXMpIHtcblx0XHRcdFx0XHRcdGl0ZW0udHlwZSA9ICRzY29wZS4kcGFyZW50LnZtLnByZVR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICgkc2NvcGUuJHBhcmVudC52bS5kb0NhdGVnb3JpZXMpIHtcblx0XHRcdFx0XHRcdGl0ZW0uY2F0ZWdvcmllcyA9ICRzY29wZS4kcGFyZW50LnZtLnByZUNhdGVnb3JpZXM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICgkc2NvcGUuJHBhcmVudC52bS5kb1B1YmxpYykge1xuXHRcdFx0XHRcdFx0aXRlbS5pc19wdWJsaWMgPSAkc2NvcGUuJHBhcmVudC52bS5wcmVQdWJsaWM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICgkc2NvcGUuJHBhcmVudC52bS5kb1N0eWxlKSB7XG5cblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgaXRlbS5zdHlsZSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdGl0ZW0uc3R5bGUgPSAkc2NvcGUuJHBhcmVudC52bS5wcmVTdHlsZTtcblx0XHRcdFx0XHRcdFx0aXRlbS5zdHlsZV9pZCA9ICRzY29wZS4kcGFyZW50LnZtLnByZVN0eWxlLmlkO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuXHRcdFx0SW5kZXhTZXJ2aWNlLnNldFRvTG9jYWxTdG9yYWdlKCk7XG5cblx0XHR9O1xuXG5cdFx0JHNjb3BlLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHQkc2NvcGUuJHBhcmVudC52bS5kb1Byb3ZpZGVycyA9IGZhbHNlO1xuXHRcdFx0JHNjb3BlLiRwYXJlbnQudm0uZG9DYXRlZ29yaWVzID0gZmFsc2U7XG5cdFx0XHQkc2NvcGUuJHBhcmVudC52bS5kb01lYXN1cmVzID0gZmFsc2U7XG5cdFx0XHREaWFsb2dTZXJ2aWNlLmhpZGUoKTtcblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignRWRpdGNvbHVtbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIERpYWxvZ1NlcnZpY2Upe1xuICAgICAgICAkc2NvcGUubmFtZSA9ICRzY29wZS4kcGFyZW50LnZtLnRvRWRpdDtcbiAgICAgICAgaWYodHlwZW9mICRzY29wZS4kcGFyZW50LnZtLm1ldGEudGFibGVbJHNjb3BlLm5hbWVdID09IFwidW5kZWZpbmVkXCIpe1xuICAgICAgICAgICRzY29wZS4kcGFyZW50LnZtLm1ldGEudGFibGVbJHNjb3BlLm5hbWVdID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXtcbiAgICAgICAgICBpZigkc2NvcGUuJHBhcmVudC52bS5tZXRhLnRhYmxlWyRzY29wZS5uYW1lXS50aXRsZSl7XG4gICAgICAgICAgICAkc2NvcGUudGl0bGUgPSAkc2NvcGUuJHBhcmVudC52bS5tZXRhLnRhYmxlWyRzY29wZS5uYW1lXS50aXRsZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYoJHNjb3BlLiRwYXJlbnQudm0ubWV0YS50YWJsZVskc2NvcGUubmFtZV0uZGVzY3JpcHRpb24pe1xuICAgICAgICAgICAgJHNjb3BlLmRlc2NyaXB0aW9uID0gJHNjb3BlLiRwYXJlbnQudm0ubWV0YS50YWJsZVskc2NvcGUubmFtZV0uZGVzY3JpcHRpb247XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICRzY29wZS4kcGFyZW50LnZtLm1ldGEudGFibGVbJHNjb3BlLm5hbWVdLnRpdGxlID0gJHNjb3BlLnRpdGxlO1xuICAgICAgICAgICRzY29wZS4kcGFyZW50LnZtLm1ldGEudGFibGVbJHNjb3BlLm5hbWVdLmRlc2NyaXB0aW9uID0gJHNjb3BlLmRlc2NyaXB0aW9uO1xuICAgICAgICAgIERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgXHREaWFsb2dTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignRWRpdHJvd0N0cmwnLCBmdW5jdGlvbigkc2NvcGUsIERpYWxvZ1NlcnZpY2Upe1xuICAgICAgICAkc2NvcGUuZGF0YSA9ICRzY29wZS4kcGFyZW50LnZtLnNlbGVjdGVkWzBdO1xuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgRGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICBcdERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdFbWJlZGNvZGVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc2NlLCBEaWFsb2dTZXJ2aWNlKSB7XG5cdFx0JHNjb3BlLnZtLnVybCA9ICRzY2UudHJ1c3RBc1Jlc291cmNlVXJsKCdodHRwczovL2Rldi4yM2RlZ3JlZS5vcmcvIy9leHBvcnQvJyArICRzY29wZS52bS5pdGVtLmlkICsgJy8nICsgJHNjb3BlLnZtLml0ZW0ubmFtZSk7XG5cdFx0JHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdC8vXG5cdFx0XHRjb25zb2xlLmxvZygkc2NvcGUudm0pO1xuXHRcdH07XG5cblx0XHQkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0V4cG9ydGRhdGFDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBEaWFsb2dTZXJ2aWNlKXtcblxuICAgICAgICAkc2NvcGUuc2F2ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvL1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgXHREaWFsb2dTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignRXhwb3J0RGlhbG9nQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgRGlhbG9nU2VydmljZSl7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy9cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0V4dGVuZERhdGFDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCRzdGF0ZSwgRGlhbG9nU2VydmljZSl7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLnZtLmRvRXh0ZW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICRzY29wZS52bS5tZXRhLmlzb19maWVsZCA9ICRzY29wZS52bS5hZGREYXRhVG8uaXNvX25hbWU7XG4gICAgICAgICAgICAkc2NvcGUudm0ubWV0YS5jb3VudHJ5X2ZpZWxkID0gJHNjb3BlLnZtLmFkZERhdGFUby5jb3VudHJ5X25hbWU7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5pbmRleC5jaGVjaycpO1xuICAgICAgICAgIFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICRzdGF0ZS5nbygnYXBwLmluZGV4LmNoZWNrJyk7XG4gICAgICAgIFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0xvb3NlZGF0YUN0cmwnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgRGlhbG9nU2VydmljZSl7XG5cbiAgICAgICAgJHNjb3BlLnNhdmUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICRzY29wZS52bS5kZWxldGVEYXRhKCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJHNjb3BlLnRvU3RhdGUubmFtZSk7XG4gICAgICAgICAgICBEaWFsb2dTZXJ2aWNlLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdTZWxlY3Rpc29mZXRjaGVyc0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBJbmRleFNlcnZpY2UsIERpYWxvZ1NlcnZpY2UpIHtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZhciBtZXRhID0gSW5kZXhTZXJ2aWNlLmdldE1ldGEoKTtcblx0XHR2bS5pc28gPSBtZXRhLmlzb19maWVsZDtcblx0XHR2bS5saXN0ID0gSW5kZXhTZXJ2aWNlLmdldFRvU2VsZWN0KCk7XG5cdFx0dm0uc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuXHRcdH07XG5cblx0XHR2bS5oaWRlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0RGlhbG9nU2VydmljZS5oaWRlKCk7XG5cdFx0fTtcblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5saXN0JywgZnVuY3Rpb24gKG4sIG8pIHtcblx0XHRcdGlmIChuID09PSBvKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChuLCBmdW5jdGlvbiAoaXRlbSwga2V5KSB7XG5cdFx0XHRcdGlmIChpdGVtLmVudHJ5LmRhdGFbMF1bdm0uaXNvXSkge1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChpdGVtLmVudHJ5LmVycm9ycywgZnVuY3Rpb24gKGVycm9yLCBlKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXJyb3IudHlwZSA9PSAyIHx8IGVycm9yLnR5cGUgPT0gMykge1xuXHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2UucmVkdWNlSXNvRXJyb3IoKTtcblx0XHRcdFx0XHRcdFx0aXRlbS5lbnRyeS5lcnJvcnMuc3BsaWNlKGUsIDEpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlcnJvci50eXBlID09IDEpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGVycm9yLmNvbHVtbiA9PSB2bS5pc28pIHtcblx0XHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2UucmVkdWNlRXJyb3IoKTtcblx0XHRcdFx0XHRcdFx0XHRpdGVtLmVudHJ5LmVycm9ycy5zcGxpY2UoZSwgMSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR2bS5saXN0LnNwbGljZShrZXksIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmICh2bS5saXN0Lmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRcdERpYWxvZ1NlcnZpY2UuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdCYXJzQ3RybCcsIGZ1bmN0aW9uICgpIHtcblx0XHQvL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0ud2lkdGggPSB3aWR0aDtcblxuXHRcdGZ1bmN0aW9uIHdpZHRoKGl0ZW0pIHtcblx0XHRcdGlmKCF2bS5kYXRhKSByZXR1cm47XG5cdFx0XHRyZXR1cm4gdm0uZGF0YVtpdGVtLm5hbWVdO1xuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnYmFycycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2JhcnMvYmFycy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdCYXJzQ3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRzY29wZTp7fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0ZGF0YTogJz0nLFxuXHRcdFx0XHRvcHRpb25zOiAnPScsXG5cdFx0XHRcdHN0cnVjdHVyZTogJz0nXG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnYXV0b0ZvY3VzJywgZnVuY3Rpb24oJHRpbWVvdXQpIHtcblx0XHRyZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FDJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oX3Njb3BlLCBfZWxlbWVudCkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBfZWxlbWVudFswXS5mb2N1cygpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignQmFzZW1hcEN0cmwnLCBmdW5jdGlvbigpIHtcblx0XHQvL1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5vcmlnaW5hbCA9IGFuZ3VsYXIuY29weSh2bS5pdGVtKTtcblx0XHR2bS5jb250YWluc1NwZWNpYWwgPSBjb250YWluc1NwZWNpYWw7XG5cdFx0dm0uYmFzZU9wdGlvbnMgPSB7XG5cdFx0XHRkcmFnOiBmYWxzZSxcblx0XHRcdGFsbG93RHJvcDogZmFsc2UsXG5cdFx0XHRhbGxvd0RyYWc6IGZhbHNlLFxuXHRcdFx0YWxsb3dNb3ZlOiBmYWxzZSxcblx0XHRcdGFsbG93RGVsZXRlOiBmYWxzZSxcblx0XHRcdGFsbG93QWRkQ29udGFpbmVyOiBmYWxzZSxcblx0XHRcdGFsbG93QWRkOiBmYWxzZSxcblx0XHRcdGFsbG93U2F2ZTogdHJ1ZSxcblx0XHRcdGVkaXRhYmxlOiBmYWxzZSxcblx0XHRcdGFzc2lnbWVudHM6IGZhbHNlLFxuXHRcdFx0c2F2ZUNsaWNrOiB2bS5vcHRpb25zLnNhdmUsXG5cdFx0XHRkZWxldGVDbGljazogdm0ub3B0aW9ucy5kZWxldGVDbGlja1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjb250YWluc1NwZWNpYWwodHlwZSkge1xuXHRcdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0XHRpZih0eXBlb2Ygdm0uaXRlbS51cmwgPT0gXCJ1bmRlZmluZWRcIil7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2YgdHlwZSA9PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godHlwZSwgZnVuY3Rpb24odCkge1xuXHRcdFx0XHRcdGlmICh2bS5pdGVtLnVybC5pbmRleE9mKHQpID4gLTEpIHtcblx0XHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHZtLml0ZW0udXJsLmluZGV4T2YodHlwZSkgPiAtMSkge1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZvdW5kO1xuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnYmFzZW1hcCcsIGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2Jhc2VtYXAvYmFzZW1hcC5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdCYXNlbWFwQ3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRzY29wZTp7XG5cdFx0XHRcdGl0ZW06ICc9Jyxcblx0XHRcdFx0b3B0aW9uczogJz0nXG5cdFx0XHR9LFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcblx0XHRcdHJlcGxhY2U6dHJ1ZSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdCYXNlbWFwU2VsZWN0b3JDdHJsJywgZnVuY3Rpb24oQmFzZW1hcHNTZXJ2aWNlLCBWZWN0b3JsYXllclNlcnZpY2Upe1xuXHRcdC8vXG5cdFx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdFx0dm0uYmFzZW1hcHMgPSBbXTtcblx0XHRcdHZtLnNlbGVjdGVkID0ge307XG5cdFx0XHR2bS5zZXRNYXAgPSBzZXRNYXA7XG5cdFx0XHR2bS52aWV3VGlsZXMgPSB2aWV3VGlsZXM7XG5cdFx0XHR2bS5kZWZhdWx0cyA9IHtcblx0XHRcdFx0c2Nyb2xsV2hlZWxab29tOiBmYWxzZSxcblx0XHRcdFx0bWluWm9vbTogMSxcblx0XHRcdFx0bWF4Wm9vbTogOCxcblx0XHRcdFx0em9vbUNvbnRyb2w6IGZhbHNlLFxuXHRcdFx0fTtcblx0XHRcdHZtLmNlbnRlciA9IFZlY3RvcmxheWVyU2VydmljZS5jZW50ZXI7XG5cdFx0XHR2bS5tYXhib3VuZHMgPSBWZWN0b3JsYXllclNlcnZpY2UubWF4Ym91bmRzO1xuXG5cdFx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpe1xuXHRcdFx0XHRpZighdm0uc3R5bGUpe1xuXHRcdFx0XHRcdHZtLnN0eWxlID0ge1xuXHRcdFx0XHRcdFx0YmFzZW1hcF9pZDowXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdEJhc2VtYXBzU2VydmljZS5nZXRCYXNlbWFwcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFx0dm0uYmFzZW1hcHMgPSByZXNwb25zZTtcblx0XHRcdFx0XHRpZih2bS5zdHlsZS5iYXNlbWFwX2lkICE9IDApe1xuXHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmJhc2VtYXBzLCBmdW5jdGlvbihtYXAsIGtleSl7XG5cdFx0XHRcdFx0XHRcdGlmKG1hcC5pZCA9PSB2bS5zdHlsZS5iYXNlbWFwX2lkKXtcblx0XHRcdFx0XHRcdFx0XHR2bS5zZWxlY3RlZCA9IG1hcDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBzZXRNYXAobWFwKXtcblx0XHRcdFx0dm0uc2VsZWN0ZWQgPSBtYXA7XG5cdFx0XHRcdHZtLnN0eWxlLmJhc2VtYXBfaWQgPSBtYXAuaWQ7XG5cdFx0XHRcdHZtLnN0eWxlLmJhc2VtYXAgPSBtYXA7XG5cdFx0XHR9XG5cdFx0XHRmdW5jdGlvbiB2aWV3VGlsZXMobWFwKXtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR1cmw6bWFwLnVybCxcblx0XHRcdFx0XHRhdHRyaWJ1dGlvbjptYXAuYXR0cmlidXRpb24sXG5cdFx0XHRcdFx0dHlwZToneHl6J1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdiYXNlbWFwU2VsZWN0b3InLCBmdW5jdGlvbigpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9iYXNlbWFwU2VsZWN0b3IvYmFzZW1hcFNlbGVjdG9yLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0Jhc2VtYXBTZWxlY3RvckN0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6e1xuXHRcdFx0XHRzdHlsZTogJz1uZ01vZGVsJyxcblx0XHRcdH0sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuXHRcdFx0cmVwbGFjZTp0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ0J1YmJsZXNDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuXG4gIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0ZnVuY3Rpb24gQ3VzdG9tVG9vbHRpcCh0b29sdGlwSWQsIHdpZHRoKSB7XG5cdFx0dmFyIHRvb2x0aXBJZCA9IHRvb2x0aXBJZDtcblx0XHR2YXIgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRvb2x0aXBJZCk7XG5cdFx0aWYoZWxlbSA9PSBudWxsKXtcblx0XHRcdGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudCkuZmluZCgnYm9keScpLmFwcGVuZChcIjxkaXYgY2xhc3M9J3Rvb2x0aXAgbWQtd2hpdGVmcmFtZS16MycgaWQ9J1wiICsgdG9vbHRpcElkICsgXCInPjwvZGl2PlwiKTtcblx0XHR9XG5cdFx0aGlkZVRvb2x0aXAoKTtcblx0XHRmdW5jdGlvbiBzaG93VG9vbHRpcChjb250ZW50LCBkYXRhLCBldmVudCwgZWxlbWVudCkge1xuXHRcdFx0YW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyMnICsgdG9vbHRpcElkKSkuaHRtbChjb250ZW50KTtcblx0XHRcdGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRvb2x0aXBJZCkpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuXG5cdFx0XHRyZXR1cm4gdXBkYXRlUG9zaXRpb24oZXZlbnQsIGRhdGEsIGVsZW1lbnQpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBoaWRlVG9vbHRpcCgpIHtcblx0XHRcdGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIHRvb2x0aXBJZCkpLmNzcygnZGlzcGxheScsICdub25lJyk7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKGV2ZW50LCBkLCBlbGVtZW50KSB7XG5cdFx0XHR2YXIgdHRpZCA9IFwiI1wiICsgdG9vbHRpcElkO1xuXHRcdFx0dmFyIHhPZmZzZXQgPSAyMDtcblx0XHRcdHZhciB5T2Zmc2V0ID0gMTA7XG5cdFx0XHR2YXIgc3ZnID0gZWxlbWVudC5maW5kKCdzdmcnKVswXTsvL2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzdmdfdmlzJyk7XG5cdFx0XHR2YXIgd3NjclkgPSB3aW5kb3cuc2Nyb2xsWTtcblx0XHRcdHZhciB0dHcgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0dGlkKSkub2Zmc2V0V2lkdGg7XG5cdFx0XHR2YXIgdHRoID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0dGlkKS5vZmZzZXRIZWlnaHQ7XG5cdFx0XHR2YXIgdHR0b3AgPSBzdmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgZC55IC0gdHRoIC8gMjtcblx0XHRcdHZhciB0dGxlZnQgPSBzdmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIGQueCArIGQucmFkaXVzICsgMTI7XG5cdFx0XHRyZXR1cm4gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodHRpZCkpLmNzcygndG9wJywgdHR0b3AgKyAncHgnKS5jc3MoJ2xlZnQnLCB0dGxlZnQgKyAncHgnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNob3dUb29sdGlwOiBzaG93VG9vbHRpcCxcblx0XHRcdGhpZGVUb29sdGlwOiBoaWRlVG9vbHRpcCxcblx0XHRcdHVwZGF0ZVBvc2l0aW9uOiB1cGRhdGVQb3NpdGlvblxuXHRcdH1cblx0fVxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ2J1YmJsZXMnLCBmdW5jdGlvbiAoJGNvbXBpbGUsIEljb25zU2VydmljZSkge1xuXHRcdHZhciBkZWZhdWx0cztcblx0XHRkZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHdpZHRoOiAzMDAsXG5cdFx0XHRcdGhlaWdodDogMzAwLFxuXHRcdFx0XHRsYXlvdXRfZ3Jhdml0eTogMCxcblx0XHRcdFx0c2l6ZWZhY3RvcjozLFxuXHRcdFx0XHR2aXM6IG51bGwsXG5cdFx0XHRcdGZvcmNlOiBudWxsLFxuXHRcdFx0XHRkYW1wZXI6IDAuMDg1LFxuXHRcdFx0XHRjaXJjbGVzOiBudWxsLFxuXHRcdFx0XHRib3JkZXJzOiB0cnVlLFxuXHRcdFx0XHRsYWJlbHM6IHRydWUsXG5cdFx0XHRcdGZpbGxfY29sb3I6IGQzLnNjYWxlLm9yZGluYWwoKS5kb21haW4oW1wiZWhcIiwgXCJldlwiXSkucmFuZ2UoW1wiI2EzMTAzMVwiLCBcIiNiZWNjYWVcIl0pLFxuXHRcdFx0XHRtYXhfYW1vdW50OiAnJyxcblx0XHRcdFx0cmFkaXVzX3NjYWxlOiAnJyxcblx0XHRcdFx0ZHVyYXRpb246IDEwMDAsXG5cdFx0XHRcdHRvb2x0aXA6IEN1c3RvbVRvb2x0aXAoXCJidWJibGVzX3Rvb2x0aXBcIiwgMjQwKVxuXHRcdFx0fTtcblx0XHR9O1xuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0Y2hhcnRkYXRhOiAnPScsXG5cdFx0XHRcdGRpcmVjdGlvbjogJz0nLFxuXHRcdFx0XHRncmF2aXR5OiAnPScsXG5cdFx0XHRcdHNpemVmYWN0b3I6ICc9Jyxcblx0XHRcdFx0aW5kZXhlcjogJz0nLFxuXHRcdFx0XHRib3JkZXJzOiAnQCdcblx0XHRcdH0sXG5cdFx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzLCBuZ01vZGVsKSB7XG5cdFx0XHRcdHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoZGVmYXVsdHMoKSwgYXR0cnMpO1xuXHRcdFx0XHR2YXIgbm9kZXMgPSBbXSxcblx0XHRcdFx0XHRsaW5rcyA9IFtdLFxuXHRcdFx0XHRcdGxhYmVscyA9IFtdLFxuXHRcdFx0XHRcdGdyb3VwcyA9IFtdO1xuXG5cdFx0XHRcdHZhciBtYXhfYW1vdW50ID0gZDMubWF4KHNjb3BlLmNoYXJ0ZGF0YSwgZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VGbG9hdChkLnZhbHVlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vb3B0aW9ucy5oZWlnaHQgPSBvcHRpb25zLndpZHRoICogMS4xO1xuXHRcdFx0XHRvcHRpb25zLnJhZGl1c19zY2FsZSA9IGQzLnNjYWxlLnBvdygpLmV4cG9uZW50KDAuNSkuZG9tYWluKFswLCBtYXhfYW1vdW50XSkucmFuZ2UoWzIsIDg1XSk7XG5cdFx0XHRcdG9wdGlvbnMuY2VudGVyID0ge1xuXHRcdFx0XHRcdHg6IG9wdGlvbnMud2lkdGggLyAyLFxuXHRcdFx0XHRcdHk6IG9wdGlvbnMuaGVpZ2h0IC8gMlxuXHRcdFx0XHR9O1xuXHRcdFx0XHRvcHRpb25zLmNhdF9jZW50ZXJzID0ge307XG5cblx0XHRcdFx0dmFyIGNyZWF0ZV9ub2RlcyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpZihzY29wZS5pbmRleGVyLmNoaWxkcmVuLmxlbmd0aCA9PSAyICYmIHNjb3BlLmluZGV4ZXIuY2hpbGRyZW5bMF0uY2hpbGRyZW4ubGVuZ3RoID4gMCl7XG5cdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goc2NvcGUuaW5kZXhlci5jaGlsZHJlbiwgZnVuY3Rpb24gKGdyb3VwLCBpbmRleCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgbUNvbG9yID0gZ3JvdXAuY29sb3I7XG5cdFx0XHRcdFx0XHRcdGlmKGdyb3VwLnN0eWxlX2lkICE9IDApe1xuXHRcdFx0XHRcdFx0XHRcdG1Db2xvciA9IGdyb3VwLnN0eWxlLmJhc2VfY29sb3I7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHR2YXIgZCA9IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBncm91cC5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IGdyb3VwLnRpdGxlLFxuXHRcdFx0XHRcdFx0XHRcdGdyb3VwOiBncm91cC5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiBtQ29sb3IsXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjogZ3JvdXAuaWNvbixcblx0XHRcdFx0XHRcdFx0XHR1bmljb2RlOiBJY29uc1NlcnZpY2UuZ2V0VW5pY29kZShncm91cC5pY29uKSxcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiBncm91cCxcblx0XHRcdFx0XHRcdFx0XHRjaGlsZHJlbjpncm91cC5jaGlsZHJlblxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRsYWJlbHMucHVzaChkKTtcblx0XHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKGdyb3VwLmNoaWxkcmVuLCBmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY29wZS5jaGFydGRhdGFbaXRlbS5uYW1lXSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIGNvbG9yID0gaXRlbS5jb2xvcjtcblx0XHRcdFx0XHRcdFx0XHRcdGlmKGl0ZW0uc3R5bGVfaWQgIT0gMCl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbG9yID0gaXRlbS5zdHlsZS5iYXNlX2NvbG9yO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0ZWxzZSBpZihncm91cC5zdHlsZV9pZCAhPSAwKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29sb3IgPSBncm91cC5zdHlsZS5iYXNlX2NvbG9yO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIG5vZGUgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IGl0ZW0ubmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmFkaXVzOiBzY29wZS5jaGFydGRhdGFbaXRlbS5uYW1lXSAvIHNjb3BlLnNpemVmYWN0b3IsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBzY29wZS5jaGFydGRhdGFbaXRlbS5uYW1lXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogaXRlbS50aXRsZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXA6IGdyb3VwLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHg6IG9wdGlvbnMuY2VudGVyLngsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHk6IG9wdGlvbnMuY2VudGVyLnksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbG9yOiBjb2xvcixcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWNvbjogaXRlbS5pY29uLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR1bmljb2RlOiBJY29uc1NlcnZpY2UuZ2V0VW5pY29kZShpdGVtLmljb24pLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhOiBpdGVtLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjaGlsZHJlbjppdGVtXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdFx0bm9kZXMucHVzaChub2RlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjcmVhdGVfZ3JvdXBzKCk7XG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZXtcblxuXHRcdFx0XHRcdFx0dmFyIGQgPSB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IHNjb3BlLmluZGV4ZXIubmFtZSxcblx0XHRcdFx0XHRcdFx0bmFtZTogc2NvcGUuaW5kZXhlci50aXRsZSxcblx0XHRcdFx0XHRcdFx0Z3JvdXA6IHNjb3BlLmluZGV4ZXIubmFtZSxcblx0XHRcdFx0XHRcdFx0Y29sb3I6IHNjb3BlLmluZGV4ZXIuc3R5bGUuYmFzZV9jb2xvciB8fCBzY29wZS5pbmRleGVyLmNvbG9yLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBzY29wZS5pbmRleGVyLmljb24sXG5cdFx0XHRcdFx0XHRcdHVuaWNvZGU6IHNjb3BlLmluZGV4ZXIudW5pY29kZSxcblx0XHRcdFx0XHRcdFx0ZGF0YTogc2NvcGUuaW5kZXhlci5kYXRhLFxuXHRcdFx0XHRcdFx0XHRjaGlsZHJlbjogc2NvcGUuaW5kZXhlci5jaGlsZHJlblxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdGxhYmVscy5wdXNoKGQpO1xuXHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHNjb3BlLmluZGV4ZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChzY29wZS5jaGFydGRhdGFbaXRlbS5uYW1lXSkge1xuXG5cdFx0XHRcdFx0XHRcdFx0dmFyIG5vZGUgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBpdGVtLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRyYWRpdXM6IHNjb3BlLmNoYXJ0ZGF0YVtpdGVtLm5hbWVdIC8gc2NvcGUuc2l6ZWZhY3Rvcixcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBzY29wZS5jaGFydGRhdGFbaXRlbS5uYW1lXSAvIHNjb3BlLnNpemVmYWN0b3IsXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBpdGVtLnRpdGxlLFxuXHRcdFx0XHRcdFx0XHRcdFx0Z3JvdXA6IHNjb3BlLmluZGV4ZXIubmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdHg6IG9wdGlvbnMuY2VudGVyLngsXG5cdFx0XHRcdFx0XHRcdFx0XHR5OiBvcHRpb25zLmNlbnRlci55LFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29sb3I6IGl0ZW0uY29sb3IsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBpdGVtLmljb24sXG5cdFx0XHRcdFx0XHRcdFx0XHR1bmljb2RlOiBJY29uc1NlcnZpY2UuZ2V0VW5pY29kZShpdGVtLmljb24pLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YTogaXRlbSxcblx0XHRcdFx0XHRcdFx0XHRcdGNoaWxkcmVuOml0ZW1cblx0XHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0XHRcdG5vZGVzLnB1c2gobm9kZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0dmFyIGNsZWFyX25vZGVzID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRub2RlcyA9IFtdO1xuXHRcdFx0XHRcdGxhYmVscyA9IFtdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBjcmVhdGVfZ3JvdXBzID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2gobm9kZXMsIGZ1bmN0aW9uKG5vZGUsIGtleSl7XG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMuY2F0X2NlbnRlcnNbbm9kZS5ncm91cF0gPSB7XG5cdFx0XHRcdFx0XHRcdFx0eDogb3B0aW9ucy53aWR0aCAvIDIsXG5cdFx0XHRcdFx0XHRcdFx0eTogb3B0aW9ucy5oZWlnaHQgLyAyICsgKDEgLSBrZXkpLFxuXHRcdFx0XHRcdFx0XHRcdGRhbXBlcjogMC4wODUsXG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHZhciBjcmVhdGVfdmlzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGFuZ3VsYXIuZWxlbWVudChlbGVtKS5odG1sKCcnKTtcblx0XHRcdFx0XHRvcHRpb25zLnZpcyA9IGQzLnNlbGVjdChlbGVtWzBdKS5hcHBlbmQoXCJzdmdcIikuYXR0cihcIndpZHRoXCIsIG9wdGlvbnMud2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgb3B0aW9ucy5oZWlnaHQpLmF0dHIoXCJpZFwiLCBcInN2Z192aXNcIik7XG5cblx0XHRcdFx0XHRpZiAoIW9wdGlvbnMuYm9yZGVycykge1xuXHRcdFx0XHRcdFx0dmFyIHBpID0gTWF0aC5QSTtcblx0XHRcdFx0XHRcdGlmKGxhYmVscy5sZW5ndGggPT0gMil7XG5cdFx0XHRcdFx0XHRcdHZhciBhcmNUb3AgPSBkMy5zdmcuYXJjKClcblx0XHRcdFx0XHRcdFx0XHQuaW5uZXJSYWRpdXMoMTA5KVxuXHRcdFx0XHRcdFx0XHRcdC5vdXRlclJhZGl1cygxMTApXG5cdFx0XHRcdFx0XHRcdFx0LnN0YXJ0QW5nbGUoLTkwICogKHBpIC8gMTgwKSkgLy9jb252ZXJ0aW5nIGZyb20gZGVncyB0byByYWRpYW5zXG5cdFx0XHRcdFx0XHRcdFx0LmVuZEFuZ2xlKDkwICogKHBpIC8gMTgwKSk7IC8vanVzdCByYWRpYW5zXG5cdFx0XHRcdFx0XHRcdHZhciBhcmNCb3R0b20gPSBkMy5zdmcuYXJjKClcblx0XHRcdFx0XHRcdFx0XHQuaW5uZXJSYWRpdXMoMTM0KVxuXHRcdFx0XHRcdFx0XHRcdC5vdXRlclJhZGl1cygxMzUpXG5cdFx0XHRcdFx0XHRcdFx0LnN0YXJ0QW5nbGUoOTAgKiAocGkgLyAxODApKSAvL2NvbnZlcnRpbmcgZnJvbSBkZWdzIHRvIHJhZGlhbnNcblx0XHRcdFx0XHRcdFx0XHQuZW5kQW5nbGUoMjcwICogKHBpIC8gMTgwKSk7IC8vanVzdCByYWRpYW5zXG5cblx0XHRcdFx0XHRcdFx0b3B0aW9ucy5hcmNUb3AgPSBvcHRpb25zLnZpcy5hcHBlbmQoXCJwYXRoXCIpXG5cdFx0XHRcdFx0XHRcdFx0LmF0dHIoXCJkXCIsIGFyY1RvcClcblx0XHRcdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCl7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbGFiZWxzWzBdLmNvbG9yIHx8IFwiI2JlNWYwMFwiO1xuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0LmF0dHIoXCJpZFwiLCBcImFyY1RvcFwiKVxuXHRcdFx0XHRcdFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiKyhvcHRpb25zLndpZHRoLzIpK1wiLFwiKyhvcHRpb25zLmhlaWdodC8yIC0gb3B0aW9ucy5oZWlnaHQvMTIpK1wiKVwiKTtcblx0XHRcdFx0XHRcdFx0b3B0aW9ucy5hcmNCb3R0b20gPSBvcHRpb25zLnZpcy5hcHBlbmQoXCJwYXRoXCIpXG5cdFx0XHRcdFx0XHRcdFx0LmF0dHIoXCJkXCIsIGFyY0JvdHRvbSlcblx0XHRcdFx0XHRcdFx0XHQuYXR0cihcImlkXCIsIFwiYXJjQm90dG9tXCIpXG5cdFx0XHRcdFx0XHRcdFx0LmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpe1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGxhYmVsc1sxXS5jb2xvciB8fCBcIiMwMDZiYjZcIjtcblx0XHRcdFx0XHRcdFx0XHR9IClcblx0XHRcdFx0XHRcdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIisob3B0aW9ucy53aWR0aC8yKStcIixcIisob3B0aW9ucy5oZWlnaHQvMikrXCIpXCIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdFx0dmFyIGFyYyA9IGQzLnN2Zy5hcmMoKVxuXHRcdFx0XHRcdFx0XHRcdC5pbm5lclJhZGl1cyhvcHRpb25zLndpZHRoLzMgLSAxKVxuXHRcdFx0XHRcdFx0XHRcdC5vdXRlclJhZGl1cyhvcHRpb25zLndpZHRoLzMpXG5cdFx0XHRcdFx0XHRcdFx0LnN0YXJ0QW5nbGUoMCAqIChwaSAvIDE4MCkpIC8vY29udmVydGluZyBmcm9tIGRlZ3MgdG8gcmFkaWFuc1xuXHRcdFx0XHRcdFx0XHRcdC5lbmRBbmdsZSgzNjAgKiAocGkgLyAxODApKTsgLy9qdXN0IHJhZGlhbnNcblxuXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMuYXJjID0gb3B0aW9ucy52aXMuYXBwZW5kKFwicGF0aFwiKVxuXHRcdFx0XHRcdFx0XHRcdC5hdHRyKFwiZFwiLCBhcmMpXG5cdFx0XHRcdFx0XHRcdFx0LmF0dHIoXCJmaWxsXCIsIGxhYmVsc1swXS5jb2xvcilcblx0XHRcdFx0XHRcdFx0XHQuYXR0cihcImlkXCIsIFwiYXJjVG9wXCIpXG5cdFx0XHRcdFx0XHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIrKG9wdGlvbnMud2lkdGgvMikrXCIsXCIrKG9wdGlvbnMuaGVpZ2h0LzIpK1wiKVwiKTtcblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0aWYob3B0aW9ucy5sYWJlbHMgPT0gdHJ1ZSAmJiBsYWJlbHMubGVuZ3RoID09IDIpe1xuXHRcdFx0XHRcdFx0dmFyIHRleHRMYWJlbHMgPSBvcHRpb25zLnZpcy5zZWxlY3RBbGwoJ3RleHQubGFiZWxzJykuZGF0YShsYWJlbHMpLmVudGVyKCkuYXBwZW5kKFwidGV4dFwiKVxuXHRcdFx0XHRcdFx0XHQuYXR0cignY2xhc3MnLCAnbGFiZWxzJylcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbihkKXtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC8qXHQuYXR0cigndHJhbnNmb3JtJywgZnVuY3Rpb24oZCl7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGluZGV4ID0gbGFiZWxzLmluZGV4T2YoZCk7XG5cdFx0XHRcdFx0XHRcdFx0aWYoaW5kZXggPiAwKXtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiAncm90YXRlKDkwLCAxMDAsIDEwMCknO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSkqL1xuXHRcdFx0XHRcdFx0XHQuYXR0cigneCcsIFwiNTAlXCIpXG5cdFx0XHRcdFx0XHRcdC5zdHlsZSgnZm9udC1zaXplJywgJzEuMmVtJylcblx0XHRcdFx0XHRcdFx0LnN0eWxlKCdjdXJzb3InLCAncG9pbnRlcicpXG5cblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3dpZHRoJywgb3B0aW9ucy53aWR0aClcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG5cdFx0XHRcdFx0XHRcdC5vbignY2xpY2snLCBmdW5jdGlvbihkKXtcblx0XHRcdFx0XHRcdFx0XHRuZ01vZGVsLiRzZXRWaWV3VmFsdWUoZC5kYXRhKTtcblx0XHRcdFx0XHRcdFx0XHRuZ01vZGVsLiRyZW5kZXIoKTtcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0LmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpe1xuXHRcdFx0XHRcdFx0XHRcdHZhciBpbmRleCA9IGxhYmVscy5pbmRleE9mKGQpO1xuXHRcdFx0XHRcdFx0XHRcdGlmKGluZGV4ID09IDApe1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIDE1O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG9wdGlvbnMuaGVpZ2h0IC0gNjtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdC50ZXh0KGZ1bmN0aW9uKGQpe1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBkLm5hbWU7XG5cdFx0XHRcdFx0XHRcdH0pXG5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0b3B0aW9ucy5jb250YWluZXJzID0gb3B0aW9ucy52aXMuc2VsZWN0QWxsKCdnLm5vZGUnKS5kYXRhKG5vZGVzKS5lbnRlcigpLmFwcGVuZCgnZycpLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChvcHRpb25zLndpZHRoIC8gMikgKyAnLCcgKyAob3B0aW9ucy5oZWlnaHQgLyAyKSArICcpJykuYXR0cignY2xhc3MnLCAnbm9kZScpO1xuXG5cdFx0XHRcdFx0LypvcHRpb25zLmNpcmNsZXMgPSBvcHRpb25zLmNvbnRhaW5lcnMuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmRhdGEobm9kZXMsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5pZDtcblx0XHRcdFx0XHR9KTsqL1xuXG5cdFx0XHRcdFx0b3B0aW9ucy5jaXJjbGVzID0gb3B0aW9ucy5jb250YWluZXJzLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCAwKS5hdHRyKFwiZmlsbFwiLCAoZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkLmNvbG9yIHx8IG9wdGlvbnMuZmlsbF9jb2xvcihkLmdyb3VwKTtcblx0XHRcdFx0XHR9KSkuYXR0cihcInN0cm9rZS13aWR0aFwiLCAwKS5hdHRyKFwic3Ryb2tlXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZDMucmdiKG9wdGlvbnMuZmlsbF9jb2xvcihkLmdyb3VwKSkuZGFya2VyKCk7XG5cdFx0XHRcdFx0fSkuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkKSB7XG5cblx0XHRcdFx0XHRcdHJldHVybiBcImJ1YmJsZV9cIiArIGQudHlwZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRvcHRpb25zLmljb25zID0gb3B0aW9ucy5jb250YWluZXJzLmFwcGVuZChcInRleHRcIilcblx0XHRcdFx0XHRcdC5hdHRyKCdmb250LWZhbWlseScsICdFUEknKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2ZvbnQtc2l6ZScsIGZ1bmN0aW9uIChkKSB7XG5cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG5cdFx0XHRcdFx0XHQuYXR0cignZmlsbCcsIGZ1bmN0aW9uKGQpe1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC51bmljb2RlID8gJyNmZmYnIDogZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuc3R5bGUoJ29wYWNpdHknLCBmdW5jdGlvbihkKXtcblx0XHRcdFx0XHRcdFx0aWYoZC51bmljb2RlKXtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnRleHQoZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQudW5pY29kZSB8fCAnMSdcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG9wdGlvbnMuaWNvbnMub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIHNob3dfZGV0YWlscyhkLCBpLCB0aGlzKTtcblx0XHRcdFx0XHR9KS5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gaGlkZV9kZXRhaWxzKGQsIGksIHRoaXMpO1xuXHRcdFx0XHRcdH0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblxuXHRcdFx0XHRcdFx0bmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGQuZGF0YSk7XG5cdFx0XHRcdFx0XHRuZ01vZGVsLiRyZW5kZXIoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRvcHRpb25zLmNpcmNsZXMudHJhbnNpdGlvbigpLmR1cmF0aW9uKG9wdGlvbnMuZHVyYXRpb24pLmF0dHIoXCJyXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5yYWRpdXM7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0b3B0aW9ucy5pY29ucy50cmFuc2l0aW9uKCkuZHVyYXRpb24ob3B0aW9ucy5kdXJhdGlvbikuYXR0cihcImZvbnQtc2l6ZVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGQucmFkaXVzICogMS43NSArICdweCc7XG5cdFx0XHRcdFx0fSkuYXR0cigneScsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5yYWRpdXMgKiAuNzUgKyAncHgnO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgdXBkYXRlX3ZpcyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGQsIGkpIHtcblx0XHRcdFx0XHRcdG9wdGlvbnMuY2lyY2xlcy50cmFuc2l0aW9uKCkuZHVyYXRpb24ob3B0aW9ucy5kdXJhdGlvbikuZGVsYXkoaSAqIG9wdGlvbnMuZHVyYXRpb24pXG5cdFx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHRcdGQucmFkaXVzID0gZC52YWx1ZSA9IHNjb3BlLmNoYXJ0ZGF0YVtkLnR5cGVdIC8gc2NvcGUuc2l6ZWZhY3Rvcjtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gc2NvcGUuY2hhcnRkYXRhW2QudHlwZV0gLyBzY29wZS5zaXplZmFjdG9yO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdG9wdGlvbnMuaWNvbnMudHJhbnNpdGlvbigpLmR1cmF0aW9uKG9wdGlvbnMuZHVyYXRpb24pLmRlbGF5KGkgKiBvcHRpb25zLmR1cmF0aW9uKVxuXHRcdFx0XHRcdFx0XHQuYXR0cihcImZvbnQtc2l6ZVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAoc2NvcGUuY2hhcnRkYXRhW2QudHlwZV0gLyBzY29wZS5zaXplZmFjdG9yKSAqIDEuNzUgKyAncHgnXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCd5JywgZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gKHNjb3BlLmNoYXJ0ZGF0YVtkLnR5cGVdIC8gc2NvcGUuc2l6ZWZhY3RvcikgKiAuNzUgKyAncHgnO1xuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgY2hhcmdlID0gZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRyZXR1cm4gLU1hdGgucG93KGQucmFkaXVzLCAyLjApIC8gNDtcblx0XHRcdFx0fTtcblx0XHRcdFx0dmFyIHN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHJldHVybiBvcHRpb25zLmZvcmNlID0gZDMubGF5b3V0LmZvcmNlKCkubm9kZXMobm9kZXMpLnNpemUoW29wdGlvbnMud2lkdGgsIG9wdGlvbnMuaGVpZ2h0XSkubGlua3MobGlua3MpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgZGlzcGxheV9ncm91cF9hbGwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy5mb3JjZS5ncmF2aXR5KG9wdGlvbnMubGF5b3V0X2dyYXZpdHkpLmNoYXJnZShjaGFyZ2UpLmZyaWN0aW9uKDAuODUpLm9uKFwidGlja1wiLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy5jb250YWluZXJzLmVhY2gobW92ZV90b3dhcmRzX2NlbnRlcihlLmFscGhhKSkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gJ3RyYW5zbGF0ZSgnICsgZC54ICsgJywnICsgZC55ICsgJyknO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0b3B0aW9ucy5mb3JjZS5zdGFydCgpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgZGlzcGxheV9ieV9jYXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy5mb3JjZS5ncmF2aXR5KG9wdGlvbnMubGF5b3V0X2dyYXZpdHkpLmNoYXJnZShjaGFyZ2UpLmZyaWN0aW9uKDAuOSkub24oXCJ0aWNrXCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25zLmNvbnRhaW5lcnMuZWFjaChtb3ZlX3Rvd2FyZHNfY2F0KGUuYWxwaGEpKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAndHJhbnNsYXRlKCcgKyBkLnggKyAnLCcgKyBkLnkgKyAnKSc7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRvcHRpb25zLmZvcmNlLnN0YXJ0KCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHZhciBtb3ZlX3Rvd2FyZHNfY2VudGVyID0gZnVuY3Rpb24gKGFscGhhKSB7XG5cdFx0XHRcdFx0cmV0dXJuIChmdW5jdGlvbiAoX3RoaXMpIHtcblx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHRkLnggPSBkLnggKyAob3B0aW9ucy53aWR0aC8yIC0gZC54KSAqIChvcHRpb25zLmRhbXBlciArIDAuMDIpICogYWxwaGEgKjEuMjU7XG5cdFx0XHRcdFx0XHRcdGQueSA9IGQueSArIChvcHRpb25zLmhlaWdodC8yIC0gZC55KSAqIChvcHRpb25zLmRhbXBlciArIDAuMDIpICogYWxwaGEgKiAxLjI1O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pKHRoaXMpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgbW92ZV90b3dhcmRzX3RvcCA9IGZ1bmN0aW9uIChhbHBoYSkge1xuXHRcdFx0XHRcdHJldHVybiAoZnVuY3Rpb24gKF90aGlzKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdFx0ZC54ID0gZC54ICsgKG9wdGlvbnMuY2VudGVyLnggLSBkLngpICogKG9wdGlvbnMuZGFtcGVyICsgMC4wMikgKiBhbHBoYSAqIDEuMTtcblx0XHRcdFx0XHRcdFx0ZC55ID0gZC55ICsgKDIwMCAtIGQueSkgKiAob3B0aW9ucy5kYW1wZXIgKyAwLjAyKSAqIGFscGhhICogMS4xO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pKHRoaXMpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgbW92ZV90b3dhcmRzX2NhdCA9IGZ1bmN0aW9uIChhbHBoYSkge1xuXHRcdFx0XHRcdHJldHVybiAoZnVuY3Rpb24gKF90aGlzKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKGQpIHtcblxuXHRcdFx0XHRcdFx0XHR2YXIgdGFyZ2V0O1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQgPSBvcHRpb25zLmNhdF9jZW50ZXJzW2QuZ3JvdXBdO1xuXHRcdFx0XHRcdFx0XHRkLnggPSBkLnggKyAodGFyZ2V0LnggLSBkLngpICogKHRhcmdldC5kYW1wZXIgKyAwLjAyKSAqIGFscGhhICogMTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQueSA9IGQueSArICh0YXJnZXQueSAtIGQueSkgKiAodGFyZ2V0LmRhbXBlciArIDAuMDIpICogYWxwaGEgKiAxO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pKHRoaXMpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2YXIgc2hvd19kZXRhaWxzID0gZnVuY3Rpb24gKGRhdGEsIGksIGVsZW1lbnQpIHtcblx0XHRcdFx0XHR2YXIgY29udGVudDtcblx0XHRcdFx0XHR2YXJcdGJhck9wdGlvbnMgPSB7XG5cdFx0XHRcdFx0XHR0aXRsZWQ6dHJ1ZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0Y29udGVudCA9ICc8bWQtcHJvZ3Jlc3MtbGluZWFyIG1kLW1vZGU9XCJkZXRlcm1pbmF0ZVwiIHZhbHVlPVwiJytkYXRhLnZhbHVlKydcIj48L21kLXByb2dyZXNzLWxpbmVhcj4nXG5cdFx0XHRcdFx0Y29udGVudCArPSBcIjxzcGFuIGNsYXNzPVxcXCJ0aXRsZVxcXCI+XCIrIGRhdGEubmFtZSArIFwiPC9zcGFuPjxici8+XCI7XG5cdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKGRhdGEuZGF0YS5jaGlsZHJlbiwgZnVuY3Rpb24gKGluZm8pIHtcblx0XHRcdFx0XHRcdGlmKHNjb3BlLmNoYXJ0ZGF0YVtpbmZvLm5hbWVdID4gMCApe1xuXHRcdFx0XHRcdFx0XHRjb250ZW50ICs9ICc8ZGl2IGNsYXNzPVwic3ViXCI+Jztcblx0XHRcdFx0XHRcdFx0Y29udGVudCArPSAnPG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiZGV0ZXJtaW5hdGVcIiB2YWx1ZT1cIicrc2NvcGUuY2hhcnRkYXRhW2luZm8ubmFtZV0rJ1wiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPidcblx0XHRcdFx0XHRcdFx0Y29udGVudCArPSBcIjxzcGFuIGNsYXNzPVxcXCJuYW1lXFxcIiBzdHlsZT1cXFwiY29sb3I6XCIgKyAoaW5mby5jb2xvciB8fCBkYXRhLmNvbG9yKSArIFwiXFxcIj4gXCIrc2NvcGUuY2hhcnRkYXRhW2luZm8ubmFtZV0rJyAtICcgKyAoaW5mby50aXRsZSkgKyBcIjwvc3Bhbj48YnIvPlwiO1xuXHRcdFx0XHRcdFx0XHRjb250ZW50ICs9ICc8L2Rpdj4nO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9jb250ZW50ID0gJzxiYXJzIG9wdGlvbnM9XCJiYXJPcHRpb25zXCIgc3RydWN0dXJlPVwiZGF0YS5kYXRhLmNoaWxkcmVuXCIgZGF0YT1cImRhdGFcIj48L2JhcnM+JztcblxuXHRcdFx0XHRcdCRjb21waWxlKG9wdGlvbnMudG9vbHRpcC5zaG93VG9vbHRpcChjb250ZW50LCBkYXRhLCBkMy5ldmVudCwgZWxlbSkuY29udGVudHMoKSkoc2NvcGUpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHZhciBoaWRlX2RldGFpbHMgPSBmdW5jdGlvbiAoZGF0YSwgaSwgZWxlbWVudCkge1xuXHRcdFx0XHRcdHJldHVybiBvcHRpb25zLnRvb2x0aXAuaGlkZVRvb2x0aXAoKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRzY29wZS4kd2F0Y2goJ2NoYXJ0ZGF0YScsIGZ1bmN0aW9uIChkYXRhLCBvbGREYXRhKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy50b29sdGlwLmhpZGVUb29sdGlwKCk7XG5cblx0XHRcdFx0XHRpZiAob3B0aW9ucy5jaXJjbGVzID09IG51bGwpIHtcblx0XHRcdFx0XHRcdGNyZWF0ZV9ub2RlcygpO1xuXHRcdFx0XHRcdFx0Y3JlYXRlX3ZpcygpO1xuXHRcdFx0XHRcdFx0c3RhcnQoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dXBkYXRlX3ZpcygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihsYWJlbHMubGVuZ3RoID09IDEgfHwgb3B0aW9ucy5sYWJlbHMgIT0gdHJ1ZSl7XG5cdFx0XHRcdFx0XHRcdGRpc3BsYXlfZ3JvdXBfYWxsKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdGRpc3BsYXlfYnlfY2F0KCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzY29wZS4kd2F0Y2goJ2luZGV4ZXInLCBmdW5jdGlvbiAobiwgbykge1xuXHRcdFx0XHRcdGlmKG4gPT09IG8pe1xuXHRcdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHR5cGVvZiBuWzBdLmNoaWxkcmVuICE9IFwidW5kZWZpbmVkXCIpe1xuXHRcdFx0XHRcdFx0b3B0aW9ucy50b29sdGlwLmhpZGVUb29sdGlwKCk7XG5cdFx0XHRcdFx0XHRjbGVhcl9ub2RlcygpO1xuXHRcdFx0XHRcdFx0Y3JlYXRlX25vZGVzKCk7XG5cdFx0XHRcdFx0XHRjcmVhdGVfdmlzKCk7XG5cdFx0XHRcdFx0XHRzdGFydCgpO1xuXG5cdFx0XHRcdFx0XHRpZihsYWJlbHMubGVuZ3RoID09IDEgfHwgb3B0aW9ucy5sYWJlbHMgIT0gdHJ1ZSl7XG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheV9ncm91cF9hbGwoKTtcblx0XHRcdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKCdhbGwnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2V7XG5cdFx0XHRcdFx0XHRcdFx0Ly9kaXNwbGF5X2J5X2NhdCgpO1xuXHRcdFx0XHRcdFx0XHRcdGRpc3BsYXlfZ3JvdXBfYWxsKCk7XG5cdFx0XHRcdFx0XHRcdFx0Ly9jb25zb2xlLmxvZygnYWxsJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c2NvcGUuJHdhdGNoKCdkaXJlY3Rpb24nLCBmdW5jdGlvbiAob2xkRCwgbmV3RCkge1xuXHRcdFx0XHRcdGlmIChvbGREID09PSBuZXdEKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChvbGREID09IFwiYWxsXCIpIHtcblx0XHRcdFx0XHRcdGRpc3BsYXlfZ3JvdXBfYWxsKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGRpc3BsYXlfYnlfY2F0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH07XG5cdH0pO1xufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdDYXRlZ29yaWVzQ3RybCcsIGZ1bmN0aW9uICgkZmlsdGVyLCB0b2FzdHIsIERhdGFTZXJ2aWNlKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLmNhdE9wdGlvbnMgPSB7XG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKXtcblx0XHRcdFx0dm0uY3JlYXRlQ2F0ZWdvcnkgPSBmYWxzZTtcblx0XHRcdH0sXG5cdFx0XHRwb3N0RG9uZTpmdW5jdGlvbihjYXRlZ29yeSl7XG5cdFx0XHRcdHZtLmNyZWF0ZUNhdGVnb3J5ID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSggJ2NhdGVnb3JpZXMnLCBmdW5jdGlvbigpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2NhdGVnb3JpZXMvY2F0ZWdvcmllcy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdDYXRlZ29yaWVzQ3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRzY29wZTp7fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0aXRlbTogJz0nLFxuXHRcdFx0XHRjYXRlZ29yaWVzOiAnPScsXG5cdFx0XHRcdG9wdGlvbnM6Jz0nLFxuXHRcdFx0XHRzYXZlOiAnJidcblx0XHRcdH0sXG5cdFx0XHRyZXBsYWNlOnRydWUsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiggc2NvcGUsIGVsZW1lbnQsIGF0dHJzICl7XG5cdFx0XHRcdC8vXG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnQ2F0ZWdvcnlDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyLCB0b2FzdHIsIERhdGFTZXJ2aWNlLCBDb250ZW50U2VydmljZSl7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0dm0uc2F2ZUNhdGVnb3J5ID0gc2F2ZUNhdGVnb3J5O1xuXHRcdHZtLnF1ZXJ5U2VhcmNoQ2F0ZWdvcnkgPSBxdWVyeVNlYXJjaENhdGVnb3J5O1xuXHRcdHZtLnBhcmVudENoYW5nZWQgPSBwYXJlbnRDaGFuZ2VkO1xuXHRcdHZtLmNoZWNrQmFzZSA9IGNoZWNrQmFzZTtcblx0XHR2bS5zdHlsZXMgPSBDb250ZW50U2VydmljZS5nZXRTdHlsZXMoKTtcblx0XHR2bS5mbGF0dGVuZWQgPSBbXTtcblx0XHR2bS5jb3B5ID0ge307XG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCl7XG5cdFx0XHRmbGF0dGVuV2l0aENoaWxkcmVuKHZtLmNhdGVnb3JpZXMpO1xuXHRcdFx0aWYodm0uaXRlbS5wYXJlbnRfaWQpe1xuXHRcdFx0XHR2bS5wYXJlbnQgPSBnZXRQYXJlbnQodm0uaXRlbSwgdm0uY2F0ZWdvcmllcyk7XG5cdFx0XHRcdHZtLmNvcHkgPSBhbmd1bGFyLmNvcHkodm0uaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGZsYXR0ZW5XaXRoQ2hpbGRyZW4obGlzdCl7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24oaXRlbSl7XG5cdFx0XHRcdHZtLmZsYXR0ZW5lZC5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRpZihpdGVtLmNoaWxkcmVuKXtcblx0XHRcdFx0XHRmbGF0dGVuV2l0aENoaWxkcmVuKGl0ZW0uY2hpbGRyZW4pXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHF1ZXJ5U2VhcmNoQ2F0ZWdvcnkocXVlcnkpIHtcblx0XHRcdHJldHVybiAkZmlsdGVyKCdmaW5kYnluYW1lJykoJGZpbHRlcignb3JkZXJCeScpKHZtLmZsYXR0ZW5lZCwgJ3RpdGxlJyksIHF1ZXJ5LCAndGl0bGUnKTtcblx0XHRcdC8vcmV0dXJuICRmaWx0ZXIoJ2ZpbmRieW5hbWUnKSgkZmlsdGVyKCdmbGF0dGVuJykodm0uY2F0ZWdvcmllcyksIHF1ZXJ5LCAndGl0bGUnKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY2hlY2tCYXNlKCl7XG5cdFx0XHRpZiAodm0uaXRlbS50aXRsZSAmJiB2bS5pdGVtLnRpdGxlLmxlbmd0aCA+PSAzKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBwYXJlbnRDaGFuZ2VkKGl0ZW0pe1xuXHRcdFx0aWYodHlwZW9mIGl0ZW0gPT0gXCJ1bmRlZmluZWRcIil7XG5cdFx0XHRcdHZtLml0ZW0ucGFyZW50X2lkID0gbnVsbDtcblx0XHRcdFx0dm0uaXRlbS5wYXJlbnQgPSBudWxsO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRpZihpdGVtLmlkID09IHZtLml0ZW0uaWQpe1xuXHRcdFx0XHR0b2FzdHIuZXJyb3IoJ1RoZSBQYXJlbnQgY2Fubm90IGJlIHRoZSBzYW1lJywgJ0ludmFsaWQgc2VsZWN0aW9uJyk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZtLnBhcmVudCA9IGl0ZW07XG5cdFx0XHR2bS5pdGVtLnBhcmVudF9pZCA9IGl0ZW0uaWQ7XG5cdFx0XHR2bS5pdGVtLnBhcmVudCA9IGl0ZW07XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGdldFBhcmVudChpdGVtLGxpc3Qpe1xuXHRcdFx0dmFyIGZvdW5kID0gbnVsbFxuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGxpc3QsIGZ1bmN0aW9uKGVudHJ5LCBrZXkpe1xuXHRcdFx0XHRpZihlbnRyeS5pZCA9PSBpdGVtLnBhcmVudF9pZCl7XG5cdFx0XHRcdFx0Zm91bmQgPSBlbnRyeTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihlbnRyeS5jaGlsZHJlbiAmJiAhZm91bmQpe1xuXHRcdFx0XHRcdHZhciBzdWJyZXN1bHQgPSBnZXRQYXJlbnQoaXRlbSwgZW50cnkuY2hpbGRyZW4pO1xuXHRcdFx0XHRcdGlmKHN1YnJlc3VsdCl7XG5cdFx0XHRcdFx0XHRmb3VuZCA9IHN1YnJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGZvdW5kO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBtb3ZlSXRlbSgpe1xuXHRcdFx0aWYodm0uY29weS5wYXJlbnRfaWQpe1xuXHRcdFx0XHRcdHZhciBvbGRQYXJlbnQgPSBnZXRQYXJlbnQodm0uY29weSwgdm0uY2F0ZWdvcmllcyk7XG5cdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG9sZFBhcmVudC5jaGlsZHJlbi5sZW5ndGg7IGkrKyApe1xuXHRcdFx0XHRcdFx0aWYob2xkUGFyZW50LmNoaWxkcmVuW2ldLmlkID09IHZtLml0ZW0uaWQpe1xuXHRcdFx0XHRcdFx0XHRvbGRQYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGksMSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHZtLmNhdGVnb3JpZXMubGVuZ3RoOyBpKysgKXtcblx0XHRcdFx0XHRpZih2bS5jYXRlZ29yaWVzW2ldLmlkID09IHZtLml0ZW0uaWQpe1xuXHRcdFx0XHRcdFx0dm0uY2F0ZWdvcmllcy5zcGxpY2UoaSwxKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKHZtLml0ZW0ucGFyZW50X2lkKXtcblx0XHRcdFx0dmFyIG5ld1BhcmVudCA9IGdldFBhcmVudCh2bS5pdGVtLCB2bS5jYXRlZ29yaWVzKTtcblx0XHRcdFx0bmV3UGFyZW50LmNoaWxkcmVuLnB1c2godm0uaXRlbSk7XG5cblx0XHRcdH1cblx0XHRcdGVsc2V7XG5cdFx0XHRcdHZtLmNhdGVnb3JpZXMucHVzaCh2bS5pdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZnVuY3Rpb24gc3VjY2Vzc0FjdGlvbihkYXRhKXtcblx0XHRcdGNvbnNvbGUubG9nKHZtLmNvcHkucGFyZW50X2lkLCB2bS5pdGVtLnBhcmVudF9pZCk7XG5cdFx0XHRpZih2bS5jb3B5LnBhcmVudF9pZCAhPSB2bS5pdGVtLnBhcmVudF9pZCl7XG5cdFx0XHRcdC8vaWYodm0uY29weS5wYXJlbnRfaWQgJiYgdm0uaXRlbS5wYXJlbnRfaWQpe1xuXHRcdFx0XHRcdG1vdmVJdGVtKCk7XG5cdFx0XHQvL1x0fVxuXHRcdFx0fVxuXHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0NhdGVnb3J5IGhhcyBiZWVuIHVwZGF0ZWQnLCAnU3VjY2VzcycpO1xuXHRcdFx0JHNjb3BlLmNhdGVnb3J5Rm9ybS4kc2V0U3VibWl0dGVkKCk7XG5cdFx0XHR2bS5jb3B5ID0gYW5ndWxhci5jb3B5KHZtLml0ZW0pO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBzYXZlQ2F0ZWdvcnkodmFsaWQpIHtcblx0XHRcdGlmKHZhbGlkKXtcblx0XHRcdFx0aWYodm0uaXRlbS5pZCl7XG5cdFx0XHRcdFx0aWYodm0uaXRlbS5yZXN0YW5ndWxhcml6ZWQpe1xuXHRcdFx0XHRcdFx0dm0uaXRlbS5zYXZlKCkudGhlbihzdWNjZXNzQWN0aW9uKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdERhdGFTZXJ2aWNlLnVwZGF0ZSgnY2F0ZWdvcmllcycsIHZtLml0ZW0uaWQsIHZtLml0ZW0pLnRoZW4oc3VjY2Vzc0FjdGlvbik7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHREYXRhU2VydmljZS5wb3N0KCdjYXRlZ29yaWVzJywgdm0uaXRlbSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0aWYoZGF0YS5wYXJlbnRfaWQgKXtcblx0XHRcdFx0XHRcdFx0XHQgdmFyIHBhcmVudCA9IGdldFBhcmVudChkYXRhLCB2bS5jYXRlZ29yaWVzKTtcblx0XHRcdFx0XHRcdFx0XHQgaWYoIXBhcmVudC5jaGlsZHJlbil7XG5cdFx0XHRcdFx0XHRcdFx0XHQgcGFyZW50LmNoaWxkcmVuID0gW107XG5cdFx0XHRcdFx0XHRcdFx0IH1cblx0XHRcdFx0XHRcdFx0XHQgcGFyZW50LmNoaWxkcmVuLnB1c2goZGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0IHBhcmVudC5leHBhbmRlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHR2bS5jYXRlZ29yaWVzLnB1c2goZGF0YSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnTmV3IENhdGVnb3J5IGhhcyBiZWVuIHNhdmVkJywgJ1N1Y2Nlc3MnKTtcblx0XHRcdFx0XHRcdHZtLm9wdGlvbnMucG9zdERvbmUoZGF0YSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdH1cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdjYXRlZ29yeScsIGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2NhdGVnb3J5L2NhdGVnb3J5Lmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0NhdGVnb3J5Q3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRzY29wZTp7fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0aXRlbTogJz0nLFxuXHRcdFx0XHRjYXRlZ29yaWVzOiAnPScsXG5cdFx0XHRcdG9wdGlvbnM6Jz0/Jyxcblx0XHRcdFx0c2F2ZTogJyYnXG5cdFx0XHR9LFxuXHRcdFx0cmVwbGFjZTp0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ0NpcmNsZWdyYXBoQ3RybCcsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCdjaXJjbGVncmFwaCcsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XG5cdFx0dmFyIGRlZmF1bHRzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR3aWR0aDogODAsXG5cdFx0XHRcdGhlaWdodDogODAsXG5cdFx0XHRcdGNvbG9yOiAnIzAwY2NhYScsXG5cdFx0XHRcdHNpemU6IDE3OCxcblx0XHRcdFx0ZmllbGQ6ICdyYW5rJ1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdDaXJjbGVncmFwaEN0cmwnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0b3B0aW9uczogJz0nLFxuXHRcdFx0XHRpdGVtOiAnPSdcblx0XHRcdH0sXG5cdFx0XHRsaW5rOiBmdW5jdGlvbigkc2NvcGUsIGVsZW1lbnQsICRhdHRycykge1xuXHRcdFx0XHQvL0ZldGNoaW5nIE9wdGlvbnNcblxuXHRcdFx0XHQkc2NvcGUub3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRzKCksICRzY29wZS5vcHRpb25zKTtcblx0XHRcdFx0dmFyIM+EID0gMiAqIE1hdGguUEk7XG5cdFx0XHRcdC8vQ3JlYXRpbmcgdGhlIFNjYWxlXG5cdFx0XHRcdHZhciByb3RhdGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuXHRcdFx0XHRcdC5kb21haW4oWzEsICRzY29wZS5vcHRpb25zLnNpemVdKVxuXHRcdFx0XHRcdC5yYW5nZShbMSwgMF0pXG5cdFx0XHRcdFx0LmNsYW1wKHRydWUpO1xuXG5cdFx0XHRcdC8vQ3JlYXRpbmcgRWxlbWVudHNcblx0XHRcdFx0dmFyIHN2ZyA9IGQzLnNlbGVjdChlbGVtZW50WzBdKS5hcHBlbmQoJ3N2ZycpXG5cdFx0XHRcdFx0LmF0dHIoJ3dpZHRoJywgJHNjb3BlLm9wdGlvbnMud2lkdGgpXG5cdFx0XHRcdFx0LmF0dHIoJ2hlaWdodCcsICRzY29wZS5vcHRpb25zLmhlaWdodClcblx0XHRcdFx0XHQuYXBwZW5kKCdnJyk7XG5cblx0XHRcdFx0dmFyIGNvbnRhaW5lciA9IHN2Zy5hcHBlbmQoJ2cnKVxuXHRcdFx0XHRcdC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyAkc2NvcGUub3B0aW9ucy53aWR0aCAvIDIgKyAnLCcgKyAkc2NvcGUub3B0aW9ucy5oZWlnaHQgLyAyICsgJyknKVxuXHRcdFx0XHRcdC5zdHlsZSgnZm9udC1zaXplJywgZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdGlmKCRzY29wZS5vcHRpb25zLmZvbnRTaXplKXtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5vcHRpb25zLmZvbnRTaXplKydweCc7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXR1cm4gXCIxZW1cIlxuXHRcdFx0XHRcdH0pXG5cblx0XHRcdFx0dmFyIGNpcmNsZUJhY2sgPSBjb250YWluZXIuYXBwZW5kKCdjaXJjbGUnKVxuXHRcdFx0XHRcdC5hdHRyKCdyJywgJHNjb3BlLm9wdGlvbnMud2lkdGggLyAyIC0gMilcblx0XHRcdFx0XHQuYXR0cignc3Ryb2tlLXdpZHRoJywgMilcblx0XHRcdFx0XHQuYXR0cignc3Ryb2tlJywgJHNjb3BlLm9wdGlvbnMuY29sb3IpXG5cdFx0XHRcdFx0LnN0eWxlKCdvcGFjaXR5JywgJzAuNicpXG5cdFx0XHRcdFx0LmF0dHIoJ2ZpbGwnLCAnbm9uZScpO1xuXG5cdFx0XHRcdHZhciBhcmMgPSBkMy5zdmcuYXJjKClcblx0XHRcdFx0XHQuc3RhcnRBbmdsZSgwKVxuXHRcdFx0XHRcdC5pbm5lclJhZGl1cyhmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLm9wdGlvbnMud2lkdGggLyAyIC0gNDtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5vdXRlclJhZGl1cyhmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLm9wdGlvbnMud2lkdGggLyAyO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHZhciBjaXJjbGVHcmFwaCA9IGNvbnRhaW5lci5hcHBlbmQoJ3BhdGgnKVxuXHRcdFx0XHRcdC5kYXR1bSh7XG5cdFx0XHRcdFx0XHRlbmRBbmdsZTogMiAqIE1hdGguUEkgKiAwXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuc3R5bGUoXCJmaWxsXCIsICRzY29wZS5vcHRpb25zLmNvbG9yKVxuXHRcdFx0XHRcdC5hdHRyKCdkJywgYXJjKTtcblx0XHRcdFx0dmFyIHRleHQgPSBjb250YWluZXIuc2VsZWN0QWxsKCd0ZXh0Jylcblx0XHRcdFx0XHQuZGF0YShbMF0pXG5cdFx0XHRcdFx0LmVudGVyKClcblx0XHRcdFx0XHQuYXBwZW5kKCd0ZXh0Jylcblx0XHRcdFx0XHQudGV4dChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRpZiAoISRzY29wZS5vcHRpb25zLmhpZGVOdW1iZXJpbmcpXG5cdFx0XHRcdFx0XHRcdHJldHVybiAnTsKwJyArIGQ7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZCArICcvJyArICRzY29wZS5vcHRpb25zLnNpemU7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuc3R5bGUoXCJmaWxsXCIsICRzY29wZS5vcHRpb25zLmNvbG9yKVxuXHRcdFx0XHRcdC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpXG5cdFx0XHRcdFx0LnN0eWxlKCdmb250LXNpemUnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdC8vaWYoISRzY29wZS5vcHRpb25zLmhpZGVOdW1iZXJpbmcpXG5cdFx0XHRcdFx0XHRyZXR1cm4gJzFlbSc7XG5cdFx0XHRcdFx0XHQvL3JldHVybiAnMS41ZW0nO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG5cdFx0XHRcdFx0LmF0dHIoJ3knLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHQvL2lmKCEkc2NvcGUub3B0aW9ucy5oaWRlTnVtYmVyaW5nKVxuXHRcdFx0XHRcdFx0cmV0dXJuICcwLjM1ZW0nO1xuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gJzAuMzdlbSdcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvL1RyYW5zaXRpb24gaWYgc2VsZWN0aW9uIGhhcyBjaGFuZ2VkXG5cdFx0XHRcdGZ1bmN0aW9uIGFuaW1hdGVJdChyYWRpdXMpIHtcblx0XHRcdFx0XHRjaXJjbGVCYWNrLnRyYW5zaXRpb24oKVxuXHRcdFx0XHRcdFx0LmR1cmF0aW9uKDc1MClcblx0XHRcdFx0XHRcdC5hdHRyKCdzdHJva2UnLCAkc2NvcGUub3B0aW9ucy5jb2xvcik7XG5cblxuXHRcdFx0XHRcdGNpcmNsZUdyYXBoLnRyYW5zaXRpb24oKVxuXHRcdFx0XHRcdFx0LmR1cmF0aW9uKDc1MClcblx0XHRcdFx0XHRcdC5zdHlsZShcImZpbGxcIiwgJHNjb3BlLm9wdGlvbnMuY29sb3IpXG5cdFx0XHRcdFx0XHQuY2FsbChhcmNUd2Vlbiwgcm90YXRlKHJhZGl1cykgKiAyICogTWF0aC5QSSk7XG5cblx0XHRcdFx0XHR0ZXh0LnRyYW5zaXRpb24oKS5kdXJhdGlvbig3NTApLnR3ZWVuKCd0ZXh0JywgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0aWYgKCEkc2NvcGUub3B0aW9ucy5oaWRlTnVtYmVyaW5nKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBkYXRhID0gdGhpcy50ZXh0Q29udGVudC5zcGxpdCgnTsKwJyk7XG5cdFx0XHRcdFx0XHRcdHZhciBpID0gZDMuaW50ZXJwb2xhdGUocGFyc2VJbnQoZGF0YVsxXSksIHJhZGl1cyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbih0KSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9ICdOwrAnICsgKE1hdGgucm91bmQoaSh0KSAqIDEpIC8gMSk7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR2YXIgZGF0YSA9IHRoaXMudGV4dENvbnRlbnQuc3BsaXQoJy8nKTtcblx0XHRcdFx0XHRcdFx0dmFyIGkgPSBkMy5pbnRlcnBvbGF0ZShwYXJzZUludChkYXRhWzBdKSwgcmFkaXVzKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gKE1hdGgucm91bmQoaSh0KSAqIDEpIC8gMSkgKyBcIi9cIiArICRzY29wZS5vcHRpb25zLnNpemU7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkuc3R5bGUoXCJmaWxsXCIsICRzY29wZS5vcHRpb25zLmNvbG9yKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9Ud2VlbiBhbmltYXRpb24gZm9yIHRoZSBBcmNcblx0XHRcdFx0ZnVuY3Rpb24gYXJjVHdlZW4odHJhbnNpdGlvbiwgbmV3QW5nbGUpIHtcblx0XHRcdFx0XHR0cmFuc2l0aW9uLmF0dHJUd2VlbihcImRcIiwgZnVuY3Rpb24oZCkge1xuXG5cdFx0XHRcdFx0XHR2YXIgaW50ZXJwb2xhdGUgPSBkMy5pbnRlcnBvbGF0ZShkLmVuZEFuZ2xlLCBuZXdBbmdsZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24odCkge1xuXHRcdFx0XHRcdFx0XHRkLmVuZEFuZ2xlID0gaW50ZXJwb2xhdGUodCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBhcmMoZCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Lyokc2NvcGUuJHdhdGNoKCdvcHRpb25zJywgZnVuY3Rpb24gKG4sIG8pIHtcblx0XHRcdFx0XHRpZiAobiA9PT0gbykge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjaXJjbGVCYWNrLnN0eWxlKCdzdHJva2UnLCBuLmNvbG9yKTtcblx0XHRcdFx0XHRjaXJjbGVHcmFwaC5zdHlsZSgnZmlsbCcsIG4uY29sb3IpO1xuXHRcdFx0XHRcdHRleHQuc3R5bGUoJ2ZpbGwnLCBuLmNvbG9yKTtcblx0XHRcdFx0XHQkdGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRhbmltYXRlSXQoJHNjb3BlLml0ZW1bbi5maWVsZF0pXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pOyovXG5cblx0XHRcdFx0Ly9XYXRjaGluZyBpZiBzZWxlY3Rpb24gaGFzIGNoYW5nZWQgZnJvbSBhbm90aGVyIFVJIGVsZW1lbnRcblx0XHRcdFx0JHNjb3BlLiR3YXRjaCgnaXRlbScsIGZ1bmN0aW9uKG4sIG8pIHtcblx0XHRcdFx0XHQvL2lmKG4gPT09IG8pIHJldHVybjtcblxuXHRcdFx0XHRcdGlmICghbikge1xuXHRcdFx0XHRcdFx0blskc2NvcGUub3B0aW9ucy5maWVsZF0gPSAkc2NvcGUub3B0aW9ucy5zaXplO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGFuaW1hdGVJdChuWyRzY29wZS5vcHRpb25zLmZpZWxkXSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHQkc2NvcGUuJHdhdGNoKCdvcHRpb25zJywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0XHRcdGlmIChuID09PSBvIHx8ICFuKSByZXR1cm47XG5cblx0XHRcdFx0XHQkdGltZW91dChmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0YW5pbWF0ZUl0KCRzY29wZS5pdGVtWyRzY29wZS5vcHRpb25zLmZpZWxkXSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sIHRydWUpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdDb2xvckdyYWRpZW50Q3RybCcsIGZ1bmN0aW9uKCRzY29wZSkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5yZW1vdmVDb2xvciA9IHJlbW92ZUNvbG9yO1xuXHRcdHZtLmFjdGl2ZTtcblx0XHR2bS5kcmFnRXZlbnRzID0ge1xuXHRcdFx0ZHJhZ01vdmUgOiBmdW5jdGlvbiAoaW5zdGFuY2UsIGV2ZW50LCBwb2ludGVyKSB7XG4gICAgICAgIHZhciBwZXJjZW50YWdlID0gMTAwICAqIGluc3RhbmNlLnBvc2l0aW9uLnggLyBpbnN0YW5jZS5jb250YWluZXJTaXplLndpZHRoO1xuXHRcdFx0XHR2bS5hY3RpdmUucG9zID0gcGVyY2VudGFnZTtcblxuICAgIFx0fSxcblx0XHRcdGRyYWdFbmQgOiBmdW5jdGlvbiAoaW5zdGFuY2UsIGV2ZW50LCBwb2ludGVyKSB7XG5cblx0XHRcdFxuICAgIFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHJlbW92ZUNvbG9yKGlkeCkge1xuXHRcdFx0dm0uZ3JhZGllbnQuc3BsaWNlKGlkeCwgMSk7XG5cdFx0fVxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCdjb2xvckdyYWRpZW50JywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvY29sb3ItZ3JhZGllbnQvY29sb3ItZ3JhZGllbnQuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnQ29sb3JHcmFkaWVudEN0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjoge1xuXHRcdFx0XHRncmFkaWVudDogJz0nXG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRcdC8vXG5cblx0XHRcdFx0dmFyIHdpZHRoID0gZWxlbWVudC5wYXJlbnQoKVswXS5jbGllbnRXaWR0aCAtIDQ4O1xuXHRcdFx0XHR2YXIgaGVpZ2h0ID0gMjA7XG5cdFx0XHRcdHZhciBzdmcgPSBkMy5zZWxlY3QoZWxlbWVudFswXSkuYXBwZW5kKCdzdmcnKTtcblx0XHRcdFx0c3ZnLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0XHRcdFx0XHQuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXHRcdFx0XHR2YXIgZGVmID0gc3ZnLmFwcGVuZChcImRlZnNcIik7XG5cdFx0XHRcdHZhciBncmFkQ29sID0gZGVmLmFwcGVuZChcImxpbmVhckdyYWRpZW50XCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJpZFwiLCBcImdyYWRpZW50XCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJ4MVwiLCBcIjAlXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJ5MVwiLCBcIjAlXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBcIjEwMCVcIilcblx0XHRcdFx0XHQuYXR0cihcInkyXCIsIFwiMCVcIik7XG5cblx0XHRcdFx0dmFyIHJlY3QgPSBzdmcuYXBwZW5kKFwicmVjdFwiKVxuXHRcdFx0XHRcdC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdFx0XHRcdFx0LmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuXHRcdFx0XHRcdC5zdHlsZShcImZpbGxcIiwgXCJ1cmwoI2dyYWRpZW50KVwiKTtcblxuXG5cdFx0XHRcdGZ1bmN0aW9uIGRyYXdHcmFkaWVudCgpIHtcblxuXHRcdFx0XHRcdHZhciBncmFkaWVudCA9IGdyYWRDb2wuc2VsZWN0QWxsKCdzdG9wJylcblx0XHRcdFx0XHRcdC5kYXRhKHNjb3BlLnZtLmdyYWRpZW50LCBmdW5jdGlvbihkKXtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQuaWRcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Z3JhZGllbnRcblx0XHRcdFx0XHRcdC5lbnRlcigpXG5cdFx0XHRcdFx0XHQuYXBwZW5kKFwic3RvcFwiKVxuXHRcdFx0XHRcdFx0LmF0dHIoXCJvZmZzZXRcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhkLnBvcyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnBvcyArIFwiJVwiO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5zdHlsZShcInN0b3AtY29sb3JcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvclxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRncmFkaWVudC5leGl0KCkucmVtb3ZlKCk7XG5cdFx0XHRcdFxuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzY29wZS4kd2F0Y2goJ3ZtLmdyYWRpZW50JywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0XHRcdGlmIChuID09PSAwKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdFx0XHRkcmF3R3JhZGllbnQoKTtcblx0XHRcdFx0fSwgdHJ1ZSk7XG5cblx0XHRcdFx0ZHJhd0dyYWRpZW50KCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnQ29sb3JIYW5kbGVDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnY29sb3JIYW5kbGUnLCBmdW5jdGlvbigkZG9jdW1lbnQsICR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycykge1xuICAgICAgdmFyIGJlZ2luRHJhZ2dpbmcsIGNvbnRhaW5lciwgZ2V0Q29sb3JIYW5kbGUsIG1vdXNlbW92ZUxpc3RlbmVyO1xuICAgICAgY29udGFpbmVyID0gZWxlbS5wYXJlbnQoKTtcbiAgICAgIGVsZW0uYWRkQ2xhc3MoJ2ljb25pYycpO1xuICAgICAgZ2V0Q29sb3JIYW5kbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHNjb3BlLiRldmFsKGF0dHJzLmNvbG9ySGFuZGxlKTtcbiAgICAgIH07XG4gICAgICBzY29wZS4kd2F0Y2goYXR0cnMuY29sb3JIYW5kbGUsIGZ1bmN0aW9uKENvbG9ySGFuZGxlLCBPbGRDb2xvckhhbmRsZSkge1xuICAgICAgICB2YXIgZGVsZXRlZCwgbGVmdEV4dHJlbWVQZXJjZW50LCByaWdodEV4dHJlbWVQZXJjZW50O1xuICAgICAgICBsZWZ0RXh0cmVtZVBlcmNlbnQgPSAtMy40O1xuICAgICAgICByaWdodEV4dHJlbWVQZXJjZW50ID0gOTYuNztcbiAgICAgICAgZWxlbS5jc3MoJ2xlZnQnLCBsZWZ0RXh0cmVtZVBlcmNlbnQgKyAoQ29sb3JIYW5kbGUuc3RvcCAqIChyaWdodEV4dHJlbWVQZXJjZW50ICsgTWF0aC5hYnMobGVmdEV4dHJlbWVQZXJjZW50KSkpICsgJyUnKTtcbiAgICAgICAgaWYgKENvbG9ySGFuZGxlLmNvbG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW0uY3NzKCdjb2xvcicsIENvbG9ySGFuZGxlLmNvbG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGVkID0gc2NvcGUuZGVsZXRlQ29sb3JIYW5kbGUoQ29sb3JIYW5kbGUpO1xuICAgICAgICAgIGlmICghZGVsZXRlZCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbG9ySGFuZGxlLmNvbG9yID0gT2xkQ29sb3JIYW5kbGUuY29sb3I7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCB0cnVlKTtcbiAgICAgIHNjb3BlLiR3YXRjaCgnQWN0aXZlQ29sb3JIYW5kbGUnLCBmdW5jdGlvbihBY3RpdmVDb2xvckhhbmRsZSkge1xuICAgICAgICB2YXIgVGhpc0NvbG9ySGFuZGxlO1xuICAgICAgICBUaGlzQ29sb3JIYW5kbGUgPSBnZXRDb2xvckhhbmRsZSgpO1xuICAgICAgICBlbGVtLnRvZ2dsZUNsYXNzKCdhcnJvd191cF9hbHQxJywgQWN0aXZlQ29sb3JIYW5kbGUgPT09IFRoaXNDb2xvckhhbmRsZSk7XG4gICAgICAgIHJldHVybiBlbGVtLnRvZ2dsZUNsYXNzKCdhcnJvd191cCcsIEFjdGl2ZUNvbG9ySGFuZGxlICE9PSBUaGlzQ29sb3JIYW5kbGUpO1xuICAgICAgfSk7XG4gICAgICBtb3VzZW1vdmVMaXN0ZW5lciA9IG51bGw7XG4gICAgICBlbGVtLmJpbmQoJ21vdXNlZG93bicsZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyIGxlZnRDbGlja2VkO1xuICAgICAgICBsZWZ0Q2xpY2tlZCA9IGV2ZW50LndoaWNoID09PSAxO1xuICAgICAgICBpZiAobGVmdENsaWNrZWQpIHtcbiAgICAgICAgICByZXR1cm4gYmVnaW5EcmFnZ2luZygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGJlZ2luRHJhZ2dpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIFRoaXNDb2xvckhhbmRsZTtcbiAgICAgICAgVGhpc0NvbG9ySGFuZGxlID0gZ2V0Q29sb3JIYW5kbGUoKTtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBzY29wZS5zZXRBY3RpdmVDb2xvckhhbmRsZShUaGlzQ29sb3JIYW5kbGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbS5hZGRDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgICAgaWYgKCFtb3VzZW1vdmVMaXN0ZW5lcikge1xuICAgICAgICAgIHJldHVybiAkZG9jdW1lbnQuYmluZCgnbW91c2Vtb3ZlJyxtb3VzZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFxuICAgICAgICAgICAgICBUaGlzQ29sb3JIYW5kbGUuc3RvcCA9IChldmVudC5wYWdlWCAtIGNvbnRhaW5lclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0KSAvIGNvbnRhaW5lclswXS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgICAgaWYgKFRoaXNDb2xvckhhbmRsZS5zdG9wIDwgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBUaGlzQ29sb3JIYW5kbGUuc3RvcCA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoVGhpc0NvbG9ySGFuZGxlLnN0b3AgPiAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRoaXNDb2xvckhhbmRsZS5zdG9wID0gMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAkZG9jdW1lbnQuYmluZCgnbW91c2V1cCcsZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChlbGVtLmhhc0NsYXNzKCdkcmFnZ2luZycpKSB7XG4gICAgICAgICAgZWxlbS5yZW1vdmVDbGFzcygnZHJhZ2dpbmcnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2Vtb3ZlTGlzdGVuZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAkZG9jdW1lbnQudW5iaW5kKCdtb3VzZW1vdmUnLCBtb3VzZW1vdmVMaXN0ZW5lcik7XG4gICAgICAgICAgcmV0dXJuIG1vdXNlbW92ZUxpc3RlbmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbGVtLmJpbmQoJ21vdXNldXAnLGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmlnaHRDbGlja2VkO1xuICAgICAgICByaWdodENsaWNrZWQgPSBldmVudC53aGljaCA9PT0gMztcbiAgICAgICAgaWYgKHJpZ2h0Q2xpY2tlZCkge1xuICAgICAgICAgIHJldHVybiBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NvcGUuZGVsZXRlQ29sb3JIYW5kbGUoZ2V0Q29sb3JIYW5kbGUoKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgVGhpc0NvbG9ySGFuZGxlO1xuICAgICAgICBUaGlzQ29sb3JIYW5kbGUgPSBnZXRDb2xvckhhbmRsZSgpO1xuICAgICAgICBpZiAoVGhpc0NvbG9ySGFuZGxlLmZvcmNlRHJhZyAmJiBzY29wZS5nZXRNb3VzZUlzRG93bigpKSB7XG4gICAgICAgICAgVGhpc0NvbG9ySGFuZGxlLmZvcmNlRHJhZyA9IGZhbHNlO1xuICAgICAgICAgIHNjb3BlLnNldEFjdGl2ZUNvbG9ySGFuZGxlKFRoaXNDb2xvckhhbmRsZSk7XG4gICAgICAgICAgcmV0dXJuIGJlZ2luRHJhZ2dpbmcoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ0NvbXBhcmVDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ2NvbXBhcmVDb3VudHJpZXMnLCBmdW5jdGlvbigkZG9jdW1lbnQsICR0aW1lb3V0KSB7XG5cblx0XHR2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHdpZHRoOiAzNTAsXG5cdFx0XHRcdGhlaWdodDogMjUsXG5cdFx0XHRcdG1hcmdpbjogNSxcblx0XHRcdFx0Y29sb3I6ICcjZmYwMDAwJyxcblx0XHRcdFx0ZmllbGQ6ICdzY29yZScsXG5cdFx0XHRcdGR1cmF0aW9uOiA1MDAsXG5cdFx0XHRcdG1pbjogMCxcblx0XHRcdFx0bWF4OiAxMDBcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2NvbXBhcmUvY29tcGFyZS5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdDb21wYXJlQ3RybCcsXG5cdFx0XHRzY29wZToge1xuXHRcdFx0XHRjb3VudHJpZXM6ICc9Jyxcblx0XHRcdFx0Y291bnRyeTogJz0nLFxuXHRcdFx0XHRvcHRpb25zOiAnPSdcblx0XHRcdH0sXG5cdFx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblx0XHRcdFx0c2NvcGUub3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRzKCksIHNjb3BlLm9wdGlvbnMpO1xuXHRcdFx0XHRzY29wZS5vcHRpb25zLndpZHRoID0gZWxlbWVudFswXS5jbGllbnRXaWR0aCAtIDIwO1xuXHRcdFx0XHR2YXIgZm9udENvbG9yID0gJyMzMzMnLFxuXHRcdFx0XHRcdGJnQ29sb3IgPSAnI2RkZCc7XG5cblx0XHRcdFx0dmFyIHhzY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG5cdFx0XHRcdFx0LmRvbWFpbihbc2NvcGUub3B0aW9ucy5taW4sIHNjb3BlLm9wdGlvbnMubWF4XSlcblx0XHRcdFx0XHQucmFuZ2UoWzAsIChzY29wZS5vcHRpb25zLndpZHRoIC0gMTAwIC0gKHNjb3BlLm9wdGlvbnMubWFyZ2luICogMikpXSk7XG5cblx0XHRcdFx0dmFyIHlzY2FsZSA9IGQzLnNjYWxlLm9yZGluYWwoKVxuXHRcdFx0XHRcdC5yYW5nZShbMCwgc2NvcGUub3B0aW9ucy5oZWlnaHRdKVxuXHRcdFx0XHRcdC5kb21haW4oWzAsIHNjb3BlLmNvdW50cmllcy5sZW5ndGhdKTtcblxuXHRcdFx0XHR2YXIgc3ZnID0gZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmFwcGVuZCgnc3ZnJylcblx0XHRcdFx0XHQuYXR0cignd2lkdGgnLCBzY29wZS5vcHRpb25zLndpZHRoKVxuXHRcdFx0XHRcdC5hdHRyKCdoZWlnaHQnLCBzY29wZS5vcHRpb25zLmhlaWdodCAqIHNjb3BlLmNvdW50cmllcy5sZW5ndGgpO1xuXG5cdFx0XHRcdHZhciBjb250YWluZXIgPSBzdmcuYXBwZW5kKCdnJylcblx0XHRcdFx0XHQuYXR0cignaWQnLCAnY29tcGFyZS1jaGFydCcpXG5cdFx0XHRcdFx0LmF0dHIoJ3knLCBzY29wZS5vcHRpb25zLmhlaWdodClcblx0XHRcdFx0XHQuYXR0cigneCcsIHNjb3BlLm9wdGlvbnMubWFyZ2luKTtcblxuXHRcdFx0XHR2YXIgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG5cdFx0XHRcdFx0LnNjYWxlKHhzY2FsZSlcblx0XHRcdFx0XHQub3JpZW50KFwidG9wXCIpXG5cdFx0XHRcdFx0LnRpY2tWYWx1ZXMoW3Njb3BlLm9wdGlvbnMubWluLCBzY29wZS5vcHRpb25zLm1heF0pO1xuXG5cdFx0XHRcdHZhciBsaW5lcyA9IHN2Zy5hcHBlbmQoXCJnXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxuXHRcdFx0XHR2YXIgbnVsbExpbmUgPSBsaW5lcy5hcHBlbmQoXCJsaW5lXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcImRvbWFpblwiKVxuXHRcdFx0XHRcdC5hdHRyKFwieTJcIiwgc2NvcGUub3B0aW9ucy5oZWlnaHQgKiBzY29wZS5jb3VudHJpZXMubGVuZ3RoKVxuXG5cdFx0XHRcdHZhciBtaWRMaW5lID0gbGluZXMuYXBwZW5kKFwibGluZVwiKVxuXHRcdFx0XHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJkb21haW4gZGFzaGVkXCIpXG5cdFx0XHRcdFx0LmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKHhzY2FsZShzY29wZS5vcHRpb25zLm1heCAvIDIpKSArIFwiLDApXCI7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXR0cihcInkyXCIsIHNjb3BlLm9wdGlvbnMuaGVpZ2h0ICogc2NvcGUuY291bnRyaWVzLmxlbmd0aClcblxuXHRcdFx0XHR2YXIgZW5kTGluZSA9IGxpbmVzLmFwcGVuZChcImxpbmVcIilcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwiZG9tYWluXCIpXG5cdFx0XHRcdFx0LmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKHhzY2FsZShzY29wZS5vcHRpb25zLm1heCkpICsgXCIsMClcIjtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5hdHRyKFwieTJcIiwgc2NvcGUub3B0aW9ucy5oZWlnaHQgKiBzY29wZS5jb3VudHJpZXMubGVuZ3RoKTtcblx0XHRcdFx0dmFyIHJhbmtMYWJlbCA9IGxpbmVzLmFwcGVuZCgndGV4dCcpXG5cdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2hlYWRlcicpXG5cdFx0XHRcdFx0LnRleHQoJ1JhbmsnKVxuXHRcdFx0XHRcdC5hdHRyKCd0cmFuc2Zvcm0nLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBcInRyYW5zbGF0ZSgtODUsLTEwKVwiO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHZhciBtZWRpYW5MYWJlbCA9IGxpbmVzLmFwcGVuZCgndGV4dCcpXG5cdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2hlYWRlcicpXG5cdFx0XHRcdFx0LnRleHQoJ01lZGlhbicpXG5cdFx0XHRcdFx0LmF0dHIoJ3RyYW5zZm9ybScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFwidHJhbnNsYXRlKFwiICsgKHNjb3BlLm9wdGlvbnMud2lkdGggLyAyIC0gNzUpICsgXCIsLTEwKVwiO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHZhciBjaGFydCA9IGNvbnRhaW5lci5hcHBlbmQoJ2cnKVxuXHRcdFx0XHRcdC5hdHRyKCdpZCcsICdiYXJzJylcblx0XHRcdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgxMDAsMClcIik7XG5cdFx0XHRcdHZhciBsYWJlbHMgPSBjb250YWluZXIuYXBwZW5kKCdnJylcblx0XHRcdFx0XHQuYXR0cignaWQnLCAnbGFiZWxzJylcblx0XHRcdFx0XHQuYXR0cignd2lkdGgnLCBzY29wZS5vcHRpb25zLm1heCk7XG5cblx0XHRcdFx0ZnVuY3Rpb24gdXBkYXRlRGF0YSgpIHtcblx0XHRcdFx0XHQvL3ZhciBtYXggPSBkMy5tYXgoZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gK2QuZmllbGRfZ29hbF9hdHRlbXB0czt9ICk7XG5cdFx0XHRcdFx0c3ZnLnRyYW5zaXRpb24oKVxuXHRcdFx0XHRcdFx0LmR1cmF0aW9uKHNjb3BlLm9wdGlvbnMuZHVyYXRpb24pXG5cdFx0XHRcdFx0XHQuYXR0cignaGVpZ2h0JywgKHNjb3BlLm9wdGlvbnMuaGVpZ2h0ICogKHNjb3BlLmNvdW50cmllcy5sZW5ndGgpKSArIChzY29wZS5vcHRpb25zLmhlaWdodCAqIDIpKTtcblx0XHRcdFx0XHR5c2NhbGUuZG9tYWluKFswLCBzY29wZS5jb3VudHJpZXMubGVuZ3RoXSkucmFuZ2UoWzAsIHNjb3BlLm9wdGlvbnMuaGVpZ2h0ICogKHNjb3BlLmNvdW50cmllcy5sZW5ndGgpXSk7XG5cblxuXG5cdFx0XHRcdFx0ZDMudHJhbnNpdGlvbihzdmcpLnNlbGVjdChcIi54LmF4aXNcIilcblx0XHRcdFx0XHRcdC5jYWxsKHhBeGlzKVxuXHRcdFx0XHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMTAwLDIwKVwiKTtcblxuXHRcdFx0XHRcdHZhciBiYXIgPSBjaGFydC5zZWxlY3RBbGwoJy5iYXInKVxuXHRcdFx0XHRcdFx0LmRhdGEoc2NvcGUuY291bnRyaWVzLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBcImlkX1wiICsgZC5pc29cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0dmFyIGJhcnNDb250YWluZXIgPSBiYXIuZW50ZXIoKS5pbnNlcnQoJ2cnLCAnLmF4aXMnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgXCJiYXJcIik7XG5cblx0XHRcdFx0XHR2YXIgcmVjdHMgPSBiYXJzQ29udGFpbmVyLmFwcGVuZCgncmVjdCcpXG5cdFx0XHRcdFx0XHQuYXR0cignaGVpZ2h0JywgKHNjb3BlLm9wdGlvbnMuaGVpZ2h0IC0gc2NvcGUub3B0aW9ucy5tYXJnaW4pKVxuXHRcdFx0XHRcdFx0LnN0eWxlKCdmaWxsJywgYmdDb2xvcilcblx0XHRcdFx0XHRcdC5hdHRyKCd3aWR0aCcsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR2YXIgcmFua3MgPSBiYXJzQ29udGFpbmVyLmFwcGVuZCgndGV4dCcpXG5cdFx0XHRcdFx0XHQuYXR0cignY2xhc3MnLCAncmFua3MnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoLTcwLCAwKScpXG5cdFx0XHRcdFx0XHQudGV4dChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChkLnJhbmsgPT0gMSkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBcIjFzdFwiO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGQucmFuayA9PSAyKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFwiMm5kXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQucmFuayArIFwidGhcIjtcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQuYXR0cignZmlsbCcsIHNjb3BlLm9wdGlvbnMuY29sb3IpXG5cdFx0XHRcdFx0XHQuYXR0cigneScsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHNjb3BlLm9wdGlvbnMubWFyZ2luICogMztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0dmFyIGxhYmVsc0JnID0gYmFyc0NvbnRhaW5lci5hcHBlbmQoJ3JlY3QnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2hlaWdodCcsIChzY29wZS5vcHRpb25zLmhlaWdodCAtIHNjb3BlLm9wdGlvbnMubWFyZ2luKSlcblx0XHRcdFx0XHRcdC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGQuaXNvID09IHNjb3BlLmNvdW50cnkuaXNvKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHNjb3BlLm9wdGlvbnMuY29sb3Jcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYmdDb2xvclxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5hdHRyKCd3aWR0aCcsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHNjb3BlLm9wdGlvbnMuaGVpZ2h0O1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5hdHRyKCd4JywgLShzY29wZS5vcHRpb25zLmhlaWdodCArIHNjb3BlLm9wdGlvbnMubWFyZ2luKSk7XG5cblx0XHRcdFx0XHR2YXIgbGFiZWxzID0gYmFyc0NvbnRhaW5lci5hcHBlbmQoJ3RleHQnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgXCJsYWJlbFwiKVxuXHRcdFx0XHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRcdFx0XHQneCc6IGZ1bmN0aW9uKGQsIGkpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gLTE3O1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQneSc6IGZ1bmN0aW9uKGQsIGkpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gc2NvcGUub3B0aW9ucy5tYXJnaW4gKiAyO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnN0eWxlKCdmb250LXNpemUnLCAnMTNweCcpXG5cdFx0XHRcdFx0XHQuYXR0cignZHknLCBcIi4zNWVtXCIpXG5cdFx0XHRcdFx0XHQuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJylcblx0XHRcdFx0XHRcdC50ZXh0KGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQuaXNvXG5cdFx0XHRcdFx0XHR9KS5hdHRyKCdmaWxsJywgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRpZiAoZC5pc28gPT0gc2NvcGUuY291bnRyeS5pc28pIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gXCIjZmZmXCJcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gc2NvcGUub3B0aW9ucy5jb2xvclxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR2YXIgdmFsdWVzID0gYmFyc0NvbnRhaW5lci5hcHBlbmQoXCJ0ZXh0XCIpXG5cdFx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwidmFsdWVcIilcblx0XHRcdFx0XHRcdC5hdHRyKHtcblx0XHRcdFx0XHRcdFx0J3gnOiAwLFxuXHRcdFx0XHRcdFx0XHQneSc6IChzY29wZS5vcHRpb25zLm1hcmdpbiAqIDIpXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnRleHQoMClcblx0XHRcdFx0XHRcdC5zdHlsZSgnZmlsbCcsIHNjb3BlLm9wdGlvbnMuY29sb3IpXG5cdFx0XHRcdFx0XHQuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcblx0XHRcdFx0XHRcdC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJlbmRcIik7XG5cblx0XHRcdFx0XHR2YXIgY2lyY2xlcyA9IGJhcnNDb250YWluZXIuYXBwZW5kKCdjaXJjbGUnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3InLCAzKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2N4JywgMClcblx0XHRcdFx0XHRcdC5hdHRyKCdjeScsICgoc2NvcGUub3B0aW9ucy5oZWlnaHQgLyAyKSAtIChzY29wZS5vcHRpb25zLm1hcmdpbiAvIDIpKSlcblx0XHRcdFx0XHRcdC5hdHRyKFwiZmlsbFwiLCBzY29wZS5vcHRpb25zLmNvbG9yKTtcblxuXHRcdFx0XHRcdHZhciBiYXJVcGRhdGUgPSBkMy50cmFuc2l0aW9uKGJhcilcblx0XHRcdFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFwidHJhbnNsYXRlKDAsXCIgKyAoaSAqIHNjb3BlLm9wdGlvbnMuaGVpZ2h0ICsgKHNjb3BlLm9wdGlvbnMubWFyZ2luIC8gMikgKyAyMCkgKyBcIilcIjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG51bGxMaW5lLnRyYW5zaXRpb24oKVxuXHRcdFx0XHRcdFx0LmR1cmF0aW9uKHNjb3BlLm9wdGlvbnMuZHVyYXRpb24pXG5cdFx0XHRcdFx0XHQuYXR0cigneTInLCBzY29wZS5vcHRpb25zLmhlaWdodCAqIHNjb3BlLmNvdW50cmllcy5sZW5ndGgpXG5cdFx0XHRcdFx0bWlkTGluZS50cmFuc2l0aW9uKClcblx0XHRcdFx0XHRcdC5kdXJhdGlvbihzY29wZS5vcHRpb25zLmR1cmF0aW9uKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3kyJywgc2NvcGUub3B0aW9ucy5oZWlnaHQgKiBzY29wZS5jb3VudHJpZXMubGVuZ3RoKVxuXHRcdFx0XHRcdGVuZExpbmUudHJhbnNpdGlvbigpXG5cdFx0XHRcdFx0XHQuZHVyYXRpb24oc2NvcGUub3B0aW9ucy5kdXJhdGlvbilcblx0XHRcdFx0XHRcdC5hdHRyKCd5MicsIHNjb3BlLm9wdGlvbnMuaGVpZ2h0ICogc2NvcGUuY291bnRyaWVzLmxlbmd0aClcblx0XHRcdFx0XHRyZWN0cy50cmFuc2l0aW9uKClcblx0XHRcdFx0XHRcdC5kdXJhdGlvbihzY29wZS5vcHRpb25zLmR1cmF0aW9uKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3dpZHRoJywgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4geHNjYWxlKGRbc2NvcGUub3B0aW9ucy5maWVsZF0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRjaXJjbGVzLnRyYW5zaXRpb24oKVxuXHRcdFx0XHRcdFx0LmR1cmF0aW9uKHNjb3BlLm9wdGlvbnMuZHVyYXRpb24pXG5cdFx0XHRcdFx0XHQuYXR0cignY3gnLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB4c2NhbGUoZFtzY29wZS5vcHRpb25zLmZpZWxkXSk7XG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdHZhbHVlcy50cmFuc2l0aW9uKClcblx0XHRcdFx0XHRcdC5kdXJhdGlvbihzY29wZS5vcHRpb25zLmR1cmF0aW9uKVxuXHRcdFx0XHRcdFx0LmF0dHIoe1xuXHRcdFx0XHRcdFx0XHQneCc6IGZ1bmN0aW9uKGQsIGkpIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmIChkW3Njb3BlLm9wdGlvbnMuZmllbGRdID4gc2NvcGUub3B0aW9ucy5tYXggLyAyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4geHNjYWxlKGRbc2NvcGUub3B0aW9ucy5maWVsZF0pIC0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHhzY2FsZShkW3Njb3BlLm9wdGlvbnMuZmllbGRdKSArIHNjb3BlLm9wdGlvbnMuaGVpZ2h0O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnR3ZWVuKCd0ZXh0JywgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgaSA9IGQzLmludGVycG9sYXRlKHRoaXMudGV4dENvbnRlbnQsIHBhcnNlSW50KGRbc2NvcGUub3B0aW9ucy5maWVsZF0pKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKHQpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChpKHQpKTtcblx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRiYXIuZXhpdCgpXG5cdFx0XHRcdFx0XHQudHJhbnNpdGlvbigpXG5cdFx0XHRcdFx0XHQuZHVyYXRpb24oc2NvcGUub3B0aW9ucy5kdXJhdGlvbilcblx0XHRcdFx0XHRcdC5hdHRyKFwib3BhY2l0eVwiLCBcIjBcIilcblx0XHRcdFx0XHRcdC5yZW1vdmUoKTtcblx0XHRcdFx0fVxuXG5cblxuXG5cdFx0XHRcdHNjb3BlLiR3YXRjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc2NvcGUuY291bnRyaWVzO1xuXHRcdFx0XHR9LCBmdW5jdGlvbihuLCBvKSB7XG5cdFx0XHRcdFx0c2NvcGUuY291bnRyaWVzID0gYW5ndWxhci5leHRlbmQoc2NvcGUuY291bnRyaWVzLCBzY29wZS5jb3VudHJ5KTtcblx0XHRcdFx0XHR1cGRhdGVEYXRhKCk7XG5cdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHZhciBjb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoJ21kLXNpZGVuYXYnKS5maW5kKCdzZWN0aW9uJyk7XG5cdFx0XHRcdFx0XHR2YXIgbWFwID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpKTtcblxuXHRcdFx0XHRcdFx0aWYgKHNjb3BlLmNvdW50cmllcy5sZW5ndGggICYmIHdpbmRvdy5pbm5lcldpZHRoIDwgOTYwKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBoID0gY29udGFpbmVyWzBdLmNsaWVudEhlaWdodDtcblxuXHRcdFx0XHRcdFx0XHRpZihoIDwgd2luZG93LmlubmVySGVpZ2h0IC0gMTk0KXtcblx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuYXR0cignc3R5bGUnLCAndHJhbnNmb3JtOnRyYW5zbGF0ZVkoY2FsYygxMDB2aCAtICcgKyAocGFyc2VJbnQoc2NvcGUuY291bnRyaWVzLmxlbmd0aCAqIDI0KSkgKyAncHggLSAyNjBweCkpJylcblx0XHRcdFx0XHRcdFx0XHQvLyBtYXAuYXR0cignc3R5bGUnLCAnaGVpZ2h0OmNhbGMoMTAwdmggLSAnKyhwYXJzZUludChzY29wZS5jb3VudHJpZXMubGVuZ3RoICogMjQpKSsncHggKyAyNjBweCknKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5hdHRyKCdzdHlsZScsICd0cmFuc2Zvcm06dHJhbnNsYXRlWShjYWxjKDEwMHZoIC0gJyArIChwYXJzZUludCh3aW5kb3cuaW5uZXJIZWlnaHQgLSAyMDApKSArICdweCAtIDQwcHgpKScpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5hdHRyKCdzdHlsZScsICcnKTtcblx0XHRcdFx0XHRcdFx0Ly8gbWFwLmF0dHIoJ3N0eWxlJywgJycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0sIHRydWUpXG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnQ29tcG9zaXRzQ3RybCcsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdjb21wb3NpdHMnLCBmdW5jdGlvbigpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9jb21wb3NpdHMvY29tcG9zaXRzLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0NvbXBvc2l0c0N0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6e30sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB7XG5cdFx0XHRcdGl0ZW1zOiAnPScsXG5cdFx0XHRcdGl0ZW06ICc9Jyxcblx0XHRcdFx0b3B0aW9uczonPSdcblx0XHRcdH0sXG5cdFx0XHRyZXBsYWNlOnRydWUsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiggc2NvcGUsIGVsZW1lbnQsIGF0dHJzICl7XG5cdFx0XHRcdC8vXG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnQ29uZmxpY3RpdGVtc0N0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnY29uZmxpY3RpdGVtcycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2NvbmZsaWN0aXRlbXMvY29uZmxpY3RpdGVtcy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdDb25mbGljdGl0ZW1zQ3RybCcsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiggc2NvcGUsIGVsZW1lbnQsIGF0dHJzICl7XG5cdFx0XHRcdC8vXG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnQ29udGVudGVkaXRhYmxlQ3RybCcsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnY29udGVudGVkaXRhYmxlJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnQScsXG5cdFx0XHRyZXF1aXJlOiAnP25nTW9kZWwnLFxuXHRcdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuXG5cdFx0XHRcdC8vaWYgKCFuZ01vZGVsKSByZXR1cm47XG5cdFx0XHRcdG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRlbGVtZW50Lmh0bWwobmdNb2RlbC4kdmlld1ZhbHVlIHx8ICcnKTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gZm9yIGNoYW5nZSBldmVudHMgdG8gZW5hYmxlIGJpbmRpbmdcblx0XHRcdFx0ZWxlbWVudC5vbignYmx1ciBrZXl1cCBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0c2NvcGUuJGFwcGx5KHJlYWRWaWV3VGV4dCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBpbml0aWFsaXplLCBBbmd1bGFySlMgd2lsbCBpbml0aWFsaXplIHRoZSB0ZXh0IGJhc2VkIG9uIG5nLW1vZGVsIGF0dHJpYnV0ZVxuXG5cdFx0XHRcdC8vIFdyaXRlIGRhdGEgdG8gdGhlIG1vZGVsXG5cdFx0XHRcdGZ1bmN0aW9uIHJlYWRWaWV3VGV4dCgpIHtcblx0XHRcdFx0XHR2YXIgaHRtbCA9IGVsZW1lbnQuaHRtbCgpO1xuXHRcdFx0XHRcdC8vIFdoZW4gd2UgY2xlYXIgdGhlIGNvbnRlbnQgZWRpdGFibGUgdGhlIGJyb3dzZXIgbGVhdmVzIGEgPGJyPiBiZWhpbmRcblx0XHRcdFx0XHQvLyBJZiBzdHJpcC1iciBhdHRyaWJ1dGUgaXMgcHJvdmlkZWQgdGhlbiB3ZSBzdHJpcCB0aGlzIG91dFxuXHRcdFx0XHRcdGlmIChhdHRycy5zdHJpcEJyICYmIGh0bWwgPT0gJzxicj4nKSB7XG5cdFx0XHRcdFx0XHRodG1sID0gJyc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG5nTW9kZWwuJHNldFZpZXdWYWx1ZShodG1sKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnZXhwb3J0JywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvZXhwb3J0L2V4cG9ydC5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdFeHBvcnREaXJlY3RpdmVDdHJsJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdHNjb3BlOntcblx0XHRcdFx0aXRlbTogJz0nLFxuXHRcdFx0XHRvcHRpb25zOiAnPScsXG5cdFx0XHRcdHNlbGVjdGVkOiAnPSdcblx0XHRcdH0sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuXHRcdFx0cmVwbGFjZTp0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdFeHBvcnREaXJlY3RpdmVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBEYXRhU2VydmljZSxEaWFsb2dTZXJ2aWNlICkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5vcmlnaW5hbCA9IGFuZ3VsYXIuY29weSh2bS5pdGVtKTtcblx0XHR2bS5jaGVja0Jhc2UgPSBjaGVja0Jhc2U7XG5cdFx0dm0uY2hlY2tGdWxsID0gY2hlY2tGdWxsO1xuXHRcdHZtLmdldENvZGUgPSBnZXRDb2RlO1xuXG5cdFx0dm0uYmFzZU9wdGlvbnMgPSB7XG5cdFx0XHRkcmFnOiB0cnVlLFxuXHRcdFx0YWxsb3dEcm9wOiB0cnVlLFxuXHRcdFx0YWxsb3dEcmFnOiB0cnVlLFxuXHRcdFx0YWxsb3dNb3ZlOiB0cnVlLFxuXHRcdFx0YWxsb3dTYXZlOiB0cnVlLFxuXHRcdFx0YWxsb3dEZWxldGU6IHRydWUsXG5cdFx0XHRhbGxvd0FkZENvbnRhaW5lcjogdHJ1ZSxcblx0XHRcdGFsbG93QWRkOiB0cnVlLFxuXHRcdFx0ZWRpdGFibGU6IHRydWUsXG5cdFx0XHRhc3NpZ21lbnRzOiBmYWxzZSxcblx0XHRcdHNhdmVDbGljazogdm0ub3B0aW9ucy5leHBvcnRzLnNhdmUsXG5cdFx0XHRhZGRDbGljazogdm0ub3B0aW9ucy5leHBvcnRzLmFkZENsaWNrLFxuXHRcdFx0YWRkQ29udGFpbmVyQ2xpY2s6IHZtLm9wdGlvbnMuZXhwb3J0cy5hZGRDb250YWluZXJDbGljayxcblx0XHRcdGRlbGV0ZURyb3A6IHZtLm9wdGlvbnMuZXhwb3J0cy5kZWxldGVEcm9wLFxuXHRcdFx0ZGVsZXRlQ2xpY2s6IHZtLm9wdGlvbnMuZXhwb3J0cy5kZWxldGVDbGljayxcblx0XHRcdG9uRHJvcDogdm0ub3B0aW9ucy5leHBvcnRzLm9uRHJvcCxcblx0XHRcdGluc2VydGVkOiB2bS5vcHRpb25zLmV4cG9ydHMuaW5zZXJ0ZWQsXG5cdFx0XHRzdHlsZWFibGU6IHZtLm9wdGlvbnMuc3R5bGVhYmxlLFxuXHRcdFx0c3R5bGVDbGljazogdm0ub3B0aW9ucy5zdHlsZS5jbGljayxcblx0XHRcdGhpZGVFeHBhbnNpb25Pbkl0ZW06dHJ1ZSxcblx0XHRcdGV4cGFuZEp1c3RHcm91cHM6IHZtLm9wdGlvbnMuZXhwYW5kSnVzdEdyb3Vwc1xuXHRcdH07XG5cdFx0YWN0aXZhdGUoKTtcblxuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHQvL2xvYWRBbGwoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja0Jhc2UoKSB7XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja0Z1bGwoKSB7XG5cblx0XHR9XG5cdFx0ZnVuY3Rpb24gZ2V0Q29kZSgpe1xuXHRcdFx0IERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdlbWJlZGNvZGUnLCAkc2NvcGUpO1xuXHRcdH1cblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCdleHBvcnRDaG9vc2VyJywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvZXhwb3J0Q2hvb3Nlci9leHBvcnRDaG9vc2VyLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0V4cG9ydENob29zZXJDdHJsJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdGNvdW50cmllczogJz0nLFxuXHRcdFx0XHRuYXRpb246ICc9Jyxcblx0XHRcdFx0c2VsZWN0ZWQ6ICc9PycsXG5cdFx0XHRcdGNoYXB0ZXJzOiAnPT8nLFxuXHRcdFx0XHRjaGFuZ2VkOiAnJicsXG5cdFx0XHRcdGluZGljYXRvckNoYW5nZTogJyY/J1xuXHRcdFx0fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRcdC8vXG5cdFx0XG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0V4cG9ydENob29zZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5pbmRleCA9IDA7XG5cdFx0dm0uYWN0aXZlTGlzdCA9IFtdO1xuXHRcblxuXG5cdFx0JHRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAodm0uY2hhcHRlcnMpIHtcblx0XHRcdFx0aWYgKHZtLnNlbGVjdGVkLnBhcmVudF9pZCkge1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5jaGFwdGVycywgZnVuY3Rpb24oY2hhcHRlcikge1xuXHRcdFx0XHRcdFx0aWYgKGNoYXB0ZXIuaWQgPT0gdm0uc2VsZWN0ZWQucGFyZW50X2lkKSB7XG5cdFx0XHRcdFx0XHRcdHZtLmFjdGl2ZUxpc3QgPSBjaGFwdGVyLmNoaWxkcmVuO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZtLmFjdGl2ZUxpc3QgPSB2bS5jaGFwdGVycztcblx0XHRcdFx0fVxuXHRcdFx0XHR2bS5pbmRleCA9IHZtLmFjdGl2ZUxpc3QuaW5kZXhPZih2bS5zZWxlY3RlZCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5pbmRleCcsIGZ1bmN0aW9uKG4sIG8pIHtcblx0XHRcdGlmIChuID09PSBvKSByZXR1cm4gZmFsc2U7XG5cdFx0XHQvLyBpZih2bS5hY3RpdmVMaXN0W3ZtLmluZGV4XSAhPSBcInVuZGVmaW5lZFwiKVxuXHRcdFx0dm0uc2VsZWN0ZWQgPSB2bS5hY3RpdmVMaXN0W3ZtLmluZGV4XTtcblx0XHR9KVxuXHR9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ2ZpbGVEcm9wem9uZScsIGZ1bmN0aW9uICh0b2FzdHIpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHNjb3BlOiB7XG4gICAgICAgIGZpbGU6ICc9JyxcbiAgICAgICAgZmlsZU5hbWU6ICc9J1xuICAgICAgfSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblx0XHRcdFx0dmFyIGNoZWNrU2l6ZSwgaXNUeXBlVmFsaWQsIHByb2Nlc3NEcmFnT3Zlck9yRW50ZXIsIHZhbGlkTWltZVR5cGVzO1xuXHRcdFx0XHRwcm9jZXNzRHJhZ092ZXJPckVudGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdFx0aWYgKGV2ZW50ICE9IG51bGwpIHtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGV2ZW50LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ2NvcHknO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdFx0dmFsaWRNaW1lVHlwZXMgPSBhdHRycy5maWxlRHJvcHpvbmU7XG5cdFx0XHRcdGNoZWNrU2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG5cdFx0XHRcdFx0dmFyIF9yZWY7XG5cdFx0XHRcdFx0aWYgKCgoX3JlZiA9IGF0dHJzLm1heEZpbGVTaXplKSA9PT0gKHZvaWQgMCkgfHwgX3JlZiA9PT0gJycpIHx8IChzaXplIC8gMTAyNCkgLyAxMDI0IDwgYXR0cnMubWF4RmlsZVNpemUpIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRhbGVydChcIkZpbGUgbXVzdCBiZSBzbWFsbGVyIHRoYW4gXCIgKyBhdHRycy5tYXhGaWxlU2l6ZSArIFwiIE1CXCIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0aXNUeXBlVmFsaWQgPSBmdW5jdGlvbiAodHlwZSkge1xuXHRcdFx0XHRcdGlmICgodmFsaWRNaW1lVHlwZXMgPT09ICh2b2lkIDApIHx8IHZhbGlkTWltZVR5cGVzID09PSAnJykgfHwgdmFsaWRNaW1lVHlwZXMuaW5kZXhPZih0eXBlKSA+IC0xKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dG9hc3RyLmVycm9yKFwiRmlsZSBtdXN0IGJlIG9uZSBvZiBmb2xsb3dpbmcgdHlwZXMgXCIgKyB2YWxpZE1pbWVUeXBlcywgJ0ludmFsaWQgZmlsZSB0eXBlIScpO1xuXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdvdmVyJywgcHJvY2Vzc0RyYWdPdmVyT3JFbnRlcik7XG5cdFx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ2VudGVyJywgcHJvY2Vzc0RyYWdPdmVyT3JFbnRlcik7XG5cdFx0XHRcdHJldHVybiBlbGVtZW50LmJpbmQoJ2Ryb3AnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdFx0XHR2YXIgZmlsZSwgbmFtZSwgcmVhZGVyLCBzaXplLCB0eXBlO1xuXHRcdFx0XHRcdGlmIChldmVudCAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXHRcdFx0XHRcdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZ0KSB7XG5cdFx0XHRcdFx0XHRpZiAoY2hlY2tTaXplKHNpemUpICYmIGlzVHlwZVZhbGlkKHR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0XHRcdHNjb3BlLmZpbGUgPSBldnQudGFyZ2V0LnJlc3VsdDtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYW5ndWxhci5pc1N0cmluZyhzY29wZS5maWxlTmFtZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBzY29wZS5maWxlTmFtZSA9IG5hbWU7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGZpbGUgPSBldmVudC5kYXRhVHJhbnNmZXIuZmlsZXNbMF07XG5cdFx0XHRcdFx0LypuYW1lID0gZmlsZS5uYW1lO1xuXHRcdFx0XHRcdHR5cGUgPSBmaWxlLnR5cGU7XG5cdFx0XHRcdFx0c2l6ZSA9IGZpbGUuc2l6ZTtcblx0XHRcdFx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsqL1xuXHRcdFx0XHRcdHNjb3BlLmZpbGUgPSBmaWxlO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ0ZpbGVEcm9wem9uZUN0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCdwcmV2aWV3Q2FudmFzJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vcmVxdWlyZTogJz9yZXNpemFibGVDYW52YXMnLFxuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCByZXNpemFibGVDYW52YXNDdHJsKSB7XG4gICAgICAgIHZhciBjYW52YXNEb20sIGN0eCwgZGVwZW5kZW50RGF0YUNoYW5nZSwgZ2V0RGVwZW5kZW50RGF0YSwganNDb2RlUHJlY2lzaW9uO1xuICAgICAgICBjYW52YXNEb20gPSBlbGVtWzBdO1xuICAgICAgICBjdHggPSBjYW52YXNEb20uZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAganNDb2RlUHJlY2lzaW9uID0gMztcbiAgICAgICAgLypcbiAgICAgICAgICAgICAgQHJldHVybiB7T2JqZWN0fSBEYXRhIG9uIHdoaWNoIHRoZSBjYW52YXMgcmVuZGVyaW5nIGRlcGVuZHMuXG4gICAgICAgICovXG5cbiAgICAgICAgZ2V0RGVwZW5kZW50RGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBDb2xvckhhbmRsZXM6IHNjb3BlLiRldmFsKGF0dHJzLmNvbG9ySGFuZGxlcyksXG4gICAgICAgICAgICBncmFkaWVudFR5cGU6IHNjb3BlLiRldmFsKGF0dHJzLmdyYWRpZW50VHlwZSksXG4gICAgICAgICAgICB3aWR0aDogZWxlbS5wcm9wKCd3aWR0aCcpLFxuICAgICAgICAgICAgaGVpZ2h0OiBlbGVtLnByb3AoJ2hlaWdodCcpLFxuICAgICAgICAgICAgcm90YXRlRGVncmVlczogc2NvcGUuJGV2YWwoYXR0cnMucm90YXRlKSxcbiAgICAgICAgICAgIGlubmVyQ2lyY2xlWDogc2NvcGUuJGV2YWwoYXR0cnMuaW5uZXJDaXJjbGVYKSxcbiAgICAgICAgICAgIGlubmVyQ2lyY2xlWTogc2NvcGUuJGV2YWwoYXR0cnMuaW5uZXJDaXJjbGVZKSxcbiAgICAgICAgICAgIG91dGVyQ2lyY2xlWDogc2NvcGUuJGV2YWwoYXR0cnMub3V0ZXJDaXJjbGVYKSxcbiAgICAgICAgICAgIG91dGVyQ2lyY2xlWTogc2NvcGUuJGV2YWwoYXR0cnMub3V0ZXJDaXJjbGVZKVxuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIC8qXG4gICAgICAgICAgICAgIEBwYXJhbSB7T2JqZWN0fSBkZXBlbmRlbnREYXRhIFJlc3VsdCBvZiB7QGxpbmsgZ2V0RGVwZW5kZW50RGF0YSgpfS5cbiAgICAgICAgKi9cblxuICAgICAgICBkZXBlbmRlbnREYXRhQ2hhbmdlID0gZnVuY3Rpb24oZGVwZW5kZW50RGF0YSkge1xuICAgICAgICAgIHZhciBDb2xvckhhbmRsZSwgQ29sb3JIYW5kbGVzLCBhLCBiLCBnLCBncmFkaWVudFR5cGUsIGdyZCwgaGVpZ2h0LCBpbm5lckNpcmNsZVgsIGlubmVyQ2lyY2xlWSwgbWF0Y2hlcywgb3V0ZXJDaXJjbGVYLCBvdXRlckNpcmNsZVksIHIsIHIxLCByMUZpeGVkLCByMiwgcjJGaXhlZCwgcmVnRXgsIHJvdGF0ZURlZ3JlZXMsIHNjYWxlWCwgc2NhbGVZLCB3aWR0aCwgeDEsIHgxRml4ZWQsIHgyLCB4MkZpeGVkLCB5MSwgeTFGaXhlZCwgeTIsIHkyRml4ZWQsIF9pLCBfbGVuLCBfcmVmLCBfcmVmMSwgX3JlZjIsIF9yZWYzLCBfcmVmNDtcbiAgICAgICAgICBDb2xvckhhbmRsZXMgPSBkZXBlbmRlbnREYXRhLkNvbG9ySGFuZGxlcztcbiAgICAgICAgICBncmFkaWVudFR5cGUgPSBkZXBlbmRlbnREYXRhLmdyYWRpZW50VHlwZTtcbiAgICAgICAgICB3aWR0aCA9IGRlcGVuZGVudERhdGEud2lkdGg7XG4gICAgICAgICAgaGVpZ2h0ID0gZGVwZW5kZW50RGF0YS5oZWlnaHQ7XG4gICAgICAgICAgcm90YXRlRGVncmVlcyA9IChfcmVmID0gZGVwZW5kZW50RGF0YS5yb3RhdGVEZWdyZWVzKSAhPSBudWxsID8gX3JlZiA6IDA7XG4gICAgICAgICAgaW5uZXJDaXJjbGVYID0gKF9yZWYxID0gZGVwZW5kZW50RGF0YS5pbm5lckNpcmNsZVgpICE9IG51bGwgPyBfcmVmMSA6IDUwO1xuICAgICAgICAgIGlubmVyQ2lyY2xlWSA9IChfcmVmMiA9IGRlcGVuZGVudERhdGEuaW5uZXJDaXJjbGVZKSAhPSBudWxsID8gX3JlZjIgOiA1MDtcbiAgICAgICAgICBvdXRlckNpcmNsZVggPSAoX3JlZjMgPSBkZXBlbmRlbnREYXRhLm91dGVyQ2lyY2xlWCkgIT0gbnVsbCA/IF9yZWYzIDogNTA7XG4gICAgICAgICAgb3V0ZXJDaXJjbGVZID0gKF9yZWY0ID0gZGVwZW5kZW50RGF0YS5vdXRlckNpcmNsZVkpICE9IG51bGwgPyBfcmVmNCA6IDUwO1xuICAgICAgICAgIGlmIChhdHRycy5odG1sQ29kZSkge1xuICAgICAgICAgICAgc2NvcGVbYXR0cnMuaHRtbENvZGVdID0gXCI8Y2FudmFzIGlkPVxcXCJteVByZXR0eUNhbnZhc1xcXCIgd2lkdGg9XFxcIlwiICsgd2lkdGggKyBcIlxcXCIgaGVpZ2h0PVxcXCJcIiArIGhlaWdodCArIFwiXFxcIj48L2NhbnZhcz5cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGF0dHJzLmpzQ29kZSkge1xuICAgICAgICAgICAgc2NvcGVbYXR0cnMuanNDb2RlXSA9IFwidmFyIGNhbnZhc0lkID0gJ215UHJldHR5Q2FudmFzJyxcXG4gICAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2FudmFzSWQpLFxcbiAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcXG4gICAgZ3JkO1xcblxcblwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzY2FsZVggPSAxO1xuICAgICAgICAgIHNjYWxlWSA9IDE7XG4gICAgICAgICAgc3dpdGNoIChncmFkaWVudFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2xpbmVhcic6XG4gICAgICAgICAgICAgIGlmICgoMCA8PSByb3RhdGVEZWdyZWVzICYmIHJvdGF0ZURlZ3JlZXMgPCA0NSkpIHtcbiAgICAgICAgICAgICAgICB4MSA9IDA7XG4gICAgICAgICAgICAgICAgeTEgPSBoZWlnaHQgLyAyICogKDQ1IC0gcm90YXRlRGVncmVlcykgLyA0NTtcbiAgICAgICAgICAgICAgICB4MiA9IHdpZHRoO1xuICAgICAgICAgICAgICAgIHkyID0gaGVpZ2h0IC0geTE7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoKDQ1IDw9IHJvdGF0ZURlZ3JlZXMgJiYgcm90YXRlRGVncmVlcyA8IDEzNSkpIHtcbiAgICAgICAgICAgICAgICB4MSA9IHdpZHRoICogKHJvdGF0ZURlZ3JlZXMgLSA0NSkgLyAoMTM1IC0gNDUpO1xuICAgICAgICAgICAgICAgIHkxID0gMDtcbiAgICAgICAgICAgICAgICB4MiA9IHdpZHRoIC0geDE7XG4gICAgICAgICAgICAgICAgeTIgPSBoZWlnaHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoKDEzNSA8PSByb3RhdGVEZWdyZWVzICYmIHJvdGF0ZURlZ3JlZXMgPCAyMjUpKSB7XG4gICAgICAgICAgICAgICAgeDEgPSB3aWR0aDtcbiAgICAgICAgICAgICAgICB5MSA9IGhlaWdodCAqIChyb3RhdGVEZWdyZWVzIC0gMTM1KSAvICgyMjUgLSAxMzUpO1xuICAgICAgICAgICAgICAgIHgyID0gMDtcbiAgICAgICAgICAgICAgICB5MiA9IGhlaWdodCAtIHkxO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCgyMjUgPD0gcm90YXRlRGVncmVlcyAmJiByb3RhdGVEZWdyZWVzIDwgMzE1KSkge1xuICAgICAgICAgICAgICAgIHgxID0gd2lkdGggKiAoMSAtIChyb3RhdGVEZWdyZWVzIC0gMjI1KSAvICgzMTUgLSAyMjUpKTtcbiAgICAgICAgICAgICAgICB5MSA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICB4MiA9IHdpZHRoIC0geDE7XG4gICAgICAgICAgICAgICAgeTIgPSAwO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKDMxNSA8PSByb3RhdGVEZWdyZWVzKSB7XG4gICAgICAgICAgICAgICAgeDEgPSAwO1xuICAgICAgICAgICAgICAgIHkxID0gaGVpZ2h0IC0gaGVpZ2h0IC8gMiAqIChyb3RhdGVEZWdyZWVzIC0gMzE1KSAvICgzNjAgLSAzMTUpO1xuICAgICAgICAgICAgICAgIHgyID0gd2lkdGg7XG4gICAgICAgICAgICAgICAgeTIgPSBoZWlnaHQgLSB5MTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBncmQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICAgICAgICBpZiAoYXR0cnMuanNDb2RlKSB7XG4gICAgICAgICAgICAgICAgeDFGaXhlZCA9IHgxLnRvRml4ZWQoanNDb2RlUHJlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICB5MUZpeGVkID0geTEudG9GaXhlZChqc0NvZGVQcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIHgyRml4ZWQgPSB4Mi50b0ZpeGVkKGpzQ29kZVByZWNpc2lvbik7XG4gICAgICAgICAgICAgICAgeTJGaXhlZCA9IHkyLnRvRml4ZWQoanNDb2RlUHJlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICBzY29wZVthdHRycy5qc0NvZGVdICs9IFwiLy8gQ3JlYXRlIGdyYWRpZW50XFxuZ3JkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KFwiICsgeDFGaXhlZCArIFwiLCBcIiArIHkxRml4ZWQgKyBcIiwgXCIgKyB4MkZpeGVkICsgXCIsIFwiICsgeTJGaXhlZCArIFwiKTtcXG5cXG5cIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3JhZGlhbCc6XG4gICAgICAgICAgICAgIGlmICh3aWR0aCA+IGhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNjYWxlWSA9IGhlaWdodCAvIHdpZHRoO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChoZWlnaHQgPiB3aWR0aCkge1xuICAgICAgICAgICAgICAgIHNjYWxlWCA9IHdpZHRoIC8gaGVpZ2h0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGN0eC5zZXRUcmFuc2Zvcm0oc2NhbGVYLCAwLCAwLCBzY2FsZVksIDAsIDApO1xuICAgICAgICAgICAgICBncmQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoeDEgPSAod2lkdGggKiBpbm5lckNpcmNsZVggLyAxMDApIC8gc2NhbGVYLCB5MSA9IChoZWlnaHQgKiBpbm5lckNpcmNsZVkgLyAxMDApIC8gc2NhbGVZLCByMSA9IDAsIHgyID0gKHdpZHRoICogb3V0ZXJDaXJjbGVYIC8gMTAwKSAvIHNjYWxlWCwgeTIgPSAoaGVpZ2h0ICogb3V0ZXJDaXJjbGVZIC8gMTAwKSAvIHNjYWxlWSwgcjIgPSAod2lkdGggLyAyKSAvIHNjYWxlWCk7XG4gICAgICAgICAgICAgIGlmIChhdHRycy5qc0NvZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NhbGVYICE9PSAxIHx8IHNjYWxlWSAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgc2NvcGVbYXR0cnMuanNDb2RlXSArPSBcIi8vIFRyYW5zZm9ybSB0byBmYWNpbGl0YXRlIGVsbGlwc2VcXG5jdHguc2V0VHJhbnNmb3JtKFwiICsgc2NhbGVYICsgXCIsIDAsIDAsIFwiICsgc2NhbGVZICsgXCIsIDAsIDApO1xcblxcblwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4MUZpeGVkID0geDEudG9GaXhlZChqc0NvZGVQcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIHkxRml4ZWQgPSB5MS50b0ZpeGVkKGpzQ29kZVByZWNpc2lvbik7XG4gICAgICAgICAgICAgICAgcjFGaXhlZCA9IHIxLnRvRml4ZWQoanNDb2RlUHJlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICB4MkZpeGVkID0geDIudG9GaXhlZChqc0NvZGVQcmVjaXNpb24pO1xuICAgICAgICAgICAgICAgIHkyRml4ZWQgPSB5Mi50b0ZpeGVkKGpzQ29kZVByZWNpc2lvbik7XG4gICAgICAgICAgICAgICAgcjJGaXhlZCA9IHIyLnRvRml4ZWQoanNDb2RlUHJlY2lzaW9uKTtcbiAgICAgICAgICAgICAgICBzY29wZVthdHRycy5qc0NvZGVdICs9IFwiLy8gQ3JlYXRlIGdyYWRpZW50XFxuZ3JkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KFwiICsgeDFGaXhlZCArIFwiLCBcIiArIHkxRml4ZWQgKyBcIiwgXCIgKyByMUZpeGVkICsgXCIsIFwiICsgeDJGaXhlZCArIFwiLCBcIiArIHkyRml4ZWQgKyBcIiwgXCIgKyByMkZpeGVkICsgXCIpO1xcblxcblwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgdGhyb3cgJ1Vua25vd24gZ3JhZGllbnQgdHlwZS4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYXR0cnMuanNDb2RlKSB7XG4gICAgICAgICAgICBzY29wZVthdHRycy5qc0NvZGVdICs9ICcvLyBBZGQgY29sb3JzXFxuJztcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChfaSA9IDAsIF9sZW4gPSBDb2xvckhhbmRsZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgIENvbG9ySGFuZGxlID0gQ29sb3JIYW5kbGVzW19pXTtcbiAgICAgICAgICAgIGlmICghQ29sb3JIYW5kbGUuY29sb3IpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKENvbG9ySGFuZGxlLnN0b3AsIENvbG9ySGFuZGxlLmNvbG9yKTtcbiAgICAgICAgICAgIGlmIChhdHRycy5qc0NvZGUpIHtcbiAgICAgICAgICAgICAgcmVnRXggPSAvKFtcXGQuXSspLFxccyooW1xcZC5dKyksXFxzKihbXFxkLl0rKSxcXHMqKFtcXGQuXSspLztcbiAgICAgICAgICAgICAgbWF0Y2hlcyA9IHJlZ0V4LmV4ZWMoQ29sb3JIYW5kbGUuY29sb3IpO1xuICAgICAgICAgICAgICByID0gbWF0Y2hlc1sxXTtcbiAgICAgICAgICAgICAgZyA9IG1hdGNoZXNbMl07XG4gICAgICAgICAgICAgIGIgPSBtYXRjaGVzWzNdO1xuICAgICAgICAgICAgICBhID0gcGFyc2VGbG9hdChtYXRjaGVzWzRdKS50b0ZpeGVkKGpzQ29kZVByZWNpc2lvbik7XG4gICAgICAgICAgICAgIHNjb3BlW2F0dHJzLmpzQ29kZV0gKz0gXCJncmQuYWRkQ29sb3JTdG9wKFwiICsgKENvbG9ySGFuZGxlLnN0b3AudG9GaXhlZChqc0NvZGVQcmVjaXNpb24pKSArIFwiLCAncmdiYShcIiArIHIgKyBcIiwgXCIgKyBnICsgXCIsIFwiICsgYiArIFwiLCBcIiArIGEgKyBcIiknKTtcXG5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGF0dHJzLmpzQ29kZSkge1xuICAgICAgICAgICAgc2NvcGVbYXR0cnMuanNDb2RlXSArPSAnXFxuJztcbiAgICAgICAgICB9XG4gICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCAvIHNjYWxlWCwgaGVpZ2h0IC8gc2NhbGVZKTtcbiAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JkO1xuICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCAvIHNjYWxlWCwgaGVpZ2h0IC8gc2NhbGVZKTtcbiAgICAgICAgICBpZiAoYXR0cnMuanNDb2RlKSB7XG4gICAgICAgICAgICBzY29wZVthdHRycy5qc0NvZGVdICs9IFwiLy8gRmlsbCB3aXRoIGdyYWRpZW50XFxuY3R4LmZpbGxTdHlsZSA9IGdyZDtcXG5jdHguZmlsbFJlY3QoMCwgMCwgXCIgKyAoKHdpZHRoIC8gc2NhbGVYKS50b0ZpeGVkKGpzQ29kZVByZWNpc2lvbikpICsgXCIsIFwiICsgKChoZWlnaHQgLyBzY2FsZVkpLnRvRml4ZWQoanNDb2RlUHJlY2lzaW9uKSkgKyBcIik7XCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGlmIChyZXNpemFibGVDYW52YXNDdHJsICE9IG51bGwpIHtcbiAgICAgICAgICAvLyAgIHJldHVybiByZXNpemFibGVDYW52YXNDdHJsLmRyYXdSZXNpemVJY29uKCk7XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc2NvcGUuJHdhdGNoKGdldERlcGVuZGVudERhdGEsIGRlcGVuZGVudERhdGFDaGFuZ2UsIHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdHcmFkaWVudENyZWF0b3JDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnZ3JhZGllbnRDbGlja0FyZWEnLCBmdW5jdGlvbigkZG9jdW1lbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGU6ICc8c3BhbiBjbGFzcz1cImFkZEhhbmRsZUljb24gaWNvbmljIGJydXNoXCI+PC9zcGFuPicsXG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSkge1xuICAgICAgICB2YXIgYWRkSGFuZGxlSWNvbiwgbW91c2VJc0Rvd247XG4gICAgICAgIGFkZEhhbmRsZUljb24gPSBlbGVtLmZpbmQoJ3NwYW4nKS5oaWRlKCk7XG4gICAgICAgIG1vdXNlSXNEb3duID0gZmFsc2U7XG4gICAgICAgICRkb2N1bWVudC5tb3VzZWRvd24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIG1vdXNlSXNEb3duID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgICRkb2N1bWVudC5tb3VzZXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBtb3VzZUlzRG93biA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbS5tb3VzZW92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCFtb3VzZUlzRG93bikge1xuICAgICAgICAgICAgcmV0dXJuIGFkZEhhbmRsZUljb24uc2hvdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGVsZW0ubW91c2VvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFkZEhhbmRsZUljb24uaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgZWxlbS5tb3VzZW1vdmUoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gYWRkSGFuZGxlSWNvbi5jc3Moe1xuICAgICAgICAgICAgbGVmdDogZXZlbnQub2Zmc2V0WCxcbiAgICAgICAgICAgIHRvcDogZXZlbnQub2Zmc2V0WSAtIDVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBlbGVtLm1vdXNlZG93bihmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciBsZWZ0Q2xpY2tlZDtcbiAgICAgICAgICBsZWZ0Q2xpY2tlZCA9IGV2ZW50LndoaWNoID09PSAxO1xuICAgICAgICAgIGlmIChsZWZ0Q2xpY2tlZCkge1xuICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuYWRkQ29sb3JIYW5kbGUoKGV2ZW50LnBhZ2VYIC0gZWxlbS5vZmZzZXQoKS5sZWZ0KSAvIGVsZW0ud2lkdGgoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhZGRIYW5kbGVJY29uLmhpZGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdHcmFkaWVudENyZWF0b3JDbGlja0FyZWFDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSggJ2hpc3RvcnknLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZmllbGQ6ICdzY29yZScsXG5cdFx0XHRcdGNvbG9yOiAnJ1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvaGlzdG9yeS9oaXN0b3J5Lmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0hpc3RvcnlDdHJsJyxcblx0XHRcdHNjb3BlOntcblx0XHRcdFx0b3B0aW9uczonPScsXG5cdFx0XHRcdGNoYXJ0ZGF0YTogJz0nXG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24oICRzY29wZSwgZWxlbWVudCwgJGF0dHJzLCBuZ01vZGVsKXtcblx0XHRcdFx0XHR2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRzKCksICRzY29wZS5vcHRpb25zKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ0hpc3RvcnlDdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuXHRcdCRzY29wZS5zZXREYXRhID0gc2V0RGF0YTtcblx0XHRhY3RpdmF0ZSgpO1xuXHRcblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpe1xuXHRcdFx0JHNjb3BlLnNldERhdGEoKTtcblx0XHRcdCRzY29wZS4kd2F0Y2goJ29wdGlvbnMnLCBmdW5jdGlvbihuLG8pe1xuXHRcdFx0XHRpZihuID09PSAwKXtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLnNldERhdGEoKTtcblx0XHRcdH0pXG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHNldERhdGEoKXtcblx0XHRcdCRzY29wZS5kaXNwbGF5ID0ge1xuXHRcdFx0XHRzZWxlY3RlZENhdDogJycsXG5cdFx0XHRcdHJhbms6IFt7XG5cdFx0XHRcdFx0ZmllbGRzOiB7XG5cdFx0XHRcdFx0XHR4OiAneWVhcicsXG5cdFx0XHRcdFx0XHR5OiAncmFuaydcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRpdGxlOiAnUmFuaycsXG5cdFx0XHRcdFx0Y29sb3I6ICcjNTJiNjk1J1xuXHRcdFx0XHR9XSxcblx0XHRcdFx0c2NvcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGRzOiB7XG5cdFx0XHRcdFx0XHR4OiAneWVhcicsXG5cdFx0XHRcdFx0XHR5OiAkc2NvcGUub3B0aW9ucy5maWVsZFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGl0bGU6ICdTY29yZScsXG5cdFx0XHRcdFx0Y29sb3I6ICRzY29wZS5vcHRpb25zLmNvbG9yXG5cdFx0XHRcdH1dXG5cdFx0XHR9O1xuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnaW1hZ2VDb2xvcicsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvaW1hZ2VDb2xvci9pbWFnZUNvbG9yLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0ltYWdlQ29sb3JDdHJsJyxcblx0XHRcdHNjb3BlOntcblx0XHRcdFx0Y29sb3I6Jz0nXG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRcdC8vXG5cdFx0XHRcdHZhciBpbWFnZSA9IGVsZW1lbnRbMF07XG5cdFx0XHRcdGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0c2NvcGUuY29sb3IgPSB0aW55Y29sb3IoZ2V0QXZlcmFnZVJHQihpbWFnZSkpLmlzRGFyaygpO1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdGZ1bmN0aW9uIGdldEF2ZXJhZ2VSR0IoaW1nRWwpIHtcblxuXHRcdFx0XHRcdHZhciBibG9ja1NpemUgPSA1LCAvLyBvbmx5IHZpc2l0IGV2ZXJ5IDUgcGl4ZWxzXG5cdFx0XHRcdFx0XHRkZWZhdWx0UkdCID0ge1xuXHRcdFx0XHRcdFx0XHRyOiAwLFxuXHRcdFx0XHRcdFx0XHRnOiAwLFxuXHRcdFx0XHRcdFx0XHRiOiAwXG5cdFx0XHRcdFx0XHR9LCAvLyBmb3Igbm9uLXN1cHBvcnRpbmcgZW52c1xuXHRcdFx0XHRcdFx0Y2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXG5cdFx0XHRcdFx0XHRjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQgJiYgY2FudmFzLmdldENvbnRleHQoJzJkJyksXG5cdFx0XHRcdFx0XHRkYXRhLCB3aWR0aCwgaGVpZ2h0LFxuXHRcdFx0XHRcdFx0aSA9IC00LFxuXHRcdFx0XHRcdFx0bGVuZ3RoLFxuXHRcdFx0XHRcdFx0cmdiID0ge1xuXHRcdFx0XHRcdFx0XHRyOiAwLFxuXHRcdFx0XHRcdFx0XHRnOiAwLFxuXHRcdFx0XHRcdFx0XHRiOiAwXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0Y291bnQgPSAwO1xuXG5cdFx0XHRcdFx0aWYgKCFjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGVmYXVsdFJHQjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRoZWlnaHQgPSBjYW52YXMuaGVpZ2h0ID0gaW1nRWwubmF0dXJhbEhlaWdodCB8fCBpbWdFbC5vZmZzZXRIZWlnaHQgfHwgaW1nRWwuaGVpZ2h0O1xuXHRcdFx0XHRcdHdpZHRoID0gY2FudmFzLndpZHRoID0gaW1nRWwubmF0dXJhbFdpZHRoIHx8IGltZ0VsLm9mZnNldFdpZHRoIHx8IGltZ0VsLndpZHRoO1xuXG5cdFx0XHRcdFx0Y29udGV4dC5kcmF3SW1hZ2UoaW1nRWwsIDAsIDApO1xuXG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGRhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHQvKiBzZWN1cml0eSBlcnJvciwgaW1nIG9uIGRpZmYgZG9tYWluICovXG5cdFx0XHRcdFx0XHRhbGVydCgneCcpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRlZmF1bHRSR0I7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0bGVuZ3RoID0gZGF0YS5kYXRhLmxlbmd0aDtcblxuXHRcdFx0XHRcdHdoaWxlICgoaSArPSBibG9ja1NpemUgKiA0KSA8IGxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Kytjb3VudDtcblx0XHRcdFx0XHRcdHJnYi5yICs9IGRhdGEuZGF0YVtpXTtcblx0XHRcdFx0XHRcdHJnYi5nICs9IGRhdGEuZGF0YVtpICsgMV07XG5cdFx0XHRcdFx0XHRyZ2IuYiArPSBkYXRhLmRhdGFbaSArIDJdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIH5+IHVzZWQgdG8gZmxvb3IgdmFsdWVzXG5cdFx0XHRcdFx0cmdiLnIgPSB+fihyZ2IuciAvIGNvdW50KTtcblx0XHRcdFx0XHRyZ2IuZyA9IH5+KHJnYi5nIC8gY291bnQpO1xuXHRcdFx0XHRcdHJnYi5iID0gfn4ocmdiLmIgLyBjb3VudCk7XG5cblx0XHRcdFx0XHRyZXR1cm4gcmdiO1xuXG5cdFx0XHRcdH1cblx0XHRcdFx0ZnVuY3Rpb24gcmdiMmhzdiAoKSB7XG4gICAgdmFyIHJyLCBnZywgYmIsXG4gICAgICAgIHIgPSBhcmd1bWVudHNbMF0gLyAyNTUsXG4gICAgICAgIGcgPSBhcmd1bWVudHNbMV0gLyAyNTUsXG4gICAgICAgIGIgPSBhcmd1bWVudHNbMl0gLyAyNTUsXG4gICAgICAgIGgsIHMsXG4gICAgICAgIHYgPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgICAgZGlmZiA9IHYgLSBNYXRoLm1pbihyLCBnLCBiKSxcbiAgICAgICAgZGlmZmMgPSBmdW5jdGlvbihjKXtcbiAgICAgICAgICAgIHJldHVybiAodiAtIGMpIC8gNiAvIGRpZmYgKyAxIC8gMjtcbiAgICAgICAgfTtcblxuICAgIGlmIChkaWZmID09IDApIHtcbiAgICAgICAgaCA9IHMgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHMgPSBkaWZmIC8gdjtcbiAgICAgICAgcnIgPSBkaWZmYyhyKTtcbiAgICAgICAgZ2cgPSBkaWZmYyhnKTtcbiAgICAgICAgYmIgPSBkaWZmYyhiKTtcblxuICAgICAgICBpZiAociA9PT0gdikge1xuICAgICAgICAgICAgaCA9IGJiIC0gZ2c7XG4gICAgICAgIH1lbHNlIGlmIChnID09PSB2KSB7XG4gICAgICAgICAgICBoID0gKDEgLyAzKSArIHJyIC0gYmI7XG4gICAgICAgIH1lbHNlIGlmIChiID09PSB2KSB7XG4gICAgICAgICAgICBoID0gKDIgLyAzKSArIGdnIC0gcnI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGggPCAwKSB7XG4gICAgICAgICAgICBoICs9IDE7XG4gICAgICAgIH1lbHNlIGlmIChoID4gMSkge1xuICAgICAgICAgICAgaCAtPSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGg6IE1hdGgucm91bmQoaCAqIDM2MCksXG4gICAgICAgIFx0czogTWF0aC5yb3VuZChzICogMTAwKSxcbiAgICAgICAgXHR2OiBNYXRoLnJvdW5kKHYgKiAxMDApXG4gICAgICAgIH07XG4gICAgICAgIH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdJbWFnZUNvbG9yQ3RybCcsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdpbWFnZVVwbG9hZGVyJywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvaW1hZ2VVcGxvYWRlci9pbWFnZVVwbG9hZGVyLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ0ltYWdlVXBsb2FkZXJDdHJsJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdHNjb3BlOntcblx0XHRcdFx0aXRlbTogJz1uZ01vZGVsJyxcbiAgICAgIFx0bGFiZWw6ICdAJ1xuXHRcdFx0fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG5cdFx0XHQvL3JlcGxhY2U6dHJ1ZSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW1hZ2VVcGxvYWRlckN0cmwnLCBmdW5jdGlvbigpIHtcblx0XHQvL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uYXNzaWduSW1hZ2UgPSBhc3NpZ25JbWFnZTtcblx0XHR2bS5yZXNldEltYWdlID0gcmVzZXRJbWFnZTtcblxuXHRcdGZ1bmN0aW9uIGFzc2lnbkltYWdlKCRmaWxlLCAkbWVzc2FnZSwgJGZsb3cpIHtcblx0XHRcdGlmICghdm0uaXRlbSkgdm0uaXRlbSA9IHt9O1xuXHRcdFx0dmFyIGltYWdlID0gSlNPTi5wYXJzZSgkbWVzc2FnZSk7XG5cdFx0XHR2bS5pdGVtLmltYWdlID0gaW1hZ2U7XG5cdFx0XHR2bS5pdGVtLmltYWdlX2lkID0gaW1hZ2UuaWQ7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVzZXRJbWFnZSgkZmxvdykge1xuXHRcdFx0JGZsb3cuY2FuY2VsKCk7XG5cdFx0XHR2bS5pdGVtLmltYWdlID0gbnVsbDtcblx0XHRcdHZtLml0ZW0uaW1hZ2VfaWQgPSBudWxsO1xuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnaW5kaWNhdG9yJywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvaW5kaWNhdG9yL2luZGljYXRvci5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdJbmRpY2F0b3JDdHJsJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdHNjb3BlOntcblx0XHRcdFx0aXRlbTogJz0nLFxuXHRcdFx0XHRvcHRpb25zOiAnPScsXG5cdFx0XHRcdHNlbGVjdGVkOiAnPSdcblx0XHRcdH0sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuXHRcdFx0cmVwbGFjZTp0cnVlLFxuXHRcdFx0Ly9yZXF1aXJlOiAnaXRlbScsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiggc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBpdGVtTW9kZWwgKXtcblx0XHRcdFx0Ly9cblx0XHRcdFx0LypzY29wZS4kd2F0Y2goXG5cdFx0XHRcdFx0ZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGl0ZW1Nb2RlbC4kbW9kZWxWYWx1ZTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZ1bmN0aW9uIChuLCBvKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhuKTtcblx0XHRcdFx0XHR9KTsqL1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignSW5kaWNhdG9yQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIERhdGFTZXJ2aWNlLCBDb250ZW50U2VydmljZSwgRGlhbG9nU2VydmljZSwgJGZpbHRlciwgdG9hc3RyLCBWZWN0b3JsYXllclNlcnZpY2UpIHtcblx0XHQvL1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cblx0XHR2bS5vcmlnaW5hbCA9IGFuZ3VsYXIuY29weSh2bS5pdGVtKTtcblxuXHRcdHZtLmNoZWNrQmFzZSA9IGNoZWNrQmFzZTtcblx0XHR2bS5jaGVja0Z1bGwgPSBjaGVja0Z1bGw7XG5cblx0XHR2bS5jYXRlZ29yaWVzID0gW107XG5cdFx0dm0uZGF0YXByb3ZpZGVycyA9IFtdO1xuXHRcdHZtLnNlbGVjdGVkSXRlbSA9IG51bGw7XG5cdFx0dm0uc2VhcmNoVGV4dCA9IG51bGw7XG5cdFx0dm0uc2VhcmNoVW5pdCA9IG51bGw7XG5cdFx0dm0ucXVlcnlTZWFyY2ggPSBxdWVyeVNlYXJjaDtcblx0XHR2bS5xdWVyeVVuaXQgPSBxdWVyeVVuaXQ7XG5cblx0XHR2bS5zYXZlID0gc2F2ZTtcblxuXHRcdHZtLmNyZWF0ZVByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXI7XG5cdFx0dm0uY3JlYXRlVW5pdCA9IGNyZWF0ZVVuaXQ7XG5cblx0XHRhY3RpdmF0ZSgpO1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG5cdFx0XHRsb2FkQWxsKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcXVlcnlTZWFyY2gocXVlcnkpIHtcblx0XHRcdHJldHVybiAkZmlsdGVyKCdmaW5kYnluYW1lJykodm0uZGF0YXByb3ZpZGVycywgcXVlcnksICd0aXRsZScpO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBxdWVyeVVuaXQocXVlcnkpIHtcblx0XHRcdHJldHVybiAkZmlsdGVyKCdmaW5kYnluYW1lJykodm0ubWVhc3VyZVR5cGVzLCBxdWVyeSwgJ3RpdGxlJyk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gbG9hZEFsbCgpIHtcblx0XHRcdHZtLmRhdGFwcm92aWRlcnMgPSBEYXRhU2VydmljZS5nZXRBbGwoJ2RhdGFwcm92aWRlcnMnKS4kb2JqZWN0O1xuXHRcdFx0dm0uY2F0ZWdvcmllcyA9IENvbnRlbnRTZXJ2aWNlLmdldENhdGVnb3JpZXMoe3RyZWU6dHJ1ZX0pO1xuXHRcdFx0dm0ubWVhc3VyZVR5cGVzID0gRGF0YVNlcnZpY2UuZ2V0QWxsKCdtZWFzdXJlX3R5cGVzJykuJG9iamVjdDtcblx0XHRcdHZtLnN0eWxlcyA9IERhdGFTZXJ2aWNlLmdldEFsbCgnc3R5bGVzJykuJG9iamVjdDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGVja0Jhc2UoKXtcblx0XHRcdGlmICh2bS5pdGVtLnRpdGxlICYmIHZtLml0ZW0udHlwZSAmJiB2bS5pdGVtLmRhdGFwcm92aWRlciAmJiB2bS5pdGVtLnRpdGxlLmxlbmd0aCA+PSAzKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBjaGVja0Z1bGwoKXtcblx0XHRcdGlmKHR5cGVvZiB2bS5pdGVtLmNhdGVnb3JpZXMgPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0cmV0dXJuIGNoZWNrQmFzZSgpICYmIHZtLml0ZW0uY2F0ZWdvcmllcy5sZW5ndGggPyB0cnVlIDogZmFsc2U7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZtLml0ZW0uc2F2ZSgpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRpZihyZXNwb25zZSl7XG5cdFx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0RhdGEgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQhJywgJ1N1Y2Nlc3NmdWxseSBzYXZlZCcpO1xuXHRcdFx0XHRcdHZtLml0ZW0uaXNEaXJ0eSA9IGZhbHNlO1xuXHRcdFx0XHRcdHZtLm9yaWdpbmFsID0gYW5ndWxhci5jb3B5KHZtLml0ZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvL1RPRE86IElUUyBBIEhBQ0sgVE8gR0VUIElUIFdPUks6IG5nLWNsaWNrIHZzIG5nLW1vdXNlZG93blxuXHRcdGZ1bmN0aW9uIGNyZWF0ZVByb3ZpZGVyKHRleHQpe1xuXHRcdFx0RGlhbG9nU2VydmljZS5mcm9tVGVtcGxhdGUoJ2FkZFByb3ZpZGVyJywgJHNjb3BlKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY3JlYXRlVW5pdCh0ZXh0KXtcblx0XHRcdERpYWxvZ1NlcnZpY2UuZnJvbVRlbXBsYXRlKCdhZGRVbml0JywgJHNjb3BlKTtcblx0XHR9XG5cblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5pdGVtJywgZnVuY3Rpb24obiwgbyl7XG5cdFx0XHRpZihuICE9IG8pIHtcblx0XHQgICAgdm0uaXRlbS5pc0RpcnR5ID0gIWFuZ3VsYXIuZXF1YWxzKHZtLml0ZW0sIHZtLm9yaWdpbmFsKTtcblx0XHQgIH1cblx0XHR9LHRydWUpO1xuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdpbmRpY2F0b3JNZW51JywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHRzY29wZToge1xuXHRcdFx0XHRpdGVtOiAnPWl0ZW0nXG5cdFx0XHR9LFxuXHRcdFx0cmVwbGFjZTp0cnVlLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2luZGljYXRvck1lbnUvaW5kaWNhdG9yTWVudS5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdJbmRpY2F0b3JNZW51Q3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0XHR2YXIgY2wgPSAnYWN0aXZlJztcblx0XHRcdFx0dmFyIGVsID0gZWxlbWVudFswXTtcblx0XHRcdFx0dmFyIHBhcmVudCA9IGVsZW1lbnQucGFyZW50KCk7XG5cdFx0XHRcdHBhcmVudC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdGVsZW1lbnQuYWRkQ2xhc3MoY2wpO1xuXHRcdFx0XHR9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRcdGVsZW1lbnQucmVtb3ZlQ2xhc3MoY2wpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0XG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnSW5kaWNhdG9yTWVudUN0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5jaGVja0Jhc2UgPSBjaGVja0Jhc2U7XG5cdFx0dm0ubG9ja2VkID0gbG9ja2VkO1xuXHRcdHZtLmNoYW5nZU9mZmljaWFsID0gY2hhbmdlT2ZmaWNpYWw7XG5cblx0XHRmdW5jdGlvbiBsb2NrZWQoKXtcblx0XHRcdHJldHVybiB2bS5pdGVtLmlzX29mZmljaWFsID8gJ2xvY2tfb3BlbicgOiAnbG9jayc7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGNoYW5nZU9mZmljaWFsKCl7XG5cdFx0XHR2bS5pdGVtLmlzX29mZmljaWFsID0gIXZtLml0ZW0uaXNfb2ZmaWNpYWw7XG5cdFx0XHR2bS5pdGVtLnNhdmUoKTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY2hlY2tCYXNlKGl0ZW0pe1xuXHRcdFx0aWYgKGl0ZW0udGl0bGUgJiYgaXRlbS5tZWFzdXJlX3R5cGVfaWQgJiYgaXRlbS5kYXRhcHJvdmlkZXIgJiYgaXRlbS50aXRsZS5sZW5ndGggPj0gMykge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG4gIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSggJ2luZGljYXRvcnMnLCBmdW5jdGlvbigpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9pbmRpY2F0b3JzL2luZGljYXRvcnMuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnSW5kaWNhdG9yc0N0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6e30sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB7XG5cdFx0XHRcdGl0ZW06ICc9PycsXG5cdFx0XHRcdGluZGljYXRvcnM6ICc9aXRlbXMnLFxuXHRcdFx0XHRzZWxlY3Rpb246ICc9PycsXG5cdFx0XHRcdG9wdGlvbnM6Jz0/Jyxcblx0XHRcdFx0YWN0aXZlOiAnPT8nXG5cdFx0XHR9LFxuXHRcdFx0cmVwbGFjZTp0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ0luZGljYXRvcnNDdHJsJywgZnVuY3Rpb24oRGF0YVNlcnZpY2Upe1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5zZWxlY3RBbGxHcm91cCA9IHNlbGVjdEFsbEdyb3VwO1xuXHRcdHZtLnNlbGVjdGVkSXRlbSA9IHNlbGVjdGVkSXRlbTtcblx0XHR2bS50b2dnbGVTZWxlY3Rpb24gPSB0b2dnbGVTZWxlY3Rpb247XG5cdFx0dm0uZGVsZXRlU2VsZWN0ZWQgPSBkZWxldGVTZWxlY3RlZDtcblxuXHRcdHZtLmZpbHRlciA9IHtcblx0XHRcdHNvcnQ6J3RpdGxlJyxcblx0XHRcdHJldmVyc2U6ZmFsc2UsXG5cdFx0XHRsaXN0OiAwLFxuXHRcdFx0cHVibGlzaGVkOiBmYWxzZSxcblx0XHRcdHR5cGVzOiB7XG5cdFx0XHRcdHRpdGxlOiB0cnVlLFxuXHRcdFx0XHRzdHlsZTogZmFsc2UsXG5cdFx0XHRcdGNhdGVnb3JpZXM6IGZhbHNlLFxuXHRcdFx0XHRpbmZvZ3JhcGhpYzogZmFsc2UsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBmYWxzZSxcblx0XHRcdH1cblx0XHR9O1xuXHRcdHZtLnNlYXJjaCA9IHtcblx0XHRcdHF1ZXJ5OiAnJyxcblx0XHRcdHNob3c6IGZhbHNlXG5cdFx0fTtcblx0XHR2bS5vcGVuTWVudSA9IG9wZW5NZW51O1xuXHRcdHZtLnRvZ2dsZUxpc3QgPSB0b2dnbGVMaXN0O1xuXG5cblxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUxpc3Qoa2V5KXtcblx0XHRcdGlmKHZtLnZpc2libGVMaXN0ID09IGtleSl7XG5cdFx0XHRcdHZtLnZpc2libGVMaXN0ID0gJyc7XG5cdFx0XHR9XG5cdFx0XHRlbHNle1xuXHRcdFx0XHR2bS52aXNpYmxlTGlzdCA9IGtleTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZWxlY3RlZEl0ZW0oaXRlbSkge1xuXHRcdFx0cmV0dXJuIHZtLnNlbGVjdGlvbi5pbmRleE9mKGl0ZW0pID4gLTEgPyB0cnVlIDogZmFsc2U7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHNlbGVjdEFsbCgpe1xuXHRcdFx0aWYodm0uc2VsZWN0aW9uLmxlbmd0aCl7XG5cdFx0XHRcdHZtLnNlbGVjdGlvbiA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLmluZGljYXRvcnMsIGZ1bmN0aW9uKGl0ZW0pe1xuXHRcdFx0XHRcdGlmKHZtLnNlbGVjdGlvbi5pbmRleE9mKGl0ZW0pID09IC0xKXtcblx0XHRcdFx0XHRcdHZtLnNlbGVjdGlvbi5wdXNoKGl0ZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdG9nZ2xlU2VsZWN0aW9uKGl0ZW0pIHtcblx0XHRcdHZhciBpbmRleCA9IHZtLnNlbGVjdGlvbi5pbmRleE9mKGl0ZW0pO1xuXHRcdFx0aWYgKGluZGV4ID4gLTEpIHtcblx0XHRcdFx0cmV0dXJuIHZtLnNlbGVjdGlvbi5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHZtLnNlbGVjdGlvbi5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRmdW5jdGlvbiBzZWxlY3RBbGxHcm91cChncm91cCl7XG5cdFx0XHRpZih2bS5zZWxlY3Rpb24ubGVuZ3RoKXtcblx0XHRcdFx0XHR2bS5zZWxlY3Rpb24gPSBbXTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2bS5zZWxlY3Rpb24gPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChncm91cCwgZnVuY3Rpb24oaXRlbSl7XG5cdFx0XHRcdHZtLnNlbGVjdGlvbi5wdXNoKGl0ZW0pO1xuXHRcdFx0fSk7XG5cblx0XHR9XG5cdFx0ZnVuY3Rpb24gb3Blbk1lbnUoJG1kT3Blbk1lbnUsIGV2KSB7XG5cdFx0XHQkbWRPcGVuTWVudShldik7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZGVsZXRlU2VsZWN0ZWQoKXtcblx0XHRcdGlmKHZtLnNlbGVjdGlvbi5sZW5ndGgpe1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0aW9uLCBmdW5jdGlvbihpdGVtKXtcblx0XHRcdFx0XHRcdERhdGFTZXJ2aWNlLnJlbW92ZSgnaW5kaWNhdG9ycycsIGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0XHR2bS5pbmRpY2F0b3JzLnNwbGljZSh2bS5pbmRpY2F0b3JzLmluZGV4T2YoaXRlbSksMSk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXHRcdFx0XHR2bS5zZWxlY3Rpb24gPSBbXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Lyokc2NvcGUuJHdhdGNoKCd2bS5zZWFyY2gucXVlcnknLCBmdW5jdGlvbiAocXVlcnksIG9sZFF1ZXJ5KSB7XG5cdFx0XHRpZihxdWVyeSA9PT0gb2xkUXVlcnkpIHJldHVybiBmYWxzZTtcblx0XHRcdHZtLnF1ZXJ5ID0gdm0uZmlsdGVyLnR5cGVzO1xuXHRcdFx0dm0ucXVlcnkucSA9IHF1ZXJ5O1xuXHRcdFx0dm0uaXRlbXMgPSBDb250ZW50U2VydmljZS5mZXRjaEluZGljYXRvcnModm0ucXVlcnkpO1xuXHRcdH0pOyovXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnaW5kaXplcycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL2luZGl6ZXMvaW5kaXplcy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdJbmRpemVzQ3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRzY29wZTp7XG5cdFx0XHRcdGl0ZW06ICc9Jyxcblx0XHRcdFx0b3B0aW9uczogJz0nLFxuXHRcdFx0XHRzZWxlY3RlZDogJz0nXG5cdFx0XHR9LFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcblx0XHRcdHJlcGxhY2U6dHJ1ZSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdJbmRpemVzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkZmlsdGVyLCAkdGltZW91dCwgdG9hc3RyLCBEYXRhU2VydmljZSwgQ29udGVudFNlcnZpY2Upe1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5vcmlnaW5hbCA9IGFuZ3VsYXIuY29weSh2bS5pdGVtKTtcblx0XHR2bS5jaGVja0Jhc2UgPSBjaGVja0Jhc2U7XG5cdFx0dm0uY2hlY2tGdWxsID0gY2hlY2tGdWxsO1xuXHRcdHZtLnNhdmUgPSBzYXZlO1xuXG5cdFx0dm0uYmFzZU9wdGlvbnMgPSB7XG5cdFx0XHRkcmFnOnRydWUsXG5cdFx0XHRhbGxvd0Ryb3A6dHJ1ZSxcblx0XHRcdGFsbG93RHJhZzp0cnVlLFxuXHRcdFx0YWxsb3dNb3ZlOnRydWUsXG5cdFx0XHRhbGxvd1NhdmU6dHJ1ZSxcblx0XHRcdGFsbG93RGVsZXRlOnRydWUsXG5cdFx0XHRhbGxvd0FkZENvbnRhaW5lcjp0cnVlLFxuXHRcdFx0YWxsb3dBZGQ6dHJ1ZSxcblx0XHRcdGVkaXRhYmxlOnRydWUsXG5cdFx0XHRhc3NpZ21lbnRzOiB0cnVlLFxuXHRcdFx0c2F2ZUNsaWNrOiBzYXZlLFxuXHRcdFx0YWRkQ2xpY2s6IHZtLm9wdGlvbnMuaW5kaXplcy5hZGRDbGljayxcblx0XHRcdGFkZENvbnRhaW5lckNsaWNrOiB2bS5vcHRpb25zLmluZGl6ZXMuYWRkQ29udGFpbmVyQ2xpY2ssXG5cdFx0XHRkZWxldGVEcm9wOiB2bS5vcHRpb25zLmluZGl6ZXMuZGVsZXRlRHJvcCxcblx0XHRcdGRlbGV0ZUNsaWNrOiB2bS5vcHRpb25zLmluZGl6ZXMuZGVsZXRlQ2xpY2tcblx0XHR9O1xuXHRcdGFjdGl2YXRlKCk7XG5cblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0bG9hZEFsbCgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGxvYWRBbGwoKSB7XG5cdFx0XHR2bS5jYXRlZ29yaWVzID0gQ29udGVudFNlcnZpY2UuZ2V0Q2F0ZWdvcmllcyh7dHJlZTp0cnVlfSk7XG5cdFx0XHR2bS5zdHlsZXMgPSBEYXRhU2VydmljZS5nZXRBbGwoJ3N0eWxlcycpLiRvYmplY3Q7XG5cdFx0XHR2bS50eXBlcyA9IERhdGFTZXJ2aWNlLmdldEFsbCgnaW5kZXgvdHlwZXMnKS4kb2JqZWN0O1xuXG5cdFx0XHRpZih0eXBlb2Ygdm0uaXRlbS5pZCA9PSBcInVuZGVmaW5lZFwiKXtcblx0XHRcdFx0dm0uaXRlbS5pdGVtX3R5cGVfaWQgPSAxO1xuXHRcdFx0XHR2bS5pdGVtLmNoaWxkcmVuID0gW107XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGNoZWNrQmFzZSgpe1xuXHRcdFx0aWYgKHZtLml0ZW0udGl0bGUgJiYgdm0uaXRlbS5pdGVtX3R5cGVfaWQgJiYgdm0uaXRlbS50aXRsZS5sZW5ndGggPj0gMykge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY2hlY2tGdWxsKCl7XG5cdFx0XHRpZih0eXBlb2Ygdm0uaXRlbS5jYXRlZ29yaWVzID09IFwidW5kZWZpbmVkXCIpIHJldHVybiBmYWxzZTtcblx0XHRcdHJldHVybiBjaGVja0Jhc2UoKSAmJiB2bS5pdGVtLmNhdGVnb3JpZXMubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdH1cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHRpZih2bS5pdGVtLmlkKXtcblx0XHRcdFx0dm0uaXRlbS5zYXZlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFx0aWYocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0dG9hc3RyLnN1Y2Nlc3MoJ0RhdGEgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQhJywgJ1N1Y2Nlc3NmdWxseSBzYXZlZCcpO1xuXHRcdFx0XHRcdFx0dm0uaXRlbS5pc0RpcnR5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR2bS5vcmlnaW5hbCA9IGFuZ3VsYXIuY29weSh2bS5pdGVtKTtcblx0XHRcdFx0XHRcdENvbnRlbnRTZXJ2aWNlLnVwZGF0ZUl0ZW0ocmVzcG9uc2UpO1xuXHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZWRpdG9yLmluZGl6ZXMuZGF0YScse2lkOnZtLml0ZW0uaWQsbmFtZTpyZXNwb25zZS5uYW1lfSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZXtcblx0XHRcdFx0RGF0YVNlcnZpY2UucG9zdCgnaW5kZXgnLCB2bS5pdGVtKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRpZihyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnRGF0YSBzdWNjZXNzZnVsbHkgc2F2ZWQhJywgJ1N1Y2Nlc3NmdWxseSBzYXZlZCcpO1xuXHRcdFx0XHRcdFx0dm0uaXRlbS5pc0RpcnR5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR2bS5vcmlnaW5hbCA9IGFuZ3VsYXIuY29weSh2bS5pdGVtKTtcblx0XHRcdFx0XHRcdENvbnRlbnRTZXJ2aWNlLmFkZEl0ZW0ocmVzcG9uc2UpO1xuXHRcdFx0XHRcdFx0JHN0YXRlLmdvKCdhcHAuaW5kZXguZWRpdG9yLmluZGl6ZXMuZGF0YScse2lkOnJlc3BvbnNlLmlkLCBuYW1lOnJlc3BvbnNlLm5hbWV9KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZW1vdmVJdGVtcyhldmVudCwgaXRlbSl7XG5cdFx0Ly9cdGNvbnNvbGUubG9nKHZtLml0ZW0sIGl0ZW0pO1xuXG5cdFx0fVxuXHRcdCRzY29wZS4kd2F0Y2goJ3ZtLml0ZW0nLCBmdW5jdGlvbihuLCBvKXtcblx0XHRcdGlmKG4gIT0gbykge1xuXHRcdFx0XHR2bS5pdGVtLmlzRGlydHkgPSAhYW5ndWxhci5lcXVhbHModm0uaXRlbSwgdm0ub3JpZ2luYWwpO1xuXHRcdFx0fVxuXHRcdH0sdHJ1ZSk7XG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnbWVkaWFuJywgZnVuY3Rpb24oJHRpbWVvdXQsICR3aW5kb3cpIHtcblx0XHR2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGlkOiAnZ3JhZGllbnQnLFxuXHRcdFx0XHR3aWR0aDogMzQwLFxuXHRcdFx0XHRoZWlnaHQ6IDQwLFxuXHRcdFx0XHRpbmZvOiB0cnVlLFxuXHRcdFx0XHRmaWVsZDogJ3Njb3JlJyxcblx0XHRcdFx0aGFuZGxpbmc6IHRydWUsXG5cdFx0XHRcdHNob3dWYWx1ZTogdHJ1ZSxcblx0XHRcdFx0bWluOiAwLFxuXHRcdFx0XHRtYXg6IDEwMCxcblx0XHRcdFx0bWFyZ2luOiB7XG5cdFx0XHRcdFx0bGVmdDogMjAsXG5cdFx0XHRcdFx0cmlnaHQ6IDIwLFxuXHRcdFx0XHRcdHRvcDogMTAsXG5cdFx0XHRcdFx0Ym90dG9tOiAxMFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjb2xvcnM6IFt7XG5cdFx0XHRcdFx0cG9zaXRpb246IDAsXG5cdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDEwMiwxMDIsMTAyLDEpJyxcblx0XHRcdFx0XHRvcGFjaXR5OiAxXG5cdFx0XHRcdH0sIHtcblx0XHRcdFx0XHRwb3NpdGlvbjogNTMsXG5cdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDEyOCwgMjQzLCAxOTgsMSknLFxuXHRcdFx0XHRcdG9wYWNpdHk6IDFcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdHBvc2l0aW9uOiAxMDAsXG5cdFx0XHRcdFx0Y29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDEpJyxcblx0XHRcdFx0XHRvcGFjaXR5OiAwXG5cdFx0XHRcdH1dXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdHNjb3BlOiB7XG5cdFx0XHRcdGRhdGE6ICc9Jyxcblx0XHRcdFx0b3B0aW9uczogJz0nXG5cdFx0XHR9LFxuXHRcdFx0cmVxdWlyZTogJ25nTW9kZWwnLFxuXHRcdFx0bGluazogZnVuY3Rpb24oJHNjb3BlLCBlbGVtZW50LCAkYXR0cnMsIG5nTW9kZWwpIHtcblxuXHRcdFx0XHR2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKGRlZmF1bHRzKCksICRhdHRycyk7XG5cdFx0XHRcdG9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZChvcHRpb25zLCAkc2NvcGUub3B0aW9ucyk7XG5cdFx0XHRcdG9wdGlvbnMud2lkdGggPSBlbGVtZW50LnBhcmVudCgpWzBdLmNsaWVudFdpZHRoIC0gb3B0aW9ucy5tYXJnaW4ubGVmdCAtIG9wdGlvbnMubWFyZ2luLnJpZ2h0O1xuXHRcdFx0XHRvcHRpb25zLnVuaXF1ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdFx0XHRlbGVtZW50LmNzcygnaGVpZ2h0Jywgb3B0aW9ucy5oZWlnaHQgKyAncHgnKS5jc3MoJ2JvcmRlci1yYWRpdXMnLCBvcHRpb25zLmhlaWdodCAvIDIgKyAncHgnKTtcblxuXHRcdFx0XHRpZiAob3B0aW9ucy5jb2xvcikge1xuXHRcdFx0XHRcdG9wdGlvbnMuY29sb3JzWzFdLmNvbG9yID0gb3B0aW9ucy5jb2xvcjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoISRzY29wZS5vcHRpb25zLm1heCkge1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZGF0YSwgZnVuY3Rpb24obmF0LCBrZXkpIHtcblx0XHRcdFx0XHRcdG9wdGlvbnMubWF4ID0gZDMubWF4KFtvcHRpb25zLm1heCwgcGFyc2VJbnQobmF0W29wdGlvbnMuZmllbGRdKV0pO1xuXHRcdFx0XHRcdFx0b3B0aW9ucy5taW4gPSBkMy5taW4oW29wdGlvbnMubWluLCBwYXJzZUludChuYXRbb3B0aW9ucy5maWVsZF0pXSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgY29udGFpbmVyID0gZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmFwcGVuZChcInN2Z1wiKTtcblx0XHRcdFx0dmFyIHN2ZyA9IGNvbnRhaW5lci5hcHBlbmQoXCJnXCIpO1xuXHRcdFx0XHR2YXIgZWZmZWN0cyA9IHN2Zy5hcHBlbmQoJ3N2ZzpkZWZzJylcblx0XHRcdFx0dmFyIGdyYWRpZW50ID0gZWZmZWN0cy5hcHBlbmQoXCJzdmc6bGluZWFyR3JhZGllbnRcIilcblx0XHRcdFx0XHQuYXR0cignaWQnLCBvcHRpb25zLmZpZWxkICsgb3B0aW9ucy51bmlxdWUpXG5cdFx0XHRcdFx0LmF0dHIoJ3gxJywgJzAlJylcblx0XHRcdFx0XHQuYXR0cigneTEnLCAnMCUnKVxuXHRcdFx0XHRcdC5hdHRyKCd4MicsICcxMDAlJylcblx0XHRcdFx0XHQuYXR0cigneTInLCAnMCUnKVxuXHRcdFx0XHRcdC5hdHRyKCdzcHJlYWRNZXRob2QnLCAncGFkJyk7XG5cdFx0XHRcdHZhciBzaGFkb3cgPSBlZmZlY3RzLmFwcGVuZChcImZpbHRlclwiKVxuXHRcdFx0XHRcdC5hdHRyKFwiaWRcIiwgXCJkcm9wLXNoYWRvd1wiKVxuXHRcdFx0XHRcdC5hdHRyKFwiaGVpZ2h0XCIsIFwiMTUwJVwiKTtcblx0XHRcdFx0dmFyIHNoYWRvd0ludGVuc2l0eSA9IHNoYWRvdy5hcHBlbmQoXCJmZUdhdXNzaWFuQmx1clwiKVxuXHRcdFx0XHRcdC5hdHRyKFwiaW5cIiwgXCJTb3VyY2VBbHBoYVwiKVxuXHRcdFx0XHRcdC5hdHRyKFwic3RkRGV2aWF0aW9uXCIsIDEpXG5cdFx0XHRcdFx0LmF0dHIoXCJyZXN1bHRcIiwgXCJibHVyXCIpO1xuXHRcdFx0XHR2YXIgc2hhZG93UG9zID0gc2hhZG93LmFwcGVuZChcImZlT2Zmc2V0XCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJpblwiLCBcImJsdXJcIilcblx0XHRcdFx0XHQuYXR0cihcImR4XCIsIDApXG5cdFx0XHRcdFx0LmF0dHIoXCJkeVwiLCAwKVxuXHRcdFx0XHRcdC5hdHRyKFwicmVzdWx0XCIsIFwib2Zmc2V0Qmx1clwiKTtcblxuXHRcdFx0XHR2YXIgZmVNZXJnZSA9IHNoYWRvdy5hcHBlbmQoXCJmZU1lcmdlXCIpO1xuXHRcdFx0XHRmZU1lcmdlLmFwcGVuZChcImZlTWVyZ2VOb2RlXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJpblwiLCBcIm9mZnNldEJsdXJcIilcblx0XHRcdFx0ZmVNZXJnZS5hcHBlbmQoXCJmZU1lcmdlTm9kZVwiKVxuXHRcdFx0XHRcdC5hdHRyKFwiaW5cIiwgXCJTb3VyY2VHcmFwaGljXCIpO1xuXG5cdFx0XHRcdHZhciBiY2tncm5kID0gc3ZnLmFwcGVuZCgnZycpLmF0dHIoJ3RyYW5zZm9ybScsIFwidHJhbnNsYXRlKDAsIFwiICsgKG9wdGlvbnMuaGVpZ2h0IC8gNCkgKyBcIilcIik7XG5cdFx0XHRcdHZhciByZWN0ID0gYmNrZ3JuZC5hcHBlbmQoJ3BhdGgnKTtcblx0XHRcdFx0dmFyIGxlZ2VuZCA9IHN2Zy5hcHBlbmQoJ2cnKTtcblx0XHRcdFx0dmFyIGxlZ2VuZDIgPSBzdmcuYXBwZW5kKCdnJyk7XG5cdFx0XHRcdHZhciBzbGlkZXIgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0XHRcdC5hdHRyKFwiY2xhc3NcIiwgXCJzbGlkZXJcIik7XG5cdFx0XHRcdC8vIGlmIChvcHRpb25zLmhhbmRsaW5nID09IHRydWUpIHtcblx0XHRcdFx0Ly8gXHRzbGlkZXIuY2FsbChicnVzaCk7XG5cdFx0XHRcdC8vIH1cblxuXHRcdFx0XHRzbGlkZXIuc2VsZWN0KFwiLmJhY2tncm91bmRcIilcblx0XHRcdFx0XHQuYXR0cihcImhlaWdodFwiLCBvcHRpb25zLmhlaWdodCk7XG5cblx0XHRcdFx0dmFyIHggPSBkMy5zY2FsZS5saW5lYXIoKVxuXHRcdFx0XHR4LmRvbWFpbihbb3B0aW9ucy5taW4sIG9wdGlvbnMubWF4XSlcblx0XHRcdFx0XHQucmFuZ2UoW29wdGlvbnMubWFyZ2luLmxlZnQsIG9wdGlvbnMud2lkdGggLSBvcHRpb25zLm1hcmdpbi5sZWZ0XSlcblx0XHRcdFx0XHQuY2xhbXAodHJ1ZSk7XG5cblxuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2gob3B0aW9ucy5jb2xvcnMsIGZ1bmN0aW9uKGNvbG9yKSB7XG5cdFx0XHRcdFx0Z3JhZGllbnQuYXBwZW5kKCdzdmc6c3RvcCcpXG5cdFx0XHRcdFx0XHQuYXR0cignb2Zmc2V0JywgY29sb3IucG9zaXRpb24gKyAnJScpXG5cdFx0XHRcdFx0XHQuYXR0cignc3RvcC1jb2xvcicsIGNvbG9yLmNvbG9yKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3N0b3Atb3BhY2l0eScsIGNvbG9yLm9wYWNpdHkpO1xuXHRcdFx0XHR9KTtcblxuXG5cdFx0XHRcdGlmIChvcHRpb25zLmluZm8gPT09IHRydWUpIHtcblx0XHRcdFx0XHRsZWdlbmQuYXBwZW5kKCdjaXJjbGUnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3InLCBvcHRpb25zLmhlaWdodCAvIDIpO1xuXHRcdFx0XHRcdHZhciBsZWdlbmRUZXh0ID0gbGVnZW5kLmFwcGVuZCgndGV4dCcpXG5cdFx0XHRcdFx0XHQudGV4dChvcHRpb25zLm1pbilcblx0XHRcdFx0XHRcdC5zdHlsZSgnZm9udC1zaXplJywgb3B0aW9ucy5oZWlnaHQgLyAyLjUpXG5cdFx0XHRcdFx0XHQuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJylcblx0XHRcdFx0XHRcdC5hdHRyKCd5JywgJy4zNWVtJylcblx0XHRcdFx0XHRcdC5hdHRyKCdpZCcsICdsb3dlclZhbHVlJyk7XG5cblx0XHRcdFx0XHRsZWdlbmQyLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChvcHRpb25zLndpZHRoIC0gKG9wdGlvbnMuaGVpZ2h0IC8gMikpICsgJywgJyArIG9wdGlvbnMuaGVpZ2h0IC8gMiArICcpJylcblx0XHRcdFx0XHRcdC5hdHRyKCdjbGFzcycsICdlbmRMYWJlbCcpXG5cdFx0XHRcdFx0bGVnZW5kMi5hcHBlbmQoJ2NpcmNsZScpXG5cdFx0XHRcdFx0XHQuYXR0cigncicsIG9wdGlvbnMuaGVpZ2h0IC8gMilcblx0XHRcdFx0XHR2YXIgbGVnZW5kMlRleHQgPSBsZWdlbmQyLmFwcGVuZCgndGV4dCcpXG5cdFx0XHRcdFx0XHQudGV4dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0Ly9URE9ETzogQ0hja2ljayBpZiBubyBjb21tYSB0aGVyZVxuXHRcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5tYXggPiAxMDAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHYgPSAocGFyc2VJbnQob3B0aW9ucy5tYXgpIC8gMTAwMCkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdi5zdWJzdHIoMCwgdi5pbmRleE9mKCcuJykpICsgXCJrXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIG9wdGlvbnMubWF4XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnN0eWxlKCdmb250LXNpemUnLCBvcHRpb25zLmhlaWdodCAvIDIuNSlcblx0XHRcdFx0XHRcdC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3knLCAnLjM1ZW0nKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2lkJywgJ3VwcGVyVmFsdWUnKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdFx0aWYgKG9wdGlvbnMuaW5mbyA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdHZhciBsaW5lID0gc2xpZGVyLmFwcGVuZCgnbGluZScpXG5cdFx0XHRcdFx0XHQuYXR0cigneDEnLCBvcHRpb25zLndpZHRoIC8gMilcblx0XHRcdFx0XHRcdC5hdHRyKCd5MScsIDApXG5cdFx0XHRcdFx0XHQuYXR0cigneDInLCBvcHRpb25zLndpZHRoIC8gMilcblx0XHRcdFx0XHRcdC5hdHRyKCd5MicsIG9wdGlvbnMuaGVpZ2h0KVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMywzJylcblx0XHRcdFx0XHRcdC5hdHRyKCdzdHJva2Utd2lkdGgnLCAxKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3N0cm9rZScsICdyZ2JhKDAsMCwwLDg3KScpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBoYW5kbGVDb250ID0gc2xpZGVyLmFwcGVuZCgnZycpO1xuXHRcdFx0XHR2YXIgaGFuZGxlID0gaGFuZGxlQ29udC5hcHBlbmQoXCJjaXJjbGVcIilcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwiaGFuZGxlXCIpXG5cdFx0XHRcdFx0LnN0eWxlKFwiZmlsdGVyXCIsIFwidXJsKCNkcm9wLXNoYWRvdylcIik7XG5cdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdHZhciBoYW5kbGVMYWJlbCA9IGhhbmRsZUNvbnQuYXBwZW5kKCd0ZXh0Jylcblx0XHRcdFx0XHRcdC50ZXh0KDApXG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdGZ1bmN0aW9uIGRyYXcoKSB7XG5cdFx0XHRcdFx0eC5yYW5nZShbb3B0aW9ucy5tYXJnaW4ubGVmdCwgb3B0aW9ucy53aWR0aCAtIG9wdGlvbnMubWFyZ2luLnJpZ2h0XSlcblx0XHRcdFx0XHRcdC5jbGFtcCh0cnVlKTtcblxuXG5cdFx0XHRcdFx0Ly8gdmFyIGJydXNoID0gZDMuc3ZnLmJydXNoKClcblx0XHRcdFx0XHQvLyBcdC54KHgpXG5cdFx0XHRcdFx0Ly8gXHQuZXh0ZW50KFswLCAwXSlcblx0XHRcdFx0XHQvLyBcdC5vbihcImJydXNoXCIsIGJydXNoKVxuXHRcdFx0XHRcdC8vIFx0Lm9uKFwiYnJ1c2hlbmRcIiwgYnJ1c2hlZCk7XG5cblx0XHRcdFx0XHRjb250YWluZXJcblx0XHRcdFx0XHRcdC5hdHRyKFwid2lkdGhcIiwgb3B0aW9ucy53aWR0aClcblx0XHRcdFx0XHRcdC5hdHRyKFwiaGVpZ2h0XCIsIG9wdGlvbnMuaGVpZ2h0KVxuXHRcdFx0XHRcdFx0LnN0eWxlKCdtYXJnaW4tbGVmdCcsIG9wdGlvbnMubWFyZ2luLmxlZnQpXG5cblxuXHRcdFx0XHRcdC8vLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIG9wdGlvbnMubWFyZ2luLnRvcCAvIDIgKyBcIilcIik7XG5cblxuXG5cdFx0XHRcdFx0cmVjdFxuXHRcdFx0XHRcdFx0LmF0dHIoJ2QnLCByb3VuZGVkX3JlY3QoMCwgMCwgb3B0aW9ucy53aWR0aCwgb3B0aW9ucy5oZWlnaHQgLyAyLCBvcHRpb25zLmhlaWdodCAvIDQsIHRydWUsIHRydWUsIHRydWUsIHRydWUpKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3knLCBvcHRpb25zLmhlaWdodCAvIDIpXG5cdFx0XHRcdFx0XHQuYXR0cignd2lkdGgnLCBvcHRpb25zLndpZHRoKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2hlaWdodCcsIG9wdGlvbnMuaGVpZ2h0IC8gMilcblx0XHRcdFx0XHRcdC5zdHlsZSgnZmlsbCcsICd1cmwoIycgKyAob3B0aW9ucy5maWVsZCArIG9wdGlvbnMudW5pcXVlKSArICcpJyk7XG5cdFx0XHRcdFx0bGVnZW5kLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG9wdGlvbnMuaGVpZ2h0IC8gMiArICcsICcgKyBvcHRpb25zLmhlaWdodCAvIDIgKyAnKScpXG5cdFx0XHRcdFx0XHQuYXR0cignY2xhc3MnLCAnc3RhcnRMYWJlbCcpXG5cblx0XHRcdFx0XHRpZiAob3B0aW9ucy5pbmZvID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRsZWdlbmQuYXR0cigncicsIG9wdGlvbnMuaGVpZ2h0IC8gMik7XG5cdFx0XHRcdFx0XHRsZWdlbmRUZXh0LnRleHQob3B0aW9ucy5taW4pXG5cdFx0XHRcdFx0XHRcdC5zdHlsZSgnZm9udC1zaXplJywgb3B0aW9ucy5oZWlnaHQgLyAyLjUpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuXHRcdFx0XHRcdFx0XHQuYXR0cigneScsICcuMzVlbScpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCdpZCcsICdsb3dlclZhbHVlJyk7XG5cdFx0XHRcdFx0XHRsZWdlbmQyLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChvcHRpb25zLndpZHRoIC0gKG9wdGlvbnMuaGVpZ2h0IC8gMikpICsgJywgJyArIG9wdGlvbnMuaGVpZ2h0IC8gMiArICcpJylcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2VuZExhYmVsJylcblx0XHRcdFx0XHRcdGxlZ2VuZDIuYXBwZW5kKCdjaXJjbGUnKVxuXHRcdFx0XHRcdFx0XHQuYXR0cigncicsIG9wdGlvbnMuaGVpZ2h0IC8gMilcblxuXHRcdFx0XHRcdFx0bGVnZW5kMlRleHQudGV4dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHQvL1RET0RPOiBDSGNraWNrIGlmIG5vIGNvbW1hIHRoZXJlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMubWF4ID4gMTAwMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHYgPSAocGFyc2VJbnQob3B0aW9ucy5tYXgpIC8gMTAwMCkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB2LnN1YnN0cigwLCB2LmluZGV4T2YoJy4nKSkgKyBcImtcIjtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG9wdGlvbnMubWF4XG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdC5zdHlsZSgnZm9udC1zaXplJywgb3B0aW9ucy5oZWlnaHQgLyAyLjUpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuXHRcdFx0XHRcdFx0XHQuYXR0cigneScsICcuMzVlbScpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCdpZCcsICd1cHBlclZhbHVlJyk7XG5cblx0XHRcdFx0XHRcdGxpbmUuYXR0cigneDEnLCBvcHRpb25zLndpZHRoIC8gMilcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3kxJywgMClcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3gyJywgb3B0aW9ucy53aWR0aCAvIDIpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCd5MicsIG9wdGlvbnMuaGVpZ2h0KVxuXHRcdFx0XHRcdFx0XHQuYXR0cignc3Ryb2tlLWRhc2hhcnJheScsICczLDMnKVxuXHRcdFx0XHRcdFx0XHQuYXR0cignc3Ryb2tlLXdpZHRoJywgMSlcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3N0cm9rZScsICdyZ2JhKDAsMCwwLDg3KScpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGhhbmRsZUNvbnRcblx0XHRcdFx0XHQvLy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBvcHRpb25zLmhlaWdodCAvIDIgKyBcIilcIilcblx0XHRcdFx0XHRcdC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHNoYWRvd0ludGVuc2l0eS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjAwKS5hdHRyKCdzdGREZXZpYXRpb24nLCAyKTtcblxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdC5vbignbW91c2VvdXQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0c2hhZG93SW50ZW5zaXR5LnRyYW5zaXRpb24oKS5kdXJhdGlvbigyMDApLmF0dHIoJ3N0ZERldmlhdGlvbicsIDEpO1xuXG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdGhhbmRsZVxuXHRcdFx0XHRcdFx0LmF0dHIoXCJyXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5zaG93VmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gKChvcHRpb25zLmhlaWdodCAvIDIpICsgb3B0aW9ucy5oZWlnaHQgLyAxMCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIG9wdGlvbnMuaGVpZ2h0IC8gNDtcblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMuY29sb3IpIHtcblx0XHRcdFx0XHRcdGhhbmRsZS5zdHlsZSgnZmlsbCcsICcjZmZmJyAvKm9wdGlvbnMuY29sb3IqLyApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAob3B0aW9ucy5zaG93VmFsdWUpIHtcblx0XHRcdFx0XHRcdGhhbmRsZUxhYmVsXG5cdFx0XHRcdFx0XHRcdC5zdHlsZSgnZm9udC1zaXplJywgb3B0aW9ucy5oZWlnaHQgLyAyLjUpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikuYXR0cigneScsICcwLjM1ZW0nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG5nTW9kZWwuJG1vZGVsVmFsdWUpIHtcblx0XHRcdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVMYWJlbC50ZXh0KGxhYmVsaW5nKG5nTW9kZWwuJG1vZGVsVmFsdWVbb3B0aW9ucy5maWVsZF0pKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGhhbmRsZUNvbnQudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCkuZWFzZSgncXVhZCcpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgJ3RyYW5zbGF0ZSgnICsgeChuZ01vZGVsLiRtb2RlbFZhbHVlW29wdGlvbnMuZmllbGRdKSArICcsJyArIG9wdGlvbnMuaGVpZ2h0IC8gMiArICcpJyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVMYWJlbC50ZXh0KDApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vc2xpZGVyXG5cdFx0XHRcdC8vLmNhbGwoYnJ1c2guZXh0ZW50KFswLCAwXSkpXG5cdFx0XHRcdC8vLmNhbGwoYnJ1c2guZXZlbnQpO1xuXHRcdFx0XHRmdW5jdGlvbiByb3VuZGVkX3JlY3QoeCwgeSwgdywgaCwgciwgdGwsIHRyLCBibCwgYnIpIHtcblx0XHRcdFx0XHR2YXIgcmV0dmFsO1xuXHRcdFx0XHRcdHJldHZhbCA9IFwiTVwiICsgKHggKyByKSArIFwiLFwiICsgeTtcblx0XHRcdFx0XHRyZXR2YWwgKz0gXCJoXCIgKyAodyAtIDIgKiByKTtcblx0XHRcdFx0XHRpZiAodHIpIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcImFcIiArIHIgKyBcIixcIiArIHIgKyBcIiAwIDAgMSBcIiArIHIgKyBcIixcIiArIHI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcImhcIiArIHI7XG5cdFx0XHRcdFx0XHRyZXR2YWwgKz0gXCJ2XCIgKyByO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR2YWwgKz0gXCJ2XCIgKyAoaCAtIDIgKiByKTtcblx0XHRcdFx0XHRpZiAoYnIpIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcImFcIiArIHIgKyBcIixcIiArIHIgKyBcIiAwIDAgMSBcIiArIC1yICsgXCIsXCIgKyByO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR2YWwgKz0gXCJ2XCIgKyByO1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiaFwiICsgLXI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHZhbCArPSBcImhcIiArICgyICogciAtIHcpO1xuXHRcdFx0XHRcdGlmIChibCkge1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMCAxIFwiICsgLXIgKyBcIixcIiArIC1yO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR2YWwgKz0gXCJoXCIgKyAtcjtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcInZcIiArIC1yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR2YWwgKz0gXCJ2XCIgKyAoMiAqIHIgLSBoKTtcblx0XHRcdFx0XHRpZiAodGwpIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcImFcIiArIHIgKyBcIixcIiArIHIgKyBcIiAwIDAgMSBcIiArIHIgKyBcIixcIiArIC1yO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR2YWwgKz0gXCJ2XCIgKyAtcjtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcImhcIiArIHI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHZhbCArPSBcInpcIjtcblx0XHRcdFx0XHRyZXR1cm4gcmV0dmFsO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZnVuY3Rpb24gbGFiZWxpbmcodmFsdWUpIHtcblx0XHRcdFx0XHRpZiAocGFyc2VJbnQodmFsdWUpID4gMTAwMCkge1xuXHRcdFx0XHRcdFx0dmFyIHYgPSAocGFyc2VJbnQodmFsdWUpIC8gMTAwMCkudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdHJldHVybiB2LnN1YnN0cigwLCB2LmluZGV4T2YoJy4nKSkgKyBcImtcIjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KHZhbHVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmdW5jdGlvbiBicnVzaCgpIHtcblx0XHRcdFx0XHR2YXIgdmFsdWUgPSBicnVzaC5leHRlbnQoKVswXTtcblxuXHRcdFx0XHRcdGlmIChkMy5ldmVudC5zb3VyY2VFdmVudCkge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSB4LmludmVydChkMy5tb3VzZSh0aGlzKVswXSk7XG5cdFx0XHRcdFx0XHRicnVzaC5leHRlbnQoW3ZhbHVlLCB2YWx1ZV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAob3B0aW9ucy5zaG93VmFsdWUpIHtcblx0XHRcdFx0XHRcdGhhbmRsZUxhYmVsLnRleHQobGFiZWxpbmcodmFsdWUpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aGFuZGxlQ29udC5hdHRyKFwidHJhbnNmb3JtXCIsICd0cmFuc2xhdGUoJyArIHgodmFsdWUpICsgJywnICsgb3B0aW9ucy5oZWlnaHQgLyAyICsgJyknKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZ1bmN0aW9uIGJydXNoZWQoKSB7XG5cdFx0XHRcdFx0dmFyIGNvdW50ID0gMDtcblx0XHRcdFx0XHR2YXIgZm91bmQgPSBmYWxzZTtcblx0XHRcdFx0XHR2YXIgZmluYWwgPSBcIlwiO1xuXHRcdFx0XHRcdHZhciB2YWx1ZSA9IGJydXNoLmV4dGVudCgpWzBdO1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZGF0YSwgZnVuY3Rpb24obmF0LCBrZXkpIHtcblxuXHRcdFx0XHRcdFx0aWYgKHBhcnNlSW50KG5hdFtvcHRpb25zLmZpZWxkXSkgPT0gcGFyc2VJbnQodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdGZpbmFsID0gbmF0O1xuXHRcdFx0XHRcdFx0XHRmb3VuZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdC8vIGlmKCFmaW5hbCl7XG5cdFx0XHRcdFx0Ly8gXHRkbyB7XG5cdFx0XHRcdFx0Ly8gXHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZGF0YSwgZnVuY3Rpb24gKG5hdCwga2V5KSB7XG5cdFx0XHRcdFx0Ly8gXHRcdFx0aWYgKHBhcnNlSW50KG5hdFtvcHRpb25zLmZpZWxkXSkgPT0gcGFyc2VJbnQodmFsdWUpKSB7XG5cdFx0XHRcdFx0Ly8gXHRcdFx0XHRmaW5hbCA9IG5hdDtcblx0XHRcdFx0XHQvLyBcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0XHQvLyBcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gXHRcdH0pO1xuXHRcdFx0XHRcdC8vIFx0XHRjb3VudCsrO1xuXHRcdFx0XHRcdC8vIFx0XHR2YWx1ZSA9IHZhbHVlID4gKG1heCAvIDIpID8gdmFsdWUgLSAxIDogdmFsdWUgKyAxO1xuXHRcdFx0XHRcdC8vIFx0fSB3aGlsZSAoIWZvdW5kICYmIGNvdW50IDwgbWF4KTtcblx0XHRcdFx0XHQvLyB9XG5cblxuXHRcdFx0XHRcdGlmIChmaW5hbCkge1xuXHRcdFx0XHRcdFx0bmdNb2RlbC4kc2V0Vmlld1ZhbHVlKGZpbmFsKTtcblx0XHRcdFx0XHRcdG5nTW9kZWwuJHJlbmRlcigpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblxuXHRcdFx0XHQkc2NvcGUuJHdhdGNoKCdvcHRpb25zJywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0XHRcdGlmIChuID09PSBvKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG9wdGlvbnMuY29sb3JzWzFdLmNvbG9yID0gbi5jb2xvcjtcblx0XHRcdFx0XHRncmFkaWVudCA9IHN2Zy5hcHBlbmQoJ3N2ZzpkZWZzJylcblx0XHRcdFx0XHRcdC5hcHBlbmQoXCJzdmc6bGluZWFyR3JhZGllbnRcIilcblx0XHRcdFx0XHRcdC5hdHRyKCdpZCcsIG9wdGlvbnMuZmllbGQgKyBcIl9cIiArIG4uY29sb3IpXG5cdFx0XHRcdFx0XHQuYXR0cigneDEnLCAnMCUnKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ3kxJywgJzAlJylcblx0XHRcdFx0XHRcdC5hdHRyKCd4MicsICcxMDAlJylcblx0XHRcdFx0XHRcdC5hdHRyKCd5MicsICcwJScpXG5cdFx0XHRcdFx0XHQuYXR0cignc3ByZWFkTWV0aG9kJywgJ3BhZCcpXG5cdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKG9wdGlvbnMuY29sb3JzLCBmdW5jdGlvbihjb2xvcikge1xuXHRcdFx0XHRcdFx0Z3JhZGllbnQuYXBwZW5kKCdzdmc6c3RvcCcpXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCdvZmZzZXQnLCBjb2xvci5wb3NpdGlvbiArICclJylcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3N0b3AtY29sb3InLCBjb2xvci5jb2xvcilcblx0XHRcdFx0XHRcdFx0LmF0dHIoJ3N0b3Atb3BhY2l0eScsIGNvbG9yLm9wYWNpdHkpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHJlY3Quc3R5bGUoJ2ZpbGwnLCAndXJsKCMnICsgb3B0aW9ucy5maWVsZCArICdfJyArIG4uY29sb3IgKyAnKScpO1xuXHRcdFx0XHRcdGhhbmRsZS5zdHlsZSgnZmlsbCcsIG4uY29sb3IpO1xuXG5cdFx0XHRcdFx0aWYgKG5nTW9kZWwuJG1vZGVsVmFsdWUpIHtcblx0XHRcdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVMYWJlbC50ZXh0KGxhYmVsaW5nKG5nTW9kZWwuJG1vZGVsVmFsdWVbMF1bbi5maWVsZF0pKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGhhbmRsZUNvbnQudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCkuZWFzZSgncXVhZCcpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgJ3RyYW5zbGF0ZSgnICsgeChuZ01vZGVsLiRtb2RlbFZhbHVlLmRhdGFbMF1bbi5maWVsZF0pICsgJywnICsgb3B0aW9ucy5oZWlnaHQgLyAyICsgJyknKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMuc2hvd1ZhbHVlKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZUxhYmVsLnRleHQoMCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0sIHRydWUpO1xuXHRcdFx0XHQkc2NvcGUuJHdhdGNoKFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5nTW9kZWwuJG1vZGVsVmFsdWU7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmdW5jdGlvbihuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcblxuXHRcdFx0XHRcdFx0aWYgKCFuZXdWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5zaG93VmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0XHRoYW5kbGVMYWJlbC50ZXh0KHBhcnNlSW50KDApKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRoYW5kbGVDb250LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgJ3RyYW5zbGF0ZSgnICsgeCgwKSArICcsJyArIG9wdGlvbnMuaGVpZ2h0IC8gMiArICcpJyk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRoYW5kbGVMYWJlbC50ZXh0KGxhYmVsaW5nKG5ld1ZhbHVlW29wdGlvbnMuZmllbGRdKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAobmV3VmFsdWUgPT0gb2xkVmFsdWUpIHtcblx0XHRcdFx0XHRcdFx0aGFuZGxlQ29udC5hdHRyKFwidHJhbnNmb3JtXCIsICd0cmFuc2xhdGUoJyArIHgobmV3VmFsdWVbb3B0aW9ucy5maWVsZF0pICsgJywnICsgb3B0aW9ucy5oZWlnaHQgLyAyICsgJyknKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZUNvbnQudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwMCkuZWFzZSgncXVhZCcpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgJ3RyYW5zbGF0ZSgnICsgeChuZXdWYWx1ZVtvcHRpb25zLmZpZWxkXSkgKyAnLCcgKyBvcHRpb25zLmhlaWdodCAvIDIgKyAnKScpO1xuXG5cdFx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHQkc2NvcGUuJHdhdGNoKCdkYXRhJywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0XHRcdGlmIChuID09PSBvKSByZXR1cm4gZmFsc2U7XG5cblx0XHRcdFx0XHRvcHRpb25zLm1pbiA9IDA7XG5cdFx0XHRcdFx0b3B0aW9ucy5tYXggPSAwO1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZGF0YSwgZnVuY3Rpb24obmF0LCBrZXkpIHtcblx0XHRcdFx0XHRcdGlmICghJHNjb3BlLm9wdGlvbnMubWF4KSB7XG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMubWF4ID0gZDMubWF4KFtvcHRpb25zLm1heCwgcGFyc2VJbnQobmF0W29wdGlvbnMuZmllbGRdKV0pO1xuXHRcdFx0XHRcdFx0XHRvcHRpb25zLm1pbiA9IGQzLm1pbihbb3B0aW9ucy5taW4sIHBhcnNlSW50KG5hdFtvcHRpb25zLmZpZWxkXSldKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChuYXQuaXNvID09IG5nTW9kZWwuJG1vZGVsVmFsdWUuaXNvKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdGhhbmRsZUxhYmVsLnRleHQobGFiZWxpbmcobmF0LmRhdGFbMF1bb3B0aW9ucy5maWVsZF0pKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRoYW5kbGVDb250LnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApLmVhc2UoJ3F1YWQnKS5hdHRyKFwidHJhbnNmb3JtXCIsICd0cmFuc2xhdGUoJyArIHgobmF0LmRhdGFbMF1bb3B0aW9ucy5maWVsZF0pICsgJywnICsgb3B0aW9ucy5oZWlnaHQgLyAyICsgJyknKTtcblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0eCA9IGQzLnNjYWxlLmxpbmVhcigpXG5cdFx0XHRcdFx0XHQuZG9tYWluKFtvcHRpb25zLm1pbiwgb3B0aW9ucy5tYXhdKVxuXHRcdFx0XHRcdFx0LnJhbmdlKFtvcHRpb25zLm1hcmdpbi5sZWZ0LCBvcHRpb25zLndpZHRoIC0gb3B0aW9ucy5tYXJnaW4ubGVmdF0pXG5cdFx0XHRcdFx0XHQuY2xhbXAodHJ1ZSk7XG5cdFx0XHRcdFx0Ly8gYnJ1c2gueCh4KVxuXHRcdFx0XHRcdC8vIFx0LmV4dGVudChbMCwgMF0pXG5cdFx0XHRcdFx0Ly8gXHQub24oXCJicnVzaFwiLCBicnVzaClcblx0XHRcdFx0XHQvLyBcdC5vbihcImJydXNoZW5kXCIsIGJydXNoZWQpO1xuXHRcdFx0XHRcdGxlZ2VuZC5zZWxlY3QoJyNsb3dlclZhbHVlJykudGV4dChtaW4pO1xuXHRcdFx0XHRcdGxlZ2VuZDIuc2VsZWN0KCcjdXBwZXJWYWx1ZScpLnRleHQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQvL1RET0RPOiBDSGNraWNrIGlmIG5vIGNvbW1hIHRoZXJlXG5cdFx0XHRcdFx0XHRpZiAob3B0aW9ucy5tYXggPiAxMDAwKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB2ID0gKHBhcnNlSW50KG9wdGlvbnMubWF4KSAvIDEwMDApLnRvU3RyaW5nKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB2LnN1YnN0cigwLCB2LmluZGV4T2YoJy4nKSkgKyBcImtcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiBvcHRpb25zLm1heFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZGF0YSwgZnVuY3Rpb24obmF0LCBrZXkpIHtcblx0XHRcdFx0XHRcdGlmIChuYXQuaXNvID09IG5nTW9kZWwuJG1vZGVsVmFsdWUuaXNvKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvcHRpb25zLnNob3dWYWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdGhhbmRsZUxhYmVsLnRleHQobGFiZWxpbmcobmF0LmRhdGFbMF1bb3B0aW9ucy5maWVsZF0pKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRoYW5kbGVDb250LnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApLmVhc2UoJ3F1YWQnKS5hdHRyKFwidHJhbnNmb3JtXCIsICd0cmFuc2xhdGUoJyArIHgobmF0LmRhdGFbMF1bb3B0aW9ucy5maWVsZF0pICsgJywnICsgb3B0aW9ucy5oZWlnaHQgLyAyICsgJyknKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR9KTtcblx0XHRcdFx0JHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy53aWR0aCA9IGVsZW1lbnQucGFyZW50KClbMF0uY2xpZW50V2lkdGggLSBvcHRpb25zLm1hcmdpbi5sZWZ0IC0gb3B0aW9ucy5tYXJnaW4ucmlnaHQ7XG5cdFx0XHRcdFx0XHQvL29wdGlvbnMuaGVpZ2h0ID0gb3B0aW9ucy53aWR0aCAvIDIwO1xuXHRcdFx0XHRcdFx0ZHJhdygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyAkdGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBcdG9wdGlvbnMud2lkdGggPSBlbGVtZW50LnBhcmVudCgpWzBdLmNsaWVudFdpZHRoIC0gb3B0aW9ucy5tYXJnaW4ubGVmdCAtIG9wdGlvbnMubWFyZ2luLnJpZ2h0O1xuXHRcdFx0XHRcdC8vIFx0Ly9vcHRpb25zLmhlaWdodCA9IG9wdGlvbnMud2lkdGggLyAyMDtcblx0XHRcdFx0XHQvLyBcdGRyYXcoKTtcblx0XHRcdFx0XHQvLyB9LCAyNTApXG5cdFx0XHRcdCRzY29wZS4kd2F0Y2goJGF0dHJzLm5nSWYsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0b3B0aW9ucy53aWR0aCA9IGVsZW1lbnQucGFyZW50KClbMF0uY2xpZW50V2lkdGggLSBvcHRpb25zLm1hcmdpbi5sZWZ0IC0gb3B0aW9ucy5tYXJnaW4ucmlnaHQ7XG5cblx0XHRcdFx0XHRcdGRyYXcoKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGRyYXcoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdNZWRpYW5DdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ3BhbmVscycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9wYW5lbHMvcGFuZWxzLmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1BhbmVsc0N0cmwnLFxuXHRcdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRcdC8vXG5cdFx0XHRcdHZhciBwcm9qZWN0c0NvbnRhaW5lciA9IGVsZW1lbnQubmV4dCgpLFxuXHRcdFx0XHRcdHByb2plY3RzUHJldmlld1dyYXBwZXIgPSBlbGVtZW50LmZpbmQoJ3VsJyksXG5cdFx0XHRcdFx0cHJvamVjdFByZXZpZXdzID0gcHJvamVjdHNQcmV2aWV3V3JhcHBlci5jaGlsZHJlbignbGknKSxcblx0XHRcdFx0XHRwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jZC1wcm9qZWN0cycpLFxuXHRcdFx0XHRcdG5hdmlnYXRpb25UcmlnZ2VyID0gYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jZC1uYXYtdHJpZ2dlcicpKSxcblx0XHRcdFx0XHRuYXZpZ2F0aW9uID0gZWxlbWVudC5maW5kKCduYXYnKTtcblx0XHRcdFx0XHQvL2lmIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IENTUyB0cmFuc2l0aW9ucy4uLlxuXHRcdFx0XHRcdC8vdHJhbnNpdGlvbnNOb3RTdXBwb3J0ZWQgPSAoJCgnLm5vLWNzc3RyYW5zaXRpb25zJykubGVuZ3RoID4gMCk7XG5cblx0XHRcdFx0dmFyIGFuaW1hdGluZyA9IGZhbHNlLFxuXHRcdFx0XHRcdC8vd2lsbCBiZSB1c2VkIHRvIGV4dHJhY3QgcmFuZG9tIG51bWJlcnMgZm9yIHByb2plY3RzIHNsaWRlIHVwL3NsaWRlIGRvd24gZWZmZWN0XG5cdFx0XHRcdFx0bnVtUmFuZG9tcyA9IHByb2plY3RzLnF1ZXJ5U2VsZWN0b3IoJ2xpJykubGVuZ3RoLFxuXHRcdFx0XHRcdHVuaXF1ZVJhbmRvbXMgPSBbXTtcblxuXHRcdFx0XHQvL29wZW4gcHJvamVjdFxuXHRcdFx0XHRwcm9qZWN0c1ByZXZpZXdXcmFwcGVyLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRpZiAoYW5pbWF0aW5nID09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRhbmltYXRpbmcgPSB0cnVlO1xuXHRcdFx0XHRcdFx0bmF2aWdhdGlvblRyaWdnZXIuYWRkKHByb2plY3RzQ29udGFpbmVyKS5hZGRDbGFzcygncHJvamVjdC1vcGVuJyk7XG5cdFx0XHRcdFx0XHRvcGVuUHJvamVjdCgkKHRoaXMpLnBhcmVudCgnbGknKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBuYXZpZ2F0aW9uVHJpZ2dlci5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0XHQvLyBcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdC8vXG5cdFx0XHRcdC8vIFx0aWYgKGFuaW1hdGluZyA9PSBmYWxzZSkge1xuXHRcdFx0XHQvLyBcdFx0YW5pbWF0aW5nID0gdHJ1ZTtcblx0XHRcdFx0Ly8gXHRcdGlmIChuYXZpZ2F0aW9uVHJpZ2dlci5oYXNDbGFzcygncHJvamVjdC1vcGVuJykpIHtcblx0XHRcdFx0Ly8gXHRcdFx0Ly9jbG9zZSB2aXNpYmxlIHByb2plY3Rcblx0XHRcdFx0Ly8gXHRcdFx0bmF2aWdhdGlvblRyaWdnZXIuYWRkKHByb2plY3RzQ29udGFpbmVyKS5yZW1vdmVDbGFzcygncHJvamVjdC1vcGVuJyk7XG5cdFx0XHRcdC8vIFx0XHRcdGNsb3NlUHJvamVjdCgpO1xuXHRcdFx0XHQvLyBcdFx0fSBlbHNlIGlmIChuYXZpZ2F0aW9uVHJpZ2dlci5oYXNDbGFzcygnbmF2LXZpc2libGUnKSkge1xuXHRcdFx0XHQvLyBcdFx0XHQvL2Nsb3NlIG1haW4gbmF2aWdhdGlvblxuXHRcdFx0XHQvLyBcdFx0XHRuYXZpZ2F0aW9uVHJpZ2dlci5yZW1vdmVDbGFzcygnbmF2LXZpc2libGUnKTtcblx0XHRcdFx0Ly8gXHRcdFx0bmF2aWdhdGlvbi5yZW1vdmVDbGFzcygnbmF2LWNsaWNrYWJsZSBuYXYtdmlzaWJsZScpO1xuXHRcdFx0XHQvLyBcdFx0XHRpZiAodHJhbnNpdGlvbnNOb3RTdXBwb3J0ZWQpIHByb2plY3RQcmV2aWV3cy5yZW1vdmVDbGFzcygnc2xpZGUtb3V0Jyk7XG5cdFx0XHRcdC8vIFx0XHRcdGVsc2Ugc2xpZGVUb2dnbGVQcm9qZWN0cyhwcm9qZWN0c1ByZXZpZXdXcmFwcGVyLmNoaWxkcmVuKCdsaScpLCAtMSwgMCwgZmFsc2UpO1xuXHRcdFx0XHQvLyBcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gXHRcdFx0Ly9vcGVuIG1haW4gbmF2aWdhdGlvblxuXHRcdFx0XHQvLyBcdFx0XHRuYXZpZ2F0aW9uVHJpZ2dlci5hZGRDbGFzcygnbmF2LXZpc2libGUnKTtcblx0XHRcdFx0Ly8gXHRcdFx0bmF2aWdhdGlvbi5hZGRDbGFzcygnbmF2LXZpc2libGUnKTtcblx0XHRcdFx0Ly8gXHRcdFx0aWYgKHRyYW5zaXRpb25zTm90U3VwcG9ydGVkKSBwcm9qZWN0UHJldmlld3MuYWRkQ2xhc3MoJ3NsaWRlLW91dCcpO1xuXHRcdFx0XHQvLyBcdFx0XHRlbHNlIHNsaWRlVG9nZ2xlUHJvamVjdHMocHJvamVjdHNQcmV2aWV3V3JhcHBlci5jaGlsZHJlbignbGknKSwgLTEsIDAsIHRydWUpO1xuXHRcdFx0XHQvLyBcdFx0fVxuXHRcdFx0XHQvLyBcdH1cblx0XHRcdFx0Ly9cblx0XHRcdFx0Ly8gXHRpZiAodHJhbnNpdGlvbnNOb3RTdXBwb3J0ZWQpIGFuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0XHQvLyB9KTtcblxuXHRcdFx0XHQvL3Njcm9sbCBkb3duIHRvIHByb2plY3QgaW5mb1xuXHRcdFx0XHQvLyBwcm9qZWN0c0NvbnRhaW5lci5vbignY2xpY2snLCAnLnNjcm9sbCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBcdHByb2plY3RzQ29udGFpbmVyLmFuaW1hdGUoe1xuXHRcdFx0XHQvLyBcdFx0J3Njcm9sbFRvcCc6ICR3aW5kb3cuaGVpZ2h0KClcblx0XHRcdFx0Ly8gXHR9LCA1MDApO1xuXHRcdFx0XHQvLyB9KTtcblxuXHRcdFx0XHQvL2NoZWNrIGlmIGJhY2tncm91bmQtaW1hZ2VzIGhhdmUgYmVlbiBsb2FkZWQgYW5kIHNob3cgcHJvamVjdCBwcmV2aWV3c1xuXHRcdFx0XHQvLyBwcm9qZWN0UHJldmlld3MuY2hpbGRyZW4oJ2EnKS5iZ0xvYWRlZCh7XG5cdFx0XHRcdC8vIFx0YWZ0ZXJMb2FkZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBcdFx0c2hvd1ByZXZpZXcocHJvamVjdFByZXZpZXdzLmVxKDApKTtcblx0XHRcdFx0Ly8gXHR9XG5cdFx0XHRcdC8vIH0pO1xuXG5cdFx0XHRcdGZ1bmN0aW9uIHNob3dQcmV2aWV3KHByb2plY3RQcmV2aWV3KSB7XG5cdFx0XHRcdFx0aWYgKHByb2plY3RQcmV2aWV3Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHByb2plY3RQcmV2aWV3LmFkZENsYXNzKCdiZy1sb2FkZWQnKTtcblx0XHRcdFx0XHRcdFx0c2hvd1ByZXZpZXcocHJvamVjdFByZXZpZXcubmV4dCgpKTtcblx0XHRcdFx0XHRcdH0sIDE1MCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZnVuY3Rpb24gb3BlblByb2plY3QocHJvamVjdFByZXZpZXcpIHtcblx0XHRcdFx0XHR2YXIgcHJvamVjdEluZGV4ID0gcHJvamVjdFByZXZpZXcuaW5kZXgoKTtcblx0XHRcdFx0XHRwcm9qZWN0cy5jaGlsZHJlbignbGknKS5lcShwcm9qZWN0SW5kZXgpLmFkZChwcm9qZWN0UHJldmlldykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG5cblx0XHRcdFx0XHRpZiAodHJhbnNpdGlvbnNOb3RTdXBwb3J0ZWQpIHtcblx0XHRcdFx0XHRcdHByb2plY3RQcmV2aWV3cy5hZGRDbGFzcygnc2xpZGUtb3V0JykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG5cdFx0XHRcdFx0XHRwcm9qZWN0cy5jaGlsZHJlbignbGknKS5lcShwcm9qZWN0SW5kZXgpLmFkZENsYXNzKCdjb250ZW50LXZpc2libGUnKTtcblx0XHRcdFx0XHRcdGFuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzbGlkZVRvZ2dsZVByb2plY3RzKHByb2plY3RQcmV2aWV3cywgcHJvamVjdEluZGV4LCAwLCB0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmdW5jdGlvbiBjbG9zZVByb2plY3QoKSB7XG5cdFx0XHRcdFx0cHJvamVjdHMuZmluZCgnLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJykub24oJ3dlYmtpdFRyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQgb1RyYW5zaXRpb25FbmQgbXNUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCQodGhpcykucmVtb3ZlQ2xhc3MoJ2NvbnRlbnQtdmlzaWJsZScpLm9mZignd2Via2l0VHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCBvVHJhbnNpdGlvbkVuZCBtc1RyYW5zaXRpb25FbmQgdHJhbnNpdGlvbmVuZCcpO1xuXHRcdFx0XHRcdFx0c2xpZGVUb2dnbGVQcm9qZWN0cyhwcm9qZWN0c1ByZXZpZXdXcmFwcGVyLmNoaWxkcmVuKCdsaScpLCAtMSwgMCwgZmFsc2UpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0Ly9pZiBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBDU1MgdHJhbnNpdGlvbnMuLi5cblx0XHRcdFx0XHRpZiAodHJhbnNpdGlvbnNOb3RTdXBwb3J0ZWQpIHtcblx0XHRcdFx0XHRcdHByb2plY3RQcmV2aWV3cy5yZW1vdmVDbGFzcygnc2xpZGUtb3V0Jyk7XG5cdFx0XHRcdFx0XHRwcm9qZWN0cy5maW5kKCcuY29udGVudC12aXNpYmxlJykucmVtb3ZlQ2xhc3MoJ2NvbnRlbnQtdmlzaWJsZScpO1xuXHRcdFx0XHRcdFx0YW5pbWF0aW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZnVuY3Rpb24gc2xpZGVUb2dnbGVQcm9qZWN0cyhwcm9qZWN0c1ByZXZpZXdXcmFwcGVyLCBwcm9qZWN0SW5kZXgsIGluZGV4LCBib29sKSB7XG5cdFx0XHRcdFx0aWYgKGluZGV4ID09IDApIGNyZWF0ZUFycmF5UmFuZG9tKCk7XG5cdFx0XHRcdFx0aWYgKHByb2plY3RJbmRleCAhPSAtMSAmJiBpbmRleCA9PSAwKSBpbmRleCA9IDE7XG5cblx0XHRcdFx0XHR2YXIgcmFuZG9tUHJvamVjdEluZGV4ID0gbWFrZVVuaXF1ZVJhbmRvbSgpO1xuXHRcdFx0XHRcdGlmIChyYW5kb21Qcm9qZWN0SW5kZXggPT0gcHJvamVjdEluZGV4KSByYW5kb21Qcm9qZWN0SW5kZXggPSBtYWtlVW5pcXVlUmFuZG9tKCk7XG5cblx0XHRcdFx0XHRpZiAoaW5kZXggPCBudW1SYW5kb21zIC0gMSkge1xuXHRcdFx0XHRcdFx0cHJvamVjdHNQcmV2aWV3V3JhcHBlci5lcShyYW5kb21Qcm9qZWN0SW5kZXgpLnRvZ2dsZUNsYXNzKCdzbGlkZS1vdXQnLCBib29sKTtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdC8vYW5pbWF0ZSBuZXh0IHByZXZpZXcgcHJvamVjdFxuXHRcdFx0XHRcdFx0XHRzbGlkZVRvZ2dsZVByb2plY3RzKHByb2plY3RzUHJldmlld1dyYXBwZXIsIHByb2plY3RJbmRleCwgaW5kZXggKyAxLCBib29sKTtcblx0XHRcdFx0XHRcdH0sIDE1MCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCA9PSBudW1SYW5kb21zIC0gMSkge1xuXHRcdFx0XHRcdFx0Ly90aGlzIGlzIHRoZSBsYXN0IHByb2plY3QgcHJldmlldyB0byBiZSBhbmltYXRlZFxuXHRcdFx0XHRcdFx0cHJvamVjdHNQcmV2aWV3V3JhcHBlci5lcShyYW5kb21Qcm9qZWN0SW5kZXgpLnRvZ2dsZUNsYXNzKCdzbGlkZS1vdXQnLCBib29sKS5vbmUoJ3dlYmtpdFRyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQgb1RyYW5zaXRpb25FbmQgbXNUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHByb2plY3RJbmRleCAhPSAtMSkge1xuXHRcdFx0XHRcdFx0XHRcdHByb2plY3RzLmNoaWxkcmVuKCdsaS5zZWxlY3RlZCcpLmFkZENsYXNzKCdjb250ZW50LXZpc2libGUnKTtcblx0XHRcdFx0XHRcdFx0XHRwcm9qZWN0c1ByZXZpZXdXcmFwcGVyLmVxKHByb2plY3RJbmRleCkuYWRkQ2xhc3MoJ3NsaWRlLW91dCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG5hdmlnYXRpb24uaGFzQ2xhc3MoJ25hdi12aXNpYmxlJykgJiYgYm9vbCkge1xuXHRcdFx0XHRcdFx0XHRcdG5hdmlnYXRpb24uYWRkQ2xhc3MoJ25hdi1jbGlja2FibGUnKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRwcm9qZWN0c1ByZXZpZXdXcmFwcGVyLmVxKHJhbmRvbVByb2plY3RJbmRleCkub2ZmKCd3ZWJraXRUcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kIG9UcmFuc2l0aW9uRW5kIG1zVHJhbnNpdGlvbkVuZCB0cmFuc2l0aW9uZW5kJyk7XG5cdFx0XHRcdFx0XHRcdGFuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly9odHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5MzUxNzU5L2phdmFzY3JpcHQtcmFuZG9tLW51bWJlci1vdXQtb2YtNS1uby1yZXBlYXQtdW50aWwtYWxsLWhhdmUtYmVlbi11c2VkXG5cdFx0XHRcdGZ1bmN0aW9uIG1ha2VVbmlxdWVSYW5kb20oKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdW5pcXVlUmFuZG9tcy5sZW5ndGgpO1xuXHRcdFx0XHRcdHZhciB2YWwgPSB1bmlxdWVSYW5kb21zW2luZGV4XTtcblx0XHRcdFx0XHQvLyBub3cgcmVtb3ZlIHRoYXQgdmFsdWUgZnJvbSB0aGUgYXJyYXlcblx0XHRcdFx0XHR1bmlxdWVSYW5kb21zLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGZ1bmN0aW9uIGNyZWF0ZUFycmF5UmFuZG9tKCkge1xuXHRcdFx0XHRcdC8vcmVzZXQgYXJyYXlcblx0XHRcdFx0XHR1bmlxdWVSYW5kb21zLmxlbmd0aCA9IDA7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBudW1SYW5kb21zOyBpKyspIHtcblx0XHRcdFx0XHRcdHVuaXF1ZVJhbmRvbXMucHVzaChpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdQYW5lbHNDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSggJ3BhcnNlQ29uZmxpY3RDc3YnLCBmdW5jdGlvbigkc3RhdGUsICR0aW1lb3V0LCB0b2FzdHIpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9wYXJzZUNvbmZsaWN0Q3N2L3BhcnNlQ29uZmxpY3RDc3YuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUGFyc2VDb25mbGljdENzdkN0cmwnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0bmF0aW9uczogJz0nLFxuXHRcdFx0XHRzdW06ICc9J1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdFx0dmFyIGVycm9ycyA9IDA7XG5cdFx0XHRcdHZhciBzdGVwcGVkID0gMCxcblx0XHRcdFx0XHRyb3dDb3VudCA9IDAsXG5cdFx0XHRcdFx0ZXJyb3JDb3VudCA9IDAsXG5cdFx0XHRcdFx0Zmlyc3RFcnJvcjtcblx0XHRcdFx0dmFyIHN0YXJ0LCBlbmQ7XG5cdFx0XHRcdHZhciBmaXJzdFJ1biA9IHRydWU7XG5cdFx0XHRcdHZhciBtYXhVbnBhcnNlTGVuZ3RoID0gMTAwMDA7XG5cdFx0XHRcdHZhciBidXR0b24gPSBlbGVtZW50LmZpbmQoJ2J1dHRvbicpO1xuXHRcdFx0XHR2YXIgaW5wdXQgPSBlbGVtZW50LmZpbmQoJ2lucHV0Jyk7XG5cdFx0XHRcdHZhciBpc1ZlcnRpY2FsID0gZmFsc2U7XG5cdFx0XHRcdHZhciByYXcgPSBbXTtcblx0XHRcdFx0dmFyIHJhd0xpc3QgPSB7fTtcblx0XHRcdFx0aW5wdXQuY3NzKHtcblx0XHRcdFx0XHRkaXNwbGF5OiAnbm9uZSdcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJ1dHRvbi5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpbnB1dFswXS5jbGljaygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aW5wdXQuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRpc1ZlcnRpY2FsID0gZmFsc2U7XG5cdFx0XHRcdFx0cmF3ID0gW107XG5cdFx0XHRcdFx0cmF3TGlzdCA9IHt9O1xuXG5cdFx0XHRcdFx0ZXJyb3JzID0gW107XG5cdFx0XHRcdFx0c3RlcHBlZCA9IDAsIHJvd0NvdW50ID0gMCwgZXJyb3JDb3VudCA9IDAsIGZpcnN0RXJyb3I7XG5cdFx0XHRcdFx0c3RhcnQsIGVuZDtcblx0XHRcdFx0XHRmaXJzdFJ1biA9IHRydWU7XG5cdFx0XHRcdFx0c2NvcGUubmF0aW9ucyA9IFtdO1xuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0dmFyIHNpemUgPSBpbnB1dFswXS5maWxlc1swXS5zaXplO1xuXHRcdFx0XHRcdFx0dmFyIGNzdiA9IFBhcGEucGFyc2UoaW5wdXRbMF0uZmlsZXNbMF0sIHtcblx0XHRcdFx0XHRcdFx0c2tpcEVtcHR5TGluZXM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGluZzogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZmFzdE1vZGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdHN0ZXA6IGZ1bmN0aW9uIChyb3cpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgbnVtYmVycyA9IHJvdy5kYXRhWzBdLmNvbmZsaWN0cy5tYXRjaCgvWzAtOV0rL2cpLm1hcChmdW5jdGlvbihuKVxuXHRcdFx0XHRcdFx0XHRcdHsvL2p1c3QgY29lcmNlIHRvIG51bWJlcnNcblx0XHRcdFx0XHRcdFx0XHQgICAgcmV0dXJuICsobik7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0cm93LmRhdGFbMF0uZXZlbnRzID0gbnVtYmVycztcblx0XHRcdFx0XHRcdFx0XHRzY29wZS5zdW0gKz0gbnVtYmVycy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRcdFx0c2NvcGUubmF0aW9ucy5wdXNoKHJvdy5kYXRhWzBdKTtcblxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRjb21wbGV0ZTpmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0XHRcdHNjb3BlLiRhcHBseSgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ1BhcnNlQ29uZmxpY3RDc3ZDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSggJ3BhcnNlQ29uZmxpY3RFdmVudHNDc3YnLCBmdW5jdGlvbigkc3RhdGUsICR0aW1lb3V0LCB0b2FzdHIpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9wYXJzZUNvbmZsaWN0RXZlbnRzQ3N2L3BhcnNlQ29uZmxpY3RFdmVudHNDc3YuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUGFyc2VDb25mbGljdEV2ZW50c0NzdkN0cmwnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0ZXZlbnRzOiAnPScsXG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24oIHNjb3BlLCBlbGVtZW50LCBhdHRycyApe1xuXHRcdFx0XHQvL1xuXHRcdFx0XHR2YXIgZXJyb3JzID0gMDtcblx0XHRcdFx0dmFyIHN0ZXBwZWQgPSAwLFxuXHRcdFx0XHRcdHJvd0NvdW50ID0gMCxcblx0XHRcdFx0XHRlcnJvckNvdW50ID0gMCxcblx0XHRcdFx0XHRmaXJzdEVycm9yO1xuXHRcdFx0XHR2YXIgc3RhcnQsIGVuZDtcblx0XHRcdFx0dmFyIGZpcnN0UnVuID0gdHJ1ZTtcblx0XHRcdFx0dmFyIG1heFVucGFyc2VMZW5ndGggPSAxMDAwMDtcblx0XHRcdFx0dmFyIGJ1dHRvbiA9IGVsZW1lbnQuZmluZCgnYnV0dG9uJyk7XG5cdFx0XHRcdHZhciBpbnB1dCA9IGVsZW1lbnQuZmluZCgnaW5wdXQnKTtcblx0XHRcdFx0dmFyIGlzVmVydGljYWwgPSBmYWxzZTtcblx0XHRcdFx0dmFyIHJhdyA9IFtdO1xuXHRcdFx0XHR2YXIgcmF3TGlzdCA9IHt9O1xuXHRcdFx0XHRpbnB1dC5jc3Moe1xuXHRcdFx0XHRcdGRpc3BsYXk6ICdub25lJ1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnV0dG9uLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlucHV0WzBdLmNsaWNrKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpbnB1dC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdGlzVmVydGljYWwgPSBmYWxzZTtcblx0XHRcdFx0XHRyYXcgPSBbXTtcblx0XHRcdFx0XHRyYXdMaXN0ID0ge307XG5cdHNjb3BlLmV2ZW50cyA9IFtdO1xuXHRcdFx0XHRcdGVycm9ycyA9IFtdO1xuXHRcdFx0XHRcdHN0ZXBwZWQgPSAwLCByb3dDb3VudCA9IDAsIGVycm9yQ291bnQgPSAwLCBmaXJzdEVycm9yO1xuXHRcdFx0XHRcdHN0YXJ0LCBlbmQ7XG5cdFx0XHRcdFx0Zmlyc3RSdW4gPSB0cnVlO1xuXHRcdFx0XHRcdCR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0dmFyIHNpemUgPSBpbnB1dFswXS5maWxlc1swXS5zaXplO1xuXHRcdFx0XHRcdFx0dmFyIGNzdiA9IFBhcGEucGFyc2UoaW5wdXRbMF0uZmlsZXNbMF0sIHtcblx0XHRcdFx0XHRcdFx0c2tpcEVtcHR5TGluZXM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGluZzogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZmFzdE1vZGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdHN0ZXA6IGZ1bmN0aW9uIChyb3cpIHtcblx0XHRcdFx0XHRcdFx0XHRzd2l0Y2ggKHJvdy5kYXRhWzBdLnR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNhc2UgJ2ludGVyc3RhdGUnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyb3cuZGF0YVswXS50eXBlX2lkID0gMTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRjYXNlICdpbnRyYXN0YXRlJzpcblx0XHRcdFx0XHRcdFx0XHRcdFx0cm93LmRhdGFbMF0udHlwZV9pZCA9IDI7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2FzZSAnc3Vic3RhdGUnOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyb3cuZGF0YVswXS50eXBlX2lkID0gMztcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmKHJvdy5lcnJvcnMubGVuZ3RoID09IDApe1xuXHRcdFx0XHRcdFx0XHRcdFx0c2NvcGUuZXZlbnRzLnB1c2gocm93LmRhdGFbMF0pO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRlbHNle1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2cocm93KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlOmZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRcdFx0c2NvcGUuJGFwcGx5KCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnUGFyc2VDb25mbGljdEV2ZW50c0NzdkN0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ3BhcnNlY3N2JywgZnVuY3Rpb24gKCRzdGF0ZSwgJHRpbWVvdXQsIHRvYXN0ciwgSW5kZXhTZXJ2aWNlKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvcGFyc2Vjc3YvcGFyc2Vjc3YuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnUGFyc2Vjc3ZDdHJsJyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtZW50LCAkYXR0cnMpIHtcblx0XHRcdFx0Ly9cblx0XHRcdFx0dmFyIGVycm9ycyA9IDA7XG5cdFx0XHRcdHZhciBzdGVwcGVkID0gMCxcblx0XHRcdFx0XHRyb3dDb3VudCA9IDAsXG5cdFx0XHRcdFx0ZXJyb3JDb3VudCA9IDAsXG5cdFx0XHRcdFx0Zmlyc3RFcnJvcjtcblx0XHRcdFx0dmFyIHN0YXJ0LCBlbmQ7XG5cdFx0XHRcdHZhciBmaXJzdFJ1biA9IHRydWU7XG5cdFx0XHRcdHZhciBtYXhVbnBhcnNlTGVuZ3RoID0gMTAwMDA7XG5cdFx0XHRcdHZhciBidXR0b24gPSBlbGVtZW50LmZpbmQoJ2J1dHRvbicpO1xuXHRcdFx0XHR2YXIgaW5wdXQgPSBlbGVtZW50LmZpbmQoJ2lucHV0Jyk7XG5cdFx0XHRcdHZhciBpc1ZlcnRpY2FsID0gZmFsc2U7XG5cdFx0XHRcdHZhciByYXcgPSBbXTtcblx0XHRcdFx0dmFyIHJhd0xpc3QgPSB7fTtcblx0XHRcdFx0aW5wdXQuY3NzKHtcblx0XHRcdFx0XHRkaXNwbGF5OiAnbm9uZSdcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGJ1dHRvbi5iaW5kKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpbnB1dFswXS5jbGljaygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aW5wdXQuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRpc1ZlcnRpY2FsID0gZmFsc2U7XG5cdFx0XHRcdFx0cmF3ID0gW107XG5cdFx0XHRcdFx0cmF3TGlzdCA9IHt9O1xuXG5cdFx0XHRcdFx0ZXJyb3JzID0gW107XG5cdFx0XHRcdFx0c3RlcHBlZCA9IDAsIHJvd0NvdW50ID0gMCwgZXJyb3JDb3VudCA9IDAsIGZpcnN0RXJyb3I7XG5cdFx0XHRcdFx0c3RhcnQsIGVuZDtcblx0XHRcdFx0XHRmaXJzdFJ1biA9IHRydWU7XG5cdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLmNsZWFyKCk7XG5cdFx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKFBhcGEpO1xuXHRcdFx0XHRcdFx0dmFyIHNpemUgPSBpbnB1dFswXS5maWxlc1swXS5zaXplO1xuXHRcdFx0XHRcdFx0dmFyIGNzdiA9IFBhcGEucGFyc2UoaW5wdXRbMF0uZmlsZXNbMF0sIHtcblx0XHRcdFx0XHRcdFx0c2tpcEVtcHR5TGluZXM6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGhlYWRlcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZHluYW1pY1R5cGluZzogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0ZmFzdE1vZGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdHdvcmtlcjogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdC8vSUYgXCJzdGVwXCIgaW5zdGVhZCBvZiBcImNodW5rXCIgPiBjaHVuayA9IHJvdyBhbmQgY2h1bmsuZGF0YSA9IHJvdy5kYXRhWzBdXG5cdFx0XHRcdFx0XHRcdGNodW5rOiBmdW5jdGlvbiAoY2h1bmspIHtcblx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goY2h1bmsuZGF0YSwgZnVuY3Rpb24gKHJvdywgaW5kZXgpIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0dmFyIHIgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGE6e30sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yczpbXVxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaChyb3csIGZ1bmN0aW9uIChpdGVtLCBrZXkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGlzTmFOKGl0ZW0pIHx8IGl0ZW0gPCAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGl0ZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09IFwiI05BXCIgLyp8fCBpdGVtIDwgMCovIHx8IGl0ZW0udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ04vQScpID4gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhciBlcnJvciA9IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCIxXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwiRmllbGQgaW4gcm93IGlzIG5vdCB2YWxpZCBmb3IgZGF0YWJhc2UgdXNlIVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb2x1bW46IGtleSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGl0ZW1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyLmVycm9ycy5wdXNoKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9ycy5wdXNoKGVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGlzVmVydGljYWwpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHJvdywgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChrZXkubGVuZ3RoID09IDMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgcmF3TGlzdFtrZXldLmRhdGEgPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyYXdMaXN0W2tleV0uZGF0YSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmF3TGlzdFtrZXldLmRhdGEucHVzaChpdGVtKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvL3Jhd0xpc3Rba2V5XS5lcnJvcnMgPSByb3cuZXJyb3JzO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly9JRiBcInN0ZXBcIiBpbnN0ZWFkIG9mIFwiY2h1bmtcIjogciA+IHJvdy5kYXRhID0gcm93LmRhdGFbMF1cblx0XHRcdFx0XHRcdFx0XHRcdFx0ci5kYXRhID0gcm93O1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5hZGREYXRhKHIpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0fSlcblxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRiZWZvcmVGaXJzdENodW5rOiBmdW5jdGlvbiAoY2h1bmspIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vQ2hlY2sgaWYgdGhlcmUgYXJlIHBvaW50cyBpbiB0aGUgaGVhZGVyc1xuXHRcdFx0XHRcdFx0XHRcdHZhciBpbmRleCA9IGNodW5rLm1hdGNoKC9cXHJcXG58XFxyfFxcbi8pLmluZGV4O1xuXHRcdFx0XHRcdFx0XHRcdHZhciBkZWxpbWl0ZXIgPSAnLCc7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGhlYWRpbmdzID0gY2h1bmsuc3Vic3RyKDAsIGluZGV4KS5zcGxpdCgnLCcpO1xuXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGhlYWRpbmdzLmxlbmd0aCA8IDIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGhlYWRpbmdzID0gY2h1bmsuc3Vic3RyKDAsIGluZGV4KS5zcGxpdChcIlxcdFwiKTtcblx0XHRcdFx0XHRcdFx0XHRcdGRlbGltaXRlciA9ICdcXHQnO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR2YXIgaXNJc28gPSBbXTtcblxuXHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDw9IGhlYWRpbmdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoaGVhZGluZ3NbaV0pIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRoZWFkaW5nc1tpXSA9IGhlYWRpbmdzW2ldLnJlcGxhY2UoL1teYS16MC05XS9naSwgJ18nKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaGVhZGluZ3NbaV0uaW5kZXhPZignLicpID4gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoZWFkaW5nc1tpXSA9IGhlYWRpbmdzW2ldLnN1YnN0cigwLCBoZWFkaW5nc1tpXS5pbmRleE9mKCcuJykpO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIGhlYWQgPSBoZWFkaW5nc1tpXS5zcGxpdCgnXycpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaGVhZC5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGVhZGluZ3NbaV0gPSAnJztcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGhlYWQubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChpc05hTihoZWFkW2pdKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaiA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoZWFkaW5nc1tpXSArPSAnXyc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aGVhZGluZ3NbaV0gKz0gaGVhZFtqXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaGVhZGluZ3NbaV0ubGVuZ3RoID09IDMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpc0lzby5wdXNoKHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmIChoZWFkaW5ncy5sZW5ndGggPT0gaXNJc28ubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpc1ZlcnRpY2FsID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDw9IGhlYWRpbmdzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgcmF3TGlzdFtoZWFkaW5nc1tpXV0gPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJhd0xpc3RbaGVhZGluZ3NbaV1dID0ge307XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0cmF3TGlzdFtoZWFkaW5nc1tpXV0uZGF0YSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBoZWFkaW5ncy5qb2luKGRlbGltaXRlcikgKyBjaHVuay5zdWJzdHIoaW5kZXgpO1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24gKGVyciwgZmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFRvYXN0U2VydmljZS5lcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24gKHJlc3VsdHMpIHtcblxuXHRcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5zZXRFcnJvcnMoZXJyb3JzKTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vU2VlIGlmIHRoZXJlIGlzIGFuIGZpZWxkIG5hbWUgXCJpc29cIiBpbiB0aGUgaGVhZGluZ3M7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFpc1ZlcnRpY2FsKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goSW5kZXhTZXJ2aWNlLmdldEZpcnN0RW50cnkoKS5kYXRhLCBmdW5jdGlvbiAoaXRlbSwga2V5KSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGtleS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2lzbycpICE9IC0xIHx8IGtleS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2NvZGUnKSAhPSAtMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdEluZGV4U2VydmljZS5zZXRJc29GaWVsZChrZXkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChrZXkudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdjb3VudHJ5JykgIT0gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2Uuc2V0Q291bnRyeUZpZWxkKGtleSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGtleS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ3llYXInKSAhPSAtMSAmJiBpdGVtLnRvU3RyaW5nKCkubGVuZ3RoID09IDQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2Uuc2V0WWVhckZpZWxkKGtleSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGtleS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2dlbmRlcicpICE9IC0xIHx8IGtleS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ3NleCcpICE9IC0xKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLnNldEdlbmRlckZpZWxkKGtleSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2gocmF3TGlzdCwgZnVuY3Rpb24gKGl0ZW0sIGtleSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmVycm9ycyA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaXRlbS50b0xvd2VyQ2FzZSgpICE9IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGtleSAhPSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFyIHIgPSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpc286IGtleS50b1VwcGVyQ2FzZSgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhbmd1bGFyLmZvckVhY2goaXRlbS5kYXRhLCBmdW5jdGlvbiAoY29sdW1uLCBpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyWydjb2x1bW5fJyArIGldID0gY29sdW1uO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGlzTmFOKGNvbHVtbikgfHwgY29sdW1uIDwgMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoY29sdW1uLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA9PSBcIk5BXCIgfHwgY29sdW1uIDwgMCB8fCBjb2x1bW4udG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLmluZGV4T2YoJ04vQScpID4gLTEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtLmVycm9ycy5wdXNoKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiMVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWVzc2FnZTogXCJGaWVsZCBpbiByb3cgaXMgbm90IHZhbGlkIGZvciBkYXRhYmFzZSB1c2UhXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb2x1bW46IGl0ZW1cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGVycm9ycysrO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRJbmRleFNlcnZpY2UuYWRkRGF0YSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhOiBbcl0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRlcnJvcnM6IGl0ZW0uZXJyb3JzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLnNldElzb0ZpZWxkKCdpc28nKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0SW5kZXhTZXJ2aWNlLnNldFRvTG9jYWxTdG9yYWdlKCk7XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdFx0XHRcdHRvYXN0ci5pbmZvKEluZGV4U2VydmljZS5nZXREYXRhU2l6ZSgpICsgJyBsaW5lcyBpbXBvcnRldCEnLCAnSW5mb3JtYXRpb24nKTtcblx0XHRcdFx0XHRcdFx0XHRcdCRzdGF0ZS5nbygnYXBwLmluZGV4LmNoZWNrJyk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdQYXJzZWNzdkN0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG5cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdwaWVjaGFydCcsIGZ1bmN0aW9uKCkge1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL3BpZWNoYXJ0L3BpZWNoYXJ0Lmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1BpZWNoYXJ0Q3RybCcsXG5cdFx0XHRzY29wZTp7XG5cdFx0XHRcdGRhdGE6ICc9Y2hhcnREYXRhJyxcblx0XHRcdFx0YWN0aXZlVHlwZTogJz0nLFxuXHRcdFx0XHRhY3RpdmVDb25mbGljdDogJz0nLFxuXHRcdFx0XHRjbGlja0l0OicmJ1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdFx0IGZ1bmN0aW9uIHNlZ0NvbG9yKGMpeyByZXR1cm4ge2ludGVyc3RhdGU6XCIjODA3ZGJhXCIsIGludHJhc3RhdGU6XCIjZTA4MjE0XCIsc3Vic3RhdGU6XCIjNDFhYjVkXCJ9W2NdOyB9XG5cblx0XHRcdFx0dmFyIHBDID17fSwgcGllRGltID17dzoxNTAsIGg6IDE1MH07XG4gICAgICAgIHBpZURpbS5yID0gTWF0aC5taW4ocGllRGltLncsIHBpZURpbS5oKSAvIDI7XG5cblx0XHRcdFx0dmFyIHBpZXN2ZyA9IGQzLnNlbGVjdChlbGVtZW50WzBdKS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgcGllRGltLncpXG5cdFx0XHRcdFx0XHQuYXR0cihcImhlaWdodFwiLCBwaWVEaW0uaClcblx0XHRcdFx0XHRcdC5hdHRyKCdjbGFzcycsICdvdXRlci1waWUnKVxuXHRcdFx0XHRcdFx0LmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiK3BpZURpbS53LzIrXCIsXCIrcGllRGltLmgvMitcIilcIik7XG5cdFx0XHRcdHZhciBwaWVzdmcyID0gZDMuc2VsZWN0KGVsZW1lbnRbMF0pLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCBwaWVEaW0udylcblx0XHRcdFx0XHRcdC5hdHRyKFwiaGVpZ2h0XCIsIHBpZURpbS5oKVxuXHRcdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2lubmVyLXBpZScpXG5cdFx0XHRcdFx0XHQuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIrcGllRGltLncvMitcIixcIitwaWVEaW0uaC8yK1wiKVwiKTtcblxuICAgICAgICAvLyBjcmVhdGUgZnVuY3Rpb24gdG8gZHJhdyB0aGUgYXJjcyBvZiB0aGUgcGllIHNsaWNlcy5cbiAgICAgICAgdmFyIGFyYyA9IGQzLnN2Z1xuXHRcdFx0XHRcdC5hcmMoKVxuXHRcdFx0XHRcdC5vdXRlclJhZGl1cyhwaWVEaW0uciAtIDEwKVxuXHRcdFx0XHRcdC5pbm5lclJhZGl1cyhwaWVEaW0uciAtIDIzKTtcbiAgICAgICAgdmFyIGFyYzIgPSBkMy5zdmdcblx0XHRcdFx0XHQuYXJjKClcblx0XHRcdFx0XHQub3V0ZXJSYWRpdXMocGllRGltLnIgLSAyMylcblx0XHRcdFx0XHQuaW5uZXJSYWRpdXMoMCk7XG5cbiAgICAgICAgLy8gY3JlYXRlIGEgZnVuY3Rpb24gdG8gY29tcHV0ZSB0aGUgcGllIHNsaWNlIGFuZ2xlcy5cbiAgICAgICAgdmFyIHBpZSA9IGQzLmxheW91dFxuXHRcdFx0XHRcdC5waWUoKVxuXHRcdFx0XHRcdC5zb3J0KG51bGwpXG5cdFx0XHRcdFx0LnZhbHVlKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY291bnQ7IH0pO1xuXG4gICAgICAgIC8vIERyYXcgdGhlIHBpZSBzbGljZXMuXG4gICAgICAgIHZhciBjMSA9IHBpZXN2Z1xuXHRcdFx0XHRcdFx0LmRhdHVtKHNjb3BlLmRhdGEpXG5cdFx0XHRcdFx0XHQuc2VsZWN0QWxsKFwicGF0aFwiKVxuXHRcdFx0XHRcdFx0LmRhdGEocGllKVxuXHRcdFx0XHRcdFx0LmVudGVyKClcblx0XHRcdFx0XHRcdC5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJkXCIsIGFyYylcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHsgdGhpcy5fY3VycmVudCA9IGQ7IH0pXG4gICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZGF0YS5jb2xvcjsgfSlcbiAgICAgICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLG1vdXNlb3Zlcikub24oXCJtb3VzZW91dFwiLG1vdXNlb3V0KTtcblx0XHRcdFx0dmFyIGMyID0gcGllc3ZnMlxuXHRcdFx0XHRcdFx0LmRhdHVtKHNjb3BlLmRhdGEpXG5cdFx0XHRcdFx0XHQuc2VsZWN0QWxsKFwicGF0aFwiKVxuXHRcdFx0XHRcdFx0LmRhdGEocGllKVxuXHRcdFx0XHRcdFx0LmVudGVyKClcblx0XHRcdFx0XHRcdC5hcHBlbmQoXCJwYXRoXCIpXG5cdFx0XHRcdFx0XHQuYXR0cihcImRcIiwgYXJjMilcblx0XHQgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHsgdGhpcy5fY3VycmVudCA9IGQ7IH0pXG5cdFx0ICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuZGF0YS5jb2xvcjsgfSlcblx0XHRcdFx0XHRcdC5zdHlsZSgnY3Vyc29yJywgJ3BvaW50ZXInKVxuXHRcdCAgICAgICAgLm9uKCdjbGljaycsIG1vdXNlY2xpY2spO1xuICAgICAgICAvLyBjcmVhdGUgZnVuY3Rpb24gdG8gdXBkYXRlIHBpZS1jaGFydC4gVGhpcyB3aWxsIGJlIHVzZWQgYnkgaGlzdG9ncmFtLlxuICAgICAgICBwQy51cGRhdGUgPSBmdW5jdGlvbihuRCl7XG4gICAgICAgICAgICBwaWVzdmcuc2VsZWN0QWxsKFwicGF0aFwiKS5kYXRhKHBpZShuRCkpLnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApXG4gICAgICAgICAgICAgICAgLmF0dHJUd2VlbihcImRcIiwgYXJjVHdlZW4pO1xuICAgICAgICB9XG4gICAgICAgIC8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIG1vdXNlb3ZlciBhIHBpZSBzbGljZS5cblx0XHRcdFx0dmFyIHR5cGV1cyA9IGFuZ3VsYXIuY29weShzY29wZS5hY3RpdmVUeXBlKTtcblx0XHRcdFx0ZnVuY3Rpb24gbW91c2VjbGljayhkKXtcblx0XHRcdFx0XHRzY29wZS5jbGlja0l0KHt0eXBlX2lkOmQuZGF0YS50eXBlX2lkfSk7XG5cdFx0XHRcdH1cbiAgICAgICAgZnVuY3Rpb24gbW91c2VvdmVyKGQpe1xuICAgICAgICAgICAgLy8gY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uIG9mIGhpc3RvZ3JhbSB3aXRoIG5ldyBkYXRhLlxuXHRcdFx0XHRcdFx0dHlwZXVzID0gYW5ndWxhci5jb3B5KHNjb3BlLmFjdGl2ZVR5cGUpO1xuICAgICAgICAgICAgc2NvcGUuYWN0aXZlVHlwZSA9IFtkLmRhdGEudHlwZV9pZF07XG5cdFx0XHRcdFx0XHRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICAvL1V0aWxpdHkgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIG1vdXNlb3V0IGEgcGllIHNsaWNlLlxuICAgICAgICBmdW5jdGlvbiBtb3VzZW91dChkKXtcbiAgICAgICAgICAgIC8vIGNhbGwgdGhlIHVwZGF0ZSBmdW5jdGlvbiBvZiBoaXN0b2dyYW0gd2l0aCBhbGwgZGF0YS5cbiAgICAgICAgICAgIHNjb3BlLmFjdGl2ZVR5cGUgPSB0eXBldXM7XG5cdFx0XHRcdFx0XHRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbmltYXRpbmcgdGhlIHBpZS1zbGljZSByZXF1aXJpbmcgYSBjdXN0b20gZnVuY3Rpb24gd2hpY2ggc3BlY2lmaWVzXG4gICAgICAgIC8vIGhvdyB0aGUgaW50ZXJtZWRpYXRlIHBhdGhzIHNob3VsZCBiZSBkcmF3bi5cbiAgICAgICAgZnVuY3Rpb24gYXJjVHdlZW4oYSkge1xuICAgICAgICAgICAgdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZSh0aGlzLl9jdXJyZW50LCBhKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSBpKDApO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsgcmV0dXJuIGFyYyhpKHQpKTsgICAgfTtcbiAgICAgICAgfVxuXHRcdFx0XHRmdW5jdGlvbiBhcmNUd2VlbjIoYSkge1xuICAgICAgICAgICAgdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZSh0aGlzLl9jdXJyZW50LCBhKTtcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSBpKDApO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsgcmV0dXJuIGFyYzIoaSh0KSk7ICAgIH07XG4gICAgICAgIH1cblxuXHRcdFx0XHRzY29wZS4kd2F0Y2goJ2RhdGEnLCBmdW5jdGlvbihuLCBvKXtcblx0XHRcdFx0XHRpZihuID09PSBvKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0cGllc3ZnLnNlbGVjdEFsbChcInBhdGhcIikuZGF0YShwaWUobikpLnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApXG5cdFx0XHRcdFx0XHRcdC5hdHRyVHdlZW4oXCJkXCIsIGFyY1R3ZWVuKTtcblx0XHRcdFx0XHRwaWVzdmcyLnNlbGVjdEFsbChcInBhdGhcIikuZGF0YShwaWUobikpLnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApXG5cdFx0XHRcdFx0XHRcdC5hdHRyVHdlZW4oXCJkXCIsIGFyY1R3ZWVuMik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnUGllY2hhcnRDdHJsJywgZnVuY3Rpb24oKXtcblx0XHQvL1xuICAgIH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ3JvdW5kYmFyJywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHQvL3RlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9yb3VuZGJhci9yb3VuZGJhci5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdSb3VuZGJhckN0cmwnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0ZGF0YTogJz1jaGFydERhdGEnLFxuXHRcdFx0XHRhY3RpdmVUeXBlOiAnPScsXG5cdFx0XHRcdGFjdGl2ZUNvbmZsaWN0OiAnPSdcblx0XHRcdH0sXG5cdFx0XHRsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcblxuXHRcdFx0XHR2YXIgbWFyZ2luID0ge1xuXHRcdFx0XHRcdFx0dG9wOiA0MCxcblx0XHRcdFx0XHRcdHJpZ2h0OiAyMCxcblx0XHRcdFx0XHRcdGJvdHRvbTogMzAsXG5cdFx0XHRcdFx0XHRsZWZ0OiA0MFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0d2lkdGggPSAzMDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0XHRcdFx0XHRoZWlnaHQgPSAyMDAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSxcblx0XHRcdFx0XHRiYXJXaWR0aCA9IDIwLFxuXHRcdFx0XHRcdHNwYWNlID0gMjU7XG5cblxuXHRcdFx0XHR2YXIgc2NhbGUgPSB7XG5cdFx0XHRcdFx0eTogZDMuc2NhbGUubGluZWFyKClcblx0XHRcdFx0fTtcblx0XHRcdFx0c2NhbGUueS5kb21haW4oWzAsIDIyMF0pO1xuXHRcdFx0XHRzY2FsZS55LnJhbmdlKFtoZWlnaHQsIDBdKTtcblx0XHRcdFx0dmFyIHN2ZyA9IGQzLnNlbGVjdChlbGVtZW50WzBdKS5hcHBlbmQoXCJzdmdcIilcblx0XHRcdFx0XHQuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG5cdFx0XHRcdFx0LmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG5cdFx0XHRcdFx0LmFwcGVuZChcImdcIilcblx0XHRcdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblxuXHRcdFx0XHQvL3guZG9tYWluKHNjb3BlLmRhdGEubWFwKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubGV0dGVyOyB9KSk7XG5cdFx0XHRcdC8veS5kb21haW4oWzAsIGQzLm1heChzY29wZS5kYXRhLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmZyZXF1ZW5jeTsgfSldKTtcblx0XHRcdFx0dmFyIGJhcnMgPSBzdmcuc2VsZWN0QWxsKCcuYmFycycpLmRhdGEoc2NvcGUuZGF0YSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoJ2NsYXNzJywgJ2JhcnMnKTsgLy8uYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGkgKiAyMCArIFwiLCAwKVwiOyB9KTs7XG5cblx0XHRcdFx0dmFyIGJhcnNCZyA9IGJhcnNcblx0XHRcdFx0XHQuYXBwZW5kKCdwYXRoJylcblx0XHRcdFx0XHQuYXR0cignZCcsIGZ1bmN0aW9uKGQsIGkpIHtcblx0XHRcdFx0XHRcdHJldHVybiByb3VuZGVkX3JlY3QoKGkgKiAoYmFyV2lkdGggKyBzcGFjZSkpLCAwLCBiYXJXaWR0aCwgKGhlaWdodCksIGJhcldpZHRoIC8gMiwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIGZhbHNlKVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmF0dHIoJ2NsYXNzJywgJ2JnJyk7XG5cdFx0XHRcdHZhciB2YWx1ZUJhcnMgPSBiYXJzXG5cdFx0XHRcdFx0LmFwcGVuZCgncGF0aCcpXG5cdFx0XHRcdFx0LmF0dHIoJ2QnLCBmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcm91bmRlZF9yZWN0KChpICogKGJhcldpZHRoICsgc3BhY2UpKSwgKHNjYWxlLnkoZC52YWx1ZSkpLCBiYXJXaWR0aCwgKGhlaWdodCAtIHNjYWxlLnkoZC52YWx1ZSkpLCBiYXJXaWR0aCAvIDIsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC8qLmF0dHIoJ3gnLCBmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gaSAqIChiYXJXaWR0aCArIHNwYWNlKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5hdHRyKCd5JywgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHNjYWxlLnkoZC52YWx1ZSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXR0cihcIndpZHRoXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBiYXJXaWR0aFxuXHRcdFx0XHRcdH0pKi9cblxuXHRcdFx0XHQuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBkLmNvbG9yXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQvKi50cmFuc2l0aW9uKClcblx0XHRcdFx0XHQuZHVyYXRpb24oMzAwMClcblx0XHRcdFx0XHQuZWFzZShcInF1YWRcIilcblx0XHRcdFx0XHQuYXR0cihcImhlaWdodFwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gaGVpZ2h0IC0gc2NhbGUueShkLnZhbHVlKVxuXHRcdFx0XHRcdH0pKi9cblx0XHRcdFx0O1xuXG5cdFx0XHRcdHZhciB2YWx1ZVRleHQgPSBiYXJzXG5cdFx0XHRcdFx0LmFwcGVuZChcInRleHRcIik7XG5cblx0XHRcdFx0dmFsdWVUZXh0LnRleHQoZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGQudmFsdWVcblx0XHRcdFx0XHR9KS5hdHRyKFwieFwiLCBmdW5jdGlvbihkLCBpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gaSAqIChiYXJXaWR0aCArIHNwYWNlKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5hdHRyKFwieVwiLCAtOClcblx0XHRcdFx0XHQuYXR0cihcIndpZHRoXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBiYXJXaWR0aFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LnN0eWxlKCdmaWxsJywnIzRmYjBlNScpO1xuXG5cdFx0XHRcdHZhciBsYWJlbHNUZXh0ID0gYmFyc1xuXHRcdFx0XHRcdC5hcHBlbmQoXCJ0ZXh0XCIpXG5cdFx0XHRcdGxhYmVsc1RleHQudGV4dChmdW5jdGlvbihkKXtcblx0XHRcdFx0XHRcdHJldHVybiBkLmxhYmVsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXR0cihcInhcIiwgZnVuY3Rpb24oZCwgaSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGkgKiAoYmFyV2lkdGggKyBzcGFjZSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXR0cihcInlcIiwgaGVpZ2h0ICsgMjApXG5cdFx0XHRcdFx0LmF0dHIoXCJ3aWR0aFwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYmFyV2lkdGhcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uKGQpe1xuXHRcdFx0XHRcdFx0cmV0dXJuIGQuY29sb3Jcblx0XHRcdFx0XHR9KTtcblxuXG5cdFx0XHRcdGZ1bmN0aW9uIHJvdW5kZWRfcmVjdCh4LCB5LCB3LCBoLCByLCB0bCwgdHIsIGJsLCBicikge1xuXHRcdFx0XHRcdHZhciByZXR2YWw7XG5cdFx0XHRcdFx0cmV0dmFsID0gXCJNXCIgKyAoeCArIHIpICsgXCIsXCIgKyB5O1xuXHRcdFx0XHRcdHJldHZhbCArPSBcImhcIiArICh3IC0gMiAqIHIpO1xuXHRcdFx0XHRcdGlmICh0cikge1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMCAxIFwiICsgciArIFwiLFwiICsgcjtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiaFwiICsgcjtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcInZcIiArIHI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHZhbCArPSBcInZcIiArIChoIC0gMiAqIHIpO1xuXHRcdFx0XHRcdGlmIChicikge1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMCAxIFwiICsgLXIgKyBcIixcIiArIHI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcInZcIiArIHI7XG5cdFx0XHRcdFx0XHRyZXR2YWwgKz0gXCJoXCIgKyAtcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dmFsICs9IFwiaFwiICsgKDIgKiByIC0gdyk7XG5cdFx0XHRcdFx0aWYgKGJsKSB7XG5cdFx0XHRcdFx0XHRyZXR2YWwgKz0gXCJhXCIgKyByICsgXCIsXCIgKyByICsgXCIgMCAwIDEgXCIgKyAtciArIFwiLFwiICsgLXI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcImhcIiArIC1yO1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwidlwiICsgLXI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHZhbCArPSBcInZcIiArICgyICogciAtIGgpO1xuXHRcdFx0XHRcdGlmICh0bCkge1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiYVwiICsgciArIFwiLFwiICsgciArIFwiIDAgMCAxIFwiICsgciArIFwiLFwiICsgLXI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHZhbCArPSBcInZcIiArIC1yO1xuXHRcdFx0XHRcdFx0cmV0dmFsICs9IFwiaFwiICsgcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dmFsICs9IFwielwiO1xuXHRcdFx0XHRcdHJldHVybiByZXR2YWw7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2NvcGUuJHdhdGNoKCdkYXRhJywgZnVuY3Rpb24obiwgbyl7XG5cdFx0XHRcdFx0aWYobiA9PT0gbykgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdC8vc2NhbGUueS5kb21haW4oWzAsIDUwXSk7XG5cblx0XHRcdFx0XHRcdHZhbHVlQmFycy50cmFuc2l0aW9uKCkuZHVyYXRpb24oNTAwKS5hdHRyKCdkJywgZnVuY3Rpb24oZCwgaSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBib3JkZXJzID0gYmFyV2lkdGggLyAyO1xuXHRcdFx0XHRcdFx0XHRcdGlmKHNjb3BlLmRhdGFbaV0udmFsdWUgPD0gMTApe1xuXHRcdFx0XHRcdFx0XHRcdFx0Ym9yZGVycyA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByb3VuZGVkX3JlY3QoKGkgKiAoYmFyV2lkdGggKyBzcGFjZSkpLCAoc2NhbGUueShzY29wZS5kYXRhW2ldLnZhbHVlKSksIGJhcldpZHRoLCAoaGVpZ2h0IC0gc2NhbGUueShzY29wZS5kYXRhW2ldLnZhbHVlKSksIGJvcmRlcnMsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSlcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0dmFsdWVUZXh0LnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MDApLnR3ZWVuKCd0ZXh0JywgZnVuY3Rpb24gKGQsaSkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciBpID0gZDMuaW50ZXJwb2xhdGUocGFyc2VJbnQoZC52YWx1ZSksIHBhcnNlSW50KHNjb3BlLmRhdGFbaV0udmFsdWUpKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSAoTWF0aC5yb3VuZChpKHQpICogMSkgLyAxKTtcblx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHR9KS5lYWNoKCdlbmQnLCBmdW5jdGlvbihkLCBpKXtcblx0XHRcdFx0XHRcdFx0XHRkLnZhbHVlID0gc2NvcGUuZGF0YVtpXS52YWx1ZTtcblx0XHRcdFx0XHRcdH0pO1xuXG5cblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdSb3VuZGJhckN0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAnc2ltcGxlbGluZWNoYXJ0JywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9zaW1wbGVsaW5lY2hhcnQvc2ltcGxlbGluZWNoYXJ0Lmh0bWwnLFxuXHRcdFx0Y29udHJvbGxlcjogJ1NpbXBsZWxpbmVjaGFydEN0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6e30sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB7XG5cdFx0XHRcdGRhdGE6Jz0nLFxuXHRcdFx0XHRzZWxlY3Rpb246Jz0nLFxuXHRcdFx0XHRvcHRpb25zOic9J1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCAkc2NvcGUsIGVsZW1lbnQsICRhdHRycyApe1xuXG5cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ1NpbXBsZWxpbmVjaGFydEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0aW52ZXJ0OmZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZtLm9wdGlvbnMgPSBhbmd1bGFyLmV4dGVuZChkZWZhdWx0cygpLCB2bS5vcHRpb25zKTtcblx0XHR2bS5jb25maWcgPSB7XG5cdFx0XHR2aXNpYmxlOiB0cnVlLCAvLyBkZWZhdWx0OiB0cnVlXG5cdFx0XHRleHRlbmRlZDogZmFsc2UsIC8vIGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRkaXNhYmxlZDogZmFsc2UsIC8vIGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRhdXRvcmVmcmVzaDogdHJ1ZSwgLy8gZGVmYXVsdDogdHJ1ZVxuXHRcdFx0cmVmcmVzaERhdGFPbmx5OiBmYWxzZSwgLy8gZGVmYXVsdDogZmFsc2Vcblx0XHRcdGRlZXBXYXRjaE9wdGlvbnM6IHRydWUsIC8vIGRlZmF1bHQ6IHRydWVcblx0XHRcdGRlZXBXYXRjaERhdGE6IHRydWUsIC8vIGRlZmF1bHQ6IGZhbHNlXG5cdFx0XHRkZWVwV2F0Y2hDb25maWc6IHRydWUsIC8vIGRlZmF1bHQ6IHRydWVcblx0XHRcdGRlYm91bmNlOiAxMCAvLyBkZWZhdWx0OiAxMFxuXHRcdH07XG5cdFx0dm0uY2hhcnQgPSB7XG5cdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdGNoYXJ0OiB7fVxuXHRcdFx0fSxcblx0XHRcdGRhdGE6IFtdXG5cdFx0fTtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpe1xuXHRcdFx0Y2FsY3VsYXRlR3JhcGgoKTtcblx0XHRcdHNldENoYXJ0KCk7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUNoYXJ0KCl7XG5cdFx0XHR2bS5jaGFydC5vcHRpb25zLmNoYXJ0LmZvcmNlWSA9IFt2bS5yYW5nZS5tYXgsIHZtLnJhbmdlLm1pbl07XG5cdFx0fVxuXHQgXHRmdW5jdGlvbiBzZXRDaGFydCgpIHtcblx0XHRcdHZtLmNoYXJ0Lm9wdGlvbnMuY2hhcnQgPSB7XG5cdFx0XHRcdHR5cGU6ICdsaW5lQ2hhcnQnLFxuXHRcdFx0XHRsZWdlbmRQb3NpdGlvbjogJ2xlZnQnLFxuXHRcdFx0XHRkdXJhdGlvbjowLFxuXHRcdFx0XHRtYXJnaW46IHtcblx0XHRcdFx0XHR0b3A6IDIwLFxuXHRcdFx0XHRcdHJpZ2h0OiAyMCxcblx0XHRcdFx0XHRib3R0b206IDIwLFxuXHRcdFx0XHRcdGxlZnQ6IDIwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHg6IGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGQueDtcblx0XHRcdFx0fSxcblx0XHRcdFx0eTogZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRyZXR1cm4gZC55O1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzaG93TGVnZW5kOiBmYWxzZSxcblx0XHRcdFx0c2hvd1ZhbHVlczogZmFsc2UsXG5cdFx0XHRcdC8vc2hvd1lBeGlzOiBmYWxzZSxcblxuXHRcdFx0XHR0cmFuc2l0aW9uRHVyYXRpb246IDUwMCxcblx0XHRcdFx0Ly91c2VJbnRlcmFjdGl2ZUd1aWRlbGluZTogdHJ1ZSxcblx0XHRcdFx0Zm9yY2VZOiBbdm0ucmFuZ2UubWF4LCB2bS5yYW5nZS5taW5dLFxuXHRcdFx0XHQvL3lEb21haW46W3BhcnNlSW50KHZtLnJhbmdlLm1pbiksIHZtLnJhbmdlLm1heF0sXG5cdFx0XHRcdHhBeGlzOiB7XG5cdFx0XHRcdFx0YXhpc0xhYmVsOiAnWWVhcicsXG5cdFx0XHRcdFx0YXhpc0xhYmVsRGlzdGFuY2U6IDMwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHlBeGlzOiB7XG5cdFx0XHRcdFx0YXhpc0xhYmVsOiAnJyxcblx0XHRcdFx0XHRheGlzTGFiZWxEaXN0YW5jZTogMzBcblx0XHRcdFx0fSxcblx0XHRcdFx0bGVnZW5kOiB7XG5cdFx0XHRcdFx0cmlnaHRBbGlnbjogZmFsc2Vcblx0XHRcdFx0fSxcblx0XHRcdFx0bGluZXM6IHtcblx0XHRcdFx0XHRpbnRlcnBvbGF0ZTogJ2NhcmRpbmFsJ1xuXHRcdFx0XHR9XG5cblx0XHRcdH07XG5cblx0XHRcdGlmICh2bS5vcHRpb25zLmludmVydCA9PSB0cnVlKSB7XG5cdFx0XHRcdHZtLmNoYXJ0Lm9wdGlvbnMuY2hhcnQuZm9yY2VZID0gW3BhcnNlSW50KHZtLnJhbmdlLm1heCksIHZtLnJhbmdlLm1pbl07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2bS5jaGFydDtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY2FsY3VsYXRlR3JhcGgoKSB7XG5cdFx0XHR2YXIgY2hhcnREYXRhID0gW107XG5cdFx0XHR2bS5yYW5nZSA9IHtcblx0XHRcdFx0bWF4OiAwLFxuXHRcdFx0XHRtaW46IDEwMDBcblx0XHRcdH07XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0aW9uLCBmdW5jdGlvbiAoaXRlbSwga2V5KSB7XG5cdFx0XHRcdHZhciBncmFwaCA9IHtcblx0XHRcdFx0XHRpZDoga2V5LFxuXHRcdFx0XHRcdGtleTogaXRlbS50aXRsZSxcblx0XHRcdFx0XHRjb2xvcjogaXRlbS5jb2xvcixcblx0XHRcdFx0XHR2YWx1ZXM6IFtdXG5cdFx0XHRcdH07XG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5kYXRhLCBmdW5jdGlvbiAoZGF0YSwgaykge1xuXHRcdFx0XHRcdGdyYXBoLnZhbHVlcy5wdXNoKHtcblx0XHRcdFx0XHRcdGlkOiBrLFxuXHRcdFx0XHRcdFx0eDogZGF0YVtpdGVtLmZpZWxkcy54XSxcblx0XHRcdFx0XHRcdHk6IGRhdGFbaXRlbS5maWVsZHMueV1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR2bS5yYW5nZS5tYXggPSBNYXRoLm1heCh2bS5yYW5nZS5tYXgsIGRhdGFbaXRlbS5maWVsZHMueV0pO1xuXHRcdFx0XHRcdHZtLnJhbmdlLm1pbiA9IE1hdGgubWluKHZtLnJhbmdlLm1pbiwgZGF0YVtpdGVtLmZpZWxkcy55XSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRjaGFydERhdGEucHVzaChncmFwaCk7XG5cdFx0XHR9KTtcblx0XHRcdHZtLnJhbmdlLm1heCsrO1xuXHRcdFx0dm0ucmFuZ2UubWluLS07XG5cdFx0XHR2bS5jaGFydC5kYXRhID0gY2hhcnREYXRhO1xuXHRcdFx0aWYgKHZtLm9wdGlvbnMuaW52ZXJ0ID09IFwidHJ1ZVwiKSB7XG5cdFx0XHRcdHZtLmNoYXJ0Lm9wdGlvbnMuY2hhcnQueURvbWFpbiA9IFtwYXJzZUludCh2bS5yYW5nZS5tYXgpLCB2bS5yYW5nZS5taW5dO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNoYXJ0RGF0YTtcblx0XHR9O1xuXHRcdCRzY29wZS4kd2F0Y2goJ3ZtLmRhdGEnLCBmdW5jdGlvbiAobiwgbykge1xuXHRcdFx0aWYgKCFuKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0XHRjYWxjdWxhdGVHcmFwaCgpO1xuXHRcdFx0XHR1cGRhdGVDaGFydCgpO1xuXG5cblx0XHR9KTtcblx0XHQkc2NvcGUuJHdhdGNoKCd2bS5zZWxlY3Rpb24nLCBmdW5jdGlvbiAobiwgbykge1xuXHRcdFx0aWYgKG4gPT09IG8pIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdC8vXHR1cGRhdGVDaGFydCgpO1xuXHRcdFx0Ly9jYWxjdWxhdGVHcmFwaCgpO1xuXHRcdH0pXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmFuaW1hdGlvbignLnNsaWRlLXRvZ2dsZXMnLCBbJyRhbmltYXRlQ3NzJywgZnVuY3Rpb24oJGFuaW1hdGVDc3MpIHtcblxuXHRcdHZhciBsYXN0SWQgPSAwO1xuICAgICAgICB2YXIgX2NhY2hlID0ge307XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0SWQoZWwpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGVsWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtc2xpZGUtdG9nZ2xlXCIpO1xuICAgICAgICAgICAgaWYgKCFpZCkge1xuICAgICAgICAgICAgICAgIGlkID0gKytsYXN0SWQ7XG4gICAgICAgICAgICAgICAgZWxbMF0uc2V0QXR0cmlidXRlKFwiZGF0YS1zbGlkZS10b2dnbGVcIiwgaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldFN0YXRlKGlkKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBfY2FjaGVbaWRdO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlID0ge307XG4gICAgICAgICAgICAgICAgX2NhY2hlW2lkXSA9IHN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVSdW5uZXIoY2xvc2luZywgc3RhdGUsIGFuaW1hdG9yLCBlbGVtZW50LCBkb25lRm4pIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0YXRlLmFuaW1hdG9yID0gYW5pbWF0b3I7XG4gICAgICAgICAgICAgICAgc3RhdGUuZG9uZUZuID0gZG9uZUZuO1xuICAgICAgICAgICAgICAgIGFuaW1hdG9yLnN0YXJ0KCkuZmluYWxseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NpbmcgJiYgc3RhdGUuZG9uZUZuID09PSBkb25lRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRbMF0uc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmFuaW1hdG9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kb25lRm4oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsZWF2ZTogZnVuY3Rpb24oZWxlbWVudCwgZG9uZUZuKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gZ2V0U3RhdGUoZ2V0SWQoZWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gKHN0YXRlLmFuaW1hdGluZyAmJiBzdGF0ZS5oZWlnaHQpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmhlaWdodCA6IGVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0b3IgPSAkYW5pbWF0ZUNzcyhlbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiB7aGVpZ2h0OiBoZWlnaHQgKyAncHgnLCBvcGFjaXR5OiAxfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvOiB7aGVpZ2h0OiAnMHB4Jywgb3BhY2l0eTogMH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmFuaW1hdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmRvbmVGbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZVJ1bm5lcih0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lRm4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZS5hbmltYXRvci5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVSdW5uZXIodHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lRm4pKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRvbmVGbigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbihlbGVtZW50LCBkb25lRm4pIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBnZXRTdGF0ZShnZXRJZChlbGVtZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSAoc3RhdGUuYW5pbWF0aW5nICYmIHN0YXRlLmhlaWdodCkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaGVpZ2h0IDogZWxlbWVudFswXS5vZmZzZXRIZWlnaHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdG9yID0gJGFuaW1hdGVDc3MoZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbToge2hlaWdodDogJzBweCcsIG9wYWNpdHk6IDB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG86IHtoZWlnaHQ6IGhlaWdodCArICdweCcsIG9wYWNpdHk6IDF9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5hbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kb25lRm4gPSBnZW5lcmF0ZVJ1bm5lcihmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVGbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlLmFuaW1hdG9yLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZW5lcmF0ZVJ1bm5lcihmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lRm4pKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRvbmVGbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoICdhcHAuY29udHJvbGxlcnMnICkuY29udHJvbGxlciggJ1NsaWRlVG9nZ2xlQ3RybCcsIGZ1bmN0aW9uKCl7XG5cdFx0Ly9cbiAgICB9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICdzdHlsZXMnLCBmdW5jdGlvbigpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9kaXJlY3RpdmVzL3N0eWxlcy9zdHlsZXMuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnU3R5bGVzQ3RybCcsXG5cdFx0XHRjb250cm9sbGVyQXM6ICd2bScsXG5cdFx0XHRzY29wZTp7fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0aXRlbTogJz0nLFxuXHRcdFx0XHRzdHlsZXM6ICc9Jyxcblx0XHRcdFx0b3B0aW9uczonPScsXG5cdFx0XHRcdHNhdmU6ICcmJ1xuXHRcdFx0fSxcblx0XHRcdHJlcGxhY2U6dHJ1ZSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jb250cm9sbGVycycpLmNvbnRyb2xsZXIoJ1N0eWxlc0N0cmwnLCBmdW5jdGlvbiAodG9hc3RyLCBEYXRhU2VydmljZSkge1xuXHRcdC8vXG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS50b2dnbGVTdHlsZSA9IHRvZ2dsZVN0eWxlO1xuXHRcdHZtLnNlbGVjdGVkU3R5bGUgPSBzZWxlY3RlZFN0eWxlO1xuXHRcdHZtLnNhdmVTdHlsZSA9IHNhdmVTdHlsZTtcblx0XHR2bS5zdHlsZSA9IFtdO1xuXG5cdFx0ZnVuY3Rpb24gdG9nZ2xlU3R5bGUoc3R5bGUpIHtcblx0XHRcdGlmICh2bS5pdGVtLnN0eWxlX2lkID09IHN0eWxlLmlkKSB7XG5cdFx0XHRcdHZtLml0ZW0uc3R5bGVfaWQgPSAwO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uaXRlbS5zdHlsZV9pZCA9IHN0eWxlLmlkXG5cdFx0XHRcdHZtLml0ZW0uc3R5bGUgPSBzdHlsZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZnVuY3Rpb24gc2VsZWN0ZWRTdHlsZShpdGVtLCBzdHlsZSkge1xuXHRcdFx0cmV0dXJuIHZtLml0ZW0uc3R5bGVfaWQgPT0gc3R5bGUuaWQgPyB0cnVlIDogZmFsc2U7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIHNhdmVTdHlsZSgpIHtcblx0XHRcdERhdGFTZXJ2aWNlLnBvc3QoJ3N0eWxlcycsIHZtLnN0eWxlKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdHZtLnN0eWxlcy5wdXNoKGRhdGEpO1xuXHRcdFx0XHR2bS5jcmVhdGVTdHlsZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHZtLnN0eWxlID0gW107XG5cdFx0XHRcdHZtLml0ZW0uc3R5bGUgPSBkYXRhO1xuXHRcdFx0XHR0b2FzdHIuc3VjY2VzcygnTmV3IFN0eWxlIGhhcyBiZWVuIHNhdmVkJywgJ1N1Y2Nlc3MnKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ3N1YmluZGV4Jywgc3ViaW5kZXgpO1xuXG5cdHN1YmluZGV4LiRpbmplY3QgPSBbJyR0aW1lb3V0JywgJ3Ntb290aFNjcm9sbCddO1xuXG5cdGZ1bmN0aW9uIHN1YmluZGV4KCR0aW1lb3V0LCBzbW9vdGhTY3JvbGwpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0XHRjb250cm9sbGVyOiAnU3ViaW5kZXhDdHJsJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9zdWJpbmRleC9zdWJpbmRleC5odG1sJyxcblx0XHRcdGxpbms6IHN1YmluZGV4TGlua0Z1bmN0aW9uXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHN1YmluZGV4TGlua0Z1bmN0aW9uKCRzY29wZSwgZWxlbWVudCwgJGF0dHJzKSB7XG5cdFx0fVxuXHR9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignU3ViaW5kZXhDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlsdGVyLCAkdGltZW91dCkge1xuXHRcdCRzY29wZS5pbmZvID0gZmFsc2U7XG5cdFx0JHNjb3BlLnNldENoYXJ0ID0gc2V0Q2hhcnQ7XG5cdFx0JHNjb3BlLmNhbGN1bGF0ZUdyYXBoID0gY2FsY3VsYXRlR3JhcGg7XG5cdFx0JHNjb3BlLmNyZWF0ZUluZGV4ZXIgPSBjcmVhdGVJbmRleGVyO1xuXHRcdCRzY29wZS5jYWxjU3ViUmFuayA9IGNhbGNTdWJSYW5rO1xuXHRcdCRzY29wZS50b2dnbGVJbmZvID0gdG9nZ2xlSW5mbztcblx0XHQkc2NvcGUuY3JlYXRlT3B0aW9ucyA9IGNyZWF0ZU9wdGlvbnM7XG5cdFx0JHNjb3BlLmdldFN1YlJhbmsgPSBnZXRTdWJSYW5rO1xuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdCRzY29wZS5jYWxjU3ViUmFuaygpO1xuXHRcdFx0JHNjb3BlLnNldENoYXJ0KCk7XG5cdFx0XHQkc2NvcGUuY2FsY3VsYXRlR3JhcGgoKTtcblx0XHRcdCRzY29wZS5jcmVhdGVJbmRleGVyKCk7XG5cdFx0XHQkc2NvcGUuY3JlYXRlT3B0aW9ucygpO1xuXHRcdFx0JHNjb3BlLiR3YXRjaCgnZGlzcGxheS5zZWxlY3RlZENhdCcsIGZ1bmN0aW9uKG5ld0l0ZW0sIG9sZEl0ZW0pIHtcblx0XHRcdFx0aWYgKG5ld0l0ZW0gPT09IG9sZEl0ZW0pIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0JHNjb3BlLmNyZWF0ZUluZGV4ZXIoKTtcblx0XHRcdFx0JHNjb3BlLmNhbGN1bGF0ZUdyYXBoKCk7XG5cdFx0XHRcdCRzY29wZS5jcmVhdGVPcHRpb25zKCk7XG5cdFx0XHRcdCRzY29wZS5jYWxjU3ViUmFuaygpO1xuXHRcdFx0fSk7XG5cdFx0XHQkc2NvcGUuJHdhdGNoKCdjdXJyZW50JywgZnVuY3Rpb24obiwgbykge1xuXHRcdFx0XHRpZiAobiA9PT0gbykge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHQkc2NvcGUuY2FsY1N1YlJhbmsoKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRvZ2dsZUluZm8oKSB7XG5cdFx0XHQkc2NvcGUuaW5mbyA9ICEkc2NvcGUuaW5mbztcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FsY1N1YlJhbmsoKSB7XG5cdFx0XHR2YXIgcmFuayA9IDA7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goJHNjb3BlLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0aXRlbVskc2NvcGUuZGlzcGxheS5zZWxlY3RlZENhdC50eXBlXSA9IHBhcnNlRmxvYXQoaXRlbVskc2NvcGUuZGlzcGxheS5zZWxlY3RlZENhdC50eXBlXSk7XG5cdFx0XHRcdGl0ZW1bJ3Njb3JlJ10gPSBwYXJzZUludChpdGVtWydzY29yZSddKTtcblx0XHRcdH0pXG5cdFx0XHR2YXIgZmlsdGVyID0gJGZpbHRlcignb3JkZXJCeScpKCRzY29wZS5lcGksIFskc2NvcGUuZGlzcGxheS5zZWxlY3RlZENhdC50eXBlLCBcInNjb3JlXCJdLCB0cnVlKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgZmlsdGVyLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChmaWx0ZXJbaV0uaXNvID09ICRzY29wZS5jdXJyZW50Lmlzbykge1xuXHRcdFx0XHRcdHJhbmsgPSBpICsgMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0JHNjb3BlLmN1cnJlbnRbJHNjb3BlLmRpc3BsYXkuc2VsZWN0ZWRDYXQudHlwZSsnX3JhbmsnXSA9IHJhbms7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGdldFN1YlJhbmsoY291bnRyeSl7XG5cdFx0XHR2YXIgZmlsdGVyID0gJGZpbHRlcignb3JkZXJCeScpKCRzY29wZS5lcGksIFskc2NvcGUuZGlzcGxheS5zZWxlY3RlZENhdC50eXBlLCBcInNjb3JlXCJdLCB0cnVlKTtcblx0XHRcdHZhciByYW5rID0gMDtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChmaWx0ZXIsIGZ1bmN0aW9uKGl0ZW0sIGtleSl7XG5cdFx0XHRcdGlmKGl0ZW0uY291bnRyeSA9PSBjb3VudHJ5LmNvdW50cnkpe1xuXHRcdFx0XHRcdHJhbmsgPSBrZXk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIHJhbmsrMTtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gY3JlYXRlSW5kZXhlcigpIHtcblx0XHRcdCRzY29wZS5pbmRleGVyID0gWyRzY29wZS4kcGFyZW50LmRpc3BsYXkuc2VsZWN0ZWRDYXQuZGF0YV07XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucygpIHtcblx0XHRcdCRzY29wZS5tZWRpYW5PcHRpb25zID0ge1xuXHRcdFx0XHRjb2xvcjogJHNjb3BlLiRwYXJlbnQuZGlzcGxheS5zZWxlY3RlZENhdC5jb2xvcixcblx0XHRcdFx0ZmllbGQ6ICRzY29wZS4kcGFyZW50LmRpc3BsYXkuc2VsZWN0ZWRDYXQudHlwZSxcblx0XHRcdFx0aGFuZGxpbmc6IGZhbHNlLFxuXHRcdFx0XHRtYXJnaW46e1xuXHRcdFx0XHRcdGxlZnQ6MTBcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdCRzY29wZS5tZWRpYW5PcHRpb25zQmlnID0ge1xuXHRcdFx0XHRjb2xvcjogJHNjb3BlLiRwYXJlbnQuZGlzcGxheS5zZWxlY3RlZENhdC5jb2xvcixcblx0XHRcdFx0ZmllbGQ6ICRzY29wZS4kcGFyZW50LmRpc3BsYXkuc2VsZWN0ZWRDYXQudHlwZSxcblx0XHRcdFx0aGFuZGxpbmc6IGZhbHNlLFxuXHRcdFx0XHRtYXJnaW46e1xuXHRcdFx0XHRcdGxlZnQ6MjBcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZXRDaGFydCgpIHtcblx0XHRcdCRzY29wZS5jaGFydCA9IHtcblx0XHRcdFx0b3B0aW9uczoge1xuXHRcdFx0XHRcdGNoYXJ0OiB7XG5cdFx0XHRcdFx0XHR0eXBlOiAnbGluZUNoYXJ0Jyxcblx0XHRcdFx0XHRcdC8vaGVpZ2h0OiAyMDAsXG5cdFx0XHRcdFx0XHRsZWdlbmRQb3NpdGlvbjogJ2xlZnQnLFxuXHRcdFx0XHRcdFx0bWFyZ2luOiB7XG5cdFx0XHRcdFx0XHRcdHRvcDogMjAsXG5cdFx0XHRcdFx0XHRcdHJpZ2h0OiAyMCxcblx0XHRcdFx0XHRcdFx0Ym90dG9tOiAyMCxcblx0XHRcdFx0XHRcdFx0bGVmdDogMjBcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR4OiBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLng7XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0eTogZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC55O1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHNob3dWYWx1ZXM6IGZhbHNlLFxuXHRcdFx0XHRcdFx0c2hvd1lBeGlzOiBmYWxzZSxcblx0XHRcdFx0XHRcdHRyYW5zaXRpb25EdXJhdGlvbjogNTAwLFxuXHRcdFx0XHRcdFx0dXNlSW50ZXJhY3RpdmVHdWlkZWxpbmU6IHRydWUsXG5cdFx0XHRcdFx0XHRmb3JjZVk6IFsxMDAsIDBdLFxuXHRcdFx0XHRcdFx0eEF4aXM6IHtcblx0XHRcdFx0XHRcdFx0YXhpc0xhYmVsOiAnJ1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHlBeGlzOiB7XG5cdFx0XHRcdFx0XHRcdGF4aXNMYWJlbDogJycsXG5cdFx0XHRcdFx0XHRcdGF4aXNMYWJlbERpc3RhbmNlOiAzMFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGxlZ2VuZDoge1xuXHRcdFx0XHRcdFx0XHRyaWdodEFsaWduOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0bWFyZ2luOiB7XG5cdFx0XHRcdFx0XHRcdFx0Ym90dG9tOiAzMFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0bGluZXM6IHtcblx0XHRcdFx0XHRcdFx0aW50ZXJwb2xhdGU6ICdjYXJkaW5hbCdcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGE6IFtdXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuICRzY29wZS5jaGFydDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjYWxjdWxhdGVHcmFwaCgpIHtcblx0XHRcdHZhciBjaGFydERhdGEgPSBbXTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCgkc2NvcGUuZGlzcGxheS5zZWxlY3RlZENhdC5jaGlsZHJlbiwgZnVuY3Rpb24oaXRlbSwga2V5KSB7XG5cdFx0XHRcdHZhciBncmFwaCA9IHtcblx0XHRcdFx0XHRrZXk6IGl0ZW0udGl0bGUsXG5cdFx0XHRcdFx0Y29sb3I6IGl0ZW0uY29sb3IsXG5cdFx0XHRcdFx0dmFsdWVzOiBbXVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2goJHNjb3BlLmNvdW50cnkuZXBpLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0Z3JhcGgudmFsdWVzLnB1c2goe1xuXHRcdFx0XHRcdFx0eDogZGF0YS55ZWFyLFxuXHRcdFx0XHRcdFx0eTogZGF0YVtpdGVtLmNvbHVtbl9uYW1lXVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y2hhcnREYXRhLnB1c2goZ3JhcGgpO1xuXHRcdFx0fSk7XG5cdFx0XHQkc2NvcGUuY2hhcnQuZGF0YSA9IGNoYXJ0RGF0YTtcblx0XHR9XG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCdzdW5idXJzdCcsIGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGVmYXVsdHMgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdCBtb2RlOiAnc2l6ZSdcblx0XHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0XHQvL3RlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy9zdW5idXJzdC9zdW5idXJzdC5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdTdW5idXJzdEN0cmwnLFxuXHRcdFx0c2NvcGU6IHtcblx0XHRcdFx0ZGF0YTogJz0nXG5cdFx0XHR9LFxuXHRcdFx0bGluazogZnVuY3Rpb24gKCRzY29wZSwgZWxlbWVudCwgJGF0dHJzKSB7XG5cdFx0XHRcdHZhciBvcHRpb25zID0gYW5ndWxhci5leHRlbmQoZGVmYXVsdHMoKSwgJGF0dHJzKTtcblx0XHRcdFx0JHNjb3BlLnNldENoYXJ0KCk7XG5cdFx0XHRcdCRzY29wZS5jYWxjdWxhdGVHcmFwaCgpO1xuXHRcdFx0XHR2YXIgd2lkdGggPSA2MTAsXG5cdFx0XHRcdFx0aGVpZ2h0ID0gd2lkdGgsXG5cdFx0XHRcdFx0cmFkaXVzID0gKHdpZHRoKSAvIDIsXG5cdFx0XHRcdFx0eCA9IGQzLnNjYWxlLmxpbmVhcigpLnJhbmdlKFswLCAyICogTWF0aC5QSV0pLFxuXHRcdFx0XHRcdHkgPSBkMy5zY2FsZS5wb3coKS5leHBvbmVudCgxLjMpLmRvbWFpbihbMCwgMV0pLnJhbmdlKFswLCByYWRpdXNdKSxcblxuXHRcdFx0XHRcdHBhZGRpbmcgPSAwLFxuXHRcdFx0XHRcdGR1cmF0aW9uID0gMTAwMCxcblx0XHRcdFx0XHRjaXJjUGFkZGluZyA9IDEwO1xuXG5cdFx0XHRcdHZhciBkaXYgPSBkMy5zZWxlY3QoZWxlbWVudFswXSk7XG5cblxuXHRcdFx0XHR2YXIgdmlzID0gZGl2LmFwcGVuZChcInN2Z1wiKVxuXHRcdFx0XHRcdC5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBwYWRkaW5nICogMilcblx0XHRcdFx0XHQuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBwYWRkaW5nICogMilcblx0XHRcdFx0XHQuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgW3JhZGl1cyArIHBhZGRpbmcsIHJhZGl1cyArIHBhZGRpbmddICsgXCIpXCIpO1xuXG5cdFx0XHRcdC8qXG5cdFx0XHRcdGRpdi5hcHBlbmQoXCJwXCIpXG5cdFx0XHRcdFx0XHQuYXR0cihcImlkXCIsIFwiaW50cm9cIilcblx0XHRcdFx0XHRcdC50ZXh0KFwiQ2xpY2sgdG8gem9vbSFcIik7XG5cdFx0XHRcdCovXG5cblx0XHRcdFx0dmFyIHBhcnRpdGlvbiA9IGQzLmxheW91dC5wYXJ0aXRpb24oKVxuXHRcdFx0XHRcdC5zb3J0KG51bGwpXG5cdFx0XHRcdFx0LnZhbHVlKGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR2YXIgYXJjID0gZDMuc3ZnLmFyYygpXG5cdFx0XHRcdFx0LnN0YXJ0QW5nbGUoZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigyICogTWF0aC5QSSwgeChkLngpKSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuZW5kQW5nbGUoZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigyICogTWF0aC5QSSwgeChkLnggKyBkLmR4KSkpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmlubmVyUmFkaXVzKGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoMCwgZC55ID8geShkLnkpIDogZC55KTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5vdXRlclJhZGl1cyhmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KDAsIHkoZC55ICsgZC5keSkpO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHZhciBzcGVjaWFsMSA9IFwiV2FzdGV3YXRlciBUcmVhdG1lbnRcIixcblx0XHRcdFx0XHRzcGVjaWFsMiA9IFwiQWlyIFBvbGx1dGlvbiBQTTIuNSBFeGNlZWRhbmNlXCIsXG5cdFx0XHRcdFx0c3BlY2lhbDMgPSBcIkFncmljdWx0dXJhbCBTdWJzaWRpZXNcIixcblx0XHRcdFx0XHRzcGVjaWFsNCA9IFwiUGVzdGljaWRlIFJlZ3VsYXRpb25cIjtcblxuXG5cdFx0XHRcdHZhciBub2RlcyA9IHBhcnRpdGlvbi5ub2Rlcygkc2NvcGUuY2FsY3VsYXRlR3JhcGgoKSk7XG5cblx0XHRcdFx0dmFyIHBhdGggPSB2aXMuc2VsZWN0QWxsKFwicGF0aFwiKS5kYXRhKG5vZGVzKTtcblx0XHRcdFx0cGF0aC5lbnRlcigpLmFwcGVuZChcInBhdGhcIilcblx0XHRcdFx0XHQuYXR0cihcImlkXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJwYXRoLVwiICsgaTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5hdHRyKFwiZFwiLCBhcmMpXG5cdFx0XHRcdFx0LmF0dHIoXCJmaWxsLXJ1bGVcIiwgXCJldmVub2RkXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGQuZGVwdGggPyBcImJyYW5jaFwiIDogXCJyb290XCI7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuc3R5bGUoXCJmaWxsXCIsIHNldENvbG9yKVxuXHRcdFx0XHRcdC5vbihcImNsaWNrXCIsIGNsaWNrKTtcblxuXHRcdFx0XHR2YXIgdGV4dCA9IHZpcy5zZWxlY3RBbGwoXCJ0ZXh0XCIpLmRhdGEobm9kZXMpO1xuXHRcdFx0XHR2YXIgdGV4dEVudGVyID0gdGV4dC5lbnRlcigpLmFwcGVuZChcInRleHRcIilcblx0XHRcdFx0XHQuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgMSlcblx0XHRcdFx0XHQuYXR0cihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRpZiAoZC5kZXB0aClcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFwibWlkZGxlXCI7XG5cdFx0XHRcdFx0XHQvL34gcmV0dXJuIHgoZC54ICsgZC5keCAvIDIpID4gTWF0aC5QSSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdHJldHVybiBcIm1pZGRsZVwiO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJpZFwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFwiZGVwdGhcIiArIGQuZGVwdGg7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gXCJzZWN0b3JcIlxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJkeVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGQuZGVwdGggPyBcIi4yZW1cIiA6IFwiMC4zNWVtXCI7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0dmFyIG11bHRpbGluZSA9IChkLm5hbWUgfHwgXCJcIikuc3BsaXQoXCIgXCIpLmxlbmd0aCA+IDIsXG5cdFx0XHRcdFx0XHRcdGFuZ2xlQWxpZ24gPSAoZC54ID4gMC41ID8gMiA6IC0yKSxcblx0XHRcdFx0XHRcdFx0YW5nbGUgPSB4KGQueCArIGQuZHggLyAyKSAqIDE4MCAvIE1hdGguUEkgLSA5MCArIChtdWx0aWxpbmUgPyBhbmdsZUFsaWduIDogMCksXG5cdFx0XHRcdFx0XHRcdHJvdGF0ZSA9IGFuZ2xlICsgKG11bHRpbGluZSA/IC0uNSA6IDApLFxuXHRcdFx0XHRcdFx0XHR0cmFuc2wgPSAoeShkLnkpICsgY2lyY1BhZGRpbmcpICsgMzUsXG5cdFx0XHRcdFx0XHRcdHNlY0FuZ2xlID0gKGFuZ2xlID4gOTAgPyAtMTgwIDogMCk7XG5cdFx0XHRcdFx0XHRpZiAoZC5uYW1lID09IHNwZWNpYWwzIHx8IGQubmFtZSA9PSBzcGVjaWFsNCkgcm90YXRlICs9IDE7XG5cdFx0XHRcdFx0XHRpZiAoZC5kZXB0aCA9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdHRyYW5zbCA9IC0yLjUwO1xuXHRcdFx0XHRcdFx0XHRyb3RhdGUgPSAwO1xuXHRcdFx0XHRcdFx0XHRzZWNBbmdsZSA9IDA7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGQuZGVwdGggPT0gMSkgdHJhbnNsICs9IC05O1xuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoZC5kZXB0aCA9PSAyKSB0cmFuc2wgKz0gLTU7XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChkLmRlcHRoID09IDMpIHRyYW5zbCArPSA0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIFwicm90YXRlKFwiICsgcm90YXRlICsgXCIpdHJhbnNsYXRlKFwiICsgdHJhbnNsICsgXCIpcm90YXRlKFwiICsgc2VjQW5nbGUgKyBcIilcIjtcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5vbihcImNsaWNrXCIsIGNsaWNrKTtcblxuXHRcdFx0XHR0ZXh0RW50ZXIuYXBwZW5kKFwidHNwYW5cIilcblx0XHRcdFx0XHQuYXR0cihcInhcIiwgMClcblx0XHRcdFx0XHQudGV4dChmdW5jdGlvbiAoZCkge1xuXG5cdFx0XHRcdFx0XHRpZiAoZC5kZXB0aCA9PSAzICYmIGQubmFtZSAhPSBzcGVjaWFsMSAmJiBkLm5hbWUgIT0gc3BlY2lhbDIgJiYgZC5uYW1lICE9IHNwZWNpYWwzICYmIGQubmFtZSAhPSBzcGVjaWFsNClcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGQubmFtZS5zcGxpdChcIiBcIilbMF0gKyBcIiBcIiArIChkLm5hbWUuc3BsaXQoXCIgXCIpWzFdIHx8IFwiXCIpO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5uYW1lLnNwbGl0KFwiIFwiKVswXTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0dGV4dEVudGVyLmFwcGVuZChcInRzcGFuXCIpXG5cdFx0XHRcdFx0LmF0dHIoXCJ4XCIsIDApXG5cdFx0XHRcdFx0LmF0dHIoXCJkeVwiLCBcIjFlbVwiKVxuXHRcdFx0XHRcdC50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cblx0XHRcdFx0XHRcdGlmIChkLmRlcHRoID09IDMgJiYgZC5uYW1lICE9IHNwZWNpYWwxICYmIGQubmFtZSAhPSBzcGVjaWFsMiAmJiBkLm5hbWUgIT0gc3BlY2lhbDMgJiYgZC5uYW1lICE9IHNwZWNpYWw0KVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKGQubmFtZS5zcGxpdChcIiBcIilbMl0gfHwgXCJcIikgKyBcIiBcIiArIChkLm5hbWUuc3BsaXQoXCIgXCIpWzNdIHx8IFwiXCIpO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKGQubmFtZS5zcGxpdChcIiBcIilbMV0gfHwgXCJcIikgKyBcIiBcIiArIChkLm5hbWUuc3BsaXQoXCIgXCIpWzJdIHx8IFwiXCIpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR0ZXh0RW50ZXIuYXBwZW5kKFwidHNwYW5cIilcblx0XHRcdFx0XHQuYXR0cihcInhcIiwgMClcblx0XHRcdFx0XHQuYXR0cihcImR5XCIsIFwiMWVtXCIpXG5cdFx0XHRcdFx0LnRleHQoZnVuY3Rpb24gKGQpIHtcblx0XHRcdFx0XHRcdGlmIChkLmRlcHRoID09IDMgJiYgZC5uYW1lICE9IHNwZWNpYWwxICYmIGQubmFtZSAhPSBzcGVjaWFsMiAmJiBkLm5hbWUgIT0gc3BlY2lhbDMgJiYgZC5uYW1lICE9IHNwZWNpYWw0KVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKGQubmFtZS5zcGxpdChcIiBcIilbNF0gfHwgXCJcIikgKyBcIiBcIiArIChkLm5hbWUuc3BsaXQoXCIgXCIpWzVdIHx8IFwiXCIpO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKGQubmFtZS5zcGxpdChcIiBcIilbM10gfHwgXCJcIikgKyBcIiBcIiArIChkLm5hbWUuc3BsaXQoXCIgXCIpWzRdIHx8IFwiXCIpOztcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRmdW5jdGlvbiBjbGljayhkKSB7XG5cdFx0XHRcdFx0Ly8gQ29udHJvbCBhcmMgdHJhbnNpdGlvblxuXHRcdFx0XHRcdHBhdGgudHJhbnNpdGlvbigpXG5cdFx0XHRcdFx0XHQuZHVyYXRpb24oZHVyYXRpb24pXG5cdFx0XHRcdFx0XHQuYXR0clR3ZWVuKFwiZFwiLCBhcmNUd2VlbihkKSk7XG5cblx0XHRcdFx0XHQvLyBTb21ld2hhdCBvZiBhIGhhY2sgYXMgd2UgcmVseSBvbiBhcmNUd2VlbiB1cGRhdGluZyB0aGUgc2NhbGVzLlxuXHRcdFx0XHRcdC8vIENvbnRyb2wgdGhlIHRleHQgdHJhbnNpdGlvblxuXHRcdFx0XHRcdHRleHQuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBpc1BhcmVudE9mKGQsIGUpID8gbnVsbCA6IGQzLnNlbGVjdCh0aGlzKS5zdHlsZShcInZpc2liaWxpdHlcIik7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnRyYW5zaXRpb24oKVxuXHRcdFx0XHRcdFx0LmR1cmF0aW9uKGR1cmF0aW9uKVxuXHRcdFx0XHRcdFx0LmF0dHJUd2VlbihcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGQuZGVwdGgpXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gXCJtaWRkbGVcIjtcblx0XHRcdFx0XHRcdFx0XHQvL34gcmV0dXJuIHgoZC54ICsgZC5keCAvIDIpID4gTWF0aC5QSSA/IFwiZW5kXCIgOiBcInN0YXJ0XCI7XG5cdFx0XHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIFwibWlkZGxlXCI7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LmF0dHJUd2VlbihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgbXVsdGlsaW5lID0gKGQubmFtZSB8fCBcIlwiKS5zcGxpdChcIiBcIikubGVuZ3RoID4gMjtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgbXVsdGlsaW5lID0gKGQubmFtZSB8fCBcIlwiKS5zcGxpdChcIiBcIikubGVuZ3RoID4gMixcblx0XHRcdFx0XHRcdFx0XHRcdGFuZ2xlQWxpZ24gPSAoZC54ID4gMC41ID8gMiA6IC0yKSxcblx0XHRcdFx0XHRcdFx0XHRcdGFuZ2xlID0geChkLnggKyBkLmR4IC8gMikgKiAxODAgLyBNYXRoLlBJIC0gOTAgKyAobXVsdGlsaW5lID8gYW5nbGVBbGlnbiA6IDApLFxuXHRcdFx0XHRcdFx0XHRcdFx0cm90YXRlID0gYW5nbGUgKyAobXVsdGlsaW5lID8gLS41IDogMCksXG5cdFx0XHRcdFx0XHRcdFx0XHR0cmFuc2wgPSAoeShkLnkpICsgY2lyY1BhZGRpbmcpICsgMzUsXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWNBbmdsZSA9IChhbmdsZSA+IDkwID8gLTE4MCA6IDApO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChkLm5hbWUgPT0gc3BlY2lhbDMgfHwgZC5uYW1lID09IHNwZWNpYWw0KSByb3RhdGUgKz0gMTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZC5kZXB0aCA9PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0cmFuc2wgPSAtMi41MDtcblx0XHRcdFx0XHRcdFx0XHRcdHJvdGF0ZSA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHRzZWNBbmdsZSA9IDA7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkLmRlcHRoID09IDEpIHRyYW5zbCArPSAtOTtcblx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmIChkLmRlcHRoID09IDIpIHRyYW5zbCArPSAtNTtcblx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmIChkLmRlcHRoID09IDMpIHRyYW5zbCArPSA0O1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBcInJvdGF0ZShcIiArIHJvdGF0ZSArIFwiKXRyYW5zbGF0ZShcIiArIHRyYW5zbCArIFwiKXJvdGF0ZShcIiArIHNlY0FuZ2xlICsgXCIpXCI7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBpc1BhcmVudE9mKGQsIGUpID8gMSA6IDFlLTY7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0LmVhY2goXCJlbmRcIiwgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRcdFx0ZDMuc2VsZWN0KHRoaXMpLnN0eWxlKFwidmlzaWJpbGl0eVwiLCBpc1BhcmVudE9mKGQsIGUpID8gbnVsbCA6IFwiaGlkZGVuXCIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblxuXG5cdFx0XHRcdGZ1bmN0aW9uIGlzUGFyZW50T2YocCwgYykge1xuXHRcdFx0XHRcdGlmIChwID09PSBjKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRpZiAocC5jaGlsZHJlbikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHAuY2hpbGRyZW4uc29tZShmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gaXNQYXJlbnRPZihkLCBjKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmdW5jdGlvbiBzZXRDb2xvcihkKSB7XG5cblx0XHRcdFx0XHQvL3JldHVybiA7XG5cdFx0XHRcdFx0aWYgKGQuY29sb3IpXG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiAnI2NjYyc7XG5cdFx0XHRcdFx0XHQvKnZhciB0aW50RGVjYXkgPSAwLjIwO1xuXHRcdFx0XHRcdFx0Ly8gRmluZCBjaGlsZCBudW1iZXJcblx0XHRcdFx0XHRcdHZhciB4ID0gMDtcblx0XHRcdFx0XHRcdHdoaWxlIChkLnBhcmVudC5jaGlsZHJlblt4XSAhPSBkKVxuXHRcdFx0XHRcdFx0XHR4Kys7XG5cdFx0XHRcdFx0XHR2YXIgdGludENoYW5nZSA9ICh0aW50RGVjYXkgKiAoeCArIDEpKS50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHB1c2hlci5jb2xvcihkLnBhcmVudC5jb2xvcikudGludCh0aW50Q2hhbmdlKS5odG1sKCdoZXg2Jyk7Ki9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJbnRlcnBvbGF0ZSB0aGUgc2NhbGVzIVxuXHRcdFx0XHRmdW5jdGlvbiBhcmNUd2VlbihkKSB7XG5cdFx0XHRcdFx0dmFyIG15ID0gbWF4WShkKSxcblx0XHRcdFx0XHRcdHhkID0gZDMuaW50ZXJwb2xhdGUoeC5kb21haW4oKSwgW2QueCwgZC54ICsgZC5keCAtIDAuMDAwOV0pLFxuXHRcdFx0XHRcdFx0eWQgPSBkMy5pbnRlcnBvbGF0ZSh5LmRvbWFpbigpLCBbZC55LCBteV0pLFxuXHRcdFx0XHRcdFx0eXIgPSBkMy5pbnRlcnBvbGF0ZSh5LnJhbmdlKCksIFtkLnkgPyAyMCA6IDAsIHJhZGl1c10pO1xuXG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uIChkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24gKHQpIHtcblx0XHRcdFx0XHRcdFx0eC5kb21haW4oeGQodCkpO1xuXHRcdFx0XHRcdFx0XHR5LmRvbWFpbih5ZCh0KSkucmFuZ2UoeXIodCkpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYXJjKGQpO1xuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZnVuY3Rpb24gbWF4WShkKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGQuY2hpbGRyZW4gPyBNYXRoLm1heC5hcHBseShNYXRoLCBkLmNoaWxkcmVuLm1hcChtYXhZKSkgOiBkLnkgKyBkLmR5O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNvbnRyb2xsZXJzJykuY29udHJvbGxlcignU3VuYnVyc3RDdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuXG5cdFx0JHNjb3BlLnNldENoYXJ0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0JHNjb3BlLmNoYXJ0ID0ge1xuXHRcdFx0XHRvcHRpb25zOiB7XG5cdFx0XHRcdFx0Y2hhcnQ6IHtcblx0XHRcdFx0XHRcdHR5cGU6ICdzdW5idXJzdCcsXG5cdFx0XHRcdFx0XHRoZWlnaHQ6IDcwMCxcblx0XHRcdFx0XHRcdFwic3VuYnVyc3RcIjoge1xuXHRcdFx0XHRcdFx0XHRcImRpc3BhdGNoXCI6IHt9LFxuXHRcdFx0XHRcdFx0XHRcIndpZHRoXCI6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFwiaGVpZ2h0XCI6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFwibW9kZVwiOiBcInNpemVcIixcblx0XHRcdFx0XHRcdFx0XCJpZFwiOiAyMDg4LFxuXHRcdFx0XHRcdFx0XHRcImR1cmF0aW9uXCI6IDUwMCxcblx0XHRcdFx0XHRcdFx0XCJtYXJnaW5cIjoge1xuXHRcdFx0XHRcdFx0XHRcdFwidG9wXCI6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XCJyaWdodFwiOiAwLFxuXHRcdFx0XHRcdFx0XHRcdFwiYm90dG9tXCI6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XCJsZWZ0XCI6IDBcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFwidG9vbHRpcFwiOiB7XG5cdFx0XHRcdFx0XHRcdFwiZHVyYXRpb25cIjogMCxcblx0XHRcdFx0XHRcdFx0XCJncmF2aXR5XCI6IFwid1wiLFxuXHRcdFx0XHRcdFx0XHRcImRpc3RhbmNlXCI6IDI1LFxuXHRcdFx0XHRcdFx0XHRcInNuYXBEaXN0YW5jZVwiOiAwLFxuXHRcdFx0XHRcdFx0XHRcImNsYXNzZXNcIjogbnVsbCxcblx0XHRcdFx0XHRcdFx0XCJjaGFydENvbnRhaW5lclwiOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcImZpeGVkVG9wXCI6IG51bGwsXG5cdFx0XHRcdFx0XHRcdFwiZW5hYmxlZFwiOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcImhpZGVEZWxheVwiOiA0MDAsXG5cdFx0XHRcdFx0XHRcdFwiaGVhZGVyRW5hYmxlZFwiOiBmYWxzZSxcblxuXHRcdFx0XHRcdFx0XHRcIm9mZnNldFwiOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJsZWZ0XCI6IDAsXG5cdFx0XHRcdFx0XHRcdFx0XCJ0b3BcIjogMFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcImhpZGRlblwiOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcImRhdGFcIjogbnVsbCxcblx0XHRcdFx0XHRcdFx0XCJ0b29sdGlwRWxlbVwiOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRcImlkXCI6IFwibnZ0b29sdGlwLTk5MzQ3XCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRhOiBbXVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiAkc2NvcGUuY2hhcnQ7XG5cdFx0fVxuXHRcdHZhciBidWlsZFRyZWUgPSBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0dmFyIGNoaWxkcmVuID0gW107XG5cdFx0XHRhbmd1bGFyLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdFx0dmFyIGNoaWxkID0ge1xuXHRcdFx0XHRcdCduYW1lJzogaXRlbS50aXRsZSxcblx0XHRcdFx0XHQnc2l6ZSc6IGl0ZW0uc2l6ZSxcblx0XHRcdFx0XHQnY29sb3InOiBpdGVtLmNvbG9yLFxuXHRcdFx0XHRcdCdjaGlsZHJlbic6IGJ1aWxkVHJlZShpdGVtLmNoaWxkcmVuKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZihpdGVtLmNvbG9yKXtcblx0XHRcdFx0XHRjaGlsZC5jb2xvciA9IGl0ZW0uY29sb3Jcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihpdGVtLnNpemUpe1xuXHRcdFx0XHRcdGNoaWxkLnNpemUgPSBpdGVtLnNpemVcblx0XHRcdFx0fVxuXHRcdFx0XHRjaGlsZHJlbi5wdXNoKGNoaWxkKTtcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGNoaWxkcmVuO1xuXHRcdH07XG5cdFx0JHNjb3BlLmNhbGN1bGF0ZUdyYXBoID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGNoYXJ0RGF0YSA9IHtcblx0XHRcdFx0XCJuYW1lXCI6ICRzY29wZS5kYXRhLnRpdGxlLFxuXHRcdFx0XHRcImNvbG9yXCI6ICRzY29wZS5kYXRhLnN0eWxlLmJhc2VfY29sb3IgfHwgJyMwMDAnLFxuXHRcdFx0XHRcImNoaWxkcmVuXCI6IGJ1aWxkVHJlZSgkc2NvcGUuZGF0YS5jaGlsZHJlbiksXG5cdFx0XHRcdFwic2l6ZVwiOiAxXG5cdFx0XHR9O1xuXHRcdFx0JHNjb3BlLmNoYXJ0LmRhdGEgPSBjaGFydERhdGE7XG5cdFx0XHRyZXR1cm4gY2hhcnREYXRhO1xuXHRcdH07XG5cdFx0JHNjb3BlLiR3YXRjaCgnZGF0YScsIGZ1bmN0aW9uIChuLCBvKSB7XG5cdFx0XHRpZiAoIW4pIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0JHNjb3BlLmNhbGN1bGF0ZUdyYXBoKCk7XG5cdFx0fSlcblx0fSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJykuZGlyZWN0aXZlKCAndHJlZW1lbnUnLCBmdW5jdGlvbigpIHtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3MvZGlyZWN0aXZlcy90cmVlbWVudS90cmVlbWVudS5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdUcmVlbWVudUN0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6e30sXG5cdFx0XHRiaW5kVG9Db250cm9sbGVyOiB7XG5cdFx0XHRcdG9wdGlvbnM6Jz0nLFxuXHRcdFx0XHRpdGVtOic9PycsXG5cdFx0XHRcdHNlbGVjdGlvbjogJz0/J1xuXHRcdFx0fSxcblx0XHRcdHJlcGxhY2U6dHJ1ZSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdH1cblx0XHR9O1xuXG5cdH0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCAnYXBwLmNvbnRyb2xsZXJzJyApLmNvbnRyb2xsZXIoICdUcmVlbWVudUN0cmwnLCBmdW5jdGlvbigpe1xuXG5cdH0pXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoJ3RyZWV2aWV3JywgZnVuY3Rpb24oUmVjdXJzaW9uSGVscGVyKSB7XG5cdFx0dmFyIG9wdGlvbnMgPSB7XG5cdFx0XHRlZGl0V2VpZ2h0OiBmYWxzZSxcblx0XHRcdGRyYWc6IGZhbHNlLFxuXHRcdFx0ZWRpdDogZmFsc2UsXG5cdFx0XHRjaGlsZHJlbjogJ2NoaWxkcmVuJ1xuXHRcdH07XG5cdFx0cmV0dXJuIHtcblx0XHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvdHJlZXZpZXcvdHJlZXZpZXcuaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnVHJlZXZpZXdDdHJsJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0aXRlbXM6ICc9Jyxcblx0XHRcdFx0aXRlbTogJz0/Jyxcblx0XHRcdFx0c2VsZWN0aW9uOiAnPT8nLFxuXHRcdFx0XHRvcHRpb25zOiAnPT8nLFxuXHRcdFx0XHRhY3RpdmU6ICc9PycsXG5cdFx0XHRcdGNsaWNrOiAnJidcblx0XHRcdH0sXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0Y29tcGlsZTogZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4gUmVjdXJzaW9uSGVscGVyLmNvbXBpbGUoZWxlbWVudCwgZnVuY3Rpb24oc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMsIGNvbnRyb2xsZXIsIHRyYW5zY2x1ZGVGbikge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKG9wdGlvbnMpO1xuXHRcdFx0XHRcdGFuZ3VsYXIuZXh0ZW5kKG9wdGlvbnMsIHNjb3BlLnZtLm9wdGlvbnMpXG5cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdUcmVldmlld0N0cmwnLCBmdW5jdGlvbigkZmlsdGVyKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLnNlbGVjdGVkSXRlbSA9IHNlbGVjdGVkSXRlbTtcblx0XHR2bS5jaGlsZFNlbGVjdGVkID0gY2hpbGRTZWxlY3RlZDtcblx0XHR2bS50b2dnbGVTZWxlY3Rpb24gPSB0b2dnbGVTZWxlY3Rpb247XG5cdFx0dm0ub25EcmFnT3ZlciA9IG9uRHJhZ092ZXI7XG5cdFx0dm0ub25Ecm9wQ29tcGxldGUgPSBvbkRyb3BDb21wbGV0ZTtcblx0XHR2bS5vbk1vdmVkQ29tcGxldGUgPSBvbk1vdmVkQ29tcGxldGU7XG5cdFx0dm0uYWRkQ2hpbGRyZW4gPSBhZGRDaGlsZHJlbjtcblx0XHRjb25zb2xlLmxvZyh2bSk7XG5cdFx0YWN0aXZhdGUoKTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0aWYgKHR5cGVvZiB2bS5vcHRpb25zID09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0dm0ub3B0aW9ucyA9IHtcblx0XHRcdFx0XHRlZGl0V2VpZ2h0OiBmYWxzZSxcblx0XHRcdFx0XHRkcmFnOiBmYWxzZSxcblx0XHRcdFx0XHRlZGl0OiBmYWxzZSxcblx0XHRcdFx0XHRjaGlsZHJlbjogJ2NoaWxkcmVuJ1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAodHlwZW9mIHZtLm9wdGlvbnMuY2hpbGRyZW4gPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHR2bS5vcHRpb25zLmNoaWxkcmVuID0gXCJjaGlsZHJlblwiO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiB2bS5zZWxlY3Rpb24gPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHR2bS5zZWxlY3Rpb24gPSBbXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50LCBpbmRleCwgZXh0ZXJuYWwsIHR5cGUpIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIG9uRHJvcENvbXBsZXRlKGV2ZW50LCBpbmRleCwgaXRlbSwgZXh0ZXJuYWwpIHtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5pdGVtcywgZnVuY3Rpb24oZW50cnksIGtleSkge1xuXHRcdFx0XHRpZiAoZW50cnkuaWQgPT0gMCkge1xuXHRcdFx0XHRcdHZtLml0ZW1zLnNwbGljZShrZXksIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb25Nb3ZlZENvbXBsZXRlKGluZGV4LCBkYXRhLCBldnQpIHtcblx0XHRcdGlmICh2bS5vcHRpb25zLmFsbG93TW92ZSkge1xuXHRcdFx0XHRyZXR1cm4gdm0uaXRlbXMuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0b2dnbGVTZWxlY3Rpb24oaXRlbSkge1xuXHRcdFx0dmFyIGluZGV4ID0gLTE7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0aW9uLCBmdW5jdGlvbihzZWxlY3RlZCwgaSkge1xuXHRcdFx0XHRpZiAoc2VsZWN0ZWQuaWQgPT0gaXRlbS5pZCkge1xuXHRcdFx0XHRcdGluZGV4ID0gaTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0XHR2bS5zZWxlY3Rpb24uc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLnNlbGVjdGlvbi5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiB2bS5vcHRpb25zLnNlbGVjdGlvbkNoYW5nZWQgPT0gJ2Z1bmN0aW9uJylcblx0XHRcdFx0dm0ub3B0aW9ucy5zZWxlY3Rpb25DaGFuZ2VkKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWRkQ2hpbGRyZW4oaXRlbSkge1xuXG5cdFx0XHRpdGVtW3ZtLm9wdGlvbnMuY2hpbGRyZW5dID0gW107XG5cdFx0XHRpdGVtLmV4cGFuZGVkID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZWxlY3RlZEl0ZW0oaXRlbSkge1xuXHRcdFx0dmFyIGZvdW5kID0gZmFsc2U7XG5cdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc2VsZWN0aW9uLCBmdW5jdGlvbihzZWxlY3RlZCkge1xuXHRcdFx0XHRpZiAoc2VsZWN0ZWQuaWQgPT0gaXRlbS5pZCkge1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZm91bmQ7XG5cdFx0XHQvKlx0aWYodm0uc2VsZWN0aW9uLmluZGV4T2YoYW5ndWxhci5jb3B5KGl0ZW0pKSA+IC0xKXtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7Ki9cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjaGlsZFNlbGVjdGVkKGl0ZW0pIHtcblx0XHRcdHZhciBmb3VuZCA9IGZhbHNlO1xuXHRcdFx0YW5ndWxhci5mb3JFYWNoKGl0ZW0uY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0XHRcdGlmICh2bS5zZWxlY3Rpb24uaW5kZXhPZihjaGlsZCkgPiAtMSkge1xuXHRcdFx0XHRcdGZvdW5kID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWZvdW5kKSB7XG5cdFx0XHRcdFx0Zm91bmQgPSBjaGlsZFNlbGVjdGVkKGNoaWxkKTtcblxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIGZvdW5kO1xuXHRcdH1cblxuXHRcdC8qZnVuY3Rpb24gdG9nZ2xlSXRlbShpdGVtKSB7XG5cdFx0XHRpZiAodHlwZW9mIHZtLml0ZW1bdm0ub3B0aW9ucy50eXBlXSA9PT0gXCJ1bmRlZmluZWRcIikgdm0uaXRlbVt2bS5vcHRpb25zLnR5cGVdID0gW107XG5cdFx0XHR2YXIgZm91bmQgPSBmYWxzZSxcblx0XHRcdFx0aW5kZXggPSAtMTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5pdGVtW3ZtLm9wdGlvbnMudHlwZV0sIGZ1bmN0aW9uKGVudHJ5LCBpKSB7XG5cdFx0XHRcdGlmIChlbnRyeS5pZCA9PSBpdGVtLmlkKSB7XG5cdFx0XHRcdFx0Zm91bmQgPSB0cnVlO1xuXHRcdFx0XHRcdGluZGV4ID0gaTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdGluZGV4ID09PSAtMSA/IHZtLml0ZW1bdm0ub3B0aW9ucy50eXBlXS5wdXNoKGl0ZW0pIDogdm0uaXRlbVt2bS5vcHRpb25zLnR5cGVdLnNwbGljZShpbmRleCwgMSk7XG5cdFx0fSovXG5cdH0pO1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKS5kaXJlY3RpdmUoICd0cmlhbmdsZUdyYXBoJywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvdHJpYW5nbGUtZ3JhcGgvdHJpYW5nbGUtZ3JhcGguaHRtbCcsXG5cdFx0XHRjb250cm9sbGVyOiAnVHJpYW5nbGVHcmFwaEN0cmwnLFxuXHRcdFx0Y29udHJvbGxlckFzOiAndm0nLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjoge1xuXHRcdFx0XHRkYXRhOiAnPScsXG5cdFx0XHRcdG5nTW9kZWw6ICc9J1xuXHRcdFx0fSxcblx0XHRcdGxpbms6IGZ1bmN0aW9uKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKXtcblx0XHRcdFx0Ly9cblx0XHRcdFx0dmFyIHdpZHRoID0gZWxlbWVudC5wYXJlbnQoKVswXS5jbGllbnRXaWR0aCAtIDQ4O1xuXHRcdFx0XHR2YXIgaGVpZ2h0ID0gd2lkdGggLyAzO1xuXHRcdFx0XHR2YXIgeFNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcblx0XHRcdCAuZG9tYWluKFswLCAxMDBdKVxuXHRcdFx0IC5yYW5nZShbMCwgd2lkdGhdKTtcblxuXHQgdmFyIHlTY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG5cdFx0XHQgLmRvbWFpbihbMCwgc2NvcGUudm0uZGF0YS5sZW5ndGhdKVxuXHRcdFx0IC5yYW5nZShbaGVpZ2h0LCAwXSk7XG5cdFx0XHQgdmFyIHN2ZyA9IGQzLnNlbGVjdChlbGVtZW50WzBdKS5hcHBlbmQoJ3N2ZycpXG5cdFx0IFx0XHQuYXR0cignd2lkdGgnLHdpZHRoKVxuXHRcdCBcdFx0LmF0dHIoJ2hlaWdodCcsIGhlaWdodCk7XG5cblx0XHRcdFx0c3ZnLnNlbGVjdCgnLnRyaWFuZ2xlLWdyaWQnKVxuICAgICAgICAgLnNlbGVjdEFsbCgnZGl2JylcbiAgICAgICAgIC5kYXRhKHNjb3BlLnZtLmRhdGEpXG4gICAgICAgLmVudGVyKCkuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3RyaWFuZ2xlLWJveCcpO1xuXG4gICAgLy8gIHN2Zy5zZWxlY3RBbGwoJy50cmlhbmdsZS1ib3gnKVxuICAgIC8vICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAvLyAgICAgIC5hdHRyKCd3aWR0aCcsIDEwMClcbiAgICAvLyAgICAgIC5hdHRyKCdoZWlnaHQnLCAxMDApXG4gICAgLy8gICAgLmFwcGVuZCgnZycpXG4gICAgLy8gICAgICAuYXR0cignY2xhc3MnLCAndHJpYW5nbGVzJylcblx0XHQgLy9cbiAgICAvLyAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgIC8vICAgICAgLmF0dHIoJ2QnLCAoKSA9PiAnTSAnICsgeFNjYWxlKDUpICsgJyAnICsgeVNjYWxlKDApICsgJyBMICcgKyB4U2NhbGUoODgpICsgJyAnICsgeVNjYWxlKDUpICsgJyBMICcgKyB4U2NhbGUoODgpICsgJyAnICsgeVNjYWxlKDE4ODE1KSArICcgWicpXG4gICAgLy8gICAgICAuc3R5bGUoJ2ZpbGwnLCAncmdiKDIyMiwyMjIsMjIyKScpO1xuXHRcdCAvL1xuICAgIC8vICBzdmcuc2VsZWN0QWxsKCcudHJpYW5nbGVzJylcblx0XHQgLy9cbiAgICAvLyAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgIC8vICAgICAgLmF0dHIoJ2QnLCAoZCkgPT4gJ00gJyArIHhTY2FsZSg1KSArICcgJyArIHlTY2FsZSgwKSArICcgTCAnICsgeFNjYWxlKDg4KSArICcgJyArIHlTY2FsZSg1KSArICcgTCAnICsgeFNjYWxlKDg4KSArICcgJyArIHlTY2FsZShkLnZhbHVlKSArICcgWicpXG4gICAgLy8gICAgICAuc3R5bGUoJ2ZpbGwnLCAncmdiYSgxODEsMjI3LDE0NywwLjUpJyk7XG5cblxuXHRcdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZSggJ2FwcC5jb250cm9sbGVycycgKS5jb250cm9sbGVyKCAnVHJpYW5nbGVHcmFwaEN0cmwnLCBmdW5jdGlvbigpe1xuXHRcdC8vXG4gICAgfSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpLmRpcmVjdGl2ZSgnd2VpZ2h0JywgZnVuY3Rpb24oKSB7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0cmVzdHJpY3Q6ICdFQScsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2RpcmVjdGl2ZXMvd2VpZ2h0L3dlaWdodC5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6ICdXZWlnaHRDdHJsJyxcblx0XHRcdGNvbnRyb2xsZXJBczogJ3ZtJyxcblx0XHRcdHNjb3BlOiB7fSxcblx0XHRcdGJpbmRUb0NvbnRyb2xsZXI6IHtcblx0XHRcdFx0aXRlbXM6ICc9Jyxcblx0XHRcdFx0aXRlbTogJz0nLFxuXHRcdFx0XHRvcHRpb25zOiAnPSdcblx0XHRcdH0sXG5cdFx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdFx0bGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdFx0XHRcdC8vXG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY29udHJvbGxlcnMnKS5jb250cm9sbGVyKCdXZWlnaHRDdHJsJywgZnVuY3Rpb24oJHNjb3BlKSB7XG5cdFx0Ly9cblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLnJhaXNlV2VpZ2h0ID0gcmFpc2VXZWlnaHQ7XG5cdFx0dm0ubG93ZXJXZWlnaHQgPSBsb3dlcldlaWdodDtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcblx0XHRcdGNhbGNTdGFydCgpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNhbGNTdGFydCgpIHtcblxuXHRcdFx0aWYgKHR5cGVvZiB2bS5pdGVtLndlaWdodCA9PSBcInVuZGVmaW5lZFwiIHx8ICF2bS5pdGVtLndlaWdodCkge1xuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uaXRlbXMsIGZ1bmN0aW9uKGVudHJ5KSB7XG5cdFx0XHRcdFx0ZW50cnkud2VpZ2h0ID0gMTAwIC8gdm0uaXRlbXMubGVuZ3RoO1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGNhbGNWYWx1ZXMoKSB7XG5cdFx0XHR2YXIgZml4ZWQgPSB2bS5pdGVtLndlaWdodDtcblx0XHRcdHZhciByZXN0ID0gKDEwMCAtIGZpeGVkKSAvICh2bS5pdGVtcy5sZW5ndGggLSAxKTtcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5pdGVtcywgZnVuY3Rpb24oZW50cnkpIHtcblx0XHRcdFx0aWYgKGVudHJ5ICE9PSB2bS5pdGVtKSB7XG5cdFx0XHRcdFx0ZW50cnkud2VpZ2h0ID0gcmVzdDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzdDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByYWlzZVdlaWdodCgpIHtcblx0XHRcdGlmKHZtLml0ZW0ud2VpZ2h0ID49IDk1KSByZXR1cm4gZmFsc2U7XG5cdFx0XHRpZiAodm0uaXRlbS53ZWlnaHQgJSA1ICE9IDApIHtcblx0XHRcdFx0dm0uaXRlbS53ZWlnaHQgPSA1ICogTWF0aC5yb3VuZCh2bS5pdGVtLndlaWdodCAvIDUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uaXRlbS53ZWlnaHQgKz0gNTtcblx0XHRcdH1cblx0XHRcdGNhbGNWYWx1ZXMoKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBsb3dlcldlaWdodCgpIHtcblx0XHRcdGlmKHZtLml0ZW0ud2VpZ2h0IDw9IDUpIHJldHVybiBmYWxzZTtcblx0XHRcdGlmICh2bS5pdGVtLndlaWdodCAlIDUgIT0gMCkge1xuXHRcdFx0XHR2bS5pdGVtLndlaWdodCA9IDUgKiBNYXRoLnJvdW5kKHZtLml0ZW0ud2VpZ2h0IC8gNSkgLSA1O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uaXRlbS53ZWlnaHQgLT0gNTtcblx0XHRcdH1cblx0XHRcdGNhbGNWYWx1ZXMoKTtcblx0XHR9XG5cblxuXHR9KTtcblxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
